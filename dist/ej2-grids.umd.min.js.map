{"version":3,"file":"ej2-grids.umd.min.js","sources":["../src/grid/base/util.js","../src/grid/services/aria-service.js","../src/grid/actions/aggregate.js","../src/grid/services/value-formatter.js","../src/grid/models/column.js","../src/grid/base/constant.js","../src/grid/base/enum.js","../src/grid/actions/checkbox-filter.js","../src/grid/actions/data.js","../src/grid/models/row.js","../src/grid/models/cell.js","../src/grid/renderer/cell-merge-renderer.js","../src/grid/renderer/row-renderer.js","../src/grid/services/row-model-generator.js","../src/grid/services/summary-model-generator.js","../src/grid/services/group-model-generator.js","../src/grid/renderer/content-renderer.js","../src/grid/renderer/header-renderer.js","../src/grid/renderer/cell-renderer.js","../src/grid/renderer/header-cell-renderer.js","../src/grid/renderer/stacked-cell-renderer.js","../src/grid/renderer/indent-cell-renderer.js","../src/grid/renderer/caption-cell-renderer.js","../src/grid/renderer/expand-cell-renderer.js","../src/grid/renderer/header-indent-renderer.js","../src/grid/renderer/detail-header-indent-renderer.js","../src/grid/renderer/detail-expand-cell-renderer.js","../src/grid/renderer/render.js","../src/grid/services/cell-render-factory.js","../src/grid/services/service-locator.js","../src/grid/services/renderer-factory.js","../src/grid/services/width-controller.js","../src/grid/services/focus-strategy.js","../src/grid/models/page-settings.js","../src/grid/actions/selection.js","../src/grid/actions/search.js","../src/grid/actions/show-hide.js","../src/grid/actions/scroll.js","../src/grid/actions/print.js","../src/grid/models/aggregate.js","../src/grid/actions/clipboard.js","../src/grid/base/grid.js","../src/grid/actions/sort.js","../src/pager/numeric-container.js","../src/pager/pager-message.js","../src/pager/pager.js","../src/pager/pager-dropdown.js","../src/pager/external-message.js","../src/grid/actions/page.js","../src/grid/renderer/filter-cell-renderer.js","../src/grid/renderer/filter-menu-operator.js","../src/grid/renderer/string-filter-ui.js","../src/grid/renderer/number-filter-ui.js","../src/grid/renderer/boolean-filter-ui.js","../src/grid/renderer/date-filter-ui.js","../src/grid/renderer/filter-menu-renderer.js","../src/grid/actions/excel-filter.js","../src/grid/actions/filter.js","../src/grid/actions/resize.js","../src/grid/actions/reorder.js","../src/grid/actions/row-reorder.js","../src/grid/actions/group.js","../src/grid/actions/detail-row.js","../src/grid/actions/toolbar.js","../src/grid/renderer/footer-renderer.js","../src/grid/renderer/summary-cell-renderer.js","../src/grid/services/intersection-observer.js","../src/grid/services/virtual-row-model-generator.js","../src/grid/renderer/virtual-content-renderer.js","../src/grid/actions/virtual-scroll.js","../src/grid/renderer/inline-edit-renderer.js","../src/grid/renderer/batch-edit-renderer.js","../src/grid/renderer/dialog-edit-renderer.js","../src/grid/renderer/edit-renderer.js","../src/grid/renderer/boolean-edit-cell.js","../src/grid/renderer/dropdown-edit-cell.js","../src/grid/renderer/numeric-edit-cell.js","../src/grid/renderer/default-edit-cell.js","../src/grid/actions/normal-edit.js","../src/grid/actions/inline-edit.js","../src/grid/actions/batch-edit.js","../src/grid/actions/dialog-edit.js","../src/grid/renderer/datepicker-edit-cell.js","../src/grid/actions/edit.js","../src/grid/actions/column-chooser.js","../src/grid/actions/export-helper.js","../src/grid/actions/excel-export.js","../src/grid/actions/pdf-export.js","../src/grid/renderer/command-column-renderer.js","../src/grid/actions/command-column.js","../src/grid/actions/context-menu.js","../src/grid/services/freeze-row-model-generator.js","../src/grid/renderer/freeze-renderer.js","../src/grid/actions/freeze.js","../src/grid/actions/column-menu.js","../src/grid/actions/foreign-key.js"],"sourcesContent":["import { ChildProperty, compile as baseTemplateComplier, setValue } from '@syncfusion/ej2-base';\nimport { extend as baseExtend, isNullOrUndefined, getValue, classList } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, addClass, attributes, remove, createElement, removeClass } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Column } from '../models/column';\nimport { calculateRelativeBasedPosition, calculatePosition } from '@syncfusion/ej2-popups';\n//https://typescript.codeplex.com/discussions/401501\n/**\n * Function to check whether target object implement specific interface\n * @param  {Object} target\n * @param  {string} checkFor\n * @returns no\n * @hidden\n */\nexport function doesImplementInterface(target, checkFor) {\n    /* tslint:disable:no-any */\n    return target.prototype && checkFor in target.prototype;\n}\n/**\n * Function to get value from provided data\n * @param  {string} field\n * @param  {Object} data\n * @param  {IColumn} column\n * @hidden\n */\nexport function valueAccessor(field, data, column) {\n    field = isNullOrUndefined(field) ? '' : field;\n    return DataUtil.getObject(field, data);\n}\n/**\n * The function used to update Dom using requestAnimationFrame.\n * @param  {Function} fn - Function that contains the actual action\n * @return {Promise<T>}\n * @hidden\n */\nexport function getUpdateUsingRaf(updateFunction, callBack) {\n    requestAnimationFrame(function () {\n        try {\n            callBack(null, updateFunction());\n        }\n        catch (e) {\n            callBack(e);\n        }\n    });\n}\n/**\n * @hidden\n */\nexport function iterateArrayOrObject(collection, predicate) {\n    var result = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        var pred = predicate(collection[i], i);\n        if (!isNullOrUndefined(pred)) {\n            result.push(pred);\n        }\n    }\n    return result;\n}\n/** @hidden */\nexport function iterateExtend(array) {\n    var obj = [];\n    for (var i = 0; i < array.length; i++) {\n        obj.push(baseExtend({}, getActualProperties(array[i]), {}, true));\n    }\n    return obj;\n}\n/** @hidden */\nexport function templateCompiler(template) {\n    if (template) {\n        var e = void 0;\n        try {\n            if (document.querySelectorAll(template).length) {\n                return baseTemplateComplier(document.querySelector(template).innerHTML.trim());\n            }\n        }\n        catch (e) {\n            return baseTemplateComplier(template);\n        }\n    }\n    return undefined;\n}\n/** @hidden */\nexport function setStyleAndAttributes(node, customAttributes) {\n    var copyAttr = {};\n    var literals = ['style', 'class'];\n    //Dont touch the original object - make a copy\n    baseExtend(copyAttr, customAttributes, {});\n    if ('style' in copyAttr) {\n        setStyleAttribute(node, copyAttr[literals[0]]);\n        delete copyAttr[literals[0]];\n    }\n    if ('class' in copyAttr) {\n        addClass([node], copyAttr[literals[1]]);\n        delete copyAttr[literals[1]];\n    }\n    attributes(node, copyAttr);\n}\n/** @hidden */\nexport function extend(copied, first, second, exclude) {\n    var moved = baseExtend(copied, first, second);\n    Object.keys(moved).forEach(function (value, index) {\n        if (exclude.indexOf(value) !== -1) {\n            delete moved[value];\n        }\n    });\n    return moved;\n}\n/** @hidden */\nexport function prepareColumns(columns, autoWidth) {\n    for (var c = 0, len = columns.length; c < len; c++) {\n        var column = void 0;\n        if (typeof columns[c] === 'string') {\n            column = new Column({ field: columns[c] });\n        }\n        else if (!(columns[c] instanceof Column)) {\n            if (!columns[c].columns) {\n                column = new Column(columns[c]);\n            }\n            else {\n                column = new Column(columns[c]);\n                columns[c].columns = prepareColumns(columns[c].columns);\n            }\n        }\n        else {\n            column = columns[c];\n        }\n        column.headerText = isNullOrUndefined(column.headerText) ? column.foreignKeyValue || column.field || '' : column.headerText;\n        column.foreignKeyField = column.foreignKeyField || column.field;\n        column.valueAccessor = (typeof column.valueAccessor === 'string' ? getValue(column.valueAccessor, window)\n            : column.valueAccessor) || valueAccessor;\n        column.width = autoWidth && isNullOrUndefined(column.width) ? 200 : column.width;\n        if (isNullOrUndefined(column.visible)) {\n            column.visible = true;\n        }\n        columns[c] = column;\n    }\n    return columns;\n}\n/** @hidden */\nexport function setCssInGridPopUp(popUp, e, className) {\n    var popUpSpan = popUp.querySelector('span');\n    var position = popUp.parentElement.getBoundingClientRect();\n    var targetPosition = e.target.getBoundingClientRect();\n    var isBottomTail;\n    popUpSpan.className = className;\n    popUp.style.display = '';\n    isBottomTail = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY) > popUp.offsetHeight + 10;\n    popUp.style.top = targetPosition.top - position.top +\n        (isBottomTail ? -(popUp.offsetHeight + 10) : popUp.offsetHeight + 10) + 'px'; //10px for tail element\n    popUp.style.left = getPopupLeftPosition(popUp, e, targetPosition, position.left) + 'px';\n    if (isBottomTail) {\n        popUp.querySelector('.e-downtail').style.display = '';\n        popUp.querySelector('.e-uptail').style.display = 'none';\n    }\n    else {\n        popUp.querySelector('.e-downtail').style.display = 'none';\n        popUp.querySelector('.e-uptail').style.display = '';\n    }\n}\n/** @hidden */\nfunction getPopupLeftPosition(popup, e, targetPosition, left) {\n    var width = popup.offsetWidth / 2;\n    var x = getPosition(e).x;\n    if (x - targetPosition.left < width) {\n        return targetPosition.left - left;\n    }\n    else if (targetPosition.right - x < width) {\n        return targetPosition.right - left - width * 2;\n    }\n    else {\n        return x - left - width;\n    }\n}\n/** @hidden */\nexport function getActualProperties(obj) {\n    if (obj instanceof ChildProperty) {\n        return getValue('properties', obj);\n    }\n    else {\n        return obj;\n    }\n}\n/** @hidden */\nexport function parentsUntil(elem, selector, isID) {\n    var parent = elem;\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            break;\n        }\n        parent = parent.parentElement;\n    }\n    return parent;\n}\n/** @hidden */\nexport function getElementIndex(element, elements) {\n    var index = -1;\n    for (var i = 0, len = elements.length; i < len; i++) {\n        if (elements[i].isEqualNode(element)) {\n            index = i;\n            break;\n        }\n    }\n    return index;\n}\n/** @hidden */\nexport function inArray(value, collection) {\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i] === value) {\n            return i;\n        }\n    }\n    return -1;\n}\n/** @hidden */\nexport function getActualPropFromColl(collection) {\n    var coll = [];\n    for (var i = 0, len = collection.length; i < len; i++) {\n        if (collection[i].hasOwnProperty('properties')) {\n            coll.push(collection[i].properties);\n        }\n        else {\n            coll.push(collection[i]);\n        }\n    }\n    return coll;\n}\n/** @hidden */\nexport function removeElement(target, selector) {\n    var elements = [].slice.call(target.querySelectorAll(selector));\n    for (var i = 0; i < elements.length; i++) {\n        remove(elements[i]);\n    }\n}\n/** @hidden */\nexport function getPosition(e) {\n    var position = {};\n    position.x = (isNullOrUndefined(e.clientX) ? e.changedTouches[0].clientX :\n        e.clientX);\n    position.y = (isNullOrUndefined(e.clientY) ? e.changedTouches[0].clientY :\n        e.clientY);\n    return position;\n}\nvar uid = 0;\n/** @hidden */\nexport function getUid(prefix) {\n    return prefix + uid++;\n}\n/** @hidden */\nexport function appendChildren(elem, children) {\n    for (var i = 0, len = children.length; i < len; i++) {\n        if (len === children.length) {\n            elem.appendChild(children[i]);\n        }\n        else {\n            elem.appendChild(children[0]);\n        }\n    }\n    return elem;\n}\n/** @hidden */\nexport function parents(elem, selector, isID) {\n    var parent = elem;\n    var parents = [];\n    while (parent) {\n        if (isID ? parent.id === selector : parent.classList.contains(selector)) {\n            parents.push(parent);\n        }\n        parent = parent.parentElement;\n    }\n    return parents;\n}\n/** @hidden */\nexport function calculateAggregate(type, data, column, context) {\n    if (type === 'Custom') {\n        var temp = column.customAggregate;\n        if (typeof temp === 'string') {\n            temp = getValue(temp, window);\n        }\n        return temp ? temp.call(context, data, column) : '';\n    }\n    return (column.field in data || data instanceof Array) ? DataUtil.aggregates[type.toLowerCase()](data, column.field) : null;\n}\n/** @hidden */\nvar scrollWidth = null;\n/** @hidden */\nexport function getScrollBarWidth() {\n    if (scrollWidth !== null) {\n        return scrollWidth;\n    }\n    var divNode = document.createElement('div');\n    var value = 0;\n    divNode.style.cssText = 'width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;';\n    document.body.appendChild(divNode);\n    value = (divNode.offsetWidth - divNode.clientWidth) | 0;\n    document.body.removeChild(divNode);\n    return scrollWidth = value;\n}\n/** @hidden */\nvar rowHeight;\n/** @hidden */\nexport function getRowHeight(element) {\n    if (rowHeight !== undefined) {\n        return rowHeight;\n    }\n    var table = createElement('table', { className: 'e-table', styles: 'visibility: hidden' });\n    table.innerHTML = '<tr><td class=\"e-rowcell\">A<td></tr>';\n    element.appendChild(table);\n    var rect = table.querySelector('td').getBoundingClientRect();\n    element.removeChild(table);\n    rowHeight = Math.ceil(rect.height);\n    return rowHeight;\n}\n/** @hidden */\nexport function isComplexField(field) {\n    return field.split('.').length > 1;\n}\n/** @hidden */\nexport function getComplexFieldID(field) {\n    var length = field.split('.').length;\n    var splits = field.split('.');\n    var fieldName = '';\n    for (var i = 0; i < length; i++) {\n        fieldName = fieldName + splits[i];\n    }\n    return fieldName;\n}\n/** @hidden */\nexport function getComplexValue(rowData, field) {\n    var length = field.split('.').length;\n    var splits = field.split('.');\n    var complexData = rowData[splits[0]];\n    var complexValue = complexData[splits[1]];\n    for (var i = 2; i < length; i++) {\n        complexValue = complexValue[splits[i]];\n    }\n    return complexValue;\n}\n/** @hidden */\nexport function isEditable(col, type, elem) {\n    var row = parentsUntil(elem, 'e-row');\n    var isOldRow = !row ? true : row && !row.classList.contains('e-insertedrow');\n    if (type === 'beginEdit' && isOldRow) {\n        if (col.isIdentity || col.isPrimaryKey || !col.allowEditing) {\n            return false;\n        }\n        return true;\n    }\n    else if (type === 'add' && col.isIdentity && col.isPrimaryKey) {\n        return false;\n    }\n    else {\n        if (isOldRow && !col.allowEditing && !col.isIdentity && !col.isPrimaryKey) {\n            return false;\n        }\n        return true;\n    }\n}\n/** @hidden */\nexport function isActionPrevent(inst) {\n    var dlg = inst.element.querySelector('#' + inst.element.id + 'EditConfirm');\n    return inst.editSettings.mode === 'Batch' &&\n        (inst.element.querySelectorAll('.e-updatedtd').length) && inst.editSettings.showConfirmDialog &&\n        (dlg ? dlg.classList.contains('e-popup-close') : true);\n}\n/** @hidden */\nexport function wrap(elem, action) {\n    var clName = 'e-wrap';\n    elem = elem instanceof Array ? elem : [elem];\n    for (var i = 0; i < elem.length; i++) {\n        action ? elem[i].classList.add(clName) : elem[i].classList.remove(clName);\n    }\n}\nexport function changeButtonType(target) {\n    var elements = [].slice.call(target.querySelectorAll('button'));\n    for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n        var button = elements_1[_i];\n        attributes(button, { type: 'button' });\n    }\n}\n/** @hidden */\nexport function setFormatter(serviceLocator, column) {\n    var fmtr = serviceLocator.getService('valueFormatter');\n    switch (column.type) {\n        case 'date':\n            column.setFormatter(fmtr.getFormatFunction({ type: 'date', skeleton: column.format }));\n            column.setParser(fmtr.getParserFunction({ type: 'date', skeleton: column.format }));\n            break;\n        case 'datetime':\n            column.setFormatter(fmtr.getFormatFunction({ type: 'dateTime', skeleton: column.format }));\n            column.setParser(fmtr.getParserFunction({ type: 'dateTime', skeleton: column.format }));\n            break;\n        case 'number':\n            column.setFormatter(fmtr.getFormatFunction({ format: column.format }));\n            column.setParser(fmtr.getParserFunction({ format: column.format }));\n            break;\n    }\n}\n/** @hidden */\nexport function addRemoveActiveClasses(cells, add) {\n    var args = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        args[_i - 2] = arguments[_i];\n    }\n    for (var i = 0, len = cells.length; i < len; i++) {\n        if (add) {\n            classList(cells[i], args.slice(), []);\n            cells[i].setAttribute('aria-selected', 'true');\n        }\n        else {\n            classList(cells[i], [], args.slice());\n            cells[i].removeAttribute('aria-selected');\n        }\n    }\n}\n/** @hidden */\nexport function distinctStringValues(result) {\n    var temp = {};\n    var res = [];\n    for (var i = 0; i < result.length; i++) {\n        if (!(result[i] in temp)) {\n            res.push(result[i].toString());\n            temp[result[i]] = 1;\n        }\n    }\n    return res;\n}\n/** @hidden */\nexport function getFilterMenuPostion(target, dialogObj, grid) {\n    var elementVisible = dialogObj.element.style.display;\n    dialogObj.element.style.display = 'block';\n    var dlgWidth = dialogObj.width;\n    var newpos;\n    if (!grid.enableRtl) {\n        newpos = calculateRelativeBasedPosition(target, dialogObj.element);\n        dialogObj.element.style.display = elementVisible;\n        dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 5 + 'px';\n        var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n        if (leftPos < 1) {\n            dialogObj.element.style.left = (dlgWidth + leftPos) - 16 + 'px'; // right calculation\n        }\n        else {\n            dialogObj.element.style.left = leftPos + -4 + 'px';\n        }\n    }\n    else {\n        newpos = calculatePosition(target, 'left', 'bottom');\n        dialogObj.element.style.top = (newpos.top + target.getBoundingClientRect().height) - 35 + 'px';\n        dialogObj.element.style.display = elementVisible;\n        var leftPos = ((newpos.left - dlgWidth) + target.clientWidth);\n        if (leftPos < 1) {\n            dialogObj.element.style.left = (dlgWidth + leftPos) + -16 + 'px';\n        }\n        else {\n            dialogObj.element.style.left = leftPos - 16 + 'px';\n        }\n    }\n}\n/** @hidden */\nexport function getZIndexCalcualtion(args, dialogObj) {\n    args.popup.element.style.zIndex = (dialogObj.zIndex + 1).toString();\n}\n/** @hidden */\nexport function toogleCheckbox(elem) {\n    var span = elem.querySelector('.e-frame');\n    span.classList.contains('e-check') ? classList(span, ['e-uncheck'], ['e-check']) :\n        classList(span, ['e-check'], ['e-uncheck']);\n}\n/** @hidden */\nexport function createCboxWithWrap(uid, elem, className) {\n    var div = createElement('div', { className: className });\n    div.appendChild(elem);\n    div.setAttribute('uid', uid);\n    return div;\n}\n/** @hidden */\nexport function removeAddCboxClasses(elem, checked) {\n    removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n    if (checked) {\n        elem.classList.add('e-check');\n    }\n    else {\n        elem.classList.add('e-uncheck');\n    }\n}\n/**\n * Refresh the Row model's foreign data.\n * @param row - Grid Row model object.\n * @param columns - Foreign columns array.\n * @param data - Updated Row data.\n * @hidden\n */\nexport function refreshForeignData(row, columns, data) {\n    columns.forEach(function (col) {\n        setValue(col.field, getForeignData(col, data), row.foreignKeyData);\n    });\n    row.cells.forEach(function (cell) {\n        if (cell.isForeignKey) {\n            setValue('foreignKeyData', getValue(cell.column.field, row.foreignKeyData), cell);\n        }\n    });\n}\n/**\n * Get the foreign data for the corresponding cell value.\n * @param column - Foreign Key column\n * @param data - Row data.\n * @param lValue - cell value.\n * @param foreignData - foreign data source.\n * @hidden\n */\nexport function getForeignData(column, data, lValue, foreignKeyData) {\n    var fField = column.foreignKeyField;\n    var key = (lValue || valueAccessor(column.field, data, column));\n    key = isNullOrUndefined(key) ? '' : key;\n    var query = new Query();\n    var fdata = foreignKeyData || (column.dataSource instanceof DataManager) && column.dataSource.dataSource.json.length ?\n        column.dataSource.dataSource.json : column.columnData;\n    if (key.getDay) {\n        query.where(getDatePredicate({ field: fField, operator: 'equal', value: key, matchCase: false }));\n    }\n    else {\n        query.where(fField, '==', key, false);\n    }\n    return new DataManager(fdata).executeLocal(query);\n}\n/**\n * To use to get the column's object by the foreign key value.\n * @param foreignKeyValue - Defines ForeignKeyValue.\n * @param columns - Array of column object.\n * @hidden\n */\nexport function getColumnByForeignKeyValue(foreignKeyValue, columns) {\n    var column;\n    return columns.some(function (col) {\n        column = col;\n        return col.foreignKeyValue === foreignKeyValue;\n    }) && column;\n}\n/**\n * @hidden\n * @param filterObject - Defines predicate model object\n */\nexport function getDatePredicate(filterObject, type) {\n    var datePredicate;\n    var prevDate;\n    var nextDate;\n    var prevObj = baseExtend({}, getActualProperties(filterObject));\n    var nextObj = baseExtend({}, getActualProperties(filterObject));\n    var value = new Date(filterObject.value);\n    if (filterObject.operator === 'equal' || filterObject.operator === 'notequal') {\n        if (type === 'datetime') {\n            prevDate = new Date(value.setSeconds(value.getSeconds() - 1));\n            nextDate = new Date(value.setSeconds(value.getSeconds() + 2));\n            filterObject.value = new Date(value.setSeconds(nextDate.getSeconds() - 1));\n        }\n        else {\n            prevDate = new Date(value.setHours(0) - 1);\n            nextDate = new Date(value.setHours(24));\n        }\n        prevObj.value = prevDate;\n        nextObj.value = nextDate;\n        if (filterObject.operator === 'equal') {\n            prevObj.operator = 'greaterthan';\n            nextObj.operator = 'lessthan';\n        }\n        else if (filterObject.operator === 'notequal') {\n            prevObj.operator = 'lessthanorequal';\n            nextObj.operator = 'greaterthanorequal';\n        }\n        var predicateSt = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        var predicateEnd = new Predicate(nextObj.field, nextObj.operator, nextObj.value, false);\n        datePredicate = filterObject.operator === 'equal' ? predicateSt.and(predicateEnd) : predicateSt.or(predicateEnd);\n    }\n    else {\n        if (typeof (prevObj.value) === 'string') {\n            prevObj.value = new Date(prevObj.value);\n        }\n        var predicates = new Predicate(prevObj.field, prevObj.operator, prevObj.value, false);\n        datePredicate = predicates;\n    }\n    if (filterObject.setProperties) {\n        filterObject.setProperties({ ejpredicate: datePredicate }, true);\n    }\n    else {\n        filterObject.ejpredicate = datePredicate;\n    }\n    return datePredicate;\n}\n/**\n * @hidden\n */\nexport function renderMovable(ele, frzCols) {\n    var mEle = ele.cloneNode(true);\n    for (var i = 0; i < frzCols; i++) {\n        mEle.removeChild(mEle.children[0]);\n    }\n    for (var i = frzCols, len = ele.childElementCount; i < len; i++) {\n        ele.removeChild(ele.children[ele.childElementCount - 1]);\n    }\n    return mEle;\n}\n","/**\n * AriaService\n * @hidden\n */\nvar AriaService = /** @class */ (function () {\n    function AriaService() {\n    }\n    AriaService.prototype.setOptions = function (target, options) {\n        var props = Object.keys(options);\n        props.forEach(function (name) { return setStateAndProperties(target, config[name], options[name]); });\n    };\n    AriaService.prototype.setExpand = function (target, expand) {\n        setStateAndProperties(target, config.expand, expand);\n    };\n    AriaService.prototype.setSort = function (target, direction) {\n        setStateAndProperties(target, config.sort, direction, typeof direction === 'boolean');\n    };\n    AriaService.prototype.setBusy = function (target, isBusy) {\n        setStateAndProperties(target, config.busy, isBusy);\n        setStateAndProperties(target, config.invalid, null, true);\n    };\n    AriaService.prototype.setGrabbed = function (target, isGrabbed, remove) {\n        setStateAndProperties(target, config.grabbed, isGrabbed, remove);\n    };\n    AriaService.prototype.setDropTarget = function (target, isTarget) {\n        setStateAndProperties(target, config.dropeffect, 'copy', !isTarget);\n    };\n    return AriaService;\n}());\nexport { AriaService };\n/**\n * @hidden\n */\nfunction setStateAndProperties(target, attribute, value, remove) {\n    if (remove) {\n        target.removeAttribute(attribute);\n        return;\n    }\n    if (target) {\n        target.setAttribute(attribute, value);\n    }\n}\nvar config = {\n    expand: 'aria-expanded',\n    role: 'role',\n    selected: 'aria-selected',\n    multiselectable: 'aria-multiselectable',\n    sort: 'aria-sort',\n    busy: 'aria-busy',\n    invalid: 'aria-invalid',\n    grabbed: 'aria-grabbed',\n    dropeffect: 'aria-dropeffect',\n    haspopup: 'aria-haspopup',\n    level: 'aria-level',\n    colcount: 'aria-colcount'\n};\n","import { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { uiUpdate, initialEnd, dataReady, modelChanged } from '../base/constant';\nimport { FooterRenderer } from '../renderer/footer-renderer';\nimport { SummaryCellRenderer } from '../renderer/summary-cell-renderer';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\n/**\n * Summary Action controller.\n */\nvar Aggregate = /** @class */ (function () {\n    function Aggregate(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Aggregate.prototype.getModuleName = function () {\n        return 'aggregate';\n    };\n    Aggregate.prototype.initiateRender = function () {\n        var _this = this;\n        var cellFac = this.locator.getService('cellRendererFactory');\n        var instance = new SummaryCellRenderer(this.parent, this.locator);\n        [CellType.Summary, CellType.CaptionSummary, CellType.GroupSummary].forEach(function (type) {\n            return cellFac.addCellRenderer(type, instance);\n        });\n        this.footerRenderer = new FooterRenderer(this.parent, this.locator);\n        this.footerRenderer.renderPanel();\n        this.footerRenderer.renderTable();\n        this.locator.register('footerRenderer', this.footerRenderer);\n        var fn = function () {\n            _this.prepareSummaryInfo();\n            _this.parent.off(dataReady, fn);\n        };\n        this.parent.on(dataReady, fn, this);\n        this.parent.on(dataReady, this.footerRenderer.refresh, this.footerRenderer);\n    };\n    Aggregate.prototype.prepareSummaryInfo = function () {\n        var _this = this;\n        summaryIterator(this.parent.aggregates, function (column) {\n            var dataColumn = _this.parent.getColumnByField(column.field) || {};\n            var type = dataColumn.type;\n            column.setPropertiesSilent({ format: _this.getFormatFromType(column.format, type) });\n            column.setFormatter(_this.parent.locale);\n            column.setPropertiesSilent({ columnName: column.columnName || column.field });\n        });\n    };\n    Aggregate.prototype.getFormatFromType = function (format, type) {\n        if (isNullOrUndefined(type) || typeof format !== 'string') {\n            return format;\n        }\n        var obj;\n        switch (type) {\n            case 'number':\n                obj = { format: format };\n                break;\n            case 'date':\n                obj = { type: type, skeleton: format };\n                break;\n            case 'datetime':\n                obj = { type: 'dateTime', skeleton: format };\n                break;\n        }\n        return obj;\n    };\n    Aggregate.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (isNullOrUndefined(this.footerRenderer)) {\n            this.initiateRender();\n        }\n        this.prepareSummaryInfo();\n        this.footerRenderer.refresh();\n        var cModel = new CaptionSummaryModelGenerator(this.parent);\n        var gModel = new GroupSummaryModelGenerator(this.parent);\n        if (gModel.getData().length !== 0 || !cModel.isEmpty()) {\n            this.parent.notify(modelChanged, {});\n        }\n    };\n    Aggregate.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialEnd, this.initiateRender, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n    };\n    Aggregate.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.footerRenderer.removeEventListener();\n        this.parent.off(initialEnd, this.initiateRender);\n        this.parent.off(dataReady, this.footerRenderer.refresh);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n    };\n    Aggregate.prototype.destroy = function () {\n        this.removeEventListener();\n        remove(this.parent.element.querySelector('.e-gridfooter'));\n    };\n    return Aggregate;\n}());\nexport { Aggregate };\n/**\n * @private\n */\nexport function summaryIterator(aggregates, callback) {\n    aggregates.forEach(function (row) {\n        row.columns.forEach(function (column) {\n            callback(column, row);\n        });\n    });\n}\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Internationalization, setCulture } from '@syncfusion/ej2-base';\n/**\n * ValueFormatter class to globalize the value.\n * @hidden\n */\nvar ValueFormatter = /** @class */ (function () {\n    function ValueFormatter(cultureName) {\n        this.intl = new Internationalization();\n        if (!isNullOrUndefined(cultureName)) {\n            this.intl.culture = cultureName;\n        }\n    }\n    ValueFormatter.prototype.getFormatFunction = function (format) {\n        if (format.type) {\n            return this.intl.getDateFormat(format);\n        }\n        else {\n            return this.intl.getNumberFormat(format);\n        }\n    };\n    ValueFormatter.prototype.getParserFunction = function (format) {\n        if (format.type) {\n            return this.intl.getDateParser(format);\n        }\n        else {\n            return this.intl.getNumberParser(format);\n        }\n    };\n    ValueFormatter.prototype.fromView = function (value, format, type) {\n        if (type === 'date' || type === 'datetime' || type === 'number') {\n            return format(value);\n        }\n        else {\n            return value;\n        }\n    };\n    ValueFormatter.prototype.toView = function (value, format) {\n        var result = value;\n        if (!isNullOrUndefined(format) && !isNullOrUndefined(value)) {\n            result = format(value);\n        }\n        return result;\n    };\n    ValueFormatter.prototype.setCulture = function (cultureName) {\n        if (!isNullOrUndefined(cultureName)) {\n            setCulture(cultureName);\n        }\n    };\n    return ValueFormatter;\n}());\nexport { ValueFormatter };\n","import { merge, isNullOrUndefined, getValue, extend } from '@syncfusion/ej2-base';\nimport { Query, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getUid, templateCompiler, getForeignData } from '../base/util';\n/**\n * Represents Grid `Column` model class.\n */\nvar Column = /** @class */ (function () {\n    function Column(options) {\n        var _this = this;\n        /**\n         * If `allowSorting` set to false, then it disables sorting option of a particular column.\n         * By default all columns are sortable.\n         * @default true\n         */\n        this.allowSorting = true;\n        /**\n         * If `allowResizing` is set to false, it disables resize option of a particular column.\n         * By default all the columns can be resized.\n         * @default true\n         */\n        this.allowResizing = true;\n        /**\n         * If `allowFiltering` set to false, then it disables filtering option and filter bar element of a particular column.\n         * By default all columns are filterable.\n         * @default true\n         */\n        this.allowFiltering = true;\n        /**\n         * If `allowGrouping` set to false, then it disables grouping of a particular column.\n         * By default all columns are groupable.\n         * @default true\n         */\n        this.allowGrouping = true;\n        /**\n         * If `allowReordering` set to false, then it disables reorder of a particular column.\n         * By default all columns can be reorder.\n         * @default true\n         */\n        this.allowReordering = true;\n        /**\n         * If `showColumnMenu` set to false, then it disable the column menu of a particular column.\n         * By default column menu will show for all columns\n         * @default true\n         */\n        this.showColumnMenu = true;\n        /**\n         * If `enableGroupByFormat` set to true, then it groups the particular column by formatted values.\n         * @default true\n         */\n        this.enableGroupByFormat = false;\n        /**\n         * If `allowEditing` set to false, then it disables editing of a particular column.\n         * By default all columns are editable.\n         * @default true\n         */\n        this.allowEditing = true;\n        /**\n         *  It is used to customize the default filter options for a specific columns.\n         * * type -  Specifies the filter type as menu or checkbox.\n         * * ui - to render custom component for specific column it has following functions.\n         * * ui.create â€“ It is used for creating custom components.\n         * * ui.read -  It is used for read the value from the component.\n         * * ui.write - It is used to apply component model as dynamically.\n         * {% codeBlock src=\"grid/filter-menu-api/index.ts\" %}{% endcodeBlock %}\n         *\n         * > Check the [`Filter UI`](./filtering.html#custom-component-in-filter-menu) for its customization.\n         *  @default null\n         */\n        this.filter = {};\n        /**\n         * If `showInColumnChooser` set to false, then hide the particular column in column chooser.\n         *  By default all columns are displayed in column Chooser.\n         * @default true\n         */\n        this.showInColumnChooser = true;\n        /**\n         * Defines the `IEditCell` object to customize default edit cell.\n         * @default {}\n         */\n        this.edit = {};\n        this.sortDirection = 'Descending';\n        merge(this, options);\n        this.uid = getUid('grid-column');\n        var valueFormatter = new ValueFormatter();\n        if (options.format && (options.format.skeleton || options.format.format)) {\n            this.setFormatter(valueFormatter.getFormatFunction(options.format));\n            this.setParser(valueFormatter.getParserFunction(options.format));\n        }\n        if (!this.field) {\n            this.allowFiltering = false;\n            this.allowGrouping = false;\n            this.allowSorting = false;\n        }\n        if (this.commands && !this.textAlign) {\n            this.textAlign = 'Right';\n        }\n        if (this.template || this.commandsTemplate) {\n            this.templateFn = templateCompiler(this.template || this.commandsTemplate);\n        }\n        if (this.headerTemplate) {\n            this.headerTemplateFn = templateCompiler(this.headerTemplate);\n        }\n        if (this.filter.itemTemplate) {\n            this.fltrTemplateFn = templateCompiler(this.filter.itemTemplate);\n        }\n        if (this.isForeignColumn() && (isNullOrUndefined(this.editType) || this.editType === 'dropdownedit')) {\n            this.editType = 'dropdownedit';\n            this.edit.params = extend({\n                dataSource: this.dataSource,\n                query: new Query(), fields: { value: this.foreignKeyField || this.field, text: this.foreignKeyValue }\n            }, this.edit.params);\n        }\n        if (this.sortComparer) {\n            var a_1 = this.sortComparer;\n            this.sortComparer = function comparer(x, y) {\n                if (typeof a_1 === 'string') {\n                    a_1 = getValue(a_1, window);\n                }\n                if (this.sortDirection === 'Descending') {\n                    var z = x;\n                    x = y;\n                    y = z;\n                }\n                return a_1(x, y);\n            };\n        }\n        if (!this.sortComparer && this.isForeignColumn()) {\n            this.sortComparer = function (x, y) {\n                x = getValue(_this.foreignKeyValue, getForeignData(_this, {}, x)[0]);\n                y = getValue(_this.foreignKeyValue, getForeignData(_this, {}, y)[0]);\n                return _this.sortDirection === 'Descending' ? DataUtil.fnDescending(x, y) : DataUtil.fnAscending(x, y);\n            };\n        }\n    }\n    /** @hidden */\n    Column.prototype.getSortDirection = function () {\n        return this.sortDirection;\n    };\n    /** @hidden */\n    Column.prototype.setSortDirection = function (direction) {\n        this.sortDirection = direction;\n    };\n    /** @hidden */\n    Column.prototype.setProperties = function (column) {\n        //Angular two way binding\n        var keys = Object.keys(column);\n        for (var i = 0; i < keys.length; i++) {\n            this[keys[i]] = column[keys[i]];\n        }\n    };\n    /**\n     * @hidden\n     * It defines the column is foreign key column or not.\n     */\n    Column.prototype.isForeignColumn = function () {\n        return !!(this.dataSource && this.foreignKeyValue);\n    };\n    /** @hidden */\n    Column.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /** @hidden */\n    Column.prototype.setFormatter = function (value) {\n        this.formatFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getParser = function () {\n        return this.parserFn;\n    };\n    /** @hidden */\n    Column.prototype.setParser = function (value) {\n        this.parserFn = value;\n    };\n    /** @hidden */\n    Column.prototype.getColumnTemplate = function () {\n        return this.templateFn;\n    };\n    /** @hidden */\n    Column.prototype.getHeaderTemplate = function () {\n        return this.headerTemplateFn;\n    };\n    /** @hidden */\n    Column.prototype.getFilterItemTemplate = function () {\n        return this.fltrTemplateFn;\n    };\n    /** @hidden */\n    Column.prototype.getDomSetter = function () {\n        return this.disableHtmlEncode ? 'textContent' : 'innerHTML';\n    };\n    return Column;\n}());\nexport { Column };\n","/** @hidden */\nexport var created = 'create';\n/** @hidden */\nexport var destroyed = 'destroy';\n/** @hidden */\nexport var load = 'load';\n/** @hidden */\nexport var rowDataBound = 'rowDataBound';\n/** @hidden */\nexport var queryCellInfo = 'queryCellInfo';\n/** @hidden */\nexport var headerCellInfo = 'headerCellInfo';\n/** @hidden */\nexport var actionBegin = 'actionBegin';\n/** @hidden */\nexport var actionComplete = 'actionComplete';\n/** @hidden */\nexport var actionFailure = 'actionFailure';\n/** @hidden */\nexport var dataBound = 'dataBound';\n/** @hidden */\nexport var rowSelecting = 'rowSelecting';\n/** @hidden */\nexport var rowSelected = 'rowSelected';\n/** @hidden */\nexport var rowDeselecting = 'rowDeselecting';\n/** @hidden */\nexport var rowDeselected = 'rowDeselected';\n/** @hidden */\nexport var cellSelecting = 'cellSelecting';\n/** @hidden */\nexport var cellSelected = 'cellSelected';\n/** @hidden */\nexport var cellDeselecting = 'cellDeselecting';\n/** @hidden */\nexport var cellDeselected = 'cellDeselected';\n/** @hidden */\nexport var columnDragStart = 'columnDragStart';\n/** @hidden */\nexport var columnDrag = 'columnDrag';\n/** @hidden */\nexport var columnDrop = 'columnDrop';\n/** @hidden */\nexport var rowDragStart = 'rowDragStart';\n/** @hidden */\nexport var rowDrag = 'rowDrag';\n/** @hidden */\nexport var rowDrop = 'rowDrop';\n/** @hidden */\nexport var beforePrint = 'beforePrint';\n/** @hidden */\nexport var printComplete = 'printComplete';\n/** @hidden */\nexport var detailDataBound = 'detailDataBound';\n/** @hidden */\nexport var toolbarClick = 'toolbarClick';\n/** @hidden */\nexport var batchAdd = 'batchAdd';\n/** @hidden */\nexport var batchCancel = 'batchCancel';\n/** @hidden */\nexport var batchDelete = 'batchDelete';\n/** @hidden */\nexport var beforeBatchAdd = 'beforeBatchAdd';\n/** @hidden */\nexport var beforeBatchDelete = 'beforeBatchDelete';\n/** @hidden */\nexport var beforeBatchSave = 'beforeBatchSave';\n/** @hidden */\nexport var beginEdit = 'beginEdit';\n/** @hidden */\nexport var cellEdit = 'cellEdit';\n/** @hidden */\nexport var cellSave = 'cellSave';\n/** @hidden */\nexport var cellSaved = 'cellSaved';\n/** @hidden */\nexport var endAdd = 'endAdd';\n/** @hidden */\nexport var endDelete = 'endDelete';\n/** @hidden */\nexport var endEdit = 'endEdit';\n/** @hidden */\nexport var recordDoubleClick = 'recordDoubleClick';\n/** @hidden */\nexport var recordClick = 'recordClick';\n/** @hidden */\nexport var beforeDataBound = 'beforeDataBound';\n/** @hidden */\nexport var beforeOpenColumnChooser = 'beforeOpenColumnChooser';\n/** @hidden */\nexport var resizeStart = 'resizeStart';\n/** @hidden */\nexport var onResize = 'resizing';\n/** @hidden */\nexport var resizeStop = 'resizeStop';\n/** @hidden */\nexport var checkBoxChange = 'checkBoxChange';\n/** @hidden */\nexport var beforeCopy = 'beforeCopy';\n/** @hidden */\nexport var filterChoiceRequest = 'filterchoicerequest';\n/** @hidden */\nexport var filterAfterOpen = 'filterafteropen';\n/** @hidden */\nexport var filterBeforeOpen = 'filterbeforeopen';\n/** @hidden */\nexport var filterSearchBegin = 'filtersearchbegin';\n/**\n * Specifies grid internal events\n */\n/** @hidden */\nexport var initialLoad = 'initial-load';\n/** @hidden */\nexport var initialEnd = 'initial-end';\n/** @hidden */\nexport var dataReady = 'data-ready';\n/** @hidden */\nexport var contentReady = 'content-ready';\n/** @hidden */\nexport var uiUpdate = 'ui-update';\n/** @hidden */\nexport var onEmpty = 'on-empty';\n/** @hidden */\nexport var inBoundModelChanged = 'inbound-model-changed';\n/** @hidden */\nexport var modelChanged = 'model-changed';\n/** @hidden */\nexport var colGroupRefresh = 'colgroup-refresh';\n/** @hidden */\nexport var headerRefreshed = 'header-refreshed';\n/** @hidden */\nexport var pageBegin = 'paging-begin';\n/** @hidden */\nexport var pageComplete = 'paging-complete';\n/** @hidden */\nexport var sortBegin = 'sorting-begin';\n/** @hidden */\nexport var sortComplete = 'sorting-complete';\n/** @hidden */\nexport var filterBegin = 'filtering-begin';\n/** @hidden */\nexport var filterComplete = 'filtering-complete';\n/** @hidden */\nexport var searchBegin = 'searching-begin';\n/** @hidden */\nexport var searchComplete = 'searching-complete';\n/** @hidden */\nexport var reorderBegin = 'reorder-begin';\n/** @hidden */\nexport var reorderComplete = 'reorder-complete';\n/** @hidden */\nexport var rowDragAndDropBegin = 'rowdraganddrop-begin';\n/** @hidden */\nexport var rowDragAndDropComplete = 'rowdraganddrop-complete';\n/** @hidden */\nexport var groupBegin = 'grouping-begin';\n/** @hidden */\nexport var groupComplete = 'grouping-complete';\n/** @hidden */\nexport var ungroupBegin = 'ungrouping-begin';\n/** @hidden */\nexport var ungroupComplete = 'ungrouping-complete';\n/** @hidden */\nexport var rowSelectionBegin = 'rowselecting';\n/** @hidden */\nexport var rowSelectionComplete = 'rowselected';\n/** @hidden */\nexport var columnSelectionBegin = 'columnselecting';\n/** @hidden */\nexport var columnSelectionComplete = 'columnselected';\n/** @hidden */\nexport var cellSelectionBegin = 'cellselecting';\n/** @hidden */\nexport var cellSelectionComplete = 'cellselected';\n/** @hidden */\nexport var beforeCellFocused = 'beforecellfocused';\n/** @hidden */\nexport var cellFocused = 'cellfocused';\n/** @hidden */\nexport var keyPressed = 'key-pressed';\n/** @hidden */\nexport var click = 'click';\n/** @hidden */\nexport var destroy = 'destroy';\n/** @hidden */\nexport var columnVisibilityChanged = 'column-visible-changed';\n/** @hidden */\nexport var scroll = 'scroll';\n/** @hidden */\nexport var columnWidthChanged = 'column-width-changed';\n/** @hidden */\nexport var columnPositionChanged = 'column-position-changed';\n/** @hidden */\nexport var rowDragAndDrop = 'row-drag-and-drop';\n/** @hidden */\nexport var rowsAdded = 'rows-added';\n/** @hidden */\nexport var rowsRemoved = 'rows-removed';\n/** @hidden */\nexport var columnDragStop = 'column-drag-stop';\n/** @hidden */\nexport var headerDrop = 'header-drop';\n/** @hidden */\nexport var dataSourceModified = 'datasource-modified';\n/** @hidden */\nexport var refreshComplete = 'refresh-complete';\n/** @hidden */\nexport var refreshVirtualBlock = 'refresh-virtual-block';\n/** @hidden */\nexport var dblclick = 'dblclick';\n/** @hidden */\nexport var toolbarRefresh = 'toolbar-refresh';\n/** @hidden */\nexport var bulkSave = 'bulk-save';\n/** @hidden */\nexport var autoCol = 'auto-col';\n/** @hidden */\nexport var tooltipDestroy = 'tooltip-destroy';\n/** @hidden */\nexport var updateData = 'update-data';\n/** @hidden */\nexport var editBegin = 'edit-begin';\n/** @hidden */\nexport var editComplete = 'edit-complete';\n/** @hidden */\nexport var addBegin = 'add-begin';\n/** @hidden */\nexport var addComplete = 'add-complete';\n/** @hidden */\nexport var saveComplete = 'save-complete';\n/** @hidden */\nexport var deleteBegin = 'delete-begin';\n/** @hidden */\nexport var deleteComplete = 'delete-complete';\n/** @hidden */\nexport var preventBatch = 'prevent-batch';\n/** @hidden */\nexport var dialogDestroy = 'dialog-destroy';\n/** @hidden */\nexport var crudAction = 'crud-Action';\n/** @hidden */\nexport var addDeleteAction = 'add-delete-Action';\n/** @hidden */\nexport var destroyForm = 'destroy-form';\n/** @hidden */\nexport var doubleTap = 'double-tap';\n/** @hidden */\nexport var beforeExcelExport = 'beforeExcelExport';\n/** @hidden */\nexport var excelExportComplete = 'excelExportComplete';\n/** @hidden */\nexport var excelQueryCellInfo = 'excelQueryCellInfo';\n/** @hidden */\nexport var excelHeaderQueryCellInfo = 'excelHeaderQueryCellInfo';\n/** @hidden */\nexport var beforePdfExport = 'beforePdfExport';\n/** @hidden */\nexport var pdfExportComplete = 'pdfExportComplete';\n/** @hidden */\nexport var pdfQueryCellInfo = 'pdfQueryCellInfo';\n/** @hidden */\nexport var pdfHeaderQueryCellInfo = 'pdfHeaderQueryCellInfo';\n/** @hidden */\nexport var accessPredicate = 'access-predicate';\n/** @hidden */\nexport var contextMenuClick = 'contextMenuClick';\n/** @hidden */\nexport var freezeRender = 'freezerender';\n/** @hidden */\nexport var freezeRefresh = 'freezerefresh';\n/** @hidden */\nexport var contextMenuOpen = 'contextMenuOpen';\n/** @hidden */\nexport var columnMenuClick = 'columnMenuClick';\n/** @hidden */\nexport var columnMenuOpen = 'columnMenuOpen';\n/** @hidden */\nexport var filterOpen = 'filterOpen';\n/** @hidden */\nexport var filterDialogCreated = 'filterDialogCreated';\n/** @hidden */\nexport var filterMenuClose = 'filter-menu-close';\n/** @hidden */\nexport var initForeignKeyColumn = 'initForeignKeyColumn';\n/** @hidden */\nexport var getForeignKeyData = 'getForeignKeyData';\n/** @hidden */\nexport var generateQuery = 'generateQuery';\n/** @hidden */\nexport var showEmptyGrid = 'showEmptyGrid';\n/** @hidden */\nexport var foreignKeyData = 'foreignKeyData';\n/** @hidden */\nexport var dataStateChange = 'dataStateChange';\n/** @hidden */\nexport var dataSourceChanged = 'dataSourceChanged';\n/** @hidden */\nexport var rtlUpdated = 'rtl-updated';\n/** @hidden */\nexport var beforeFragAppend = 'beforeFragAppend';\n/** @hidden */\nexport var frozenHeight = 'frozenHeight';\n/** @hidden */\nexport var recordAdded = 'recordAdded';\n/** @hidden */\nexport var cancelBegin = 'cancel-Begin';\n/** @hidden */\nexport var editNextValCell = 'editNextValCell';\n","/**\n * Defines types of Cell\n * @hidden\n */\nexport var CellType;\n(function (CellType) {\n    /**  Defines CellType as Data */\n    CellType[CellType[\"Data\"] = 0] = \"Data\";\n    /**  Defines CellType as Header */\n    CellType[CellType[\"Header\"] = 1] = \"Header\";\n    /**  Defines CellType as Summary */\n    CellType[CellType[\"Summary\"] = 2] = \"Summary\";\n    /**  Defines CellType as GroupSummary */\n    CellType[CellType[\"GroupSummary\"] = 3] = \"GroupSummary\";\n    /**  Defines CellType as CaptionSummary */\n    CellType[CellType[\"CaptionSummary\"] = 4] = \"CaptionSummary\";\n    /**  Defines CellType as Filter */\n    CellType[CellType[\"Filter\"] = 5] = \"Filter\";\n    /**  Defines CellType as Indent */\n    CellType[CellType[\"Indent\"] = 6] = \"Indent\";\n    /**  Defines CellType as GroupCaption */\n    CellType[CellType[\"GroupCaption\"] = 7] = \"GroupCaption\";\n    /**  Defines CellType as GroupCaptionEmpty */\n    CellType[CellType[\"GroupCaptionEmpty\"] = 8] = \"GroupCaptionEmpty\";\n    /**  Defines CellType as Expand */\n    CellType[CellType[\"Expand\"] = 9] = \"Expand\";\n    /**  Defines CellType as HeaderIndent */\n    CellType[CellType[\"HeaderIndent\"] = 10] = \"HeaderIndent\";\n    /**  Defines CellType as StackedHeader */\n    CellType[CellType[\"StackedHeader\"] = 11] = \"StackedHeader\";\n    /**  Defines CellType as DetailHeader */\n    CellType[CellType[\"DetailHeader\"] = 12] = \"DetailHeader\";\n    /**  Defines CellType as DetailExpand */\n    CellType[CellType[\"DetailExpand\"] = 13] = \"DetailExpand\";\n    /**  Defines CellType as CommandColumn */\n    CellType[CellType[\"CommandColumn\"] = 14] = \"CommandColumn\";\n})(CellType || (CellType = {}));\n/**\n * Defines types of Render\n * @hidden\n */\nexport var RenderType;\n(function (RenderType) {\n    /**  Defines RenderType as Header */\n    RenderType[RenderType[\"Header\"] = 0] = \"Header\";\n    /**  Defines RenderType as Content */\n    RenderType[RenderType[\"Content\"] = 1] = \"Content\";\n    /**  Defines RenderType as Summary */\n    RenderType[RenderType[\"Summary\"] = 2] = \"Summary\";\n})(RenderType || (RenderType = {}));\n/**\n * Defines Predefined toolbar items.\n * @hidden\n */\nexport var ToolbarItem;\n(function (ToolbarItem) {\n    ToolbarItem[ToolbarItem[\"Add\"] = 0] = \"Add\";\n    ToolbarItem[ToolbarItem[\"Edit\"] = 1] = \"Edit\";\n    ToolbarItem[ToolbarItem[\"Update\"] = 2] = \"Update\";\n    ToolbarItem[ToolbarItem[\"Delete\"] = 3] = \"Delete\";\n    ToolbarItem[ToolbarItem[\"Cancel\"] = 4] = \"Cancel\";\n    ToolbarItem[ToolbarItem[\"Print\"] = 5] = \"Print\";\n    ToolbarItem[ToolbarItem[\"Search\"] = 6] = \"Search\";\n    ToolbarItem[ToolbarItem[\"ColumnChooser\"] = 7] = \"ColumnChooser\";\n    ToolbarItem[ToolbarItem[\"PdfExport\"] = 8] = \"PdfExport\";\n    ToolbarItem[ToolbarItem[\"ExcelExport\"] = 9] = \"ExcelExport\";\n    ToolbarItem[ToolbarItem[\"CsvExport\"] = 10] = \"CsvExport\";\n    ToolbarItem[ToolbarItem[\"WordExport\"] = 11] = \"WordExport\";\n})(ToolbarItem || (ToolbarItem = {}));\n","/* tslint:disable-next-line:max-line-length */\nimport { EventHandler, isNullOrUndefined, extend, classList, addClass, removeClass, Browser, getValue, setValue } from '@syncfusion/ej2-base';\nimport { parentsUntil, getUid, isActionPrevent, appendChildren, getDatePredicate } from '../base/util';\nimport { remove, debounce } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager, Predicate, UrlAdaptor, Deferred } from '@syncfusion/ej2-data';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { getForeignData } from '../base/util';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { createSpinner, hideSpinner, showSpinner } from '@syncfusion/ej2-popups';\nimport { getFilterMenuPostion, toogleCheckbox, createCboxWithWrap, removeAddCboxClasses, getColumnByForeignKeyValue } from '../base/util';\n/**\n * @hidden\n * `CheckBoxFilter` module is used to handle filtering action.\n */\nvar CheckBoxFilter = /** @class */ (function () {\n    /**\n     * Constructor for checkbox filtering module\n     * @hidden\n     */\n    function CheckBoxFilter(parent, filterSettings, serviceLocator) {\n        this.existingPredicate = {};\n        this.filterState = true;\n        this.values = {};\n        this.parent = parent;\n        this.id = this.parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n        this.valueFormatter = new ValueFormatter(this.parent.locale);\n        this.cBoxTrue = createCheckBox(this.parent.createElement, false, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    CheckBoxFilter.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    CheckBoxFilter.prototype.wireEvents = function () {\n        EventHandler.add(this.dlg, 'click', this.clickHandler, this);\n        this.searchHandler = debounce(this.searchBoxKeyUp, 200);\n        EventHandler.add(this.dlg.querySelector('.e-searchinput'), 'keyup', this.searchHandler, this);\n    };\n    CheckBoxFilter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.dlg, 'click', this.clickHandler);\n        var elem = this.dlg.querySelector('.e-searchinput');\n        if (elem) {\n            EventHandler.remove(elem, 'keyup', this.searchHandler);\n        }\n    };\n    CheckBoxFilter.prototype.searchBoxClick = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-searchclear')) {\n            this.sInput.value = '';\n            this.refreshCheckboxes();\n            this.updateSearchIcon();\n            this.sInput.focus();\n        }\n    };\n    CheckBoxFilter.prototype.searchBoxKeyUp = function (e) {\n        this.refreshCheckboxes();\n        this.updateSearchIcon();\n    };\n    CheckBoxFilter.prototype.updateSearchIcon = function () {\n        if (this.sInput.value.length) {\n            classList(this.sIcon, ['e-chkcancel-icon'], ['e-search-icon']);\n        }\n        else {\n            classList(this.sIcon, ['e-search-icon'], ['e-chkcancel-icon']);\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    CheckBoxFilter.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    CheckBoxFilter.prototype.updateDataSource = function () {\n        var dataSource = this.options.dataSource;\n        if (!(dataSource instanceof DataManager)) {\n            for (var i = 0; i < dataSource.length; i++) {\n                if (typeof dataSource !== 'object') {\n                    var obj = {};\n                    obj[this.options.field] = dataSource[i];\n                    dataSource[i] = obj;\n                }\n            }\n        }\n    };\n    CheckBoxFilter.prototype.updateModel = function (options) {\n        this.options = options;\n        this.existingPredicate = options.actualPredicate || {};\n        this.options.dataSource = options.dataSource;\n        this.updateDataSource();\n        this.options.type = options.type || 'string';\n        this.options.format = options.format || '';\n        this.options.filteredColumns = options.filteredColumns || this.parent.filterSettings.columns;\n        this.options.sortedColumns = options.sortedColumns || this.parent.sortSettings.columns;\n        this.options.query = options.query || new Query();\n        this.options.allowCaseSensitive = options.allowCaseSensitive || false;\n        this.values = {};\n        this.localeObj = options.localeObj;\n        this.isFiltered = options.filteredColumns.length;\n    };\n    CheckBoxFilter.prototype.getAndSetChkElem = function (options) {\n        this.dlg = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_excelDlg',\n            className: 'e-checkboxfilter e-filter-popup'\n        });\n        this.sBox = this.parent.createElement('div', { className: 'e-searchcontainer' });\n        if (!options.hideSearchbox) {\n            this.sInput = this.parent.createElement('input', {\n                id: this.id + '_SearchBox',\n                className: 'e-searchinput'\n            });\n            this.sIcon = this.parent.createElement('span', {\n                className: 'e-searchclear e-search-icon e-icons e-input-group-icon', attrs: {\n                    type: 'text', title: this.getLocalizedLabel('Search')\n                }\n            });\n            this.searchBox = this.parent.createElement('span', { className: 'e-searchbox e-fields' });\n            this.searchBox.appendChild(this.sInput);\n            this.sBox.appendChild(this.searchBox);\n            var inputargs = {\n                element: this.sInput, floatLabelType: 'Never', properties: {\n                    placeholder: this.getLocalizedLabel('Search')\n                }\n            };\n            Input.createInput(inputargs, this.parent.createElement);\n            this.searchBox.querySelector('.e-input-group').appendChild(this.sIcon);\n        }\n        this.spinner = this.parent.createElement('div', { className: 'e-spinner' }); //for spinner\n        this.cBox = this.parent.createElement('div', {\n            id: this.id + this.options.type + '_CheckBoxList',\n            className: 'e-checkboxlist e-fields'\n        });\n        this.spinner.appendChild(this.cBox);\n        this.sBox.appendChild(this.spinner);\n        return this.sBox;\n    };\n    CheckBoxFilter.prototype.showDialog = function (options) {\n        var args = {\n            requestType: events.filterBeforeOpen, filterModel: this,\n            columnName: this.options.field, columnType: this.options.type, cancel: false\n        };\n        this.parent.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        this.dialogObj = new Dialog({\n            visible: false, content: this.sBox,\n            close: this.closeDialog.bind(this),\n            width: (!isNullOrUndefined(parentsUntil(options.target, 'e-bigger')))\n                || this.parent.element.classList.contains('e-device') ? 260 : 255,\n            target: this.parent.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: {\n                        content: this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton'),\n                        cssClass: 'e-primary', isPrimary: true\n                    }\n                },\n                {\n                    click: this.btnClick.bind(this),\n                    buttonModel: { cssClass: 'e-flat', content: this.getLocalizedLabel(this.isExcel ? 'CancelButton' : 'ClearButton') }\n                }],\n            created: this.dialogCreated.bind(this),\n            open: this.dialogOpen.bind(this)\n        });\n        this.dialogObj.appendTo(this.dlg);\n        this.dialogObj.element.style.maxHeight = '800px';\n        this.dialogObj.show();\n        this.wireEvents();\n        createSpinner({ target: this.spinner }, this.parent.createElement);\n        showSpinner(this.spinner);\n        this.getAllData();\n    };\n    CheckBoxFilter.prototype.dialogCreated = function (e) {\n        if (!Browser.isDevice) {\n            getFilterMenuPostion(this.options.target, this.dialogObj, this.parent);\n        }\n        else {\n            this.dialogObj.position = { X: 'center', Y: 'center' };\n        }\n        this.parent.notify(events.filterDialogCreated, e);\n    };\n    CheckBoxFilter.prototype.openDialog = function (options) {\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n    };\n    CheckBoxFilter.prototype.closeDialog = function () {\n        if (this.dialogObj && !this.dialogObj.isDestroyed) {\n            this.parent.notify(events.filterMenuClose, { field: this.options.field });\n            this.dialogObj.destroy();\n            this.unWireEvents();\n            remove(this.dlg);\n            this.dlg = null;\n        }\n    };\n    CheckBoxFilter.prototype.clearFilter = function () {\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFilter });\n            return;\n        }\n        this.options.handler({ action: 'clear-filter', field: this.options.field });\n    };\n    CheckBoxFilter.prototype.btnClick = function (e) {\n        if (this.filterState) {\n            if (e.target.tagName.toLowerCase() === 'input') {\n                var args = {\n                    action: 'filtering', filterCollection: {\n                        field: this.options.field,\n                        operator: this.options.column.type === 'date' || this.options.column.type === 'datetime' ? 'equal' : 'contains',\n                        value: e.target.value, matchCase: false, type: this.options.column.type\n                    },\n                    field: this.options.field\n                };\n                e.target.value ? this.options.handler(args) : this.closeDialog();\n            }\n            else {\n                var text = e.target.firstChild.textContent.toLowerCase();\n                if (this.getLocalizedLabel(this.isExcel ? 'OKButton' : 'FilterButton').toLowerCase() === text) {\n                    this.fltrBtnHandler();\n                }\n                else if (this.getLocalizedLabel('ClearButton').toLowerCase() === text) {\n                    this.clearFilter();\n                }\n            }\n            this.closeDialog();\n        }\n        else if (!(e.target.tagName.toLowerCase() === 'input')) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    CheckBoxFilter.prototype.fltrBtnHandler = function () {\n        var checked = [].slice.call(this.cBox.querySelectorAll('.e-check:not(.e-selectall)'));\n        var optr = 'equal';\n        var caseSen = this.options.type === 'string' ?\n            this.options.allowCaseSensitive : true;\n        var defaults = {\n            field: this.options.field, predicate: 'or',\n            operator: optr, matchCase: caseSen, ignoreAccent: this.parent.filterSettings.ignoreAccent\n        };\n        var isNotEqual = this.itemsCnt !== checked.length && this.itemsCnt - checked.length < checked.length;\n        if (isNotEqual) {\n            optr = 'notequal';\n            checked = [].slice.call(this.cBox.querySelectorAll('.e-uncheck:not(.e-selectall)'));\n            defaults.predicate = 'and';\n            defaults.operator = 'notequal';\n        }\n        var value;\n        var fObj;\n        var coll = [];\n        var searchInput = this.searchBox.querySelector('.e-searchinput');\n        if (checked.length !== this.itemsCnt || (searchInput.value && searchInput.value !== '')) {\n            for (var i = 0; i < checked.length; i++) {\n                value = this.values[parentsUntil(checked[i], 'e-ftrchk').getAttribute('uid')];\n                fObj = extend({}, { value: value }, defaults);\n                if (value && !value.toString().length) {\n                    fObj.operator = isNotEqual ? 'notequal' : 'equal';\n                }\n                coll.push(fObj);\n                if (isActionPrevent(this.parent)) {\n                    this.parent.notify(events.preventBatch, {\n                        instance: this, handler: this.fltrBtnHandler, arg1: fObj.field, arg2: fObj.predicate, arg3: fObj.operator,\n                        arg4: fObj.matchCase, arg5: fObj.ignoreAccent, arg6: fObj.value\n                    });\n                    return;\n                }\n            }\n            this.initiateFilter(coll);\n        }\n        else {\n            this.clearFilter();\n        }\n    };\n    CheckBoxFilter.prototype.initiateFilter = function (fColl) {\n        var firstVal = fColl[0];\n        var predicate;\n        if (!isNullOrUndefined(firstVal)) {\n            predicate = firstVal.ejpredicate ? firstVal.ejpredicate :\n                new Predicate(firstVal.field, firstVal.operator, firstVal.value, !firstVal.matchCase, firstVal.ignoreAccent);\n            for (var j = 1; j < fColl.length; j++) {\n                predicate = fColl[j].ejpredicate !== undefined ?\n                    predicate[fColl[j].predicate](fColl[j].ejpredicate) :\n                    predicate[fColl[j].predicate](fColl[j].field, fColl[j].operator, fColl[j].value, !fColl[j].matchCase, fColl[j].ignoreAccent);\n            }\n            var args = {\n                action: 'filtering', filterCollection: fColl, field: this.options.field,\n                ejpredicate: Predicate.or(predicate)\n            };\n            this.options.handler(args);\n        }\n    };\n    CheckBoxFilter.prototype.refreshCheckboxes = function () {\n        var val = this.sInput.value;\n        var query = this.options.query.clone();\n        var parsed = (this.options.type !== 'string' && parseFloat(val)) ? parseFloat(val) : val;\n        var operator = this.parent.getDataModule().isRemote() ?\n            (this.options.type === 'string' ? 'contains' : 'equal') : (this.options.type ? 'startswith' : 'contains');\n        var matchCase = true;\n        var ignoreAccent = this.parent.filterSettings.ignoreAccent;\n        parsed = (parsed === '' || parsed === undefined) ? undefined : parsed;\n        var predicte;\n        if (this.options.type === 'boolean') {\n            if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterTrue').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'true';\n            }\n            else if (parsed !== undefined &&\n                this.getLocalizedLabel('FilterFalse').toLowerCase().indexOf(parsed.toLowerCase()) !== -1) {\n                parsed = 'false';\n            }\n            parsed = parsed === 'true';\n            operator = 'equal';\n        }\n        var args = {\n            requestType: events.filterSearchBegin,\n            filterModel: this, columnName: this.options.field, column: this.options.column,\n            operator: operator, matchCase: matchCase, ignoreAccent: ignoreAccent, filterChoiceCount: null,\n            query: query\n        };\n        this.parent.trigger(events.actionBegin, args);\n        predicte = new Predicate(this.options.field, args.operator, parsed, args.matchCase, args.ignoreAccent);\n        if (this.options.type === 'date' || this.options.type === 'datetime') {\n            parsed = this.valueFormatter.fromView(val, this.options.parserFn, this.options.type);\n            operator = 'equal';\n            if (isNullOrUndefined(parsed) && val.length) {\n                return;\n            }\n            var filterObj = {\n                field: this.options.field, operator: operator, value: parsed, matchCase: matchCase,\n                ignoreAccent: ignoreAccent\n            };\n            predicte = getDatePredicate(filterObj, this.options.type);\n        }\n        if (val.length) {\n            query.where(predicte);\n        }\n        args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n        query.take(args.filterChoiceCount);\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processSearch(query);\n        }\n    };\n    CheckBoxFilter.prototype.getPredicateFromCols = function (columns) {\n        var predicate;\n        var predicates = CheckBoxFilter.getPredicate(columns);\n        var predicateList = [];\n        var fPredicate = {};\n        var foreignColumn = this.parent.getForeignKeyColumns();\n        for (var _i = 0, _a = Object.keys(predicates); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            var col = getColumnByForeignKeyValue(prop, foreignColumn);\n            if (col) {\n                this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n                if (fPredicate.predicate.predicates.length) {\n                    predicateList.push(Predicate.or(fPredicate.predicate.predicates));\n                }\n            }\n            else {\n                predicateList.push(predicates[prop]);\n            }\n        }\n        return predicateList.length && Predicate.and(predicateList);\n    };\n    CheckBoxFilter.prototype.getAllData = function () {\n        var query = new Query();\n        query = this.parent.query.clone();\n        query.requiresCount(); //consider take query\n        var args = {\n            requestType: events.filterChoiceRequest, filterModel: this, query: query, filterChoiceCount: null\n        };\n        this.parent.trigger(events.actionBegin, args);\n        args.filterChoiceCount = !isNullOrUndefined(args.filterChoiceCount) ? args.filterChoiceCount : 1000;\n        query.take(args.filterChoiceCount);\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.filterEvent(args, query);\n        }\n        else {\n            this.processDataOperation(query);\n        }\n    };\n    CheckBoxFilter.prototype.filterEvent = function (args, query) {\n        var _this = this;\n        var def = this.eventPromise(args, query);\n        def.promise.then(function (e) {\n            _this.dataSuccess(e);\n        });\n    };\n    CheckBoxFilter.prototype.eventPromise = function (args, query) {\n        var state;\n        state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        state.dataSource = def.resolve;\n        state.action = args;\n        this.parent.trigger(events.dataStateChange, state);\n        return def;\n    };\n    ;\n    CheckBoxFilter.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return data;\n    };\n    ;\n    CheckBoxFilter.prototype.processDataOperation = function (query) {\n        var _this = this;\n        this.options.dataSource = this.options.dataSource instanceof DataManager ?\n            this.options.dataSource : new DataManager(this.options.dataSource);\n        var allPromise = [];\n        var runArray = [];\n        if (this.options.column.isForeignColumn()) {\n            allPromise.push(this.options.column.dataSource.executeQuery(new Query()));\n            runArray.push(function (data) { return _this.foreignKeyData = data; });\n        }\n        allPromise.push(this.options.dataSource.executeQuery(query));\n        runArray.push(this.dataSuccess.bind(this));\n        var i = 0;\n        Promise.all(allPromise).then(function (e) {\n            e.forEach(function (data) {\n                runArray[i++](data.result);\n            });\n        });\n    };\n    CheckBoxFilter.prototype.dataSuccess = function (e) {\n        this.fullData = e;\n        var query = new Query();\n        if ((this.options.filteredColumns.length)) {\n            var cols = [];\n            for (var i = 0; i < this.options.filteredColumns.length; i++) {\n                if (!(this.options.filteredColumns[i].field === this.options.field ||\n                    this.options.filteredColumns[i].field === this.options.foreignKeyValue)) {\n                    cols.push(this.options.filteredColumns[i]);\n                }\n            }\n            var predicate = this.getPredicateFromCols(cols);\n            if (predicate) {\n                query.where(predicate);\n            }\n        }\n        // query.select(this.options.field);\n        var result = new DataManager(this.fullData).executeLocal(query);\n        var col = this.options.column;\n        var res = CheckBoxFilter.getDistinct(result, this.options.field, col, this.foreignKeyData);\n        this.filteredData = res.records || [];\n        this.processDataSource(null, true, this.filteredData);\n        this.sInput.focus();\n        var args = {\n            requestType: events.filterAfterOpen,\n            filterModel: this, columnName: this.options.field, columnType: this.options.type\n        };\n        this.parent.trigger(events.actionComplete, args);\n    };\n    CheckBoxFilter.prototype.processDataSource = function (query, isInitial, dataSource) {\n        showSpinner(this.spinner);\n        // query = query ? query : this.options.query.clone();\n        // query.requiresCount();\n        // let result: Object = new DataManager(dataSource as JSON[]).executeLocal(query);\n        // let res: { result: Object[] } = result as { result: Object[] };\n        this.updateResult();\n        this.createFilterItems(dataSource, isInitial);\n    };\n    CheckBoxFilter.prototype.processSearch = function (query) {\n        this.processDataOperation(query);\n    };\n    CheckBoxFilter.prototype.updateResult = function () {\n        this.result = {};\n        var predicate = this.getPredicateFromCols(this.options.filteredColumns);\n        var query = new Query();\n        if (predicate) {\n            query.where(predicate);\n        }\n        var result = new DataManager(this.fullData).executeLocal(query);\n        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n            var res = result_1[_i];\n            this.result[getValue(this.options.field, res)] = true;\n        }\n    };\n    CheckBoxFilter.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var elem = parentsUntil(target, 'e-checkbox-wrapper');\n        if (parentsUntil(target, 'e-searchbox')) {\n            this.searchBoxClick(e);\n        }\n        if (elem) {\n            var selectAll = elem.querySelector('.e-selectall');\n            if (selectAll) {\n                this.updateAllCBoxes(!selectAll.classList.contains('e-check'));\n            }\n            else {\n                toogleCheckbox(elem.parentElement);\n            }\n            this.updateIndeterminatenBtn();\n            elem.querySelector('.e-chk-hidden').focus();\n        }\n    };\n    CheckBoxFilter.prototype.updateAllCBoxes = function (checked) {\n        var cBoxes = [].slice.call(this.cBox.querySelectorAll('.e-frame'));\n        for (var _i = 0, cBoxes_1 = cBoxes; _i < cBoxes_1.length; _i++) {\n            var cBox = cBoxes_1[_i];\n            removeAddCboxClasses(cBox, checked);\n        }\n    };\n    CheckBoxFilter.prototype.dialogOpen = function () {\n        if (this.parent.element.classList.contains('e-device')) {\n            this.dialogObj.element.querySelector('.e-input-group').classList.remove('e-input-focus');\n            this.dialogObj.element.querySelector('.e-btn').focus();\n        }\n    };\n    CheckBoxFilter.prototype.createCheckbox = function (value, checked, data) {\n        var elem = checked ? this.cBoxTrue.cloneNode(true) :\n            this.cBoxFalse.cloneNode(true);\n        var label = elem.querySelector('.e-label');\n        label.innerHTML = !isNullOrUndefined(value) && value.toString().length ? value :\n            this.getLocalizedLabel('Blanks');\n        if (this.options.template) {\n            label.innerHTML = '';\n            appendChildren(label, this.options.template(data));\n        }\n        return elem;\n    };\n    CheckBoxFilter.prototype.updateIndeterminatenBtn = function () {\n        var cnt = this.cBox.children.length - 1;\n        var className = [];\n        var elem = this.cBox.querySelector('.e-selectall');\n        var selected = this.cBox.querySelectorAll('.e-check:not(.e-selectall)').length;\n        var btn = this.dialogObj.btnObj[0];\n        btn.disabled = false;\n        if (cnt === selected) {\n            className = ['e-check'];\n        }\n        else if (selected) {\n            className = ['e-stop'];\n        }\n        else {\n            className = ['e-uncheck'];\n            btn.disabled = true;\n        }\n        this.filterState = !btn.disabled;\n        btn.dataBind();\n        removeClass([elem], ['e-check', 'e-stop', 'e-uncheck']);\n        addClass([elem], className);\n    };\n    CheckBoxFilter.prototype.createFilterItems = function (data, isInitial) {\n        var cBoxes = this.parent.createElement('div');\n        var btn = this.dialogObj.btnObj[0];\n        this.itemsCnt = data.length;\n        if (data.length) {\n            var selectAllValue = this.getLocalizedLabel('SelectAll');\n            var checkBox = this.createCheckbox(selectAllValue, false, (_a = {}, _a[this.options.field] = selectAllValue, _a));\n            var selectAll = createCboxWithWrap(getUid('cbox'), checkBox, 'e-ftrchk');\n            selectAll.querySelector('.e-frame').classList.add('e-selectall');\n            cBoxes.appendChild(selectAll);\n            var predicate = new Predicate('field', 'equal', this.options.field);\n            if (this.options.foreignKeyValue) {\n                predicate = predicate.or('field', 'equal', this.options.foreignKeyValue);\n            }\n            var isColFiltered = new DataManager(this.options.filteredColumns).executeLocal(new Query().where(predicate)).length;\n            for (var i = 0; i < data.length; i++) {\n                var uid = getUid('cbox');\n                this.values[uid] = getValue('ejValue', data[i]);\n                var value = this.valueFormatter.toView(getValue(this.options.field, data[i]), this.options.formatFn);\n                var checkbox = this.createCheckbox(value, this.getCheckedState(isColFiltered, this.values[uid]), getValue('dataObj', data[i]));\n                cBoxes.appendChild(createCboxWithWrap(uid, checkbox, 'e-ftrchk'));\n            }\n            this.cBox.innerHTML = cBoxes.innerHTML;\n            this.updateIndeterminatenBtn();\n            btn.disabled = false;\n        }\n        else {\n            cBoxes.appendChild(this.parent.createElement('span', { innerHTML: this.getLocalizedLabel('NoResult') }));\n            this.cBox.innerHTML = cBoxes.innerHTML;\n            btn.disabled = true;\n        }\n        this.filterState = !btn.disabled;\n        btn.dataBind();\n        var args = { requestType: events.filterChoiceRequest, filterModel: this, dataSource: data };\n        this.parent.trigger(events.actionComplete, args);\n        hideSpinner(this.spinner);\n        var _a;\n    };\n    CheckBoxFilter.prototype.getCheckedState = function (isColFiltered, value) {\n        if (!this.isFiltered || !isColFiltered) {\n            return true;\n        }\n        else {\n            return this.result[value];\n        }\n    };\n    CheckBoxFilter.getDistinct = function (json, field, column, foreignKeyData) {\n        var len = json.length;\n        var result = [];\n        var value;\n        var ejValue = 'ejValue';\n        var lookup = {};\n        var isForeignKey = column && column.isForeignColumn();\n        while (len--) {\n            value = json[len];\n            value = getValue(field, value); //local remote diff, check with mdu           \n            if (!isNullOrUndefined(value)) {\n                if (!(value in lookup)) {\n                    var obj = {};\n                    obj[ejValue] = value;\n                    lookup[value] = true;\n                    if (isForeignKey) {\n                        var foreignDataObj = getForeignData(column, {}, value, foreignKeyData)[0];\n                        setValue(events.foreignKeyData, foreignDataObj, json[len]);\n                        value = getValue(column.foreignKeyValue, foreignDataObj);\n                    }\n                    setValue(field, isNullOrUndefined(value) ? null : value, obj);\n                    setValue('dataObj', json[len], obj);\n                    result.push(obj);\n                }\n            }\n        }\n        return DataUtil.group(DataUtil.sort(result, field, DataUtil.fnAscending), 'ejValue');\n    };\n    CheckBoxFilter.getPredicate = function (columns) {\n        var cols = DataUtil.distinct(columns, 'field', true) || [];\n        var collection = [];\n        var pred = {};\n        for (var i = 0; i < cols.length; i++) {\n            collection = new DataManager(columns).executeLocal(new Query().where('field', 'equal', cols[i].field));\n            if (collection.length !== 0) {\n                pred[cols[i].field] = CheckBoxFilter.generatePredicate(collection);\n            }\n        }\n        return pred;\n    };\n    CheckBoxFilter.generatePredicate = function (cols) {\n        var len = cols ? cols.length : 0;\n        var predicate;\n        var first;\n        first = CheckBoxFilter.updateDateFilter(cols[0]);\n        first.ignoreAccent = !isNullOrUndefined(first.ignoreAccent) ? first.ignoreAccent : false;\n        if (first.type === 'date' || first.type === 'datetime') {\n            predicate = getDatePredicate(first, first.type);\n        }\n        else {\n            predicate = first.ejpredicate ? first.ejpredicate :\n                new Predicate(first.field, first.operator, first.value, !CheckBoxFilter.getCaseValue(first), first.ignoreAccent);\n        }\n        for (var p = 1; p < len; p++) {\n            cols[p] = CheckBoxFilter.updateDateFilter(cols[p]);\n            if (len > 2 && p > 1 && cols[p].predicate === 'or') {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate.predicates.push(getDatePredicate(cols[p], cols[p].type));\n                }\n                else {\n                    predicate.predicates.push(new Predicate(cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilter.getCaseValue(cols[p]), cols[p].ignoreAccent));\n                }\n            }\n            else {\n                if (cols[p].type === 'date' || cols[p].type === 'datetime') {\n                    predicate = predicate[(cols[p].predicate)](getDatePredicate(cols[p], cols[p].type), cols[p].ignoreAccent);\n                }\n                else {\n                    predicate = cols[p].ejpredicate ?\n                        predicate[cols[p].predicate](cols[p].ejpredicate) :\n                        predicate[(cols[p].predicate)](cols[p].field, cols[p].operator, cols[p].value, !CheckBoxFilter.getCaseValue(cols[p]), cols[p].ignoreAccent);\n                }\n            }\n        }\n        return predicate || null;\n    };\n    CheckBoxFilter.getCaseValue = function (filter) {\n        if (isNullOrUndefined(filter.matchCase)) {\n            return true;\n        }\n        else {\n            return filter.matchCase;\n        }\n    };\n    CheckBoxFilter.updateDateFilter = function (filter) {\n        if ((filter.type === 'date' || filter.type === 'datetime' || filter.value instanceof Date)) {\n            filter.type = filter.type || 'date';\n        }\n        return filter;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    CheckBoxFilter.prototype.getModuleName = function () {\n        return 'checkboxFilter';\n    };\n    return CheckBoxFilter;\n}());\nexport { CheckBoxFilter };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate, Deferred, UrlAdaptor } from '@syncfusion/ej2-data';\nimport { setFormatter, getDatePredicate, getColumnByForeignKeyValue } from '../base/util';\nimport * as events from '../base/constant';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\n/**\n * Grid data module is used to generate query and data source.\n * @hidden\n */\nvar Data = /** @class */ (function () {\n    /**\n     * Constructor for data module.\n     * @hidden\n     */\n    function Data(parent, serviceLocator) {\n        this.dataState = { isPending: false, resolver: null, group: [] };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.initDataManager();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.rowsAdded, this.addRows, this);\n        this.parent.on(events.rowsRemoved, this.removeRows, this);\n        this.parent.on(events.dataSourceModified, this.initDataManager, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.updateData, this.crudActions, this);\n        this.parent.on(events.addDeleteAction, this.getData, this);\n    }\n    /**\n     * The function used to initialize dataManager and external query\n     * @return {void}\n     */\n    Data.prototype.initDataManager = function () {\n        var gObj = this.parent;\n        this.dataManager = gObj.dataSource instanceof DataManager ? gObj.dataSource :\n            (isNullOrUndefined(gObj.dataSource) ? new DataManager() : new DataManager(gObj.dataSource));\n        gObj.query = gObj.query instanceof Query ? gObj.query : new Query();\n    };\n    /**\n     * The function is used to generate updated Query from Grid model.\n     * @return {Query}\n     * @hidden\n     */\n    Data.prototype.generateQuery = function (skipPage) {\n        var gObj = this.parent;\n        var query = gObj.query.clone();\n        if (this.parent.columnQueryMode === 'ExcludeHidden') {\n            query.select(this.parent.getColumns().filter(function (column) { return !(column.isPrimaryKey !== true && column.visible === false || column.field === undefined); }).map(function (column) { return column.field; }));\n        }\n        else if (this.parent.columnQueryMode === 'Schema') {\n            var selectQueryFields = [];\n            var columns = this.parent.columns;\n            for (var i = 0; i < columns.length; i++) {\n                selectQueryFields.push(columns[i].field);\n            }\n            query.select(selectQueryFields);\n        }\n        this.filterQuery(query);\n        this.searchQuery(query);\n        this.aggregateQuery(query);\n        this.sortQuery(query);\n        this.pageQuery(query, skipPage);\n        this.groupQuery(query);\n        return query;\n    };\n    Data.prototype.aggregateQuery = function (query, isForeign) {\n        this.parent.aggregates.forEach(function (row) {\n            row.columns.forEach(function (column) {\n                var types = column.type instanceof Array ? column.type : [column.type];\n                types.forEach(function (type) { return query.aggregate(type.toLowerCase(), column.field); });\n            });\n        });\n        return query;\n    };\n    Data.prototype.pageQuery = function (query, skipPage) {\n        var gObj = this.parent;\n        if ((gObj.allowPaging || gObj.enableVirtualization) && skipPage !== true) {\n            gObj.pageSettings.currentPage = Math.max(1, gObj.pageSettings.currentPage);\n            if (gObj.pageSettings.pageCount <= 0) {\n                gObj.pageSettings.pageCount = 8;\n            }\n            if (gObj.pageSettings.pageSize <= 0) {\n                gObj.pageSettings.pageSize = 12;\n            }\n            query.page(gObj.pageSettings.currentPage, gObj.pageSettings.pageSize);\n        }\n        return query;\n    };\n    Data.prototype.groupQuery = function (query) {\n        var gObj = this.parent;\n        if (gObj.allowGrouping && gObj.groupSettings.columns.length) {\n            var columns = gObj.groupSettings.columns;\n            for (var i = 0, len = columns.length; i < len; i++) {\n                var column = this.getColumnByField(columns[i]);\n                var isGrpFmt = column.enableGroupByFormat;\n                var format = column.format;\n                if (isGrpFmt) {\n                    query.group(columns[i], this.formatGroupColumn.bind(this), format);\n                }\n                else {\n                    query.group(columns[i], null);\n                }\n            }\n        }\n        return query;\n    };\n    Data.prototype.sortQuery = function (query) {\n        var gObj = this.parent;\n        if ((gObj.allowSorting || gObj.allowGrouping) && gObj.sortSettings.columns.length) {\n            var columns = gObj.sortSettings.columns;\n            var sortGrp = [];\n            for (var i = columns.length - 1; i > -1; i--) {\n                var col = this.getColumnByField(columns[i].field);\n                if (col) {\n                    col.setSortDirection(columns[i].direction);\n                }\n                var fn = col.sortComparer && !this.isRemote() ? col.sortComparer.bind(col) :\n                    columns[i].direction;\n                if (gObj.groupSettings.columns.indexOf(columns[i].field) === -1) {\n                    query.sortBy(col.field, fn);\n                }\n                else {\n                    sortGrp.push({ direction: fn, field: col.field });\n                }\n            }\n            for (var i = 0, len = sortGrp.length; i < len; i++) {\n                query.sortBy(sortGrp[i].field, sortGrp[i].direction);\n            }\n        }\n        return query;\n    };\n    Data.prototype.searchQuery = function (query) {\n        var _this = this;\n        var sSettings = this.parent.searchSettings;\n        var fields = sSettings.fields.length ? sSettings.fields : this.parent.getColumns().map(function (f) { return f.field; });\n        var predicateList = [];\n        var needForeignKeySearch = false;\n        if (this.parent.searchSettings.key.length) {\n            needForeignKeySearch = this.parent.getForeignKeyColumns().some(function (col) { return fields.indexOf(col.field) > -1; });\n            if (needForeignKeySearch && !(this.dataManager.adaptor.getModulename &&\n                this.dataManager.adaptor.getModulename() === 'ODataV4Adaptor')) {\n                fields.forEach(function (columnName) {\n                    var column = _this.getColumnByField(columnName);\n                    if (column.isForeignColumn()) {\n                        predicateList = _this.fGeneratePredicate(column, predicateList);\n                    }\n                    else {\n                        predicateList.push(new Predicate(column.field, sSettings.operator, sSettings.key, sSettings.ignoreCase, sSettings.ignoreAccent));\n                    }\n                });\n                query.where(Predicate.or(predicateList));\n            }\n            else {\n                query.search(sSettings.key, fields, sSettings.operator, sSettings.ignoreCase, sSettings.ignoreAccent);\n            }\n        }\n        return query;\n    };\n    Data.prototype.filterQuery = function (query, column, skipFoerign) {\n        var gObj = this.parent;\n        var predicateList = [];\n        var fPredicate = {};\n        var actualFilter = [];\n        var foreignColumn = this.parent.getForeignKeyColumns();\n        if (gObj.allowFiltering && gObj.filterSettings.columns.length) {\n            var columns = column ? column : gObj.filterSettings.columns;\n            var colType = {};\n            for (var _i = 0, _a = gObj.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                colType[col.field] = col.filter.type ? col.filter.type : gObj.filterSettings.type;\n            }\n            var checkBoxCols = [];\n            var defaultFltrCols = [];\n            for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n                var col = columns_1[_b];\n                if (colType[col.field] === 'CheckBox' || colType[col.field] === 'Excel') {\n                    checkBoxCols.push(col);\n                }\n                else {\n                    defaultFltrCols.push(col);\n                }\n            }\n            if (checkBoxCols.length) {\n                var excelPredicate = CheckBoxFilter.getPredicate(checkBoxCols);\n                for (var _c = 0, _d = Object.keys(excelPredicate); _c < _d.length; _c++) {\n                    var prop = _d[_c];\n                    var col = getColumnByForeignKeyValue(prop, foreignColumn);\n                    if (col && !skipFoerign) {\n                        predicateList = this.fGeneratePredicate(col, predicateList);\n                        actualFilter.push(col);\n                    }\n                    else {\n                        predicateList.push(excelPredicate[prop]);\n                    }\n                }\n            }\n            if (defaultFltrCols.length) {\n                for (var _e = 0, defaultFltrCols_1 = defaultFltrCols; _e < defaultFltrCols_1.length; _e++) {\n                    var col = defaultFltrCols_1[_e];\n                    var column_1 = this.getColumnByField(col.field) ||\n                        getColumnByForeignKeyValue(col.field, this.parent.getForeignKeyColumns());\n                    var sType = column_1.type;\n                    if (getColumnByForeignKeyValue(col.field, foreignColumn) && !skipFoerign) {\n                        actualFilter.push(col);\n                        predicateList = this.fGeneratePredicate(column_1, predicateList);\n                    }\n                    else {\n                        if (sType !== 'date' && sType !== 'datetime') {\n                            predicateList.push(new Predicate(col.field, col.operator, col.value, !col.matchCase, this.parent.filterSettings.ignoreAccent));\n                        }\n                        else {\n                            predicateList.push(getDatePredicate(col, sType));\n                        }\n                    }\n                }\n            }\n            if (predicateList.length) {\n                query.where(Predicate.and(predicateList));\n            }\n            else {\n                this.parent.notify(events.showEmptyGrid, {});\n            }\n        }\n        return query;\n    };\n    Data.prototype.fGeneratePredicate = function (col, predicateList) {\n        var fPredicate = {};\n        if (col) {\n            this.parent.notify(events.generateQuery, { predicate: fPredicate, column: col });\n            if (fPredicate.predicate.predicates.length) {\n                predicateList.push(fPredicate.predicate);\n            }\n        }\n        return predicateList;\n    };\n    /**\n     * The function is used to get dataManager promise by executing given Query.\n     * @param  {Query} query - Defines the query which will execute along with data processing.\n     * @return {Promise<Object>}\n     * @hidden\n     */\n    Data.prototype.getData = function (args, query) {\n        var _this = this;\n        if (args === void 0) { args = { requestType: '' }; }\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ?\n            args.foreignKeyData : this.parent.getPrimaryKeyFieldNames());\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            var def = this.eventPromise(args, query, key);\n            return def.promise;\n        }\n        else {\n            var crud = void 0;\n            switch (args.requestType) {\n                case 'delete':\n                    query = query ? query : this.generateQuery();\n                    var len = Object.keys(args.data).length;\n                    if (len === 1) {\n                        crud = this.dataManager.remove(key, args.data[0], query.fromTable, query);\n                    }\n                    else {\n                        var changes = {\n                            addedRecords: [],\n                            deletedRecords: [],\n                            changedRecords: []\n                        };\n                        changes.deletedRecords = args.data;\n                        crud = this.dataManager.saveChanges(changes, key, query.fromTable, query.requiresCount());\n                    }\n                    break;\n                case 'save':\n                    query = query ? query : this.generateQuery();\n                    args.index = isNullOrUndefined(args.index) ? 0 : args.index;\n                    crud = this.dataManager.insert(args.data, query.fromTable, query, args.index);\n                    break;\n            }\n            if (crud && !Array.isArray(crud) && !crud.hasOwnProperty('deletedRecords')) {\n                return crud.then(function (result) {\n                    return _this.insert(query, args);\n                });\n            }\n            else {\n                return this.insert(query, args);\n            }\n        }\n    };\n    Data.prototype.insert = function (query, args) {\n        if (args.requestType === 'save') {\n            this.parent.notify(events.recordAdded, args);\n        }\n        return this.executeQuery(query);\n    };\n    Data.prototype.executeQuery = function (query) {\n        var _this = this;\n        if (this.dataManager.ready) {\n            var deferred_1 = new Deferred();\n            var ready = this.dataManager.ready;\n            ready.then(function (e) {\n                _this.dataManager.executeQuery(query).then(function (result) {\n                    deferred_1.resolve(result);\n                });\n            }).catch(function (e) {\n                deferred_1.reject(e);\n            });\n            return deferred_1.promise;\n        }\n        else {\n            return this.dataManager.executeQuery(query);\n        }\n    };\n    Data.prototype.formatGroupColumn = function (value, field) {\n        var gObj = this.parent;\n        var serviceLocator = this.serviceLocator;\n        var column = this.getColumnByField(field);\n        var date = value;\n        if (!column.type) {\n            column.type = date.getDay ? (date.getHours() > 0 || date.getMinutes() > 0 ||\n                date.getSeconds() > 0 || date.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n        }\n        if (isNullOrUndefined(column.getFormatter())) {\n            setFormatter(serviceLocator, column);\n        }\n        var formatVal = ValueFormatter.prototype.toView(value, column.getFormatter());\n        return formatVal;\n    };\n    Data.prototype.crudActions = function (args) {\n        var query = this.generateQuery();\n        var promise = null;\n        var pr = 'promise';\n        var key = this.getKey(args.foreignKeyData &&\n            Object.keys(args.foreignKeyData).length ? args.foreignKeyData :\n            this.parent.getPrimaryKeyFieldNames());\n        if (this.parent.dataSource && 'result' in this.parent.dataSource) {\n            this.eventPromise(args, query, key);\n        }\n        switch (args.requestType) {\n            case 'save':\n                promise = this.dataManager.update(key, args.data, query.fromTable, query, args.previousData);\n                break;\n        }\n        args[pr] = promise;\n        this.parent.notify(events.crudAction, args);\n    };\n    /** @hidden */\n    Data.prototype.saveChanges = function (changes, key, original) {\n        var query = this.generateQuery().requiresCount();\n        if ('result' in this.parent.dataSource) {\n            var state = void 0;\n            state = this.getStateEventArgument(query);\n            var deff = new Deferred();\n            var args = {\n                requestType: 'batchsave', changes: changes, key: key, query: query,\n                endEdit: deff.resolve\n            };\n            this.setState({ isPending: true, resolver: deff.resolve });\n            this.parent.trigger(events.dataSourceChanged, args);\n            return deff.promise;\n        }\n        else {\n            var promise = this.dataManager.saveChanges(changes, key, query.fromTable, query, original);\n            return promise;\n        }\n    };\n    Data.prototype.getKey = function (keys) {\n        if (keys && keys.length) {\n            return keys[0];\n        }\n        return undefined;\n    };\n    /** @hidden */\n    Data.prototype.isRemote = function () {\n        return this.dataManager.dataSource.offline !== true && this.dataManager.dataSource.url !== undefined;\n    };\n    Data.prototype.addRows = function (e) {\n        for (var i = e.records.length; i > 0; i--) {\n            this.dataManager.dataSource.json.splice(e.toIndex, 0, e.records[i - 1]);\n        }\n    };\n    Data.prototype.removeRows = function (e) {\n        var json = this.dataManager.dataSource.json;\n        this.dataManager.dataSource.json = json.filter(function (value, index) { return e.records.indexOf(value) === -1; });\n    };\n    Data.prototype.getColumnByField = function (field) {\n        var col;\n        return (this.parent.columnModel).some(function (column) {\n            col = column;\n            return column.field === field;\n        }) && col;\n    };\n    Data.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.rowsAdded, this.addRows);\n        this.parent.off(events.rowsRemoved, this.removeRows);\n        this.parent.off(events.dataSourceModified, this.initDataManager);\n        this.parent.off(events.dataSourceModified, this.destroy);\n        this.parent.off(events.updateData, this.crudActions);\n        this.parent.off(events.addDeleteAction, this.getData);\n    };\n    Data.prototype.getState = function () {\n        return this.dataState;\n    };\n    Data.prototype.setState = function (state) {\n        return this.dataState = state;\n    };\n    Data.prototype.getStateEventArgument = function (query) {\n        var adaptr = new UrlAdaptor();\n        var dm = new DataManager({ url: '', adaptor: new UrlAdaptor });\n        var state = adaptr.processQuery(dm, query);\n        var data = JSON.parse(state.data);\n        return extend(data, state.pvtData);\n    };\n    Data.prototype.eventPromise = function (args, query, key) {\n        var _this = this;\n        var state;\n        var dataArgs = args;\n        state = this.getStateEventArgument(query);\n        var def = new Deferred();\n        var deff = new Deferred();\n        if (args.requestType !== undefined && this.dataState.isDataChanged !== false) {\n            state.action = args;\n            if (args.requestType === 'save' || args.requestType === 'delete') {\n                var editArgs = args;\n                editArgs.key = key;\n                editArgs.state = state;\n                this.setState({ isPending: true, resolver: deff.resolve });\n                dataArgs.endEdit = deff.resolve;\n                this.parent.trigger(events.dataSourceChanged, editArgs);\n                deff.promise.then(function (e) {\n                    _this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                    _this.parent.trigger(events.dataStateChange, state);\n                });\n            }\n            else {\n                this.setState({ isPending: true, resolver: def.resolve, group: state.group, aggregates: state.aggregates });\n                this.parent.trigger(events.dataStateChange, state);\n            }\n        }\n        else {\n            this.setState({});\n            def.resolve(this.parent.dataSource);\n        }\n        return def;\n    };\n    return Data;\n}());\nexport { Data };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Row\n * @hidden\n */\nvar Row = /** @class */ (function () {\n    function Row(options) {\n        merge(this, options);\n    }\n    Row.prototype.clone = function () {\n        var row = new Row({});\n        merge(row, this);\n        row.cells = this.cells.map(function (cell) { return cell.clone(); });\n        return row;\n    };\n    return Row;\n}());\nexport { Row };\n","import { merge } from '@syncfusion/ej2-base';\n/**\n * Cell\n * @hidden\n */\nvar Cell = /** @class */ (function () {\n    function Cell(options) {\n        this.isSpanned = false;\n        merge(this, options);\n    }\n    Cell.prototype.clone = function () {\n        var cell = new Cell({});\n        merge(cell, this);\n        return cell;\n    };\n    return Cell;\n}());\nexport { Cell };\n","import { isNullOrUndefined, attributes } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject } from '../base/util';\nimport { CellType } from '../base/enum';\n/**\n * `CellMergeRender` module.\n * @hidden\n */\nvar CellMergeRender = /** @class */ (function () {\n    function CellMergeRender(serviceLocator, parent) {\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n    }\n    CellMergeRender.prototype.render = function (cellArgs, row, i, td) {\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n        var span = row.cells[i].cellSpan ? row.cells[i].cellSpan :\n            (cellArgs.colSpan + i) <= row.cells.length ? cellArgs.colSpan : row.cells.length - i;\n        var visible = 0;\n        for (var j = i + 1; j < i + span && j < row.cells.length; j++) {\n            if (row.cells[j].visible === false) {\n                visible++;\n            }\n            else {\n                row.cells[j].isSpanned = true;\n            }\n        }\n        if (visible > 0) {\n            for (var j = i + span; j < i + span + visible && j < row.cells.length; j++) {\n                row.cells[j].isSpanned = true;\n            }\n            if (i + span + visible >= row.cells.length) {\n                span -= (i + span + visible) - row.cells.length;\n            }\n        }\n        if (row.cells[i].cellSpan) {\n            row.data[cellArgs.column.field] = row.cells[i].spanText;\n            td = cellRenderer.render(row.cells[i], row.data, { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' });\n        }\n        if (span > 1) {\n            attributes(td, { 'colSpan': span.toString(), 'aria-colSpan': span.toString() });\n        }\n        if (this.parent.enableColumnVirtualization && !row.cells[i].cellSpan &&\n            !this.containsKey(cellArgs.column.field, cellArgs.data[cellArgs.column.field])) {\n            this.backupMergeCells(cellArgs.column.field, cellArgs.data[cellArgs.column.field], cellArgs.colSpan);\n        }\n        return td;\n    };\n    CellMergeRender.prototype.backupMergeCells = function (fName, data, span) {\n        this.setMergeCells(this.generteKey(fName, data), span);\n    };\n    CellMergeRender.prototype.generteKey = function (fname, data) {\n        return fname + '__' + data.toString();\n    };\n    CellMergeRender.prototype.splitKey = function (key) {\n        return key.split('__');\n    };\n    CellMergeRender.prototype.containsKey = function (fname, data) {\n        return this.getMergeCells().hasOwnProperty(this.generteKey(fname, data));\n    };\n    CellMergeRender.prototype.getMergeCells = function () {\n        return this.parent.mergeCells;\n    };\n    CellMergeRender.prototype.setMergeCells = function (key, span) {\n        this.parent.mergeCells[key] = span;\n    };\n    CellMergeRender.prototype.updateVirtualCells = function (rows) {\n        var mCells = this.getMergeCells();\n        for (var _i = 0, _a = Object.keys(mCells); _i < _a.length; _i++) {\n            var key = _a[_i];\n            var value = mCells[key];\n            var merge = this.splitKey(key);\n            var columnIndex = this.getIndexFromAllColumns(merge[0]);\n            var vColumnIndices = this.parent.getColumnIndexesInView();\n            var span = value - (vColumnIndices[0] - columnIndex);\n            if (columnIndex < vColumnIndices[0] && span > 1) {\n                for (var _b = 0, rows_1 = rows; _b < rows_1.length; _b++) {\n                    var row = rows_1[_b];\n                    if (row.data[merge[0]].toString() === merge[1].toString()) {\n                        row.cells[0].cellSpan = span;\n                        row.cells[0].spanText = merge[1];\n                        break;\n                    }\n                }\n            }\n        }\n        return rows;\n    };\n    CellMergeRender.prototype.getIndexFromAllColumns = function (field) {\n        var index = iterateArrayOrObject(this.parent.getVisibleColumns(), function (item, index) {\n            if (item.field === field) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return index;\n    };\n    return CellMergeRender;\n}());\nexport { CellMergeRender };\n","import { isNullOrUndefined, extend, getValue, addClass } from '@syncfusion/ej2-base';\nimport { attributes as addAttributes } from '@syncfusion/ej2-base';\nimport { rowDataBound, queryCellInfo } from '../base/constant';\nimport { setStyleAndAttributes } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { CellMergeRender } from './cell-merge-renderer';\n/**\n * RowRenderer class which responsible for building row content.\n * @hidden\n */\nvar RowRenderer = /** @class */ (function () {\n    function RowRenderer(serviceLocator, cellType, parent) {\n        this.cellType = cellType;\n        this.serviceLocator = serviceLocator;\n        this.parent = parent;\n        this.element = this.parent.createElement('tr', { attrs: { role: 'row' } });\n    }\n    /**\n     * Function to render the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.render = function (row, columns, attributes, rowTemplate, cloneNode) {\n        return this.refreshRow(row, columns, attributes, rowTemplate, cloneNode);\n    };\n    /**\n     * Function to refresh the row content based on Column[] and data.\n     * @param  {Column[]} columns\n     * @param  {Object} data?\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {string} rowTemplate?\n     */\n    RowRenderer.prototype.refresh = function (row, columns, isChanged, attributes, rowTemplate) {\n        if (isChanged) {\n            row.data = extend({}, row.changes);\n            this.refreshMergeCells(row);\n        }\n        var node = this.parent.element.querySelector('[data-uid=' + row.uid + ']');\n        var tr = this.refreshRow(row, columns, attributes, rowTemplate);\n        var cells = [].slice.call(tr.cells);\n        node.innerHTML = '';\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var cell = cells_1[_i];\n            node.appendChild(cell);\n        }\n    };\n    RowRenderer.prototype.refreshRow = function (row, columns, attributes, rowTemplate, cloneNode) {\n        var tr = !isNullOrUndefined(cloneNode) ? cloneNode : this.element.cloneNode();\n        var rowArgs = { data: row.data };\n        var cellArgs = { data: row.data };\n        var attrCopy = extend({}, attributes, {});\n        var chekBoxEnable = this.parent.getColumns().filter(function (col) { return col.type === 'checkbox' && col.field; })[0];\n        var value = false;\n        if (chekBoxEnable) {\n            value = getValue(chekBoxEnable.field, rowArgs.data);\n        }\n        if (row.isDataRow) {\n            row.isSelected = this.parent.getSelectedRowIndexes().indexOf(row.index) > -1 || value;\n        }\n        if (row.isDataRow && this.parent.isCheckBoxSelection\n            && this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            row.isSelected = true;\n            if (this.parent.getSelectedRowIndexes().indexOf(row.index) === -1) {\n                this.parent.getSelectedRowIndexes().push(row.index);\n            }\n        }\n        this.buildAttributeFromRow(tr, row);\n        addAttributes(tr, attrCopy);\n        setStyleAndAttributes(tr, row.attributes);\n        var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n        for (var i = 0, len = row.cells.length; i < len; i++) {\n            var cell = row.cells[i];\n            cell.isSelected = row.isSelected;\n            var cellRenderer = cellRendererFact.getCellRenderer(row.cells[i].cellType || CellType.Data);\n            var attrs = { 'index': !isNullOrUndefined(row.index) ? row.index.toString() : '' };\n            if (row.isExpand && row.cells[i].cellType === CellType.DetailExpand) {\n                attrs['class'] = 'e-detailrowexpand';\n            }\n            var td = cellRenderer.render(row.cells[i], row.data, attrs);\n            if (row.cells[i].cellType !== CellType.Filter) {\n                if (row.cells[i].cellType === CellType.Data || row.cells[i].cellType === CellType.CommandColumn) {\n                    this.parent.trigger(queryCellInfo, extend(cellArgs, {\n                        cell: td, column: cell.column, colSpan: 1,\n                        foreignKeyData: row.cells[i].foreignKeyData\n                    }));\n                    if (cellArgs.colSpan > 1 || row.cells[i].cellSpan > 1) {\n                        var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);\n                        td = cellMerge.render(cellArgs, row, i, td);\n                    }\n                }\n                if (!row.cells[i].isSpanned) {\n                    tr.appendChild(td);\n                }\n            }\n        }\n        var args = { row: tr, rowHeight: this.parent.rowHeight };\n        if (row.isDataRow) {\n            this.parent.trigger(rowDataBound, extend(rowArgs, args));\n        }\n        if (this.parent.enableVirtualization) {\n            rowArgs.rowHeight = this.parent.rowHeight;\n        }\n        if (rowArgs.rowHeight) {\n            tr.style.height = rowArgs.rowHeight + 'px';\n        }\n        else if (this.parent.rowHeight && tr.querySelector('.e-headercell')) {\n            tr.style.height = this.parent.rowHeight + 'px';\n        }\n        if (row.cssClass) {\n            tr.classList.add(row.cssClass);\n        }\n        if (this.parent.element.scrollHeight > this.parent.height && this.parent.aggregates.length) {\n            for (var i = 0; i < this.parent.aggregates.length; i++) {\n                var property = 'properties';\n                var column = 'columns';\n                if (this.parent.aggregates[i][property][column][0].footerTemplate) {\n                    var summarycell = tr.querySelectorAll('.e-summarycell');\n                    if (summarycell.length) {\n                        var lastSummaryCell = (summarycell[summarycell.length - 1]);\n                        addClass([lastSummaryCell], ['e-lastsummarycell']);\n                    }\n                }\n            }\n        }\n        return tr;\n    };\n    RowRenderer.prototype.refreshMergeCells = function (row) {\n        for (var _i = 0, _a = row.cells; _i < _a.length; _i++) {\n            var cell = _a[_i];\n            cell.isSpanned = false;\n        }\n        return row;\n    };\n    /**\n     * Function to check and add alternative row css class.\n     * @param  {Element} tr\n     * @param  {{[x:string]:Object}} attr\n     */\n    RowRenderer.prototype.buildAttributeFromRow = function (tr, row) {\n        var attr = {};\n        var prop = { 'rowindex': 'aria-rowindex', 'dataUID': 'data-uid', 'ariaSelected': 'aria-selected' };\n        var classes = [];\n        if (row.isDataRow) {\n            classes.push('e-row');\n        }\n        if (row.isAltRow) {\n            classes.push('e-altrow');\n        }\n        if (!isNullOrUndefined(row.index)) {\n            attr[prop.rowindex] = row.index;\n        }\n        if (row.rowSpan) {\n            attr.rowSpan = row.rowSpan;\n        }\n        if (row.uid) {\n            attr[prop.dataUID] = row.uid;\n        }\n        if (row.isSelected) {\n            attr[prop.ariaSelected] = true;\n        }\n        if (row.visible === false) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(tr, attr);\n    };\n    return RowRenderer;\n}());\nexport { RowRenderer };\n","import { isNullOrUndefined, getValue, setValue } from '@syncfusion/ej2-base';\nimport { Row } from '../models/row';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\nimport { getUid } from '../base/util';\nimport { getForeignData } from '../../grid/base/util';\n/**\n * RowModelGenerator is used to generate grid data rows.\n * @hidden\n */\nvar RowModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function RowModelGenerator(parent) {\n        this.parent = parent;\n    }\n    RowModelGenerator.prototype.generateRows = function (data, args) {\n        var rows = [];\n        var startIndex = this.parent.enableVirtualization ? args.startIndex : 0;\n        for (var i = 0, len = Object.keys(data).length; i < len; i++, startIndex++) {\n            rows[i] = this.generateRow(data[i], startIndex);\n        }\n        return rows;\n    };\n    RowModelGenerator.prototype.ensureColumns = function () {\n        //TODO: generate dummy column for group, detail here;\n        var cols = [];\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cols.push(this.generateCell({}, null, CellType.DetailExpand));\n        }\n        return cols;\n    };\n    RowModelGenerator.prototype.generateRow = function (data, index, cssClass, indent) {\n        var options = {};\n        options.foreignKeyData = {};\n        options.uid = getUid('grid-row');\n        options.data = data;\n        options.index = index;\n        options.indent = indent;\n        options.isDataRow = true;\n        options.isExpand = false;\n        options.cssClass = cssClass;\n        options.isAltRow = this.parent.enableAltRow ? index % 2 !== 0 : false;\n        options.isSelected = this.parent.getSelectedRowIndexes().indexOf(index) > -1;\n        this.refreshForeignKeyRow(options);\n        var cells = this.ensureColumns();\n        var row = new Row(options);\n        row.cells = cells.concat(this.generateCells(options));\n        return row;\n    };\n    RowModelGenerator.prototype.refreshForeignKeyRow = function (options) {\n        this.parent.getForeignKeyColumns().forEach(function (col) {\n            setValue(col.field, getForeignData(col, options.data), options.foreignKeyData);\n        });\n    };\n    RowModelGenerator.prototype.generateCells = function (options) {\n        var _this = this;\n        var dummies = this.parent.getColumns();\n        var tmp = [];\n        dummies.forEach(function (dummy, index) {\n            return tmp.push(_this.generateCell(dummy, options.uid, isNullOrUndefined(dummy.commands) ? undefined : CellType.CommandColumn, null, index, options.foreignKeyData));\n        });\n        return tmp;\n    };\n    RowModelGenerator.prototype.generateCell = function (column, rowId, cellType, colSpan, oIndex, foreignKeyData) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(column.field || column.template),\n            'isTemplate': !isNullOrUndefined(column.template),\n            'rowID': rowId,\n            'column': column,\n            'cellType': !isNullOrUndefined(cellType) ? cellType : CellType.Data,\n            'colSpan': colSpan,\n            'commands': column.commands,\n            'isForeignKey': column.isForeignColumn && column.isForeignColumn(),\n            'foreignKeyData': column.isForeignColumn && column.isForeignColumn() && getValue(column.field, foreignKeyData)\n        };\n        if (opt.isDataCell || opt.column.type === 'checkbox') {\n            opt.index = oIndex;\n        }\n        return new Cell(opt);\n    };\n    RowModelGenerator.prototype.refreshRows = function (input) {\n        var _this = this;\n        input.forEach(function (row) {\n            _this.refreshForeignKeyRow(row);\n            row.cells = _this.generateCells(row);\n        });\n        return input;\n    };\n    return RowModelGenerator;\n}());\nexport { RowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { Column } from '../models/column';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { calculateAggregate } from '../base/util';\nimport { CellType } from '../base/enum';\nimport { Cell } from '../models/cell';\n/**\n * Summary row model generator\n * @hidden\n */\nvar SummaryModelGenerator = /** @class */ (function () {\n    /**\n     * Constructor for Summary row model generator\n     */\n    function SummaryModelGenerator(parent) {\n        this.parent = parent;\n    }\n    SummaryModelGenerator.prototype.getData = function () {\n        var _this = this;\n        var rows = [];\n        this.parent.aggregates.slice().forEach(function (row) {\n            var columns = row.columns.filter(function (column) {\n                return !(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)\n                    || _this.columnSelector(column);\n            });\n            if (columns.length) {\n                rows.push({ columns: columns });\n            }\n        });\n        return rows;\n    };\n    SummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.footerTemplate !== undefined;\n    };\n    SummaryModelGenerator.prototype.getColumns = function (start, end) {\n        var columns = [];\n        if (this.parent.allowGrouping) {\n            this.parent.groupSettings.columns.forEach(function (value) { return columns.push(new Column({})); });\n        }\n        if (this.parent.detailTemplate || !isNullOrUndefined(this.parent.childGrid)) {\n            columns.push(new Column({}));\n        }\n        columns.push.apply(columns, this.parent.getColumns());\n        return isNullOrUndefined(start) ? columns : columns.slice(start, end);\n    };\n    SummaryModelGenerator.prototype.generateRows = function (input, args, start, end) {\n        var _this = this;\n        if (this.parent.currentViewData.length === 0) {\n            return [];\n        }\n        var data = this.buildSummaryData(input, args);\n        var rows = [];\n        this.getData().forEach(function (row, index) {\n            rows.push(_this.getGeneratedRow(row, data[index], args ? args.level : undefined, start, end));\n        });\n        return rows;\n    };\n    SummaryModelGenerator.prototype.getGeneratedRow = function (summaryRow, data, raw, start, end) {\n        var _this = this;\n        var tmp = [];\n        var indents = this.getIndentByLevel(raw);\n        var isDetailGridAlone = !isNullOrUndefined(this.parent.childGrid);\n        var indentLength = this.parent.groupSettings.columns.length + (this.parent.detailTemplate ||\n            !isNullOrUndefined(this.parent.childGrid) ? 1 : 0);\n        this.getColumns(start, end).forEach(function (value, index) { return tmp.push(_this.getGeneratedCell(value, summaryRow, index >= indentLength ? _this.getCellType() : CellType.Indent, indents[index], isDetailGridAlone)); });\n        var row = new Row({ data: data, attributes: { class: 'e-summaryrow' } });\n        row.cells = tmp;\n        row.visible = tmp.some(function (cell) { return cell.isDataCell && cell.visible; });\n        return row;\n    };\n    SummaryModelGenerator.prototype.getGeneratedCell = function (column, summaryRow, cellType, indent, isDetailGridAlone) {\n        //Get the summary column by display\n        var sColumn = summaryRow.columns.filter(function (scolumn) { return scolumn.columnName === column.field; })[0];\n        var attrs = { 'style': { 'textAlign': column.textAlign } };\n        if (indent) {\n            attrs.class = indent;\n        }\n        if (isNullOrUndefined(indent) && isDetailGridAlone) {\n            attrs.class = 'e-detailindentcelltop';\n        }\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': !isNullOrUndefined(sColumn),\n            'isTemplate': sColumn && !isNullOrUndefined(sColumn.footerTemplate\n                || sColumn.groupFooterTemplate || sColumn.groupCaptionTemplate),\n            'column': sColumn || {},\n            'attributes': attrs,\n            'cellType': cellType\n        };\n        return new Cell(opt);\n    };\n    SummaryModelGenerator.prototype.buildSummaryData = function (data, args) {\n        var _this = this;\n        var dummy = [];\n        var summaryRows = this.getData();\n        var single = {};\n        var key = '';\n        summaryRows.forEach(function (row) {\n            single = {};\n            row.columns.forEach(function (column) {\n                single = _this.setTemplate(column, (args && args.aggregates) ? args : data, single);\n            });\n            dummy.push(single);\n        });\n        return dummy;\n    };\n    SummaryModelGenerator.prototype.getIndentByLevel = function (data) {\n        return this.parent.groupSettings.columns.map(function () { return 'e-indentcelltop'; });\n    };\n    SummaryModelGenerator.prototype.setTemplate = function (column, data, single) {\n        var _this = this;\n        var types = column.type;\n        var helper = {};\n        var formatFn = column.getFormatter() || (function () { return function (a) { return a; }; })();\n        var group = data;\n        if (!(types instanceof Array)) {\n            types = [column.type];\n        }\n        types.forEach(function (type) {\n            var key = column.field + ' - ' + type.toLowerCase();\n            var disp = column.columnName;\n            var val = type !== 'Custom' && group.aggregates && key in group.aggregates ? group.aggregates[key] :\n                calculateAggregate(type, group.aggregates ? group : data, column, _this.parent);\n            single[disp] = single[disp] || {};\n            single[disp][key] = val;\n            single[disp][type] = !isNullOrUndefined(val) ? formatFn(val) : ' ';\n            if (group.field) {\n                single[disp].field = group.field;\n                single[disp].key = group.key;\n            }\n        });\n        helper.format = column.getFormatter();\n        column.setTemplate(helper);\n        return single;\n    };\n    SummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.Summary;\n    };\n    return SummaryModelGenerator;\n}());\nexport { SummaryModelGenerator };\nvar GroupSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupSummaryModelGenerator, _super);\n    function GroupSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    GroupSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupFooterTemplate !== undefined;\n    };\n    GroupSummaryModelGenerator.prototype.getIndentByLevel = function (level) {\n        if (level === void 0) { level = this.parent.groupSettings.columns.length; }\n        return this.parent.groupSettings.columns.map(function (v, indx) { return indx <= level - 1 ? '' : 'e-indentcelltop'; });\n    };\n    GroupSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.GroupSummary;\n    };\n    return GroupSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { GroupSummaryModelGenerator };\nvar CaptionSummaryModelGenerator = /** @class */ (function (_super) {\n    __extends(CaptionSummaryModelGenerator, _super);\n    function CaptionSummaryModelGenerator() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CaptionSummaryModelGenerator.prototype.columnSelector = function (column) {\n        return column.groupCaptionTemplate !== undefined;\n    };\n    CaptionSummaryModelGenerator.prototype.getData = function () {\n        var initVal = { columns: [] };\n        return [_super.prototype.getData.call(this).reduce(function (prev, cur) {\n                prev.columns = prev.columns.concat(cur.columns);\n                return prev;\n            }, initVal)];\n    };\n    CaptionSummaryModelGenerator.prototype.isEmpty = function () {\n        return (this.getData()[0].columns || []).length === 0;\n    };\n    CaptionSummaryModelGenerator.prototype.getCellType = function () {\n        return CellType.CaptionSummary;\n    };\n    return CaptionSummaryModelGenerator;\n}(SummaryModelGenerator));\nexport { CaptionSummaryModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Row } from '../models/row';\nimport { isNullOrUndefined, extend, setValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { getForeignData } from '../../grid/base/util';\n/**\n * GroupModelGenerator is used to generate group caption rows and data rows.\n * @hidden\n */\nvar GroupModelGenerator = /** @class */ (function (_super) {\n    __extends(GroupModelGenerator, _super);\n    function GroupModelGenerator(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.rows = [];\n        _this.index = 0;\n        _this.parent = parent;\n        _this.summaryModelGen = new GroupSummaryModelGenerator(parent);\n        _this.captionModelGen = new CaptionSummaryModelGenerator(parent);\n        return _this;\n    }\n    GroupModelGenerator.prototype.generateRows = function (data, args) {\n        if (this.parent.groupSettings.columns.length === 0) {\n            return _super.prototype.generateRows.call(this, data, args);\n        }\n        this.rows = [];\n        this.index = this.parent.enableVirtualization ? args.startIndex : 0;\n        for (var i = 0, len = data.length; i < len; i++) {\n            this.getGroupedRecords(0, data[i], data.level);\n        }\n        this.index = 0;\n        return this.rows;\n    };\n    GroupModelGenerator.prototype.getGroupedRecords = function (index, data, raw) {\n        var level = raw;\n        if (isNullOrUndefined(data.items)) {\n            if (isNullOrUndefined(data.GroupGuid)) {\n                this.rows = this.rows.concat(this.generateDataRows(data, index));\n            }\n            else {\n                for (var j = 0, len = data.length; j < len; j++) {\n                    this.getGroupedRecords(index, data[j], data.level);\n                }\n            }\n        }\n        else {\n            this.rows = this.rows.concat(this.generateCaptionRow(data, index));\n            if (data.items && data.items.length) {\n                this.getGroupedRecords(index + 1, data.items, data.items.level);\n            }\n            if (this.parent.aggregates.length) {\n                (_a = this.rows).push.apply(_a, this.summaryModelGen.generateRows(data, { level: level }));\n            }\n        }\n        var _a;\n    };\n    GroupModelGenerator.prototype.getCaptionRowCells = function (field, indent, data) {\n        var _this = this;\n        var cells = [];\n        var visibles = [];\n        var column = this.parent.getColumnByField(field);\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization) {\n            column = this.parent.columns.filter(function (c) { return c.field === field; })[0];\n        }\n        var groupedLen = this.parent.groupSettings.columns.length;\n        var gObj = this.parent;\n        if (!this.parent.enableColumnVirtualization || indexes.indexOf(indent) !== -1) {\n            for (var i = 0; i < indent; i++) {\n                cells.push(this.generateIndentCell());\n            }\n            cells.push(this.generateCell({}, null, CellType.Expand));\n        }\n        indent = this.parent.enableColumnVirtualization ? 1 :\n            (this.parent.getVisibleColumns().length + groupedLen + (gObj.detailTemplate || gObj.childGrid ? 1 : 0) -\n                indent + (this.parent.getVisibleColumns().length ? -1 : 0));\n        //Captionsummary cells will be added here.    \n        if (this.parent.aggregates.length && !this.captionModelGen.isEmpty()) {\n            var captionCells = this.captionModelGen.generateRows(data)[0];\n            extend(data, captionCells.data);\n            var cIndex_1 = 0;\n            captionCells.cells.some(function (cell, index) { cIndex_1 = index; return cell.visible && cell.isDataCell; });\n            visibles = captionCells.cells.slice(cIndex_1).filter(function (cell) { return cell.visible; });\n            if (captionCells.visible && visibles[0].column.field === this.parent.getVisibleColumns()[0].field) {\n                visibles = visibles.slice(1);\n            }\n            if (this.parent.getVisibleColumns().length === 1) {\n                visibles = [];\n            }\n            indent = indent - visibles.length;\n        }\n        var cols = (!this.parent.enableColumnVirtualization ? [column] : this.parent.getColumns());\n        var wFlag = true;\n        cols.forEach(function (col, index) {\n            var tmpFlag = wFlag && indexes.indexOf(indent) !== -1;\n            if (tmpFlag) {\n                wFlag = false;\n            }\n            var cellType = !_this.parent.enableColumnVirtualization || tmpFlag ?\n                CellType.GroupCaption : CellType.GroupCaptionEmpty;\n            indent = _this.parent.enableColumnVirtualization && cellType === CellType.GroupCaption ? indent + groupedLen : indent;\n            cells.push(_this.generateCell(column, null, cellType, indent));\n        });\n        cells.push.apply(cells, visibles);\n        return cells;\n    };\n    GroupModelGenerator.prototype.generateCaptionRow = function (data, indent) {\n        var options = {};\n        var tmp = [];\n        var col = this.parent.getColumnByField(data.field);\n        options.data = extend({}, data);\n        if (col) {\n            options.data.field = data.field;\n        }\n        options.isDataRow = false;\n        var row = new Row(options);\n        row.indent = indent;\n        this.getForeignKeyData(row);\n        row.cells = this.getCaptionRowCells(data.field, indent, row.data);\n        return row;\n    };\n    GroupModelGenerator.prototype.getForeignKeyData = function (row) {\n        var data = row.data;\n        var col = this.parent.getColumnByField(data.field);\n        if (col && col.isForeignColumn && col.isForeignColumn()) {\n            setValue('foreignKey', col.valueAccessor(col.foreignKeyValue, getForeignData(col, {}, data.key)[0], col), row.data);\n        }\n    };\n    GroupModelGenerator.prototype.generateDataRows = function (data, indent) {\n        var rows = [];\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = data.length; i < len; i++) {\n            rows[i] = this.generateRow(data[i], this.index, i ? undefined : 'e-firstchildrow', indent);\n            for (var j = 0; j < indent; j++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(indent) === -1) {\n                    continue;\n                }\n                rows[i].cells.unshift(this.generateIndentCell());\n            }\n            this.index++;\n        }\n        return rows;\n    };\n    GroupModelGenerator.prototype.generateIndentCell = function () {\n        return this.generateCell({}, null, CellType.Indent);\n    };\n    GroupModelGenerator.prototype.refreshRows = function (input) {\n        var _this = this;\n        var indexes = this.parent.getColumnIndexesInView();\n        input.forEach(function (row) {\n            if (row.isDataRow) {\n                row.cells = _this.generateCells(row);\n                for (var j = 0; j < row.indent; j++) {\n                    if (_this.parent.enableColumnVirtualization && indexes.indexOf(row.indent) === -1) {\n                        continue;\n                    }\n                    row.cells.unshift(_this.generateIndentCell());\n                }\n            }\n            else {\n                var cRow = _this.generateCaptionRow(row.data, row.indent);\n                row.cells = cRow.cells;\n            }\n        });\n        return input;\n    };\n    return GroupModelGenerator;\n}(RowModelGenerator));\nexport { GroupModelGenerator };\n","import { Droppable } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, remove } from '@syncfusion/ej2-base';\nimport { getUpdateUsingRaf, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from './row-renderer';\nimport { CellMergeRender } from './cell-merge-renderer';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\nimport { getScrollBarWidth } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar ContentRender = /** @class */ (function () {\n    /**\n     * Constructor for content renderer module\n     */\n    function ContentRender(parent, serviceLocator) {\n        var _this = this;\n        this.rows = [];\n        this.freezeRows = [];\n        this.movableRows = [];\n        this.isLoaded = true;\n        this.drop = function (e) {\n            _this.parent.notify(events.columnDrop, { target: e.target, droppedElement: e.droppedElement });\n            remove(e.droppedElement);\n        };\n        this.rafCallback = function (args) {\n            var arg = args;\n            return function () {\n                _this.ariaService.setBusy(_this.getPanel().firstChild, false);\n                if (_this.parent.isDestroyed) {\n                    return;\n                }\n                var rows = _this.rows.slice(0);\n                if (_this.parent.getFrozenColumns() !== 0) {\n                    rows = args.isFrozen ? _this.freezeRows : _this.movableRows;\n                }\n                _this.parent.notify(events.contentReady, { rows: rows, args: arg });\n                if (_this.isLoaded) {\n                    _this.parent.trigger(events.dataBound, {});\n                    if (_this.parent.allowTextWrap) {\n                        _this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                    }\n                }\n                if (arg) {\n                    var action = (arg.requestType || '').toLowerCase() + '-complete';\n                    _this.parent.notify(action, arg);\n                    if (args.requestType === 'batchsave') {\n                        args.cancel = false;\n                        _this.parent.trigger(events.actionComplete, args);\n                    }\n                }\n                if (_this.isLoaded) {\n                    _this.parent.hideSpinner();\n                }\n            };\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.generator = this.getModelGenerator();\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.colGroupRefresh, this.colGroupRefresh, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    }\n    /**\n     * The function is used to render grid content div\n     */\n    ContentRender.prototype.renderPanel = function () {\n        var gObj = this.parent;\n        var div = this.parent.createElement('div', { className: 'e-gridcontent' });\n        var innerDiv = this.parent.createElement('div', {\n            className: 'e-content'\n        });\n        this.ariaService.setOptions(innerDiv, { busy: false });\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        gObj.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid content table\n     */\n    ContentRender.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        contentDiv.appendChild(this.createContentTable('_content_table'));\n        this.setTable(contentDiv.querySelector('.e-table'));\n        this.ariaService.setOptions(this.getTable(), {\n            multiselectable: this.parent.selectionSettings.type === 'Multiple'\n        });\n        this.initializeContentDrop();\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().classList.add('e-frozenhdrcont');\n        }\n    };\n    /**\n     * The function is used to create content table elements\n     * @return {Element}\n     * @hidden\n     */\n    ContentRender.prototype.createContentTable = function (id) {\n        var innerDiv = this.getPanel().firstChild;\n        var table = this.parent.createElement('table', {\n            className: 'e-table', attrs: {\n                cellspacing: '0.25px', role: 'grid',\n                id: this.parent.element.id + id\n            }\n        });\n        this.setColGroup(this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true));\n        table.appendChild(this.getColGroup());\n        table.appendChild(this.parent.createElement('tbody'));\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    ContentRender.prototype.splitRows = function (idx) {\n        if (this.parent.getFrozenColumns()) {\n            if (idx === 0) {\n                this.freezeRows = this.rows;\n                this.freezeRowElements = this.rowElements;\n            }\n            else {\n                this.movableRows = this.rows;\n            }\n        }\n    };\n    /**\n     * Refresh the content of the Grid.\n     * @return {void}\n     */\n    // tslint:disable-next-line:max-func-body-length\n    ContentRender.prototype.refreshContentRows = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        var gObj = this.parent;\n        if (gObj.currentViewData.length === 0) {\n            return;\n        }\n        var dataSource = gObj.currentViewData;\n        var frag = document.createDocumentFragment();\n        var hdrfrag = document.createDocumentFragment();\n        var columns = gObj.getColumns();\n        var tr;\n        var hdrTbody;\n        var frzCols = gObj.getFrozenColumns();\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        this.rowElements = [];\n        this.rows = [];\n        var fCont = this.getPanel().querySelector('.e-frozencontent');\n        var mCont = this.getPanel().querySelector('.e-movablecontent');\n        var cont = this.getPanel().querySelector('.e-content');\n        var modelData = this.generator.generateRows(dataSource, args);\n        if (isNullOrUndefined(modelData[0].cells[0])) {\n            mCont.querySelector('tbody').innerHTML = '';\n        }\n        var idx = modelData[0].cells[0].index;\n        // tslint:disable-next-line:no-any\n        if (this.parent.registeredTemplate && this.parent.registeredTemplate.template) {\n            this.parent.destroyTemplate(['template']);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cellMerge = new CellMergeRender(this.serviceLocator, this.parent);\n            cellMerge.updateVirtualCells(modelData);\n        }\n        if (frzCols && idx >= frzCols) {\n            this.tbody = mCont.querySelector('tbody');\n        }\n        else {\n            this.tbody = this.getTable().querySelector('tbody');\n        }\n        for (var i = 0, len = modelData.length; i < len; i++) {\n            if (!gObj.rowTemplate) {\n                tr = row.render(modelData[i], columns);\n                if (gObj.frozenRows && i < gObj.frozenRows) {\n                    hdrfrag.appendChild(tr);\n                }\n                else {\n                    frag.appendChild(tr);\n                }\n            }\n            else {\n                var elements = gObj.getRowTemplate()(extend({ index: i }, dataSource[i]), gObj, 'rowTemplate');\n                if (elements[0].tagName === 'TBODY') {\n                    for (var j = 0; j < elements.length; j++) {\n                        var isTR = elements[j].nodeName.toLowerCase() === 'tr';\n                        if (isTR || (elements[j].querySelectorAll && elements[j].querySelectorAll('tr').length)) {\n                            tr = isTR ? elements[j] : elements[j].querySelector('tr');\n                        }\n                    }\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        hdrfrag.appendChild(tr);\n                    }\n                    else {\n                        frag.appendChild(tr);\n                    }\n                }\n                else {\n                    if (gObj.frozenRows && i < gObj.frozenRows) {\n                        tr = appendChildren(hdrfrag, elements);\n                    }\n                    else {\n                        // frag.appendChild(tr);\n                        tr = appendChildren(frag, elements);\n                    }\n                }\n            }\n            this.rows.push(modelData[i]);\n            if (modelData[i].isDataRow) {\n                //detailrowvisible \n                var td = tr.querySelectorAll('.e-rowcell:not(.e-hide)')[0];\n                if (td) {\n                    td.classList.add('e-detailrowvisible');\n                }\n                this.rowElements.push(tr);\n            }\n            this.ariaService.setOptions(this.getTable(), { colcount: gObj.getColumns().length.toString() });\n        }\n        this.splitRows(idx);\n        if (gObj.frozenRows) {\n            hdrTbody = frzCols ? gObj.getHeaderContent().querySelector(idx === 0 ? '.e-frozenheader'\n                : '.e-movableheader').querySelector('tbody') : gObj.getHeaderTable().querySelector('tbody');\n            hdrTbody.innerHTML = '';\n            hdrTbody.appendChild(hdrfrag);\n        }\n        if (gObj.frozenRows && idx === 0 && cont.offsetHeight === Number(gObj.height)) {\n            cont.style.height = (cont.offsetHeight - hdrTbody.offsetHeight) + 'px';\n        }\n        if (frzCols && idx === 0) {\n            this.getPanel().firstChild.style.overflowY = 'hidden';\n        }\n        args.rows = this.rows.slice(0);\n        args.isFrozen = this.parent.getFrozenColumns() !== 0 && !args.isFrozen;\n        this.index = idx;\n        getUpdateUsingRaf(function () {\n            _this.parent.notify(events.beforeFragAppend, args);\n            if (!_this.parent.enableVirtualization) {\n                remove(_this.tbody);\n                _this.tbody = _this.parent.createElement('tbody');\n            }\n            if (frzCols) {\n                _this.tbody.appendChild(frag);\n                if (_this.index === 0) {\n                    _this.isLoaded = false;\n                    fCont.querySelector('table').appendChild(_this.tbody);\n                }\n                else {\n                    if (_this.tbody.childElementCount < 1) {\n                        _this.tbody.appendChild(_this.parent.createElement('tr').appendChild(_this.parent.createElement('td')));\n                    }\n                    _this.isLoaded = true;\n                    mCont.querySelector('table').appendChild(_this.tbody);\n                    fCont.style.height = ((mCont.offsetHeight) - getScrollBarWidth()) + 'px';\n                    mCont.style.overflowY = _this.parent.height !== 'auto' ? 'scroll' : 'auto';\n                    fCont.style.borderRightWidth = '1px';\n                }\n            }\n            else {\n                _this.appendContent(_this.tbody, frag, args);\n            }\n            if (frzCols && idx === 0) {\n                _this.refreshContentRows(extend({}, args));\n            }\n            frag = null;\n        }, this.rafCallback(extend({}, args)));\n    };\n    ContentRender.prototype.appendContent = function (tbody, frag, args) {\n        tbody.appendChild(frag);\n        this.getTable().appendChild(tbody);\n    };\n    /**\n     * Get the content div element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getPanel = function () {\n        return this.contentPanel;\n    };\n    /**\n     * Set the content div element of grid\n     * @param  {Element} panel\n     */\n    ContentRender.prototype.setPanel = function (panel) {\n        this.contentPanel = panel;\n    };\n    /**\n     * Get the content table element of grid\n     * @return {Element}\n     */\n    ContentRender.prototype.getTable = function () {\n        return this.contentTable;\n    };\n    /**\n     * Set the content table element of grid\n     * @param  {Element} table\n     */\n    ContentRender.prototype.setTable = function (table) {\n        this.contentTable = table;\n    };\n    /**\n     * Get the Row collection in the Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ContentRender.prototype.getRows = function () {\n        return this.parent.getFrozenColumns() ? this.freezeRows : this.rows;\n    };\n    /**\n     * Get the Movable Row collection in the Freeze pane Grid.\n     * @returns {Row[] | HTMLCollectionOf<HTMLTableRowElement>}\n     */\n    ContentRender.prototype.getMovableRows = function () {\n        return this.movableRows;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.getRowElements = function () {\n        return this.parent.getFrozenColumns() ? this.freezeRowElements : this.rowElements;\n    };\n    /**\n     * Get the Freeze pane movable content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.getMovableRowElements = function () {\n        return this.rowElements;\n    };\n    /**\n     * Get the content table data row elements\n     * @return {Element}\n     */\n    ContentRender.prototype.setRowElements = function (elements) {\n        this.rowElements = elements;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    ContentRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    ContentRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Function to hide content table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    ContentRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        var rows = [];\n        if (frzCols) {\n            var fRows = this.freezeRows;\n            var mRows = this.movableRows;\n            var rowLen = fRows.length;\n            var cellLen = void 0;\n            for (var i = 0, row = void 0; i < rowLen; i++) {\n                cellLen = mRows[i].cells.length;\n                row = fRows[i].clone();\n                for (var j = 0; j < cellLen; j++) {\n                    row.cells.push(mRows[i].cells[j]);\n                }\n                rows.push(row);\n            }\n        }\n        else {\n            rows = this.getRows();\n        }\n        var element;\n        var testRow;\n        rows.some(function (r) { if (r.isDataRow) {\n            testRow = r;\n        } return r.isDataRow; });\n        var tasks = [];\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            var idx = this.parent.getNormalizedColumnIndex(column.uid);\n            //used canSkip method to skip unwanted visible toggle operation. \n            if (this.canSkip(column, testRow, idx)) {\n                continue;\n            }\n            var displayVal = column.visible === true ? '' : 'none';\n            if (frzCols) {\n                if (idx < frzCols) {\n                    setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n                }\n                else {\n                    var mTable = gObj.getContent().querySelector('.e-movablecontent').querySelector('colgroup');\n                    setStyleAttribute(mTable.childNodes[idx - frzCols], { 'display': displayVal });\n                }\n            }\n            else {\n                setStyleAttribute(this.getColGroup().childNodes[idx], { 'display': displayVal });\n            }\n        }\n        this.refreshContentRows({ requestType: 'refresh' });\n    };\n    ContentRender.prototype.colGroupRefresh = function () {\n        if (this.getColGroup()) {\n            var colGroup = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n            this.getTable().replaceChild(colGroup, this.getColGroup());\n            this.setColGroup(colGroup);\n        }\n    };\n    ContentRender.prototype.initializeContentDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(gObj.getContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    ContentRender.prototype.canSkip = function (column, row, index) {\n        /**\n         * Skip the toggle visiblity operation when one of the following success\n         * 1. Grid has empty records\n         * 2. column visible property is unchanged\n         * 3. cell`s isVisible property is same as column`s visible property.\n         */\n        return isNullOrUndefined(row) || //(1)\n            isNullOrUndefined(column.visible) || //(2)    \n            row.cells[index].visible === column.visible; //(3)\n    };\n    ContentRender.prototype.getModelGenerator = function () {\n        return this.generator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    };\n    ContentRender.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('tbody').innerHTML = '';\n        }\n    };\n    ContentRender.prototype.setSelection = function (uid, set, clearAll) {\n        if (this.parent.getFrozenColumns()) {\n            this.getMovableRows().filter(function (row) { return clearAll || uid === row.uid; }).forEach(function (row) { return row.isSelected = set; });\n        }\n        this.getRows().filter(function (row) { return clearAll || uid === row.uid; })\n            .forEach(function (row) {\n            row.isSelected = set;\n            row.cells.forEach(function (cell) { return cell.isSelected = set; });\n        });\n    };\n    ContentRender.prototype.getRowByIndex = function (index) {\n        return this.parent.getDataRows()[index];\n    };\n    ContentRender.prototype.getVirtualRowIndex = function (index) {\n        return index;\n    };\n    ContentRender.prototype.getMovableRowByIndex = function (index) {\n        return this.parent.getMovableDataRows()[index];\n    };\n    ContentRender.prototype.enableAfterRender = function (e) {\n        if (e.module === 'group' && e.enable) {\n            this.generator = this.getModelGenerator();\n        }\n    };\n    return ContentRender;\n}());\nexport { ContentRender };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, closest as getClosest, remove } from '@syncfusion/ej2-base';\nimport { classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from './row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport * as events from '../base/constant';\nimport { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { parentsUntil, wrap } from '../base/util';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar HeaderRender = /** @class */ (function () {\n    /**\n     * Constructor for header renderer module\n     */\n    function HeaderRender(parent, serviceLocator) {\n        var _this = this;\n        this.frzIdx = 0;\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var parentEle = parentsUntil(target, 'e-headercell');\n            if (!(gObj.allowReordering || gObj.allowGrouping) || (!isNullOrUndefined(parentEle)\n                && parentEle.querySelectorAll('.e-checkselectall').length > 0)) {\n                return false;\n            }\n            var visualElement = _this.parent.createElement('div', { className: 'e-cloneproperties e-dragclone e-headerclone' });\n            var element = target.classList.contains('e-headercell') ? target : parentEle;\n            if (!element || (!gObj.allowReordering && element.classList.contains('e-stackedheadercell'))) {\n                return false;\n            }\n            var height = element.offsetHeight;\n            var headercelldiv = element.querySelector('.e-headercelldiv') || element.querySelector('.e-stackedheadercelldiv');\n            var col;\n            if (headercelldiv) {\n                if (element.querySelector('.e-stackedheadercelldiv')) {\n                    col = gObj.getStackedHeaderColumnByHeaderText(headercelldiv.innerText.trim(), gObj.columns);\n                }\n                else {\n                    col = gObj.getColumnByUid(headercelldiv.getAttribute('e-mappinguid'));\n                }\n                _this.column = col;\n                visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            }\n            if (col && !isNullOrUndefined(col.headerTemplate)) {\n                if (col.headerTemplate.indexOf('#') !== -1) {\n                    visualElement.innerHTML = document.querySelector(col.headerTemplate).innerHTML.trim();\n                }\n                else {\n                    visualElement.innerHTML = col.headerTemplate;\n                }\n            }\n            else {\n                visualElement.innerHTML = headercelldiv ?\n                    col.headerText : element.firstElementChild.innerHTML;\n            }\n            visualElement.style.width = element.offsetWidth + 'px';\n            visualElement.style.height = element.offsetHeight + 'px';\n            visualElement.style.lineHeight = (height - 6).toString() + 'px';\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            gObj.notify(events.columnDragStart, { target: e.target, column: _this.column, event: e.event });\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var target = e.target;\n            if (target) {\n                var closest = getClosest(target, '.e-grid');\n                var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n                if (!closest || closest.getAttribute('id') !== gObj.element.getAttribute('id')) {\n                    classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n                    if (gObj.allowReordering) {\n                        gObj.element.querySelector('.e-reorderuparrow').style.display = 'none';\n                        gObj.element.querySelector('.e-reorderdownarrow').style.display = 'none';\n                    }\n                    return;\n                }\n                gObj.notify(events.columnDrag, { target: e.target, column: _this.column, event: e.event });\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            var cancel;\n            gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n            if ((!parentsUntil(e.target, 'e-headercell') && !parentsUntil(e.target, 'e-groupdroparea')) ||\n                (!gObj.allowReordering && parentsUntil(e.target, 'e-headercell')) ||\n                (!e.helper.getAttribute('e-mappinguid') && parentsUntil(e.target, 'e-groupdroparea'))) {\n                remove(e.helper);\n                cancel = true;\n            }\n            gObj.notify(events.columnDragStop, { target: e.target, event: e.event, column: _this.column, cancel: cancel });\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var uid = e.droppedElement.getAttribute('e-mappinguid');\n            var closest = getClosest(e.target, '.e-grid');\n            remove(e.droppedElement);\n            if (closest && closest.getAttribute('id') !== gObj.element.getAttribute('id') ||\n                !(gObj.allowReordering || gObj.allowGrouping)) {\n                return;\n            }\n            gObj.notify(events.headerDrop, { target: e.target, uid: uid });\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.ariaService = this.serviceLocator.getService('ariaService');\n        this.widthService = this.serviceLocator.getService('widthService');\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.columnVisibilityChanged, this.setVisible, this);\n        this.parent.on(events.columnPositionChanged, this.colPosRefresh, this);\n    }\n    /**\n     * The function is used to render grid header div\n     */\n    HeaderRender.prototype.renderPanel = function () {\n        var div = this.parent.createElement('div', { className: 'e-gridheader' });\n        var innerDiv = this.parent.createElement('div', { className: 'e-headercontent' });\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        this.parent.element.appendChild(div);\n    };\n    /**\n     * The function is used to render grid header table\n     */\n    HeaderRender.prototype.renderTable = function () {\n        var headerDiv = this.getPanel();\n        headerDiv.appendChild(this.createHeaderTable());\n        this.setTable(headerDiv.querySelector('.e-table'));\n        if (!this.parent.getFrozenColumns()) {\n            this.initializeHeaderDrag();\n            this.initializeHeaderDrop();\n        }\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.getFrozenColumns() !== 0 } });\n    };\n    /**\n     * Get the header content div element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getPanel = function () {\n        return this.headerPanel;\n    };\n    /**\n     * Set the header content div element of grid\n     * @param  {Element} panel\n     */\n    HeaderRender.prototype.setPanel = function (panel) {\n        this.headerPanel = panel;\n    };\n    /**\n     * Get the header table element of grid\n     * @return {Element}\n     */\n    HeaderRender.prototype.getTable = function () {\n        return this.headerTable;\n    };\n    /**\n     * Set the header table element of grid\n     * @param  {Element} table\n     */\n    HeaderRender.prototype.setTable = function (table) {\n        this.headerTable = table;\n    };\n    /**\n     * Get the header colgroup element\n     * @returns {Element}\n     */\n    HeaderRender.prototype.getColGroup = function () {\n        return this.colgroup;\n    };\n    /**\n     * Set the header colgroup element\n     * @param {Element} colgroup\n     * @returns {Element}\n     */\n    HeaderRender.prototype.setColGroup = function (colGroup) {\n        return this.colgroup = colGroup;\n    };\n    /**\n     * Get the header row element collection.\n     * @return {Element[]}\n     */\n    HeaderRender.prototype.getRows = function () {\n        var table = this.getTable();\n        return table.tHead.rows;\n    };\n    /**\n     * The function is used to create header table elements\n     * @return {Element}\n     * @hidden\n     */\n    HeaderRender.prototype.createHeaderTable = function () {\n        var table = this.createTable();\n        var innerDiv = this.getPanel().firstChild;\n        innerDiv.appendChild(table);\n        return innerDiv;\n    };\n    /**\n     * @hidden\n     */\n    HeaderRender.prototype.createTable = function () {\n        var gObj = this.parent;\n        var columns = gObj.getColumns();\n        var table = this.parent.createElement('table', { className: 'e-table', attrs: { cellspacing: '0.25px', role: 'grid' } });\n        var innerDiv = this.getPanel().firstChild;\n        var findHeaderRow = this.createHeaderContent();\n        var thead = findHeaderRow.thead;\n        var tbody = this.parent.createElement('tbody', { className: this.parent.frozenRows ? '' : 'e-hide' });\n        this.caption = this.parent.createElement('caption', { innerHTML: this.parent.element.id + '_header_table', className: 'e-hide' });\n        var colGroup = this.parent.createElement('colgroup');\n        var rowBody = this.parent.createElement('tr');\n        var bodyCell;\n        var rows = this.rows = findHeaderRow.rows;\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, this.parent);\n        for (var i = 0, len = rows.length; i < len; i++) {\n            for (var j = 0, len_1 = rows[i].cells.length; j < len_1; j++) {\n                var cell = rows[i].cells[j];\n                bodyCell = this.parent.createElement('td');\n                rowBody.appendChild(bodyCell);\n            }\n        }\n        if (gObj.allowFiltering || gObj.allowSorting || gObj.allowGrouping) {\n            table.classList.add('e-sortfilter');\n        }\n        this.updateColGroup(colGroup);\n        tbody.appendChild(rowBody);\n        table.appendChild(this.setColGroup(colGroup));\n        table.appendChild(thead);\n        table.appendChild(tbody);\n        table.appendChild(this.caption);\n        this.ariaService.setOptions(table, { colcount: gObj.getColumns().length.toString() });\n        return table;\n    };\n    HeaderRender.prototype.createHeaderContent = function () {\n        var gObj = this.parent;\n        var columns = gObj.getColumns();\n        var thead = this.parent.createElement('thead');\n        var colHeader = this.parent.createElement('tr', { className: 'e-columnheader' });\n        var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Header, gObj);\n        rowRenderer.element = colHeader;\n        var rows = [];\n        var headerRow;\n        this.colDepth = this.getObjDepth();\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            rows[i] = this.generateRow(i);\n            rows[i].cells = [];\n        }\n        rows = this.ensureColumns(rows);\n        rows = this.getHeaderCells(rows);\n        for (var i = 0, len = this.colDepth; i < len; i++) {\n            headerRow = rowRenderer.render(rows[i], columns);\n            if (this.parent.rowHeight && headerRow.querySelector('.e-headercell')) {\n                headerRow.style.height = this.parent.rowHeight + 'px';\n            }\n            thead.appendChild(headerRow);\n        }\n        var findHeaderRow = {\n            thead: thead,\n            rows: rows\n        };\n        return findHeaderRow;\n    };\n    HeaderRender.prototype.updateColGroup = function (colGroup) {\n        var cols = this.parent.getColumns();\n        var col;\n        var indexes = this.parent.getColumnIndexesInView();\n        if (this.parent.allowGrouping) {\n            for (var i = 0, len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    continue;\n                }\n                col = this.parent.createElement('col');\n                colGroup.appendChild(col);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            col = this.parent.createElement('col');\n            colGroup.appendChild(col);\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            col = this.parent.createElement('col');\n            if (cols[i].visible === false) {\n                setStyleAttribute(col, { 'display': 'none' });\n            }\n            colGroup.appendChild(col);\n        }\n        return colGroup;\n    };\n    HeaderRender.prototype.ensureColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gObj = this.parent;\n        var indexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gObj.allowGrouping) {\n                for (var c = 0, len_2 = gObj.groupSettings.columns.length; c < len_2; c++) {\n                    if (this.parent.enableColumnVirtualization && indexes.indexOf(c) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gObj.detailTemplate || gObj.childGrid) {\n                rows[i].cells.push(this.generateCell({}, CellType.DetailHeader));\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.getHeaderCells = function (rows) {\n        var column;\n        var thead = this.parent.getHeaderTable() && this.parent.getHeaderTable().querySelector('thead');\n        var cols = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n        this.frzIdx = 0;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            rows = this.appendCells(cols[i], rows, 0, i === 0, false, i === (len - 1), thead);\n        }\n        return rows;\n    };\n    HeaderRender.prototype.appendCells = function (cols, rows, index, isFirstObj, isFirstCol, isLastCol, isMovable) {\n        var lastCol = isLastCol ? 'e-lastcell' : '';\n        var frzCols = this.parent.getFrozenColumns();\n        if (!cols.columns) {\n            if (!frzCols || (frzCols\n                && ((!isMovable && (this.frzIdx < this.parent.frozenColumns || cols.isFrozen))\n                    || (isMovable && this.frzIdx >= this.parent.frozenColumns && !cols.isFrozen)))) {\n                rows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstCol ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n            }\n            this.frzIdx++;\n        }\n        else {\n            var colSpan = this.getCellCnt(cols, 0);\n            if (colSpan) {\n                var frzObj = this.refreshFrozenHdr(cols.columns, { isPartial: false, isComp: true, cnt: 0 });\n                if (!frzCols || (frzCols\n                    && ((!isMovable && (this.parent.frozenColumns - this.frzIdx > 0 || (frzObj.isPartial)))\n                        || (isMovable && (colSpan + this.frzIdx > this.parent.frozenColumns && !frzObj.isComp))))) {\n                    rows[index].cells.push(new Cell({\n                        cellType: CellType.StackedHeader, column: cols,\n                        colSpan: this.getColSpan(colSpan, isMovable, frzObj.cnt)\n                    }));\n                }\n            }\n            for (var i = 0, len = cols.columns.length; i < len; i++) {\n                rows = this.appendCells(cols.columns[i], rows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastCol, isMovable);\n            }\n        }\n        return rows;\n    };\n    HeaderRender.prototype.refreshFrozenHdr = function (cols, frzObj) {\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].columns) {\n                frzObj = this.refreshFrozenHdr(cols[i].columns, frzObj);\n            }\n            else {\n                if (cols[i].isFrozen) {\n                    frzObj.isPartial = true;\n                    frzObj.cnt++;\n                }\n                frzObj.isComp = frzObj.isComp && (cols[i].isFrozen ||\n                    this.parent.getColumnIndexByField(cols[i].field) < this.parent.frozenColumns);\n            }\n        }\n        return frzObj;\n    };\n    HeaderRender.prototype.getColSpan = function (colSpan, isMovable, frozenCnt) {\n        var frzCol = this.parent.frozenColumns;\n        if (this.parent.getFrozenColumns() && this.frzIdx + colSpan > frzCol) {\n            if (isMovable) {\n                colSpan = colSpan - (frzCol > this.frzIdx ? frzCol - this.frzIdx : 0) - frozenCnt;\n            }\n            else {\n                colSpan = colSpan - (colSpan - (frzCol > this.frzIdx ? frzCol + frozenCnt - this.frzIdx : frozenCnt));\n            }\n        }\n        return colSpan;\n    };\n    HeaderRender.prototype.generateRow = function (index) {\n        return new Row({});\n    };\n    HeaderRender.prototype.generateCell = function (column, cellType, rowSpan, className, rowIndex, colIndex) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(column.headerTemplate),\n            'rowID': '',\n            'column': column,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': colIndex\n        };\n        if (!opt.rowSpan || opt.rowSpan < 2) {\n            delete opt.rowSpan;\n        }\n        return new Cell(opt);\n    };\n    /**\n     * Function to hide header table column based on visible property\n     * @param  {Column[]} columns?\n     */\n    HeaderRender.prototype.setVisible = function (columns) {\n        var gObj = this.parent;\n        var rows = [].slice.call(this.getRows()); //NodeList -> Array        \n        var displayVal = '';\n        var idx;\n        var className;\n        var element;\n        var frzCols = gObj.getFrozenColumns();\n        for (var c = 0, clen = columns.length; c < clen; c++) {\n            var column = columns[c];\n            idx = gObj.getNormalizedColumnIndex(column.uid);\n            if (column.visible === false) {\n                displayVal = 'none';\n            }\n            if (frzCols) {\n                if (idx < frzCols) {\n                    setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n                }\n                else {\n                    var mTblColGrp = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup');\n                    setStyleAttribute(mTblColGrp.children[idx - frzCols], { 'display': displayVal });\n                }\n            }\n            else {\n                setStyleAttribute(this.getColGroup().children[idx], { 'display': displayVal });\n            }\n            this.refreshUI();\n        }\n    };\n    HeaderRender.prototype.colPosRefresh = function () {\n        this.refreshUI();\n    };\n    /**\n     * Refresh the header of the Grid.\n     * @returns {void}\n     */\n    HeaderRender.prototype.refreshUI = function () {\n        var headerDiv = this.getPanel();\n        var table = this.getTable();\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.getTable()) {\n            remove(this.getTable());\n            table.removeChild(table.firstChild);\n            table.removeChild(table.childNodes[0]);\n            var colGroup = this.parent.createElement('colgroup');\n            var findHeaderRow = this.createHeaderContent();\n            this.rows = findHeaderRow.rows;\n            table.insertBefore(findHeaderRow.thead, table.firstChild);\n            this.updateColGroup(colGroup);\n            table.insertBefore(this.setColGroup(colGroup), table.firstChild);\n            this.setTable(table);\n            this.appendContent(table);\n            this.parent.notify(events.colGroupRefresh, {});\n            this.widthService.setWidthToColumns();\n            this.parent.updateDefaultCursor();\n            if (!frzCols) {\n                this.initializeHeaderDrag();\n            }\n            var rows = [].slice.call(headerDiv.querySelectorAll('tr.e-columnheader'));\n            for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n                var row = rows_1[_i];\n                var gCells = [].slice.call(row.querySelectorAll('.e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n            }\n            if (!frzCols) {\n                this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: this.parent.getFrozenColumns() !== 0 } });\n            }\n            if (this.parent.allowTextWrap && this.parent.textWrapSettings.wrapMode === 'Header') {\n                wrap(rows, true);\n            }\n        }\n    };\n    HeaderRender.prototype.appendContent = function (table) {\n        this.getPanel().firstChild.appendChild(table);\n    };\n    HeaderRender.prototype.getObjDepth = function () {\n        var max = 0;\n        var cols = this.parent.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var depth = this.checkDepth(cols[i], 0);\n            if (max < depth) {\n                max = depth;\n            }\n        }\n        return max + 1;\n    };\n    HeaderRender.prototype.checkDepth = function (col, index) {\n        var max = index;\n        var indices = [];\n        if (col.columns) {\n            index++;\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                indices[i] = this.checkDepth(col.columns[i], index);\n            }\n            for (var j = 0; j < indices.length; j++) {\n                if (max < indices[j]) {\n                    max = indices[j];\n                }\n            }\n            index = max;\n        }\n        return index;\n    };\n    HeaderRender.prototype.getCellCnt = function (col, cnt) {\n        if (col.columns) {\n            for (var i = 0, len = col.columns.length; i < len; i++) {\n                cnt = this.getCellCnt(col.columns[i], cnt);\n            }\n        }\n        else {\n            if (col.visible) {\n                cnt++;\n            }\n        }\n        return cnt;\n    };\n    HeaderRender.prototype.initializeHeaderDrag = function () {\n        var gObj = this.parent;\n        if (!(this.parent.allowReordering || (this.parent.allowGrouping && this.parent.groupSettings.showDropArea))) {\n            return;\n        }\n        var headerRows = [].slice.call(gObj.getHeaderContent().querySelectorAll('.e-columnheader'));\n        for (var i = 0, len = headerRows.length; i < len; i++) {\n            var drag = new Draggable(headerRows[i], {\n                dragTarget: '.e-headercell',\n                distance: 5,\n                helper: this.helper,\n                dragStart: this.dragStart,\n                drag: this.drag,\n                dragStop: this.dragStop,\n                abort: '.e-rhandler'\n            });\n        }\n    };\n    HeaderRender.prototype.initializeHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(gObj.getHeaderContent(), {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    return HeaderRender;\n}());\nexport { HeaderRender };\n","import { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { doesImplementInterface, setStyleAndAttributes, appendChildren } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { foreignKeyData } from '../base/constant';\n/**\n * CellRenderer class which responsible for building cell content.\n * @hidden\n */\nvar CellRenderer = /** @class */ (function () {\n    function CellRenderer(parent, locator) {\n        this.localizer = locator.getService('localization');\n        this.formatter = locator.getService('valueFormatter');\n        this.parent = parent;\n        this.element = this.parent.createElement('TD', { className: 'e-rowcell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        this.rowChkBox = this.parent.createElement('input', { className: 'e-checkselect', attrs: { 'type': 'checkbox' } });\n    }\n    /**\n     * Function to return the wrapper for the TD content\n     * @returns string\n     */\n    CellRenderer.prototype.getGui = function () {\n        return '';\n    };\n    /**\n     * Function to format the cell value.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.format = function (column, value, data) {\n        if (!isNullOrUndefined(column.format)) {\n            value = this.formatter.toView(value, column.getFormatter());\n        }\n        return isNullOrUndefined(value) ? '' : value.toString();\n    };\n    CellRenderer.prototype.evaluate = function (node, cell, data, attributes, fData) {\n        var result;\n        if (cell.column.template) {\n            var literals = ['index'];\n            var dummyData = extend({}, data, (_a = {}, _a[foreignKeyData] = fData, _a));\n            result = cell.column.getColumnTemplate()(extend({ 'index': attributes[literals[0]] }, dummyData), this.parent, 'template');\n            appendChildren(node, result);\n            result = null;\n            node.setAttribute('aria-label', node.innerText + ' is template cell' + ' column header ' +\n                cell.column.headerText);\n            return false;\n        }\n        return true;\n        var _a;\n    };\n    /**\n     * Function to invoke the custom formatter available in the column object.\n     * @param  {Column} column\n     * @param  {Object} value\n     * @param  {Object} data\n     */\n    CellRenderer.prototype.invokeFormatter = function (column, value, data) {\n        if (!isNullOrUndefined(column.formatter)) {\n            if (doesImplementInterface(column.formatter, 'getValue')) {\n                var formatter = column.formatter;\n                value = new formatter().getValue(column, data);\n            }\n            else if (typeof column.formatter === 'function') {\n                value = column.formatter(column, data);\n            }\n            else {\n                value = column.formatter.getValue(column, data);\n            }\n        }\n        return value;\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.render = function (cell, data, attributes) {\n        return this.refreshCell(cell, data, attributes);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CellRenderer.prototype.refreshTD = function (td, cell, data, attributes) {\n        var node = this.refreshCell(cell, data, attributes);\n        td.innerHTML = '';\n        var elements = [].slice.call(node.childNodes);\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            td.appendChild(elem);\n        }\n    };\n    CellRenderer.prototype.refreshCell = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var column = cell.column;\n        var fData;\n        if (cell.isForeignKey) {\n            fData = cell.foreignKeyData[0] || (_a = {}, _a[column.foreignKeyValue] = column.format ? null : '', _a);\n        }\n        //Prepare innerHtml\n        var innerHtml = this.getGui();\n        var value = cell.isForeignKey ? this.getValue(column.foreignKeyValue, fData, column) :\n            this.getValue(column.field, data, column);\n        if (column.type === 'date' && !isNullOrUndefined(value)) {\n            value = new Date(value);\n        }\n        value = this.format(column, value, data);\n        innerHtml = value.toString();\n        if (column.type === 'boolean' && !column.displayAsCheckBox) {\n            var localeStr = (value !== 'true' && value !== 'false') ? null : value === 'true' ? 'True' : 'False';\n            innerHtml = localeStr ? this.localizer.getConstant(localeStr) : innerHtml;\n        }\n        var fromFormatter = this.invokeFormatter(column, value, data);\n        innerHtml = !isNullOrUndefined(column.formatter) ? isNullOrUndefined(fromFormatter) ? '' : fromFormatter.toString() : innerHtml;\n        node.setAttribute('aria-label', (innerHtml === '' ? 'empty' : innerHtml) + ' column header ' + cell.column.headerText);\n        if (!isNullOrUndefined(cell.column.headerText)) {\n            node.setAttribute('aria-label', innerHtml + ' column header ' + cell.column.headerText);\n        }\n        if (this.evaluate(node, cell, data, attributes, fData) && column.type !== 'checkbox') {\n            this.appendHtml(node, innerHtml, column.getDomSetter ? column.getDomSetter() : 'innerHTML');\n        }\n        else if (column.type === 'checkbox') {\n            node.classList.add('e-gridchkbox');\n            node.setAttribute('aria-label', 'checkbox');\n            if (this.parent.selectionSettings.persistSelection) {\n                value = value === 'true';\n            }\n            else {\n                value = false;\n            }\n            var checkWrap = createCheckBox(this.parent.createElement, false, { checked: value, label: ' ' });\n            checkWrap.insertBefore(this.rowChkBox.cloneNode(), checkWrap.firstChild);\n            node.appendChild(checkWrap);\n        }\n        if (this.parent.checkAllRows === 'Check' && this.parent.enableVirtualization) {\n            cell.isSelected = true;\n        }\n        this.setAttributes(node, cell, attributes);\n        if (column.type === 'boolean' && column.displayAsCheckBox) {\n            var checked = isNaN(parseInt(value.toString(), 10)) ? value === 'true' : parseInt(value.toString(), 10) > 0;\n            var checkWrap = createCheckBox(this.parent.createElement, false, { checked: checked, label: ' ' });\n            node.innerHTML = '';\n            checkWrap.classList.add('e-checkbox-disabled');\n            node.appendChild(checkWrap);\n            node.setAttribute('aria-label', checked + ' column header ' + cell.column.headerText);\n        }\n        return node;\n        var _a;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    CellRenderer.prototype.appendHtml = function (node, innerHtml, property) {\n        if (property === void 0) { property = 'innerHTML'; }\n        node[property] = innerHtml;\n        return node;\n    };\n    /**\n     * @hidden\n     */\n    CellRenderer.prototype.setAttributes = function (node, cell, attributes) {\n        var column = cell.column;\n        this.buildAttributeFromCell(node, cell, column.type === 'checkbox');\n        setStyleAndAttributes(node, attributes);\n        setStyleAndAttributes(node, cell.attributes);\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.textAlign) {\n            node.style.textAlign = column.textAlign;\n        }\n        if (column.clipMode === 'Clip') {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip') {\n            node.classList.add('e-ellipsistooltip');\n        }\n    };\n    CellRenderer.prototype.buildAttributeFromCell = function (node, cell, isCheckBoxType) {\n        var attr = {};\n        var prop = { 'colindex': 'aria-colindex' };\n        var classes = [];\n        if (cell.colSpan) {\n            attr.colSpan = cell.colSpan;\n        }\n        if (cell.rowSpan) {\n            attr.rowSpan = cell.rowSpan;\n        }\n        if (cell.isTemplate) {\n            classes.push('e-templatecell');\n        }\n        if (cell.isSelected) {\n            classes.push.apply(classes, ['e-selectionbackground', 'e-active']);\n            if (isCheckBoxType) {\n                node.querySelector('.e-frame').classList.add('e-check');\n            }\n        }\n        if (!isNullOrUndefined(cell.index)) {\n            attr[prop.colindex] = cell.index;\n        }\n        if (!cell.visible) {\n            classes.push('e-hide');\n        }\n        attr.class = classes;\n        setStyleAndAttributes(node, attr);\n    };\n    CellRenderer.prototype.getValue = function (field, data, column) {\n        return column.valueAccessor(field, data, column);\n    };\n    return CellRenderer;\n}());\nexport { CellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { attributes } from '@syncfusion/ej2-base';\nimport { setStyleAndAttributes, appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\nimport { AriaService } from '../services/aria-service';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { headerCellInfo } from '../base/constant';\n/**\n * HeaderCellRenderer class which responsible for building header cell content.\n * @hidden\n */\nvar HeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderCellRenderer, _super);\n    function HeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TH', { className: 'e-headercell', attrs: { role: 'columnheader', tabindex: '-1' } });\n        _this.ariaService = new AriaService();\n        _this.hTxtEle = _this.parent.createElement('span', { className: 'e-headertext' });\n        _this.sortEle = _this.parent.createElement('div', { className: 'e-sortfilterdiv e-icons' });\n        _this.gui = _this.parent.createElement('div');\n        _this.chkAllBox = _this.parent.createElement('input', { className: 'e-checkselectall', attrs: { 'type': 'checkbox' } });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    HeaderCellRenderer.prototype.getGui = function () {\n        return this.gui.cloneNode();\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    HeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var fltrMenuEle = this.parent.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    /**\n     * Function to refresh the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Element} node\n     */\n    HeaderCellRenderer.prototype.refresh = function (cell, node) {\n        this.clean(node);\n        var fltrMenuEle = this.parent.createElement('div', { className: 'e-filtermenudiv e-icons e-icon-filter' });\n        return this.prepareHeader(cell, node, fltrMenuEle);\n    };\n    HeaderCellRenderer.prototype.clean = function (node) {\n        node.innerHTML = '';\n    };\n    HeaderCellRenderer.prototype.prepareHeader = function (cell, node, fltrMenuEle) {\n        var column = cell.column;\n        var ariaAttr = {};\n        //Prepare innerHtml\n        var innerDIV = this.getGui();\n        attributes(innerDIV, {\n            'e-mappinguid': column.uid,\n            'class': 'e-headercelldiv'\n        });\n        if (column.type !== 'checkbox') {\n            var value = column.headerText;\n            var headerText = this.hTxtEle.cloneNode();\n            headerText[column.getDomSetter()] = value;\n            innerDIV.appendChild(headerText);\n        }\n        else {\n            column.editType = 'booleanedit';\n            var checkAllWrap = createCheckBox(this.parent.createElement, false, { checked: false, label: ' ' });\n            checkAllWrap.insertBefore(this.chkAllBox.cloneNode(), checkAllWrap.firstChild);\n            innerDIV.appendChild(checkAllWrap);\n            innerDIV.classList.add('e-headerchkcelldiv');\n        }\n        this.buildAttributeFromCell(node, cell);\n        this.appendHtml(node, innerDIV);\n        node.appendChild(this.sortEle.cloneNode());\n        if ((this.parent.allowFiltering && this.parent.filterSettings.type !== 'FilterBar') &&\n            (column.allowFiltering && !isNullOrUndefined(column.field)) &&\n            !(this.parent.showColumnMenu && column.showColumnMenu)) {\n            attributes(fltrMenuEle, {\n                'e-mappinguid': 'e-flmenu-' + column.uid,\n            });\n            node.classList.add('e-fltr-icon');\n            var matchFlColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFlColumns.length) {\n                for (var index = 0; index < this.parent.columns.length; index++) {\n                    for (var count = 0; count < this.parent.filterSettings.columns.length; count++) {\n                        if (this.parent.filterSettings.columns[count].field === column.field) {\n                            fltrMenuEle.classList.add('e-filtered');\n                            matchFlColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.appendChild(fltrMenuEle.cloneNode());\n        }\n        if (cell.className) {\n            node.classList.add(cell.className);\n        }\n        if (column.customAttributes) {\n            setStyleAndAttributes(node, column.customAttributes);\n        }\n        if (column.allowSorting) {\n            ariaAttr.sort = 'none';\n        }\n        if (column.allowGrouping) {\n            ariaAttr.grabbed = false;\n        }\n        node = this.extendPrepareHeader(column, node);\n        var result;\n        var gridObj = this.parent;\n        var colIndex = gridObj.getColumnIndexByField(column.field);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            result = column.getHeaderTemplate()(extend({ 'index': colIndex }, column), gridObj, 'headerTemplate');\n            node.firstElementChild.innerHTML = '';\n            appendChildren(node.firstElementChild, result);\n        }\n        this.ariaService.setOptions(node, ariaAttr);\n        if (!isNullOrUndefined(column.headerTextAlign) || !isNullOrUndefined(column.textAlign)) {\n            var alignment = column.headerTextAlign || column.textAlign;\n            innerDIV.style.textAlign = alignment;\n            if (alignment === 'Right' || alignment === 'Left') {\n                node.classList.add(alignment === 'Right' ? 'e-rightalign' : 'e-leftalign');\n            }\n            else if (alignment === 'Center') {\n                node.classList.add('e-centeralign');\n            }\n        }\n        if (column.clipMode === 'Clip') {\n            node.classList.add('e-gridclip');\n        }\n        else if (column.clipMode === 'EllipsisWithTooltip') {\n            node.classList.add('e-ellipsistooltip');\n        }\n        node.setAttribute('aria-rowspan', (!isNullOrUndefined(cell.rowSpan) ? cell.rowSpan : 1).toString());\n        node.setAttribute('aria-colspan', '1');\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    HeaderCellRenderer.prototype.extendPrepareHeader = function (column, node) {\n        if (this.parent.showColumnMenu && column.showColumnMenu && !isNullOrUndefined(column.field)) {\n            var element = (this.parent.createElement('div', { className: 'e-icons e-columnmenu' }));\n            var matchFilteredColumns = [];\n            if (this.parent.filterSettings.columns.length && this.parent.filterSettings.columns.length !== matchFilteredColumns.length) {\n                for (var i = 0; i < this.parent.columns.length; i++) {\n                    for (var j = 0; j < this.parent.filterSettings.columns.length; j++) {\n                        if (this.parent.filterSettings.columns[j].field === column.field) {\n                            element.classList.add('e-filtered');\n                            matchFilteredColumns.push(column.field);\n                            break;\n                        }\n                    }\n                }\n            }\n            node.classList.add('e-fltr-icon');\n            node.appendChild(element);\n        }\n        if (this.parent.allowResizing) {\n            var handler = this.parent.createElement('div');\n            handler.className = column.allowResizing ? 'e-rhandler e-rcursor' : 'e-rsuppress';\n            node.appendChild(handler);\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHtml\n     * @returns Element\n     */\n    HeaderCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    return HeaderCellRenderer;\n}(CellRenderer));\nexport { HeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { headerCellInfo } from '../base/constant';\n/**\n * StackedHeaderCellRenderer class which responsible for building stacked header cell content.\n * @hidden\n */\nvar StackedHeaderCellRenderer = /** @class */ (function (_super) {\n    __extends(StackedHeaderCellRenderer, _super);\n    function StackedHeaderCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', {\n            className: 'e-headercell e-stackedheadercell', attrs: {\n                role: 'columnheader',\n                tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {Element}\n     */\n    StackedHeaderCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        var div = this.parent.createElement('div', { className: 'e-stackedheadercelldiv' });\n        node.appendChild(div);\n        div.innerHTML = cell.column.headerText;\n        if (cell.column.toolTip) {\n            node.setAttribute('title', cell.column.toolTip);\n        }\n        if (!isNullOrUndefined(cell.column.textAlign)) {\n            div.style.textAlign = cell.column.textAlign;\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-colspan', cell.colSpan.toString());\n        node.setAttribute('aria-rowspan', '1');\n        this.parent.trigger(headerCellInfo, { cell: cell, node: node });\n        return node;\n    };\n    return StackedHeaderCellRenderer;\n}(CellRenderer));\nexport { StackedHeaderCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { setStyleAndAttributes } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\n/**\n * IndentCellRenderer class which responsible for building group indent cell.\n * @hidden\n */\nvar IndentCellRenderer = /** @class */ (function (_super) {\n    __extends(IndentCellRenderer, _super);\n    function IndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', { className: 'e-indentcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    IndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        setStyleAndAttributes(node, cell.attributes);\n        return node;\n    };\n    return IndentCellRenderer;\n}(CellRenderer));\nexport { IndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren, templateCompiler } from '../base/util';\n/**\n * GroupCaptionCellRenderer class which responsible for building group caption cell.\n * @hidden\n */\nvar GroupCaptionCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionCellRenderer, _super);\n    function GroupCaptionCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TD', { className: 'e-groupcaption', attrs: { role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        var gObj = this.parent;\n        var result;\n        var helper = {};\n        var fKeyValue;\n        data.headerText = cell.column.headerText;\n        if (cell.isForeignKey) {\n            fKeyValue = this.format(cell.column, cell.column.valueAccessor('foreignKey', data, cell.column));\n        }\n        var value = cell.isForeignKey ? fKeyValue : cell.column.enableGroupByFormat ? data.key :\n            this.format(cell.column, cell.column.valueAccessor('key', data, cell.column));\n        if (!isNullOrUndefined(gObj.groupSettings.captionTemplate)) {\n            if (gObj.groupSettings.captionTemplate.indexOf('#') !== -1) {\n                result = templateCompiler(document.querySelector(gObj.groupSettings.captionTemplate).innerHTML.trim())(data);\n            }\n            else {\n                result = templateCompiler(gObj.groupSettings.captionTemplate)(data);\n            }\n            appendChildren(node, result);\n        }\n        else {\n            node.innerHTML = cell.column.headerText + ': ' + value + ' - ' + data.count + ' ' +\n                (data.count < 2 ? this.localizer.getConstant('Item') : this.localizer.getConstant('Items'));\n        }\n        node.setAttribute('colspan', cell.colSpan.toString());\n        node.setAttribute('aria-label', node.innerHTML + ' is groupcaption cell');\n        node.setAttribute('title', node.innerHTML);\n        return node;\n    };\n    return GroupCaptionCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionCellRenderer };\n/**\n * GroupCaptionEmptyCellRenderer class which responsible for building group caption empty cell.\n * @hidden\n */\nvar GroupCaptionEmptyCellRenderer = /** @class */ (function (_super) {\n    __extends(GroupCaptionEmptyCellRenderer, _super);\n    function GroupCaptionEmptyCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', { className: 'e-groupcaption' });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    GroupCaptionEmptyCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.innerHTML = '&nbsp;';\n        node.setAttribute('colspan', cell.colSpan.toString());\n        return node;\n    };\n    return GroupCaptionEmptyCellRenderer;\n}(CellRenderer));\nexport { GroupCaptionEmptyCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { IndentCellRenderer } from './indent-cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar ExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(ExpandCellRenderer, _super);\n    function ExpandCellRenderer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Function to render the expand cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    ExpandCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.className = 'e-recordplusexpand';\n        node.setAttribute('ej-mappingname', data.field);\n        node.setAttribute('ej-mappingvalue', data.key);\n        node.setAttribute('aria-expanded', 'true');\n        node.setAttribute('tabindex', '-1');\n        node.appendChild(this.parent.createElement('div', { className: 'e-icons e-gdiagonaldown e-icon-gdownarrow' }));\n        return node;\n    };\n    return ExpandCellRenderer;\n}(IndentCellRenderer));\nexport { ExpandCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * HeaderIndentCellRenderer class which responsible for building header indent cell.\n * @hidden\n */\nvar HeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(HeaderIndentCellRenderer, _super);\n    function HeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-grouptopleftcell' });\n        return _this;\n    }\n    /**\n     * Function to render the indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    HeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.parent.createElement('div', { className: 'e-headercelldiv e-emptycell', innerHTML: '' }));\n        return node;\n    };\n    return HeaderIndentCellRenderer;\n}(CellRenderer));\nexport { HeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CellRenderer } from './cell-renderer';\n/**\n * DetailHeaderIndentCellRenderer class which responsible for building detail header indent cell.\n * @hidden\n */\nvar DetailHeaderIndentCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailHeaderIndentCellRenderer, _super);\n    function DetailHeaderIndentCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-detailheadercell' });\n        return _this;\n    }\n    /**\n     * Function to render the detail indent cell\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    DetailHeaderIndentCellRenderer.prototype.render = function (cell, data) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.parent.createElement('div', { className: 'e-emptycell' }));\n        return node;\n    };\n    return DetailHeaderIndentCellRenderer;\n}(CellRenderer));\nexport { DetailHeaderIndentCellRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\n/**\n * ExpandCellRenderer class which responsible for building group expand cell.\n * @hidden\n */\nvar DetailExpandCellRenderer = /** @class */ (function (_super) {\n    __extends(DetailExpandCellRenderer, _super);\n    function DetailExpandCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-detailrowcollapse',\n            attrs: { 'aria-expanded': 'false', role: 'gridcell', tabindex: '-1' }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the detail expand cell\n     */\n    DetailExpandCellRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        if (attributes && !isNullOrUndefined(attributes['class'])) {\n            node.className = '';\n            node.className = attributes['class'];\n            node.appendChild(this.parent.createElement('div', { className: 'e-icons e-dtdiagonaldown e-icon-gdownarrow' }));\n        }\n        else {\n            node.appendChild(this.parent.createElement('div', { className: 'e-icons e-dtdiagonalright e-icon-grightarrow' }));\n        }\n        return node;\n    };\n    return DetailExpandCellRenderer;\n}(CellRenderer));\nexport { DetailExpandCellRenderer };\n","import { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Deferred, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RenderType, CellType } from '../base/enum';\nimport { Data } from '../actions/data';\nimport { Column } from '../models/column';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport * as events from '../base/constant';\nimport { prepareColumns, setFormatter, getDatePredicate } from '../base/util';\nimport { ContentRender } from '../renderer/content-renderer';\nimport { HeaderRender } from '../renderer/header-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { HeaderCellRenderer } from '../renderer/header-cell-renderer';\nimport { StackedHeaderCellRenderer } from '../renderer/stacked-cell-renderer';\nimport { IndentCellRenderer } from '../renderer/indent-cell-renderer';\nimport { GroupCaptionCellRenderer, GroupCaptionEmptyCellRenderer } from '../renderer/caption-cell-renderer';\nimport { ExpandCellRenderer } from '../renderer/expand-cell-renderer';\nimport { HeaderIndentCellRenderer } from '../renderer/header-indent-renderer';\nimport { DetailHeaderIndentCellRenderer } from '../renderer/detail-header-indent-renderer';\nimport { DetailExpandCellRenderer } from '../renderer/detail-expand-cell-renderer';\n/**\n * Content module is used to render grid content\n * @hidden\n */\nvar Render = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function Render(parent, locator) {\n        this.emptyGrid = false;\n        this.parent = parent;\n        this.locator = locator;\n        this.data = new Data(parent, locator);\n        this.l10n = locator.getService('localization');\n        this.ariaService = this.locator.getService('ariaService');\n        this.renderer = this.locator.getService('rendererFactory');\n        this.addEventListener();\n    }\n    /**\n     * To initialize grid header, content and footer rendering\n     */\n    Render.prototype.render = function () {\n        var gObj = this.parent;\n        this.headerRenderer = this.renderer.getRenderer(RenderType.Header);\n        this.contentRenderer = this.renderer.getRenderer(RenderType.Content);\n        this.headerRenderer.renderPanel();\n        this.contentRenderer.renderPanel();\n        if (gObj.getColumns().length) {\n            this.isLayoutRendered = true;\n            this.headerRenderer.renderTable();\n            this.contentRenderer.renderTable();\n            this.emptyRow(false);\n        }\n        this.refreshDataManager();\n    };\n    /**\n     * Refresh the entire Grid.\n     * @return {void}\n     */\n    Render.prototype.refresh = function (e) {\n        if (e === void 0) { e = { requestType: 'refresh' }; }\n        this.parent.notify(e.requestType + \"-begin\", e);\n        this.parent.trigger(events.actionBegin, e);\n        if (e.cancel) {\n            this.parent.notify(events.cancelBegin, e);\n            return;\n        }\n        this.refreshDataManager(e);\n    };\n    Render.prototype.refreshComplete = function (e) {\n        this.parent.trigger(events.actionComplete, e);\n    };\n    /**\n     * The function is used to refresh the dataManager\n     * @return {void}\n     */\n    Render.prototype.refreshDataManager = function (args) {\n        var _this = this;\n        if (args === void 0) { args = {}; }\n        if (args.requestType !== 'virtualscroll') {\n            this.parent.showSpinner();\n        }\n        this.emptyGrid = false;\n        var dataManager;\n        var isFActon = this.isNeedForeignAction();\n        this.ariaService.setBusy(this.parent.getContent().firstChild, true);\n        if (isFActon) {\n            var deffered = new Deferred();\n            dataManager = this.getFData(deffered);\n        }\n        if (!dataManager) {\n            dataManager = this.data.getData(args, this.data.generateQuery().requiresCount());\n        }\n        else {\n            dataManager = dataManager.then(function (e) {\n                var query = _this.data.generateQuery().requiresCount();\n                if (_this.emptyGrid) {\n                    var def = new Deferred();\n                    def.resolve({ result: [], count: 0 });\n                    return def.promise;\n                }\n                return _this.data.getData(args, query);\n            });\n        }\n        if (this.parent.getForeignKeyColumns().length && (!isFActon || this.parent.searchSettings.key.length)) {\n            var deffered_1 = new Deferred();\n            dataManager = dataManager.then(function (e) {\n                _this.parent.notify(events.getForeignKeyData, { dataManager: dataManager, result: e, promise: deffered_1 });\n                return deffered_1.promise;\n            });\n        }\n        if (this.parent.groupSettings.disablePageWiseAggregates && this.parent.groupSettings.columns.length) {\n            dataManager = dataManager.then(function (e) { return _this.validateGroupRecords(e); });\n        }\n        dataManager.then(function (e) { return _this.dataManagerSuccess(e, args); })\n            .catch(function (e) { return _this.dataManagerFailure(e, args); });\n    };\n    Render.prototype.getFData = function (deferred) {\n        this.parent.notify(events.getForeignKeyData, { isComplex: true, promise: deferred });\n        return deferred.promise;\n    };\n    Render.prototype.isNeedForeignAction = function () {\n        var gObj = this.parent;\n        return !!((gObj.allowFiltering && gObj.filterSettings.columns.length) ||\n            (gObj.searchSettings.key.length)) && this.foreignKey(this.parent.getForeignKeyColumns());\n    };\n    Render.prototype.foreignKey = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            var fbool = false;\n            fbool = _this.parent.filterSettings.columns.some(function (value) {\n                return col.foreignKeyValue === value.field;\n            });\n            return !!(fbool || _this.parent.searchSettings.key.length);\n        });\n    };\n    Render.prototype.sendBulkRequest = function (args) {\n        var _this = this;\n        var promise = this.data.saveChanges(args.changes, this.parent.getPrimaryKeyFieldNames()[0], args.original);\n        var query = this.data.generateQuery().requiresCount();\n        if (this.data.dataManager.dataSource.offline) {\n            this.refreshDataManager({ requestType: 'batchsave' });\n            return;\n        }\n        else {\n            promise.then(function (e) {\n                _this.data.getData(args, query)\n                    .then(function (e) { return _this.dmSuccess(e, args); })\n                    .catch(function (e) { return _this.dmFailure(e, args); });\n            })\n                .catch(function (e) { return _this.dmFailure(e, args); });\n        }\n    };\n    Render.prototype.dmSuccess = function (e, args) {\n        this.dataManagerSuccess(e, args);\n    };\n    Render.prototype.dmFailure = function (e, args) {\n        this.dataManagerFailure(e, args);\n    };\n    /**\n     * Render empty row to Grid which is used at the time to represent to no records.\n     * @return {void}\n     * @hidden\n     */\n    Render.prototype.renderEmptyRow = function () {\n        this.emptyRow(true);\n    };\n    Render.prototype.emptyRow = function (isTrigger) {\n        var gObj = this.parent;\n        var tbody = this.contentRenderer.getTable().querySelector('tbody');\n        var tr;\n        remove(tbody);\n        tbody = this.parent.createElement('tbody');\n        tr = this.parent.createElement('tr', { className: 'e-emptyrow' });\n        tr.appendChild(this.parent.createElement('td', {\n            innerHTML: this.l10n.getConstant('EmptyRecord'),\n            attrs: { colspan: gObj.getColumns().length.toString() }\n        }));\n        tbody.appendChild(tr);\n        this.contentRenderer.renderEmpty(tbody);\n        if (isTrigger) {\n            this.parent.trigger(events.dataBound, {});\n            this.parent.notify(events.onEmpty, { rows: [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })] });\n        }\n    };\n    Render.prototype.dynamicColumnChange = function () {\n        if (this.parent.getCurrentViewRecords().length) {\n            this.updateColumnType(this.parent.getCurrentViewRecords()[0]);\n        }\n    };\n    Render.prototype.updateColumnType = function (record) {\n        var columns = this.parent.getColumns();\n        var value;\n        var data = record && record.items ? record.items[0] : record;\n        var fmtr = this.locator.getService('valueFormatter');\n        for (var i = 0, len = columns.length; i < len; i++) {\n            value = DataUtil.getObject(columns[i].field || '', data);\n            if (columns[i].isForeignColumn() && columns[i].columnData) {\n                value = DataUtil.getObject(columns[i].foreignKeyValue || '', columns[i].columnData[0]);\n            }\n            if (!isNullOrUndefined(value)) {\n                this.isColTypeDef = true;\n                if (!columns[i].type) {\n                    columns[i].type = value.getDay ? (value.getHours() > 0 || value.getMinutes() > 0 ||\n                        value.getSeconds() > 0 || value.getMilliseconds() > 0 ? 'datetime' : 'date') : typeof (value);\n                }\n            }\n            else {\n                columns[i].type = columns[i].type || null;\n            }\n            var valueFormatter = new ValueFormatter();\n            if (columns[i].format && (columns[i].format.skeleton || columns[i].format.format)) {\n                columns[i].setFormatter(valueFormatter.getFormatFunction(columns[i].format));\n                columns[i].setParser(valueFormatter.getParserFunction(columns[i].format));\n            }\n            if (typeof (columns[i].format) === 'string') {\n                setFormatter(this.locator, columns[i]);\n            }\n            else if (!columns[i].format && columns[i].type === 'number') {\n                columns[i].setParser(fmtr.getParserFunction({ format: 'n2' }));\n            }\n        }\n    };\n    Render.prototype.dataManagerSuccess = function (e, args) {\n        var gObj = this.parent;\n        gObj.trigger(events.beforeDataBound, e);\n        var len = Object.keys(e.result).length;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if ((!gObj.getColumns().length && !len) && !(gObj.columns.length && gObj.columns[0] instanceof Column)) {\n            gObj.hideSpinner();\n            return;\n        }\n        this.parent.isEdit = false;\n        this.parent.notify(events.tooltipDestroy, {});\n        gObj.currentViewData = e.result;\n        if (!len && e.count && gObj.allowPaging) {\n            gObj.prevPageMoving = true;\n            gObj.pageSettings.totalRecordsCount = e.count;\n            gObj.pageSettings.currentPage = Math.ceil(e.count / gObj.pageSettings.pageSize);\n            gObj.dataBind();\n            return;\n        }\n        if (!gObj.getColumns().length && len || !this.isLayoutRendered) {\n            this.updatesOnInitialRender(e);\n        }\n        if (!this.isColTypeDef && gObj.getCurrentViewRecords()) {\n            this.updateColumnType(gObj.getCurrentViewRecords()[0]);\n        }\n        this.parent.notify(events.dataReady, extend({ count: e.count, result: e.result, aggregates: e.aggregates }, args));\n        if (gObj.groupSettings.columns.length || (args && args.requestType === 'ungrouping')) {\n            this.headerRenderer.refreshUI();\n        }\n        if (len) {\n            this.contentRenderer.refreshContentRows(args);\n        }\n        else {\n            if (!gObj.getColumns().length) {\n                gObj.element.innerHTML = '';\n                alert(this.l10n.getConstant('EmptyDataSourceError')); //ToDO: change this alert as dialog\n                return;\n            }\n            this.contentRenderer.setRowElements([]);\n            this.renderEmptyRow();\n            if (args) {\n                var action = (args.requestType || '').toLowerCase() + '-complete';\n                this.parent.notify(action, args);\n            }\n            this.parent.hideSpinner();\n        }\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    Render.prototype.dataManagerFailure = function (e, args) {\n        this.ariaService.setOptions(this.parent.getContent().firstChild, { busy: false, invalid: true });\n        this.parent.trigger(events.actionFailure, { error: e });\n        this.parent.hideSpinner();\n        if (args.requestType === 'save' || args.requestType === 'delete'\n            || args.name === 'bulk-save') {\n            return;\n        }\n        this.parent.currentViewData = [];\n        this.renderEmptyRow();\n    };\n    Render.prototype.updatesOnInitialRender = function (e) {\n        this.isLayoutRendered = true;\n        if (this.parent.columns.length < 1) {\n            this.buildColumns(e.result[0]);\n        }\n        prepareColumns(this.parent.columns);\n        this.headerRenderer.renderTable();\n        this.contentRenderer.renderTable();\n        this.parent.notify(events.autoCol, {});\n    };\n    Render.prototype.buildColumns = function (record) {\n        var columns = Object.keys(record);\n        var cols = [];\n        for (var i = 0, len = columns.length; i < len; i++) {\n            cols[i] = { 'field': columns[i] };\n            if (this.parent.enableColumnVirtualization) {\n                cols[i].width = !isNullOrUndefined(cols[i].width) ? cols[i].width : 200;\n            }\n        }\n        this.parent.columns = cols;\n    };\n    Render.prototype.instantiateRenderer = function () {\n        this.renderer.addRenderer(RenderType.Header, new HeaderRender(this.parent, this.locator));\n        this.renderer.addRenderer(RenderType.Content, new ContentRender(this.parent, this.locator));\n        var cellrender = this.locator.getService('cellRendererFactory');\n        cellrender.addCellRenderer(CellType.Header, new HeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Data, new CellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Indent, new IndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaption, new GroupCaptionCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.GroupCaptionEmpty, new GroupCaptionEmptyCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.Expand, new ExpandCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.HeaderIndent, new HeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.StackedHeader, new StackedHeaderCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailHeader, new DetailHeaderIndentCellRenderer(this.parent, this.locator));\n        cellrender.addCellRenderer(CellType.DetailExpand, new DetailExpandCellRenderer(this.parent, this.locator));\n    };\n    Render.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.modelChanged, this.refresh, this);\n        this.parent.on(events.refreshComplete, this.refreshComplete, this);\n        this.parent.on(events.bulkSave, this.sendBulkRequest, this);\n        this.parent.on(events.showEmptyGrid, function () { _this.emptyGrid = true; }, this);\n        this.parent.on(events.autoCol, this.dynamicColumnChange, this);\n    };\n    /** @hidden */\n    Render.prototype.validateGroupRecords = function (e) {\n        var _this = this;\n        var index = e.result.length - 1;\n        if (index < 0) {\n            return Promise.resolve(e);\n        }\n        var group0 = e.result[0];\n        var groupN = e.result[index];\n        var predicate = [];\n        var addWhere = function (input) {\n            [group0, groupN].forEach(function (group) {\n                return predicate.push(new Predicate('field', '==', group.field).and(_this.getPredicate('key', 'equal', group.key)));\n            });\n            input.where(Predicate.or(predicate));\n        };\n        var query = new Query();\n        addWhere(query);\n        var curDm = new DataManager(e.result);\n        var curFilter = curDm.executeLocal(query);\n        var newQuery = this.data.generateQuery(true);\n        var rPredicate = [];\n        if (this.data.isRemote()) {\n            [group0, groupN].forEach(function (group) {\n                return rPredicate.push(_this.getPredicate(group.field, 'equal', group.key));\n            });\n            newQuery.where(Predicate.or(rPredicate));\n        }\n        else {\n            addWhere(newQuery);\n        }\n        var deferred = new Deferred();\n        this.data.getData({}, newQuery).then(function (r) {\n            _this.updateGroupInfo(curFilter, r.result);\n            deferred.resolve(e);\n        }).catch(function (e) { return deferred.reject(e); });\n        return deferred.promise;\n    };\n    Render.prototype.getPredicate = function (key, operator, value) {\n        if (value instanceof Date) {\n            return getDatePredicate({ field: key, operator: operator, value: value });\n        }\n        return new Predicate(key, operator, value);\n    };\n    Render.prototype.updateGroupInfo = function (current, untouched) {\n        var _this = this;\n        var dm = new DataManager(untouched);\n        current.forEach(function (element, index, array) {\n            var uGroup = dm.executeLocal(new Query()\n                .where(new Predicate('field', '==', element.field).and(_this.getPredicate('key', 'equal', element.key))))[0];\n            element.count = uGroup.count;\n            var itemGroup = element.items;\n            var uGroupItem = uGroup.items;\n            if (itemGroup.GroupGuid) {\n                element.items = _this.updateGroupInfo(element.items, uGroup.items);\n            }\n            _this.parent.aggregates.forEach(function (row) {\n                return row.columns.forEach(function (column) {\n                    var types = column.type instanceof Array ? column.type : [column.type];\n                    types.forEach(function (type) {\n                        var key = column.field + ' - ' + type.toLowerCase();\n                        var data = itemGroup.level ? uGroupItem.records : uGroup.items;\n                        var context = _this.parent;\n                        if (type === 'Custom') {\n                            element.aggregates[key] = column.customAggregate ?\n                                column.customAggregate.call(context, data, column) : '';\n                        }\n                        else {\n                            element.aggregates[key] = DataUtil.aggregates[type.toLowerCase()](data, column.field);\n                        }\n                    });\n                });\n            });\n        });\n        return current;\n    };\n    return Render;\n}());\nexport { Render };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\n/**\n * CellRendererFactory\n * @hidden\n */\nvar CellRendererFactory = /** @class */ (function () {\n    function CellRendererFactory() {\n        this.cellRenderMap = {};\n    }\n    CellRendererFactory.prototype.addCellRenderer = function (name, type) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            this.cellRenderMap[name] = type;\n        }\n    };\n    CellRendererFactory.prototype.getCellRenderer = function (name) {\n        name = typeof name === 'string' ? name : getEnumValue(CellType, name);\n        if (isNullOrUndefined(this.cellRenderMap[name])) {\n            throw \"The cellRenderer \" + name + \" is not found\";\n        }\n        else {\n            return this.cellRenderMap[name];\n        }\n    };\n    return CellRendererFactory;\n}());\nexport { CellRendererFactory };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * ServiceLocator\n * @hidden\n */\nvar ServiceLocator = /** @class */ (function () {\n    function ServiceLocator() {\n        this.services = {};\n    }\n    ServiceLocator.prototype.register = function (name, type) {\n        if (isNullOrUndefined(this.services[name])) {\n            this.services[name] = type;\n        }\n    };\n    ServiceLocator.prototype.getService = function (name) {\n        if (isNullOrUndefined(this.services[name])) {\n            throw \"The service \" + name + \" is not registered\";\n        }\n        return this.services[name];\n    };\n    return ServiceLocator;\n}());\nexport { ServiceLocator };\n","import { isNullOrUndefined, getEnumValue } from '@syncfusion/ej2-base';\nimport { RenderType } from '../base/enum';\n/**\n * RendererFactory\n * @hidden\n */\nvar RendererFactory = /** @class */ (function () {\n    function RendererFactory() {\n        this.rendererMap = {};\n    }\n    RendererFactory.prototype.addRenderer = function (name, type) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            this.rendererMap[rName] = type;\n        }\n    };\n    RendererFactory.prototype.getRenderer = function (name) {\n        var rName = getEnumValue(RenderType, name);\n        if (isNullOrUndefined(this.rendererMap[rName])) {\n            throw \"The renderer \" + rName + \" is not found\";\n        }\n        else {\n            return this.rendererMap[rName];\n        }\n    };\n    return RendererFactory;\n}());\nexport { RendererFactory };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { columnWidthChanged } from '../base/constant';\nimport { Column } from '../models/column';\n/**\n * ColumnWidthService\n * @hidden\n */\nvar ColumnWidthService = /** @class */ (function () {\n    function ColumnWidthService(parent) {\n        this.parent = parent;\n    }\n    ColumnWidthService.prototype.setWidthToColumns = function () {\n        var _this = this;\n        var i = 0;\n        var indexes = this.parent.getColumnIndexesInView();\n        var wFlag = true;\n        if (this.parent.allowGrouping) {\n            for (var len = this.parent.groupSettings.columns.length; i < len; i++) {\n                if (this.parent.enableColumnVirtualization && indexes.indexOf(i) === -1) {\n                    wFlag = false;\n                    continue;\n                }\n                this.setColumnWidth(new Column({ width: '30px' }), i);\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            this.setColumnWidth(new Column({ width: '30px' }), i);\n        }\n        this.parent.getColumns().forEach(function (column, index) {\n            _this.setColumnWidth(column, wFlag ? undefined : index);\n        });\n    };\n    ColumnWidthService.prototype.setColumnWidth = function (column, index, module) {\n        var columnIndex = isNullOrUndefined(index) ? this.parent.getNormalizedColumnIndex(column.uid) : index;\n        var cWidth = this.getWidth(column);\n        if (cWidth !== null) {\n            this.setWidth(cWidth, columnIndex);\n            if ((this.parent.allowResizing && module === 'resize') || (this.parent.getFrozenColumns() && this.parent.allowResizing)) {\n                this.setWidthToTable();\n            }\n            this.parent.notify(columnWidthChanged, { index: columnIndex, width: cWidth, column: column, module: module });\n        }\n    };\n    ColumnWidthService.prototype.setWidth = function (width, index) {\n        if (typeof (width) === 'string' && width.indexOf('%') !== -1) {\n            var elementWidth = this.parent.element.offsetWidth;\n            width = parseInt(width, 10) / 100 * (elementWidth);\n        }\n        var header = this.parent.getHeaderTable();\n        var content = this.parent.getContentTable();\n        var fWidth = formatUnit(width);\n        var headerCol;\n        var frzCols = this.parent.getFrozenColumns();\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        if (frzCols && index >= frzCols && mHdr && mHdr.querySelector('colgroup')) {\n            headerCol = mHdr.querySelector('colgroup').children[index - frzCols];\n        }\n        else {\n            headerCol = header.querySelector('colgroup').children[index];\n        }\n        if (headerCol) {\n            headerCol.style.width = fWidth;\n        }\n        var contentCol;\n        if (frzCols && index >= frzCols) {\n            contentCol = this.parent.getContent().querySelector('.e-movablecontent')\n                .querySelector('colgroup').children[index - frzCols];\n        }\n        else {\n            contentCol = content.querySelector('colgroup').children[index];\n        }\n        if (contentCol) {\n            contentCol.style.width = fWidth;\n        }\n        var edit = content.querySelector('.e-table.e-inline-edit');\n        if (edit) {\n            if (edit.querySelector('colgroup').children[index]) {\n                edit.querySelector('colgroup').children[index].style.width = fWidth;\n            }\n        }\n    };\n    ColumnWidthService.prototype.getSiblingsHeight = function (element) {\n        var previous = this.getHeightFromDirection(element, 'previous');\n        var next = this.getHeightFromDirection(element, 'next');\n        return previous + next;\n    };\n    ColumnWidthService.prototype.getHeightFromDirection = function (element, direction) {\n        var sibling = element[direction + 'ElementSibling'];\n        var result = 0;\n        var classList = ['e-gridheader', 'e-gridfooter', 'e-groupdroparea', 'e-gridpager', 'e-toolbar'];\n        while (sibling) {\n            if (classList.some(function (value) { return sibling.classList.contains(value); })) {\n                result += sibling.offsetHeight;\n            }\n            sibling = sibling[direction + 'ElementSibling'];\n        }\n        return result;\n    };\n    ColumnWidthService.prototype.getWidth = function (column) {\n        if (isNullOrUndefined(column.width) && this.parent.allowResizing) {\n            column.width = 200;\n        }\n        if (!column.width) {\n            return null;\n        }\n        var width = parseInt(column.width.toString(), 10);\n        if (column.minWidth && width < parseInt(column.minWidth.toString(), 10)) {\n            return column.minWidth;\n        }\n        else if ((column.maxWidth && width > parseInt(column.maxWidth.toString(), 10))) {\n            return column.maxWidth;\n        }\n        else {\n            return column.width;\n        }\n    };\n    ColumnWidthService.prototype.getTableWidth = function (columns) {\n        var tWidth = 0;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            var cWidth = this.getWidth(column);\n            if (column.visible !== false && cWidth !== null) {\n                tWidth += parseInt(cWidth.toString(), 10);\n            }\n        }\n        return tWidth;\n    };\n    ColumnWidthService.prototype.setWidthToFrozenTable = function () {\n        var columns = this.parent.getColumns();\n        columns.splice(this.parent.getFrozenColumns(), columns.length);\n        var freezeWidth = formatUnit(this.getTableWidth(columns));\n        this.parent.getHeaderTable().style.width = freezeWidth;\n        this.parent.getContentTable().style.width = freezeWidth;\n    };\n    ColumnWidthService.prototype.setWidthToMovableTable = function () {\n        var columns = this.parent.getColumns();\n        columns.splice(0, this.parent.getFrozenColumns());\n        var movableWidth = formatUnit(this.getTableWidth(columns));\n        if (this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild) {\n            this.parent.getHeaderContent().querySelector('.e-movableheader').firstElementChild.style.width\n                = movableWidth;\n        }\n        this.parent.getContent().querySelector('.e-movablecontent').firstElementChild.style.width =\n            movableWidth;\n    };\n    ColumnWidthService.prototype.setWidthToTable = function () {\n        var tWidth = formatUnit(this.getTableWidth(this.parent.getColumns()));\n        if (this.parent.getFrozenColumns()) {\n            this.setWidthToFrozenTable();\n            this.setWidthToMovableTable();\n        }\n        else {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.setColumnWidth(new Column({ width: '30px' }));\n            }\n            this.parent.getHeaderTable().style.width = tWidth;\n            this.parent.getContentTable().style.width = tWidth;\n        }\n        var edit = this.parent.element.querySelector('.e-table.e-inline-edit');\n        if (edit) {\n            edit.style.width = tWidth;\n        }\n    };\n    return ColumnWidthService;\n}());\nexport { ColumnWidthService };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, getValue, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, extend, Browser } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport * as event from '../base/constant';\n/**\n * FocusStrategy class\n * @hidden\n */\nvar FocusStrategy = /** @class */ (function () {\n    function FocusStrategy(parent) {\n        this.currentInfo = {};\n        this.oneTime = true;\n        this.swap = {};\n        this.forget = true;\n        this.skipFocus = true;\n        this.focusByClick = false;\n        this.prevIndexes = {};\n        this.parent = parent;\n        this.addEventListener();\n    }\n    FocusStrategy.prototype.focusCheck = function (e) {\n        var target = e.target;\n        this.focusByClick = true;\n        this.skipFocus = target.classList.contains('e-grid');\n    };\n    FocusStrategy.prototype.onFocus = function () {\n        if (this.parent.isDestroyed || Browser.isDevice || this.parent.enableVirtualization) {\n            return;\n        }\n        this.setActive(this.parent.frozenRows === 0, this.parent.frozenColumns !== 0);\n        var current = this.getContent().matrix.get(0, -1, [0, 1], null, this.getContent().validator());\n        this.getContent().matrix.select(current[0], current[1]);\n        if (this.skipFocus) {\n            this.focus();\n            this.skipFocus = false;\n        }\n    };\n    FocusStrategy.prototype.passiveFocus = function (e) {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (e.target && e.target.classList.contains('e-detailcell')) {\n            this.currentInfo.skipAction = false;\n            addClass([this.currentInfo.element], ['e-focused', 'e-focus']);\n        }\n    };\n    FocusStrategy.prototype.onBlur = function (e) {\n        if ((this.parent.isEdit || e && (!e.relatedTarget || closest(e.relatedTarget, '.e-grid')))) {\n            return;\n        }\n        this.removeFocus();\n        this.skipFocus = false;\n        this.currentInfo.skipAction = false;\n        if (this.getContent().getFocusInfo().elementToFocus) {\n            this.getContent().getFocusInfo().elementToFocus.tabIndex = 0;\n        }\n    };\n    FocusStrategy.prototype.onClick = function (e, force) {\n        var isContent = !isNullOrUndefined(closest(e.target, '.e-gridcontent'));\n        var isHeader = !isNullOrUndefined(closest(e.target, '.e-gridheader'));\n        isContent = isContent && isHeader ? !isContent : isContent;\n        var isFrozen = !isNullOrUndefined(closest(e.target, '.e-frozencontent')) ||\n            !isNullOrUndefined(closest(e.target, '.e-frozenheader'));\n        if (!isContent && isNullOrUndefined(closest(e.target, '.e-gridheader')) ||\n            e.target.classList.contains('e-content')) {\n            return;\n        }\n        this.setActive(isContent, isFrozen);\n        if (!isContent && isNullOrUndefined(closest(e.target, '.e-gridheader')) ||\n            e.target.classList.contains('e-filtermenudiv')) {\n            this.clearOutline();\n            return;\n        }\n        var beforeArgs = { cancel: false, byKey: false, byClick: !isNullOrUndefined(e.target), clickArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel || closest(e.target, '.e-inline-edit')) {\n            return;\n        }\n        this.setActive(isContent, isFrozen);\n        if (this.getContent()) {\n            var returnVal = this.getContent().onClick(e, force);\n            if (returnVal === false) {\n                return;\n            }\n            this.focus();\n        }\n    };\n    FocusStrategy.prototype.onKeyPress = function (e) {\n        if (this.skipOn(e)) {\n            return;\n        }\n        var beforeArgs = { cancel: false, byKey: true, byClick: false, keyArgs: e };\n        this.parent.notify(event.beforeCellFocused, beforeArgs);\n        if (beforeArgs.cancel) {\n            return;\n        }\n        var bValue = this.getContent().matrix.current;\n        this.currentInfo.outline = true;\n        var swapInfo = this.getContent().jump(e.action, bValue);\n        this.swap = swapInfo;\n        if (swapInfo.swap) {\n            this.setActive(!swapInfo.toHeader, swapInfo.toFrozen);\n            this.getContent().matrix.current = this.getContent().getNextCurrent(bValue, swapInfo, this.active, e.action);\n            this.prevIndexes = {};\n        }\n        this.setActiveByKey(e.action, this.getContent());\n        var returnVal = this.getContent().onKeyPress(e);\n        if (returnVal === false) {\n            this.clearIndicator();\n            return;\n        }\n        e.preventDefault();\n        this.focus(e);\n    };\n    FocusStrategy.prototype.skipOn = function (e) {\n        var target = e.target;\n        if (!target) {\n            return false;\n        }\n        if (this.currentInfo.skipAction) {\n            this.clearIndicator();\n            return true;\n        }\n        if (['pageUp', 'pageDown'].indexOf(e.action) > -1) {\n            this.clearIndicator();\n            return true;\n        }\n        return (e.action === 'delete'\n            || (this.parent.editSettings.mode !== 'Batch' && (this.parent.isEdit || ['insert', 'f2'].indexOf(e.action) > -1))\n            || (closest(document.activeElement, '.e-filterbarcell') !== null ||\n                closest(document.activeElement, '#' + this.parent.element.id + '_searchbar') !== null\n                    && ['enter', 'leftArrow', 'rightArrow',\n                        'shiftLeft', 'shiftRight', 'ctrlPlusA'].indexOf(e.action) > -1)\n            || (closest(target, '.e-gridcontent') === null && closest(target, '.e-gridheader') === null)\n            || (e.action === 'space' && (!target.classList.contains('e-gridchkbox') && closest(target, '.e-gridchkbox') === null\n                && closest(target, '.e-headerchkcelldiv') === null)));\n    };\n    FocusStrategy.prototype.getFocusedElement = function () {\n        return this.currentInfo.elementToFocus;\n    };\n    FocusStrategy.prototype.getContent = function () {\n        return this.active || this.content;\n    };\n    FocusStrategy.prototype.setActive = function (content, isFrozen) {\n        this.active = content ? isFrozen ? this.fContent : this.content :\n            isFrozen ? this.fHeader : this.header;\n    };\n    FocusStrategy.prototype.setFocusedElement = function (element) {\n        var _this = this;\n        this.currentInfo.elementToFocus = element;\n        setTimeout(function () { return _this.currentInfo.elementToFocus.focus(); }, 0);\n    };\n    FocusStrategy.prototype.focus = function (e) {\n        this.removeFocus();\n        this.addFocus(this.getContent().getFocusInfo(), e);\n    };\n    FocusStrategy.prototype.removeFocus = function (e) {\n        if (!this.currentInfo.element) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focused', 'e-focus']);\n        this.currentInfo.element.tabIndex = -1;\n    };\n    FocusStrategy.prototype.addFocus = function (info, e) {\n        this.currentInfo = info;\n        this.currentInfo.outline = info.outline && !isNullOrUndefined(e);\n        if (!info.element) {\n            return;\n        }\n        var isFocused = info.elementToFocus.classList.contains('e-focus');\n        if (isFocused) {\n            return;\n        }\n        if (this.currentInfo.outline) {\n            addClass([info.element], ['e-focused']);\n        }\n        addClass([info.elementToFocus], ['e-focus']);\n        info.element.tabIndex = 0;\n        if (!isFocused) {\n            this.setFocusedElement(info.elementToFocus);\n        }\n        this.parent.notify(event.cellFocused, {\n            element: info.elementToFocus,\n            parent: info.element,\n            indexes: this.getContent().matrix.current,\n            byKey: !isNullOrUndefined(e),\n            byClick: isNullOrUndefined(e),\n            keyArgs: e,\n            isJump: this.swap.swap,\n            container: this.getContent().getInfo(e),\n            outline: !isNullOrUndefined(e),\n            swapInfo: this.swap\n        });\n        var _a = this.getContent().matrix.current, rowIndex = _a[0], cellIndex = _a[1];\n        this.prevIndexes = { rowIndex: rowIndex, cellIndex: cellIndex };\n        this.focusedColumnUid = this.parent.getColumnByIndex(cellIndex).uid;\n        this.focusByClick = false;\n    };\n    FocusStrategy.prototype.refreshMatrix = function (content) {\n        var _this = this;\n        return function (e) {\n            if (content && (e.args && e.args.isFrozen) && !_this.fContent) {\n                _this.fContent = new FixedContentFocus(_this.parent);\n            }\n            else if (content && !_this.content) {\n                _this.content = new ContentFocus(_this.parent);\n            }\n            if (!content && (e.args && e.args.isFrozen) && !_this.fHeader) {\n                _this.fHeader = new FixedHeaderFocus(_this.parent);\n            }\n            else if (!content && !_this.header) {\n                _this.header = new HeaderFocus(_this.parent);\n            }\n            var cFocus = content ? (e.args && e.args.isFrozen) ? _this.fContent : _this.content :\n                (e.args && e.args.isFrozen) ? _this.fHeader : _this.header;\n            var rows = content ? e.rows.slice(_this.parent.frozenRows) : e.rows;\n            var updateRow = content ? e.rows.slice(0, _this.parent.frozenRows) : e.rows;\n            var matrix = cFocus.matrix.generate(updateRow, cFocus.selector);\n            cFocus.matrix.generate(rows, cFocus.selector);\n            cFocus.generateRows(updateRow, { matrix: matrix, handlerInstance: (e.args && e.args.isFrozen) ? _this.fHeader : _this.header });\n            if (!Browser.isDevice && !_this.focusByClick && e && e.args && e.args.requestType === 'paging') {\n                _this.skipFocus = false;\n                _this.parent.element.focus();\n            }\n            if (e && e.args && e.args.requestType === 'virtualscroll') {\n                if (_this.currentInfo.uid) {\n                    var index_1;\n                    var bool = e.rows.some(function (row, i) {\n                        index_1 = i;\n                        return row.uid === _this.currentInfo.uid;\n                    });\n                    if (bool) {\n                        _this.content.matrix.current[0] = index_1;\n                        _this.content.matrix.current[1] = _this.parent.getColumnIndexByUid(_this.focusedColumnUid) || 0;\n                        _this.focus();\n                    }\n                }\n            }\n        };\n    };\n    FocusStrategy.prototype.addEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.add(this.parent.element, 'mousedown', this.focusCheck, this);\n        EventHandler.add(this.parent.element, 'focus', this.onFocus, this);\n        this.parent.element.addEventListener('focus', this.passiveHandler = function (e) { return _this.passiveFocus(e); }, true);\n        EventHandler.add(this.parent.element, 'focusout', this.onBlur, this);\n        this.parent.on(event.keyPressed, this.onKeyPress, this);\n        this.parent.on(event.click, this.onClick, this);\n        this.parent.on(event.contentReady, this.refreshMatrix(true), this);\n        this.parent.on(event.headerRefreshed, this.refreshMatrix(), this);\n        this.parent.on('close-edit', this.restoreFocus, this);\n        ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.on(evt, _this.clearIndicator, _this); });\n        ['sorting'].forEach(function (action) { return _this.parent.on(action + \"-complete\", _this.restoreFocus, _this); });\n        this.parent.on(event.batchAdd, this.refreshMatrix(true), this);\n        this.parent.on(event.batchCancel, this.refreshMatrix(true), this);\n        this.parent.on(event.batchDelete, this.refreshMatrix(true), this);\n        this.parent.on(event.detailDataBound, this.refreshMatrix(true), this);\n        this.parent.on(event.onEmpty, this.refreshMatrix(true), this);\n        this.parent.on(event.cellFocused, this.internalCellFocus, this);\n    };\n    FocusStrategy.prototype.removeEventListener = function () {\n        var _this = this;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, 'mousedown', this.focusCheck);\n        EventHandler.remove(this.parent.element, 'focus', this.onFocus);\n        EventHandler.remove(this.parent.element, 'focusout', this.onBlur);\n        this.parent.element.removeEventListener('focus', this.passiveHandler, true);\n        this.parent.off(event.keyPressed, this.onKeyPress);\n        this.parent.off(event.click, this.onClick);\n        this.parent.off(event.contentReady, this.refreshMatrix(true));\n        this.parent.off(event.headerRefreshed, this.refreshMatrix());\n        this.parent.off('close-edit', this.restoreFocus);\n        ['start-edit', 'start-add'].forEach(function (evt) { return _this.parent.off(evt, _this.clearOutline); });\n        ['sorting'].forEach(function (action) { return _this.parent.off(action + \"-complete\", _this.restoreFocus); });\n        this.parent.off(event.batchAdd, this.refreshMatrix(true));\n        this.parent.off(event.batchDelete, this.refreshMatrix(true));\n        this.parent.off(event.batchCancel, this.refreshMatrix(true));\n        this.parent.off(event.detailDataBound, this.refreshMatrix(true));\n        this.parent.off(event.onEmpty, this.refreshMatrix(true));\n        this.parent.off(event.cellFocused, this.internalCellFocus);\n    };\n    FocusStrategy.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    FocusStrategy.prototype.restoreFocus = function () {\n        this.addFocus(this.getContent().getFocusInfo());\n    };\n    FocusStrategy.prototype.clearOutline = function () {\n        this.getContent().matrix.current = this.getContent().matrix.get(0, -1, [0, 1], 'downArrow', this.getContent().validator());\n        this.clearIndicator();\n    };\n    FocusStrategy.prototype.clearIndicator = function () {\n        if (!this.currentInfo.element || !this.currentInfo.elementToFocus) {\n            return;\n        }\n        removeClass([this.currentInfo.element, this.currentInfo.elementToFocus], ['e-focus', 'e-focused']);\n    };\n    FocusStrategy.prototype.getPrevIndexes = function () {\n        var forget = this.forget;\n        this.forget = false;\n        return forget ? { rowIndex: null, cellIndex: null } : this.prevIndexes;\n    };\n    FocusStrategy.prototype.forgetPrevious = function () {\n        this.forget = true;\n    };\n    FocusStrategy.prototype.setActiveByKey = function (action, active) {\n        var _this = this;\n        if (this.parent.frozenColumns === 0 && this.parent.frozenRows === 0) {\n            return;\n        }\n        var info;\n        var actions = {\n            'home': function () { return ({ toHeader: !info.isContent, toFrozen: true }); },\n            'end': function () { return ({ toHeader: !info.isContent, toFrozen: false }); },\n            'ctrlHome': function () { return ({ toHeader: true, toFrozen: _this.parent.frozenColumns !== 0 }); },\n            'ctrlEnd': function () { return ({ toHeader: false, toFrozen: false }); }\n        };\n        if (!(action in actions)) {\n            return;\n        }\n        info = active.getInfo();\n        var swap = actions[action]();\n        this.setActive(!swap.toHeader, swap.toFrozen);\n        this.getContent().matrix.current = active.matrix.current;\n    };\n    FocusStrategy.prototype.internalCellFocus = function (e) {\n        if (!(e.byKey && e.container.isContent && e.keyArgs.action === 'enter'\n            && (e.parent.classList.contains('e-detailcell') ||\n                e.parent.classList.contains('e-unboundcell') || e.parent.classList.contains('e-templatecell')))) {\n            return;\n        }\n        this.clearIndicator();\n        var focusEle = this.getContent().getFocusable(this.getFocusedElement());\n        this.setFocusedElement(focusEle);\n        this.currentInfo.skipAction = true;\n    };\n    return FocusStrategy;\n}());\nexport { FocusStrategy };\n/**\n * Create matrix from row collection which act as mental model for cell navigation\n * @hidden\n */\nvar Matrix = /** @class */ (function () {\n    function Matrix() {\n        this.matrix = [];\n        this.current = [];\n    }\n    Matrix.prototype.set = function (rowIndex, columnIndex, allow) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.columns));\n        this.matrix[rowIndex] = this.matrix[rowIndex] || [];\n        this.matrix[rowIndex][columnIndex] = allow ? 1 : 0;\n    };\n    Matrix.prototype.get = function (rowIndex, columnIndex, navigator, action, validator) {\n        var tmp = columnIndex;\n        if (rowIndex + navigator[0] < 0) {\n            return [rowIndex, columnIndex];\n        }\n        rowIndex = Math.max(0, Math.min(rowIndex + navigator[0], this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex + navigator[1], this.matrix[rowIndex].length - 1));\n        if (tmp + navigator[1] > this.matrix[rowIndex].length - 1 && validator(rowIndex, columnIndex, action)) {\n            return [rowIndex, tmp];\n        }\n        var first = this.first(this.matrix[rowIndex], columnIndex, navigator, true, action);\n        columnIndex = first === null ? tmp : first;\n        var val = getValue(rowIndex + \".\" + columnIndex, this.matrix);\n        return this.inValid(val) || !validator(rowIndex, columnIndex, action) ?\n            this.get(rowIndex, tmp, navigator, action, validator) : [rowIndex, columnIndex];\n    };\n    Matrix.prototype.first = function (vector, index, navigator, moveTo, action) {\n        if (((index < 0 || index === vector.length) && this.inValid(vector[index])\n            && (action !== 'upArrow' && action !== 'downArrow')) || !vector.some(function (v) { return v === 1; })) {\n            return null;\n        }\n        return !this.inValid(vector[index]) ? index :\n            this.first(vector, (['upArrow', 'downArrow', 'shiftUp', 'shiftDown'].indexOf(action) !== -1) ? moveTo ? 0 : ++index : index + navigator[1], navigator, false, action);\n    };\n    Matrix.prototype.select = function (rowIndex, columnIndex) {\n        rowIndex = Math.max(0, Math.min(rowIndex, this.rows));\n        columnIndex = Math.max(0, Math.min(columnIndex, this.matrix[rowIndex].length - 1));\n        this.current = [rowIndex, columnIndex];\n    };\n    Matrix.prototype.generate = function (rows, selector) {\n        var _this = this;\n        this.rows = rows.length - 1;\n        this.matrix = [];\n        rows.forEach(function (row, rIndex) {\n            var cells = row.cells.filter(function (c) { return c.isSpanned !== true; });\n            _this.columns = Math.max(cells.length - 1, _this.columns | 0);\n            cells.forEach(function (cell, cIndex) {\n                _this.set(rIndex, cIndex, selector(row, cell));\n            });\n        });\n        return this.matrix;\n    };\n    Matrix.prototype.inValid = function (value) {\n        return value === 0 || value === undefined;\n    };\n    return Matrix;\n}());\nexport { Matrix };\n/**\n * @hidden\n */\nvar ContentFocus = /** @class */ (function () {\n    function ContentFocus(parent) {\n        var _this = this;\n        this.matrix = new Matrix();\n        this.parent = parent;\n        this.keyActions = {\n            'rightArrow': [0, 1],\n            'tab': [0, 1],\n            'leftArrow': [0, -1],\n            'shiftTab': [0, -1],\n            'upArrow': [-1, 0],\n            'downArrow': [1, 0],\n            'shiftUp': [-1, 0],\n            'shiftDown': [1, 0],\n            'shiftRight': [0, 1],\n            'shiftLeft': [0, -1],\n            'enter': [1, 0],\n            'shiftEnter': [-1, 0]\n        };\n        this.indexesByKey = function (action) {\n            var opt = {\n                'home': [_this.matrix.current[0], -1, 0, 1],\n                'end': [_this.matrix.current[0], _this.matrix.columns + 1, 0, -1],\n                'ctrlHome': [0, -1, 0, 1],\n                'ctrlEnd': [_this.matrix.rows, _this.matrix.columns + 1, 0, -1]\n            };\n            return opt[action] || null;\n        };\n    }\n    ContentFocus.prototype.getTable = function () {\n        return (this.parent.frozenColumns ?\n            this.parent.getContent().querySelector('.e-movablecontent .e-table') :\n            this.parent.getContentTable());\n    };\n    ContentFocus.prototype.onKeyPress = function (e) {\n        var navigator = this.keyActions[e.action];\n        var current = this.getCurrentFromAction(e.action, navigator, e.action in this.keyActions, e);\n        if (!current) {\n            return;\n        }\n        if ((['tab', 'shiftTab'].indexOf(e.action) > -1 && this.matrix.current || []).toString() === current.toString()) {\n            if (current.toString() === [this.matrix.rows, this.matrix.columns].toString() ||\n                current.toString() === [0, 0].toString()) {\n                return false;\n            }\n        }\n        this.matrix.select(current[0], current[1]);\n    };\n    ContentFocus.prototype.getCurrentFromAction = function (action, navigator, isPresent, e) {\n        if (navigator === void 0) { navigator = [0, 0]; }\n        if (!isPresent && !this.indexesByKey(action)) {\n            return null;\n        }\n        if (!this.shouldFocusChange(e)) {\n            return this.matrix.current;\n        }\n        var _a = this.indexesByKey(action) || this.matrix.current.concat(navigator), rowIndex = _a[0], cellIndex = _a[1], rN = _a[2], cN = _a[3];\n        var current = this.matrix.get(rowIndex, cellIndex, [rN, cN], action, this.validator());\n        return current;\n    };\n    ContentFocus.prototype.onClick = function (e, force) {\n        var target = e.target;\n        target = (target.classList.contains('e-rowcell') ? target : closest(target, 'td'));\n        target = target ? target : closest(e.target, 'td.e-detailrowcollapse')\n            || closest(e.target, 'td.e-detailrowexpand');\n        target = closest(e.target, 'td.e-detailcell') ?\n            isNullOrUndefined(closest(closest(e.target, '.e-grid'), 'td.e-detailcell')) ? null : target : target;\n        target = target && closest(target, 'table').classList.contains('e-table') ? target : null;\n        if (!target) {\n            return false;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var _b = this.matrix.current, oRowIndex = _b[0], oCellIndex = _b[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val) || (!force && oRowIndex === rowIndex && oCellIndex === cellIndex)) {\n            return false;\n        }\n        this.matrix.select(rowIndex, cellIndex);\n    };\n    ContentFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        this.matrix.current = [rowIndex, cellIndex];\n        info.element = !isNullOrUndefined(this.getTable().rows[rowIndex]) ? this.getTable().rows[rowIndex].cells[cellIndex] : null;\n        if (!info.element) {\n            return info;\n        }\n        info.elementToFocus = !info.element.classList.contains('e-unboundcell') && !info.element.classList.contains('e-detailcell')\n            ? this.getFocusable(info.element) : info.element;\n        info.outline = true;\n        info.uid = info.element.parentElement.getAttribute('data-uid');\n        return info;\n    };\n    ContentFocus.prototype.getFocusable = function (element) {\n        var query = 'button, [href], input:not([type=\"hidden\"]), select, textarea, [tabindex]:not([tabindex=\"-1\"])';\n        if (this.parent.isEdit) {\n            query = 'input:not([type=\"hidden\"]), select:not([aria-hidden=\"true\"]), textarea';\n        }\n        var child = [].slice.call(element.querySelectorAll(query));\n        /* Select the first focusable child element\n         * if no child found then select the cell itself.\n         * if Grid is in editable state, check for editable control inside child.\n         */\n        return child.length ? child[0] : element;\n    };\n    ContentFocus.prototype.selector = function (row, cell) {\n        var types = [CellType.Expand, CellType.GroupCaption, CellType.CaptionSummary, CellType.GroupSummary];\n        return ((row.isDataRow && cell.visible && (cell.isDataCell || cell.isTemplate))\n            || (row.isDataRow && cell.cellType === CellType.DetailExpand)\n            || (!row.isDataRow && types.indexOf(cell.cellType) > -1)\n            || (cell.column && cell.column.type === 'checkbox')\n            || (cell.cellType === CellType.CommandColumn))\n            && !(row.edit === 'delete' && row.isDirty);\n    };\n    ContentFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.frozenColumns > 0 &&\n            ((action === 'leftArrow' || action === 'shiftTab') && current[1] === 0);\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        var info = {\n            swap: ((action === 'upArrow' || enterFrozen) && current[0] === 0) || frozenSwap,\n            toHeader: (action === 'upArrow' || enterFrozen) && current[0] === 0,\n            toFrozen: frozenSwap\n        };\n        return info;\n    };\n    ContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current = [];\n        if (action === 'rightArrow' || action === 'tab') {\n            current[0] = previous[0];\n            current[1] = -1;\n        }\n        else if (action === 'downArrow' || action === 'enter') {\n            current[0] = -1;\n            current[1] = previous[1];\n        }\n        return current;\n    };\n    ContentFocus.prototype.generateRows = function (rows, optionals) {\n        var matrix = optionals.matrix, handlerInstance = optionals.handlerInstance;\n        var len = handlerInstance.matrix.matrix.length;\n        var defaultLen = this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar' ? len + 1 : len;\n        handlerInstance.matrix.matrix = handlerInstance.matrix.matrix.slice(0, defaultLen); //Header matrix update.\n        handlerInstance.matrix.rows = defaultLen;\n        (_a = handlerInstance.matrix.matrix).push.apply(_a, matrix);\n        handlerInstance.matrix.rows += matrix.length;\n        var _a;\n    };\n    ContentFocus.prototype.getInfo = function (e) {\n        var info = this.getFocusInfo();\n        var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n        var isData = info.element.classList.contains('e-rowcell');\n        var isSelectable = isData || (e && e.action !== 'enter' && (info.element.classList.contains('e-detailrowcollapse')\n            || info.element.classList.contains('e-detailrowexpand')));\n        var _b = [Math.min(parseInt(info.element.parentElement.getAttribute('aria-rowindex'), 10), rIndex),\n            Math.min(parseInt(info.element.getAttribute('aria-colindex'), 10), cIndex)], rowIndex = _b[0], cellIndex = _b[1];\n        return { isContent: true, isDataCell: isData, indexes: [rowIndex, cellIndex], isSelectable: isSelectable };\n    };\n    ContentFocus.prototype.validator = function () {\n        var table = this.getTable();\n        return function (rowIndex, cellIndex, action) {\n            var cell = table.rows[rowIndex].cells[cellIndex];\n            if (action === 'enter' || action === 'shiftEnter') {\n                return cell.classList.contains('e-rowcell');\n            }\n            if ((action === 'shiftUp' || action === 'shiftDown') && cell.classList.contains('e-rowcell')) {\n                return true;\n            }\n            else if (action !== 'shiftUp' && action !== 'shiftDown') {\n                return cell.getBoundingClientRect().width !== 0;\n            }\n            return false;\n        };\n    };\n    ContentFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, _b = _a[0], rIndex = _b === void 0 ? -1 : _b, _c = _a[1], cIndex = _c === void 0 ? -1 : _c;\n        if (rIndex < 0 || cIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rIndex + \".cells.\" + cIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'shiftEnter' ?\n            cell.classList.contains('e-rowcell') && !cell.classList.contains('e-unboundcell')\n                && !cell.classList.contains('e-templatecell') && !cell.classList.contains('e-detailcell') : true;\n    };\n    return ContentFocus;\n}());\nexport { ContentFocus };\n/**\n * @hidden\n */\nvar HeaderFocus = /** @class */ (function (_super) {\n    __extends(HeaderFocus, _super);\n    function HeaderFocus(parent) {\n        return _super.call(this, parent) || this;\n    }\n    HeaderFocus.prototype.getTable = function () {\n        return (this.parent.getFrozenColumns() ?\n            this.parent.getHeaderContent().querySelector('.e-movableheader .e-table') :\n            this.parent.getHeaderTable());\n    };\n    HeaderFocus.prototype.onClick = function (e) {\n        var target = e.target;\n        target = (target.classList.contains('e-headercell') ? target : closest(target, 'th'));\n        if (!target && this.parent.frozenRows !== 0) {\n            target = (e.target.classList.contains('e-rowcell') ? e.target :\n                closest(e.target, 'td'));\n        }\n        if (!target) {\n            return;\n        }\n        var _a = [target.parentElement.rowIndex, target.cellIndex], rowIndex = _a[0], cellIndex = _a[1];\n        var val = getValue(rowIndex + \".\" + cellIndex, this.matrix.matrix);\n        if (this.matrix.inValid(val)) {\n            return false;\n        }\n        this.matrix.select(target.parentElement.rowIndex, target.cellIndex);\n    };\n    HeaderFocus.prototype.getFocusInfo = function () {\n        var info = {};\n        var _a = this.matrix.current, _b = _a[0], rowIndex = _b === void 0 ? 0 : _b, _c = _a[1], cellIndex = _c === void 0 ? 0 : _c;\n        info.element = this.getTable().rows[rowIndex].cells[cellIndex];\n        info.elementToFocus = this.getFocusable(info.element);\n        info.outline = !info.element.classList.contains('e-filterbarcell');\n        return info;\n    };\n    HeaderFocus.prototype.selector = function (row, cell) {\n        return (cell.visible && (cell.column.field !== undefined || cell.isTemplate)) || cell.column.type === 'checkbox' ||\n            cell.cellType === CellType.StackedHeader;\n    };\n    HeaderFocus.prototype.jump = function (action, current) {\n        var frozenSwap = this.parent.frozenColumns > 0 &&\n            (action === 'leftArrow' || action === 'shiftTab') && current[1] === 0;\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        return {\n            swap: ((action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1) ||\n                frozenSwap,\n            toHeader: frozenSwap,\n            toFrozen: frozenSwap\n        };\n    };\n    HeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current1 = [];\n        if (action === 'upArrow' || action === 'shiftEnter') {\n            current1[0] = this.matrix.matrix.length;\n            current1[1] = previous[1];\n        }\n        else if (action === 'rightArrow' || action === 'tab') {\n            current1[0] = previous[0];\n            current1[1] = -1;\n        }\n        return current1;\n    };\n    HeaderFocus.prototype.generateRows = function (rows) {\n        var _this = this;\n        var length = this.matrix.matrix.length;\n        if (this.parent.allowFiltering && this.parent.filterSettings.type === 'FilterBar') {\n            this.matrix.rows = ++this.matrix.rows;\n            rows[0].cells.forEach(function (cell, cIndex) {\n                return _this.matrix.set(length, cIndex, cell.visible && cell.column.allowFiltering !== false);\n            });\n        }\n    };\n    HeaderFocus.prototype.getInfo = function (e) {\n        return extend(_super.prototype.getInfo.call(this, e), { isContent: false, isHeader: true });\n    };\n    HeaderFocus.prototype.validator = function () {\n        return function () { return true; };\n    };\n    HeaderFocus.prototype.shouldFocusChange = function (e) {\n        var _a = this.matrix.current, rIndex = _a[0], cIndex = _a[1];\n        if (rIndex < 0 || cIndex < 0) {\n            return true;\n        }\n        var cell = getValue(rIndex + \".cells.\" + cIndex, this.getTable().rows);\n        if (!cell) {\n            return true;\n        }\n        return e.action === 'enter' || e.action === 'altDownArrow' ? !cell.classList.contains('e-headercell') : true;\n    };\n    return HeaderFocus;\n}(ContentFocus));\nexport { HeaderFocus };\nvar FixedContentFocus = /** @class */ (function (_super) {\n    __extends(FixedContentFocus, _super);\n    function FixedContentFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedContentFocus.prototype.getTable = function () {\n        return this.parent.getContent().querySelector('.e-frozencontent .e-table');\n    };\n    FixedContentFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'shiftEnter';\n        return {\n            swap: (action === 'upArrow' || enterFrozen) && current[0] === 0\n                || ((action === 'tab' || action === 'rightArrow') && current[1] === this.matrix.columns),\n            toHeader: (action === 'upArrow' || enterFrozen) && current[0] === 0,\n            toFrozen: (action === 'upArrow' || enterFrozen) && current[0] === 0\n        };\n    };\n    FixedContentFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current2 = [];\n        if (action === 'leftArrow' || action === 'shiftTab') {\n            current2[0] = previous[0];\n            current2[1] = active.matrix.columns + 1;\n        }\n        else if (action === 'downArrow' || action === 'enter') {\n            current2[0] = -1;\n            current2[1] = previous[1];\n        }\n        return current2;\n    };\n    return FixedContentFocus;\n}(ContentFocus));\nexport { FixedContentFocus };\nvar FixedHeaderFocus = /** @class */ (function (_super) {\n    __extends(FixedHeaderFocus, _super);\n    function FixedHeaderFocus() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FixedHeaderFocus.prototype.jump = function (action, current) {\n        var enterFrozen = this.parent.frozenRows !== 0 && action === 'enter';\n        return {\n            swap: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1\n                || ((action === 'rightArrow' || action === 'tab') && current[1] === this.matrix.columns),\n            toHeader: (action === 'rightArrow' || action === 'tab') && current[1] === this.matrix.columns,\n            toFrozen: (action === 'downArrow' || enterFrozen) && current[0] === this.matrix.matrix.length - 1\n        };\n    };\n    FixedHeaderFocus.prototype.getTable = function () {\n        return (this.parent.getHeaderContent().querySelector('.e-frozenheader .e-table'));\n    };\n    FixedHeaderFocus.prototype.getNextCurrent = function (previous, swap, active, action) {\n        if (previous === void 0) { previous = []; }\n        var current3 = [];\n        if (action === 'leftArrow' || action === 'shiftTab') {\n            current3[0] = previous[0];\n            current3[1] = active.matrix.columns + 1;\n        }\n        else if (action === 'upArrow' || action === 'shiftEnter') {\n            current3[0] = this.matrix.matrix.length;\n            current3[1] = previous[1];\n        }\n        return current3;\n    };\n    return FixedHeaderFocus;\n}(HeaderFocus));\nexport { FixedHeaderFocus };\n/** @hidden */\nvar SearchBox = /** @class */ (function () {\n    function SearchBox(searchBox) {\n        this.searchBox = searchBox;\n    }\n    SearchBox.prototype.searchFocus = function (args) {\n        args.target.parentElement.classList.add('e-input-focus');\n    };\n    SearchBox.prototype.searchBlur = function (args) {\n        args.target.parentElement.classList.remove('e-input-focus');\n    };\n    SearchBox.prototype.wireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.add(this.searchBox, 'focus', this.searchFocus, this);\n            EventHandler.add(this.searchBox, 'blur', this.searchBlur, this);\n        }\n    };\n    SearchBox.prototype.unWireEvent = function () {\n        if (this.searchBox) {\n            EventHandler.remove(this.searchBox, 'focus', this.searchFocus);\n            EventHandler.remove(this.searchBox, 'blur', this.searchBlur);\n        }\n    };\n    return SearchBox;\n}());\nexport { SearchBox };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Property, ChildProperty } from '@syncfusion/ej2-base';\n/**\n * Configures the paging behavior of the Grid.\n */\nvar PageSettings = /** @class */ (function (_super) {\n    __extends(PageSettings, _super);\n    function PageSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(12)\n    ], PageSettings.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(8)\n    ], PageSettings.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], PageSettings.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], PageSettings.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], PageSettings.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property(null)\n    ], PageSettings.prototype, \"template\", void 0);\n    return PageSettings;\n}(ChildProperty));\nexport { PageSettings };\n","var __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nimport { Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, isUndefined, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { remove, closest } from '@syncfusion/ej2-base';\nimport { Query } from '@syncfusion/ej2-data';\nimport { setCssInGridPopUp, getPosition, parentsUntil, addRemoveActiveClasses, removeAddCboxClasses } from '../base/util';\nimport * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\n/**\n * The `Selection` module is used to handle cell and row selection.\n */\nvar Selection = /** @class */ (function () {\n    /**\n     * Constructor for the Grid selection module\n     * @hidden\n     */\n    function Selection(parent, selectionSettings, locator) {\n        //Internal variables       \n        /**\n         * @hidden\n         */\n        this.selectedRowIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRowCellIndexes = [];\n        /**\n         * @hidden\n         */\n        this.selectedRecords = [];\n        this.preventFocus = false;\n        this.isMultiShiftRequest = false;\n        this.isMultiCtrlRequest = false;\n        this.enableSelectMultiTouch = false;\n        this.selectedRowState = {};\n        this.totalRecordsCount = 0;\n        this.chkAllCollec = [];\n        this.isCheckedOnAdd = false;\n        this.persistSelectedData = [];\n        this.isCancelDeSelect = false;\n        this.isPreventCellSelect = false;\n        this.disableUI = false;\n        this.parent = parent;\n        this.selectionSettings = selectionSettings;\n        this.factory = locator.getService('rendererFactory');\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n    }\n    Selection.prototype.initializeSelection = function () {\n        EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n    };\n    /**\n     * The function used to trigger onActionBegin\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionBegin = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n    };\n    Selection.prototype.fDataUpdate = function (args) {\n        if (args.cellIndex || args.rowIndex) {\n            var rowObj = this.getRowObj(isNullOrUndefined(args.rowIndex) ? isNullOrUndefined(args.cellIndex) ?\n                this.currentIndex : args.cellIndex.rowIndex : args.rowIndex);\n            args.foreignKeyData = rowObj.foreignKeyData;\n        }\n        return args;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.onActionComplete = function (args, type) {\n        this.parent.trigger(type, this.fDataUpdate(args));\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Selection.prototype.getModuleName = function () {\n        return 'selection';\n    };\n    /**\n     * To destroy the selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.hidePopUp();\n        this.clearSelection();\n        this.removeEventListener();\n        EventHandler.remove(this.parent.getContent(), 'mousedown', this.mouseDownHandler);\n    };\n    Selection.prototype.isEditing = function () {\n        return (this.parent.editSettings.mode === 'Normal' || (this.parent.editSettings.mode === 'Batch' &&\n            this.parent.editModule.formObj && !this.parent.editModule.formObj.validate())) &&\n            this.parent.isEdit && !this.parent.isPersistSelection;\n    };\n    Selection.prototype.getSelectedMovableRow = function (index) {\n        var gObj = this.parent;\n        if (gObj.getFrozenColumns()) {\n            return gObj.getMovableRowByIndex(index);\n        }\n        return null;\n    };\n    /**\n     * Selects a row by the given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectRow = function (index, isToggle) {\n        var gObj = this.parent;\n        var selectedRow = gObj.getRowByIndex(index);\n        var selectedMovableRow = this.getSelectedMovableRow(index);\n        var selectData = gObj.getCurrentViewRecords()[index];\n        if (gObj.enableVirtualization && gObj.allowGrouping && gObj.groupSettings.columns.length && selectedRow) {\n            selectData = gObj.getRowObjectFromUID(selectedRow.getAttribute('data-uid')).data;\n        }\n        if (!this.isRowType() || !selectedRow || this.isEditing()) {\n            // if (this.isEditing()) {\n            //     gObj.selectedRowIndex = index;\n            // }\n            return;\n        }\n        var isRowSelected = selectedRow.hasAttribute('aria-selected');\n        isToggle = !isToggle ? isToggle :\n            !this.selectedRowIndexes.length ? false :\n                (this.selectedRowIndexes.length === 1 ? (index === this.selectedRowIndexes[0]) : false);\n        var args;\n        var can = 'cancel';\n        if (!isToggle) {\n            args = {\n                data: selectData, rowIndex: index, isCtrlPressed: this.isMultiCtrlRequest,\n                isShiftPressed: this.isMultiShiftRequest, row: selectedRow,\n                previousRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex, target: this.target, cancel: false\n            };\n            args = this.addMovableArgs(args, selectedMovableRow);\n            this.onActionBegin(args, events.rowSelecting);\n        }\n        if (!isNullOrUndefined(args) && args[can] === true) {\n            return;\n        }\n        this.clearRow();\n        if (!isToggle) {\n            this.updateRowSelection(selectedRow, index);\n            if (gObj.getFrozenColumns()) {\n                this.updateRowSelection(selectedMovableRow, index);\n            }\n            gObj.selectedRowIndex = index;\n        }\n        if (!isToggle) {\n            args = {\n                data: selectData, rowIndex: index,\n                row: selectedRow, previousRow: gObj.getRows()[this.prevRowIndex],\n                previousRowIndex: this.prevRowIndex, target: this.target\n            };\n            args = this.addMovableArgs(args, selectedMovableRow);\n            this.onActionComplete(args, events.rowSelected);\n        }\n        this.updateRowProps(index);\n    };\n    Selection.prototype.addMovableArgs = function (targetObj, mRow) {\n        if (this.parent.getFrozenColumns()) {\n            var mObj = { mRow: mRow, previousMovRow: this.parent.getMovableRows()[this.prevRowIndex] };\n            targetObj = __assign({}, targetObj, mObj);\n        }\n        return targetObj;\n    };\n    /**\n     * Selects a range of rows from start and end row indexes.\n     * @param  {number} startIndex - Specifies the start row index.\n     * @param  {number} endIndex - Specifies the end row index.\n     * @return {void}\n     */\n    Selection.prototype.selectRowsByRange = function (startIndex, endIndex) {\n        this.selectRows(this.getCollectionFromIndexes(startIndex, endIndex));\n        this.parent.selectedRowIndex = endIndex;\n    };\n    /**\n     * Selects a collection of rows by index.\n     * @param  {number[]} rowIndexes - Specifies an array of row indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectRows = function (rowIndexes) {\n        var gObj = this.parent;\n        var rowIndex = !this.isSingleSel() ? rowIndexes[0] : rowIndexes[rowIndexes.length - 1];\n        var selectedRow = gObj.getRowByIndex(rowIndex);\n        var selectedMovableRow = this.getSelectedMovableRow(rowIndex);\n        var frzCols = gObj.getFrozenColumns();\n        var can = 'cancel';\n        var selectedData = gObj.getCurrentViewRecords()[rowIndexes[0]];\n        if (!this.isRowType() || this.isEditing()) {\n            return;\n        }\n        var args = {\n            rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndex, target: this.target,\n            prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n            data: selectedData\n        };\n        args = this.addMovableArgs(args, selectedMovableRow);\n        this.onActionBegin(args, events.rowSelecting);\n        if (!isNullOrUndefined(args) && args[can] === true) {\n            return;\n        }\n        this.clearRow();\n        gObj.selectedRowIndex = rowIndexes.slice(-1)[0];\n        if (!this.isSingleSel()) {\n            for (var _i = 0, rowIndexes_1 = rowIndexes; _i < rowIndexes_1.length; _i++) {\n                var rowIdx = rowIndexes_1[_i];\n                this.updateRowSelection(gObj.getRowByIndex(rowIdx), rowIdx);\n                if (frzCols) {\n                    this.updateRowSelection(gObj.getMovableRowByIndex(rowIdx), rowIdx);\n                }\n                this.updateRowProps(rowIndex);\n            }\n        }\n        else {\n            this.updateRowSelection(gObj.getRowByIndex(rowIndex), rowIndex);\n            if (frzCols) {\n                this.updateRowSelection(gObj.getMovableRowByIndex(rowIndex), rowIndex);\n            }\n            this.updateRowProps(rowIndex);\n        }\n        args = {\n            rowIndexes: rowIndexes, row: selectedRow, rowIndex: rowIndex, target: this.target,\n            prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n            data: selectedData\n        };\n        args = this.addMovableArgs(args, selectedMovableRow);\n        this.onActionComplete(args, events.rowSelected);\n    };\n    /**\n     * Select rows with existing row selection by passing row indexes.\n     * @param  {number} startIndex - Specifies the row indexes.\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.addRowsToSelection = function (rowIndexes) {\n        var gObj = this.parent;\n        var can = 'cancel';\n        var selectedRow = !this.isSingleSel() ? gObj.getRowByIndex(rowIndexes[0]) :\n            gObj.getRowByIndex(rowIndexes[rowIndexes.length - 1]);\n        var selectedMovableRow = !this.isSingleSel() ? this.getSelectedMovableRow(rowIndexes[0]) :\n            this.getSelectedMovableRow(rowIndexes[rowIndexes.length - 1]);\n        var frzCols = gObj.getFrozenColumns();\n        if (!this.isRowType() || this.isEditing()) {\n            return;\n        }\n        var args;\n        for (var _i = 0, rowIndexes_2 = rowIndexes; _i < rowIndexes_2.length; _i++) {\n            var rowIndex = rowIndexes_2[_i];\n            var rowObj = this.getRowObj(rowIndex);\n            var isUnSelected = this.selectedRowIndexes.indexOf(rowIndex) > -1;\n            gObj.selectedRowIndex = rowIndex;\n            if (isUnSelected) {\n                this.rowDeselect(events.rowDeselecting, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData]);\n                this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(rowIndex), 1);\n                this.selectedRecords.splice(this.selectedRecords.indexOf(selectedRow), 1);\n                selectedRow.removeAttribute('aria-selected');\n                this.addRemoveClassesForRow(selectedRow, false, null, 'e-selectionbackground', 'e-active');\n                if (selectedMovableRow) {\n                    this.selectedRecords.splice(this.selectedRecords.indexOf(selectedMovableRow), 1);\n                    selectedMovableRow.removeAttribute('aria-selected');\n                    this.addRemoveClassesForRow(selectedMovableRow, false, null, 'e-selectionbackground', 'e-active');\n                }\n                this.rowDeselect(events.rowDeselected, [rowIndex], [rowObj.data], [selectedRow], [rowObj.foreignKeyData], [selectedMovableRow]);\n            }\n            else {\n                args = {\n                    data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n                    prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                    isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest,\n                    foreignKeyData: rowObj.foreignKeyData\n                };\n                args = this.addMovableArgs(args, selectedMovableRow);\n                this.onActionBegin(args, events.rowSelecting);\n                if (!isNullOrUndefined(args) && args[can] === true) {\n                    return;\n                }\n                if (this.isSingleSel()) {\n                    this.clearRow();\n                }\n                this.updateRowSelection(selectedRow, rowIndex);\n                if (frzCols) {\n                    this.updateRowSelection(selectedMovableRow, rowIndex);\n                }\n            }\n            if (!isUnSelected) {\n                args = {\n                    data: rowObj.data, rowIndex: rowIndex, row: selectedRow, target: this.target,\n                    prevRow: gObj.getRows()[this.prevRowIndex], previousRowIndex: this.prevRowIndex,\n                    foreignKeyData: rowObj.foreignKeyData\n                };\n                args = this.addMovableArgs(args, selectedMovableRow);\n                this.onActionComplete(args, events.rowSelected);\n            }\n            this.updateRowProps(rowIndex);\n            if (this.isSingleSel()) {\n                break;\n            }\n        }\n    };\n    Selection.prototype.getCollectionFromIndexes = function (startIndex, endIndex) {\n        var indexes = [];\n        var _a = (startIndex < endIndex) ?\n            { i: startIndex, max: endIndex } : { i: endIndex, max: startIndex }, i = _a.i, max = _a.max;\n        for (; i <= max; i++) {\n            indexes.push(i);\n        }\n        if (startIndex > endIndex) {\n            indexes.reverse();\n        }\n        return indexes;\n    };\n    Selection.prototype.clearRow = function () {\n        this.clearRowSelection();\n        this.selectedRowIndexes = [];\n        this.selectedRecords = [];\n        this.parent.selectedRowIndex = -1;\n        if (this.isSingleSel() && this.parent.isPersistSelection) {\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.updateRowProps = function (startIndex) {\n        this.prevRowIndex = startIndex;\n        this.isRowSelected = this.selectedRowIndexes.length && true;\n    };\n    Selection.prototype.updatePersistCollection = function (selectedRow, chkState) {\n        var _this = this;\n        if (this.parent.isPersistSelection && !isNullOrUndefined(selectedRow)) {\n            var rowObj = this.getRowObj(selectedRow);\n            var pKey_1 = rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (pKey_1 === null) {\n                return;\n            }\n            rowObj.isSelected = chkState;\n            if (chkState) {\n                this.selectedRowState[pKey_1] = chkState;\n                if (!this.persistSelectedData.some(function (data) { return data[_this.primaryKey] === pKey_1; })) {\n                    this.persistSelectedData.push(rowObj.data);\n                }\n            }\n            else {\n                this.updatePersistDelete(pKey_1);\n            }\n        }\n    };\n    Selection.prototype.updatePersistDelete = function (pKey) {\n        var _this = this;\n        delete (this.selectedRowState[pKey]);\n        var index;\n        var isPresent = this.persistSelectedData.some(function (data, i) {\n            index = i;\n            return data[_this.primaryKey] === pKey;\n        });\n        if (isPresent) {\n            this.persistSelectedData.splice(index, 1);\n        }\n    };\n    Selection.prototype.updateCheckBoxes = function (row, chkState) {\n        if (!isNullOrUndefined(row)) {\n            var chkBox = row.querySelector('.e-checkselect');\n            if (!isNullOrUndefined(chkBox)) {\n                removeAddCboxClasses(chkBox.nextElementSibling, chkState);\n                if (isNullOrUndefined(this.checkedTarget) || (!isNullOrUndefined(this.checkedTarget)\n                    && !this.checkedTarget.classList.contains('e-checkselectall'))) {\n                    this.setCheckAllState(parseInt(row.getAttribute('aria-rowindex'), 10));\n                }\n            }\n        }\n    };\n    Selection.prototype.updateRowSelection = function (selectedRow, startIndex) {\n        if (!selectedRow) {\n            return;\n        }\n        this.selectedRowIndexes.push(startIndex);\n        var len = this.selectedRowIndexes.length;\n        if (this.parent.getFrozenColumns() && len > 1) {\n            if ((this.selectedRowIndexes[len - 2] === this.selectedRowIndexes[len - 1])) {\n                this.selectedRowIndexes.pop();\n            }\n        }\n        this.selectedRecords.push(selectedRow);\n        selectedRow.setAttribute('aria-selected', 'true');\n        this.updatePersistCollection(selectedRow, true);\n        this.updateCheckBoxes(selectedRow, true);\n        this.addRemoveClassesForRow(selectedRow, true, null, 'e-selectionbackground', 'e-active');\n        if (!this.preventFocus) {\n            var target = this.focus.getPrevIndexes().cellIndex ?\n                selectedRow.cells[this.focus.getPrevIndexes().cellIndex] :\n                selectedRow.querySelector('.e-selectionbackground:not(.e-hide)');\n            if (!target) {\n                return;\n            }\n            this.focus.onClick({ target: target }, true);\n        }\n    };\n    /**\n     * Deselects the currently selected rows and cells.\n     * @return {void}\n     */\n    Selection.prototype.clearSelection = function () {\n        if (!this.parent.isPersistSelection || (this.parent.isPersistSelection && !this.parent.isEdit) ||\n            (!isNullOrUndefined(this.checkedTarget) && this.checkedTarget.classList.contains('e-checkselectall'))) {\n            var span = this.parent.element.querySelector('.e-gridpopup').querySelector('span');\n            if (span.classList.contains('e-rowselect')) {\n                span.classList.remove('e-spanclicked');\n            }\n            this.clearRowSelection();\n            this.clearCellSelection();\n            this.enableSelectMultiTouch = false;\n        }\n    };\n    /**\n     * Deselects the currently selected rows.\n     * @return {void}\n     */\n    Selection.prototype.clearRowSelection = function () {\n        var _this = this;\n        if (this.isRowSelected) {\n            var gObj = this.parent;\n            var rows = this.parent.getDataRows();\n            var data = [];\n            var row = [];\n            var mRow = [];\n            var rowIndex = [];\n            var frzCols = gObj.getFrozenColumns();\n            var foreignKeyData = [];\n            var currentViewData = this.parent.getCurrentViewRecords();\n            for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n                var currentRow = this.parent.getDataRows()[this.selectedRowIndexes[i]];\n                var rowObj = this.getRowObj(currentRow);\n                if (rowObj) {\n                    data.push(rowObj.data);\n                    row.push(currentRow);\n                    rowIndex.push(this.selectedRowIndexes[i]);\n                    foreignKeyData.push(rowObj.foreignKeyData);\n                }\n                if (frzCols) {\n                    mRow.push(gObj.getMovableRows()[this.selectedRowIndexes[i]]);\n                }\n            }\n            this.rowDeselect(events.rowDeselecting, rowIndex, data, row, foreignKeyData, mRow);\n            if (this.isCancelDeSelect === true) {\n                return;\n            }\n            rows.filter(function (record) { return record.hasAttribute('aria-selected'); }).forEach(function (ele) {\n                if (!_this.disableUI) {\n                    ele.removeAttribute('aria-selected');\n                    _this.addRemoveClassesForRow(ele, false, true, 'e-selectionbackground', 'e-active');\n                }\n                _this.updatePersistCollection(ele, false);\n                _this.updateCheckBoxes(ele);\n            });\n            for (var i = 0, len = this.selectedRowIndexes.length; i < len; i++) {\n                var movableRow = this.getSelectedMovableRow(this.selectedRowIndexes[i]);\n                if (movableRow) {\n                    if (!this.disableUI) {\n                        movableRow.removeAttribute('aria-selected');\n                        this.addRemoveClassesForRow(movableRow, false, true, 'e-selectionbackground', 'e-active');\n                    }\n                    this.updatePersistCollection(movableRow, false);\n                }\n            }\n            this.selectedRowIndexes = [];\n            this.selectedRecords = [];\n            this.isRowSelected = false;\n            this.parent.selectedRowIndex = -1;\n            this.rowDeselect(events.rowDeselected, rowIndex, data, row, foreignKeyData, mRow);\n        }\n    };\n    Selection.prototype.rowDeselect = function (type, rowIndex, data, row, foreignKeyData, mRow) {\n        var cancl = 'cancel';\n        this.updatePersistCollection(row[0], false);\n        var rowDeselectObj = { rowIndex: rowIndex, data: data, row: row, foreignKeyData: foreignKeyData, cancel: false };\n        this.parent.trigger(type, this.parent.getFrozenColumns() ? __assign({}, rowDeselectObj, { mRow: mRow }) : rowDeselectObj);\n        this.isCancelDeSelect = rowDeselectObj[cancl];\n        this.updateCheckBoxes(row[0]);\n    };\n    Selection.prototype.getRowObj = function (row) {\n        if (row === void 0) { row = this.currentIndex; }\n        if (isNullOrUndefined(row)) {\n            return {};\n        }\n        if (typeof row === 'number') {\n            row = this.parent.getRowByIndex(row);\n        }\n        if (row) {\n            return this.parent.getRowObjectFromUID(row.getAttribute('data-uid')) || {};\n        }\n        return {};\n    };\n    Selection.prototype.getSelectedMovableCell = function (cellIndex) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        if (frzCols) {\n            if (cellIndex.cellIndex >= frzCols) {\n                return gObj.getMovableCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            return null;\n        }\n        return null;\n    };\n    /**\n     * Selects a cell by the given index.\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Selection.prototype.selectCell = function (cellIndex, isToggle) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(cellIndex);\n        var args;\n        var cncl = 'cancel';\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n        }\n        var selectedTable;\n        var cIdx;\n        this.currentIndex = cellIndex.rowIndex;\n        var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n        if (!this.isCellType() || !selectedCell || this.isEditing()) {\n            return;\n        }\n        var isCellSelected = selectedCell.classList.contains('e-cellselectionbackground');\n        isToggle = !isToggle ? isToggle : (!isUndefined(this.prevCIdxs) &&\n            cellIndex.rowIndex === this.prevCIdxs.rowIndex && cellIndex.cellIndex === this.prevCIdxs.cellIndex &&\n            isCellSelected);\n        if (!isToggle) {\n            args = {\n                data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n                isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n                previousRowCell: this.prevECIdxs ?\n                    this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined,\n                cancel: false\n            };\n            this.onActionBegin(args, events.cellSelecting);\n        }\n        if (!isNullOrUndefined(args) && args[cncl] === true) {\n            return;\n        }\n        this.clearCell();\n        if (!isToggle) {\n            this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n        }\n        this.updateCellProps(cellIndex, cellIndex);\n        if (!isToggle) {\n            this.onActionComplete({\n                data: selectedData, cellIndex: cellIndex, currentCell: selectedCell,\n                previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n                previousRowCell: this.prevECIdxs ?\n                    this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n            }, events.cellSelected);\n        }\n    };\n    Selection.prototype.getCellIndex = function (rIdx, cIdx) {\n        return (this.parent.getFrozenColumns() ? (cIdx >= this.parent.getFrozenColumns() ? this.parent.getMovableCellFromIndex(rIdx, cIdx)\n            : this.parent.getCellFromIndex(rIdx, cIdx)) : this.parent.getCellFromIndex(rIdx, cIdx));\n    };\n    /**\n     * Selects a range of cells from start and end indexes.\n     * @param  {IIndex} startIndex - Specifies the row and column's start index.\n     * @param  {IIndex} endIndex - Specifies the row and column's end index.\n     * @return {void}\n     */\n    Selection.prototype.selectCellsByRange = function (startIndex, endIndex) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(startIndex);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(startIndex.rowIndex, startIndex.cellIndex);\n        }\n        var min;\n        var max;\n        var stIndex = startIndex;\n        var edIndex = endIndex = endIndex ? endIndex : startIndex;\n        var cellIndexes;\n        this.currentIndex = startIndex.rowIndex;\n        var cncl = 'cancel';\n        var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var args = {\n            data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n            isCtrlPressed: this.isMultiCtrlRequest, isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        };\n        this.onActionBegin(args, events.cellSelecting);\n        if (!isNullOrUndefined(args) && args[cncl] === true) {\n            return;\n        }\n        this.clearCell();\n        if (startIndex.rowIndex > endIndex.rowIndex) {\n            var temp = startIndex;\n            startIndex = endIndex;\n            endIndex = temp;\n        }\n        for (var i = startIndex.rowIndex; i <= endIndex.rowIndex; i++) {\n            if (this.selectionSettings.cellSelectionMode !== 'Box') {\n                min = i === startIndex.rowIndex ? (startIndex.cellIndex) : 0;\n                max = i === endIndex.rowIndex ? (endIndex.cellIndex) : this.getLastColIndex(i);\n            }\n            else {\n                min = startIndex.cellIndex;\n                max = endIndex.cellIndex;\n            }\n            cellIndexes = [];\n            for (var j = min < max ? min : max, len = min > max ? min : max; j <= len; j++) {\n                if (frzCols) {\n                    if (j < frzCols) {\n                        selectedCell = gObj.getCellFromIndex(i, j);\n                    }\n                    else {\n                        selectedCell = gObj.getMovableCellFromIndex(i, j);\n                    }\n                }\n                else {\n                    selectedCell = gObj.getCellFromIndex(i, j);\n                }\n                if (!selectedCell) {\n                    continue;\n                }\n                cellIndexes.push(j);\n                this.updateCellSelection(selectedCell);\n                this.addAttribute(selectedCell);\n            }\n            this.selectedRowCellIndexes.push({ rowIndex: i, cellIndexes: cellIndexes });\n        }\n        this.updateCellProps(stIndex, edIndex);\n        this.onActionComplete({\n            data: selectedData, cellIndex: startIndex, currentCell: selectedCell,\n            previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        }, events.cellSelected);\n    };\n    /**\n     * Selects a collection of cells by row and column indexes.\n     * @param  {ISelectedCell[]} rowCellIndexes - Specifies the row and column indexes.\n     * @return {void}\n     */\n    Selection.prototype.selectCells = function (rowCellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedCell = this.getSelectedMovableCell(rowCellIndexes[0]);\n        var frzCols = gObj.getFrozenColumns();\n        if (!selectedCell) {\n            selectedCell = gObj.getCellFromIndex(rowCellIndexes[0].rowIndex, rowCellIndexes[0].cellIndexes[0]);\n        }\n        this.currentIndex = rowCellIndexes[0].rowIndex;\n        var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        this.onActionBegin({\n            data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n            currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n            isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        }, events.cellSelecting);\n        for (var i = 0, len = rowCellIndexes.length; i < len; i++) {\n            for (var j = 0, cellLen = rowCellIndexes[i].cellIndexes.length; j < cellLen; j++) {\n                if (frzCols) {\n                    if (rowCellIndexes[i].cellIndexes[j] < frzCols) {\n                        selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                    else {\n                        selectedCell = gObj.getMovableCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                    }\n                }\n                else {\n                    selectedCell = gObj.getCellFromIndex(rowCellIndexes[i].rowIndex, rowCellIndexes[i].cellIndexes[j]);\n                }\n                if (!selectedCell) {\n                    continue;\n                }\n                this.updateCellSelection(selectedCell);\n                this.addAttribute(selectedCell);\n                this.addRowCellIndex({ rowIndex: rowCellIndexes[i].rowIndex, cellIndex: rowCellIndexes[i].cellIndexes[j] });\n            }\n        }\n        this.updateCellProps({ rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] }, { rowIndex: rowCellIndexes[0].rowIndex, cellIndex: rowCellIndexes[0].cellIndexes[0] });\n        this.onActionComplete({\n            data: selectedData, cellIndex: rowCellIndexes[0].cellIndexes[0],\n            currentCell: selectedCell,\n            previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes,\n            previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined\n        }, events.cellSelected);\n    };\n    /**\n     * Select cells with existing cell selection by passing row and column index.\n     * @param  {IIndex} startIndex - Defines the collection of row and column index.\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.addCellsToSelection = function (cellIndexes) {\n        if (!this.isCellType()) {\n            return;\n        }\n        var gObj = this.parent;\n        var selectedTable;\n        var cIdx;\n        var selectedCell;\n        var frzCols = gObj.getFrozenColumns();\n        var index;\n        this.currentIndex = cellIndexes[0].rowIndex;\n        var selectedData = gObj.getCurrentViewRecords()[this.currentIndex];\n        if (this.isSingleSel() || !this.isCellType() || this.isEditing()) {\n            return;\n        }\n        var rowObj;\n        if (frzCols && cellIndexes[0].cellIndex >= frzCols) {\n            rowObj = gObj.getMovableRowsObject()[cellIndexes[0].rowIndex];\n        }\n        else {\n            rowObj = this.getRowObj(cellIndexes[0].rowIndex);\n        }\n        var foreignKeyData = [];\n        for (var _i = 0, cellIndexes_1 = cellIndexes; _i < cellIndexes_1.length; _i++) {\n            var cellIndex = cellIndexes_1[_i];\n            for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n                if (this.selectedRowCellIndexes[i].rowIndex === cellIndex.rowIndex) {\n                    index = i;\n                    break;\n                }\n            }\n            selectedCell = this.getSelectedMovableCell(cellIndex);\n            if (!selectedCell) {\n                selectedCell = gObj.getCellFromIndex(cellIndex.rowIndex, this.getColIndex(cellIndex.rowIndex, cellIndex.cellIndex));\n            }\n            foreignKeyData.push(rowObj.cells[frzCols && cellIndexes[0].cellIndex >= frzCols\n                ? cellIndex.cellIndex - frzCols : cellIndex.cellIndex].foreignKeyData);\n            var args = {\n                data: selectedData, cellIndex: cellIndexes[0],\n                isShiftPressed: this.isMultiShiftRequest, previousRowCellIndex: this.prevECIdxs,\n                currentCell: selectedCell, isCtrlPressed: this.isMultiCtrlRequest,\n                previousRowCell: this.prevECIdxs ?\n                    gObj.getCellFromIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) : undefined,\n            };\n            var isUnSelected = index > -1;\n            if (isUnSelected) {\n                var selectedCellIdx = this.selectedRowCellIndexes[index].cellIndexes;\n                if (selectedCellIdx.indexOf(cellIndex.cellIndex) > -1) {\n                    this.cellDeselect(events.cellDeselecting, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                    selectedCellIdx.splice(selectedCellIdx.indexOf(cellIndex.cellIndex), 1);\n                    selectedCell.classList.remove('e-cellselectionbackground');\n                    selectedCell.removeAttribute('aria-selected');\n                    this.cellDeselect(events.cellDeselected, [{ rowIndex: cellIndex.rowIndex, cellIndexes: [cellIndex.cellIndex] }], selectedData, [selectedCell], foreignKeyData);\n                }\n                else {\n                    isUnSelected = false;\n                    this.onActionBegin(args, events.cellSelecting);\n                    this.addRowCellIndex({ rowIndex: cellIndex.rowIndex, cellIndex: cellIndex.cellIndex });\n                    this.updateCellSelection(selectedCell);\n                    this.addAttribute(selectedCell);\n                }\n            }\n            else {\n                this.onActionBegin(args, events.cellSelecting);\n                this.updateCellSelection(selectedCell, cellIndex.rowIndex, cellIndex.cellIndex);\n            }\n            this.updateCellProps(cellIndex, cellIndex);\n            if (!isUnSelected) {\n                this.onActionComplete({\n                    data: selectedData, cellIndex: cellIndexes[0], currentCell: selectedCell,\n                    previousRowCell: this.prevECIdxs ? this.getCellIndex(this.prevECIdxs.rowIndex, this.prevECIdxs.cellIndex) :\n                        undefined, previousRowCellIndex: this.prevECIdxs, selectedRowCellIndex: this.selectedRowCellIndexes\n                }, events.cellSelected);\n            }\n        }\n    };\n    Selection.prototype.getColIndex = function (rowIndex, index) {\n        var cells;\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (index >= frzCols) {\n                cells = this.parent.getMovableDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n            }\n        }\n        if (!cells) {\n            cells = this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        }\n        for (var m = 0; m < cells.length; m++) {\n            var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n            if (colIndex === index) {\n                if (frzCols) {\n                    if (index >= frzCols) {\n                        m += frzCols;\n                    }\n                }\n                return m;\n            }\n        }\n        return -1;\n    };\n    Selection.prototype.getLastColIndex = function (rowIndex) {\n        var cells = this.parent.getFrozenColumns() ? this.parent.getMovableDataRows()[rowIndex].querySelectorAll('td.e-rowcell')\n            : this.parent.getDataRows()[rowIndex].querySelectorAll('td.e-rowcell');\n        return parseInt(cells[cells.length - 1].getAttribute('aria-colindex'), 10);\n    };\n    Selection.prototype.clearCell = function () {\n        this.clearCellSelection();\n    };\n    Selection.prototype.cellDeselect = function (type, cellIndexes, data, cells, foreignKeyData) {\n        var cancl = 'cancel';\n        if (cells[0] && cells[0].classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(cells[0], 'tr'));\n        }\n        var args = {\n            cells: cells, data: data, cellIndexes: cellIndexes, foreignKeyData: foreignKeyData, cancel: false\n        };\n        this.parent.trigger(type, args);\n        this.isPreventCellSelect = args[cancl];\n    };\n    Selection.prototype.updateCellSelection = function (selectedCell, rowIndex, cellIndex) {\n        if (!isNullOrUndefined(rowIndex)) {\n            this.addRowCellIndex({ rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        selectedCell.classList.add('e-cellselectionbackground');\n        if (selectedCell.classList.contains('e-gridchkbox')) {\n            this.updateCheckBoxes(closest(selectedCell, 'tr'), true);\n        }\n        this.addAttribute(selectedCell);\n    };\n    Selection.prototype.addAttribute = function (cell) {\n        this.target = cell;\n        if (!isNullOrUndefined(cell)) {\n            cell.setAttribute('aria-selected', 'true');\n            if (!this.preventFocus) {\n                this.focus.onClick({ target: cell }, true);\n            }\n        }\n    };\n    Selection.prototype.updateCellProps = function (startIndex, endIndex) {\n        this.prevCIdxs = startIndex;\n        this.prevECIdxs = endIndex;\n        this.isCellSelected = this.selectedRowCellIndexes.length && true;\n    };\n    Selection.prototype.addRowCellIndex = function (rowCellIndex) {\n        var isRowAvail;\n        var index;\n        for (var i = 0, len = this.selectedRowCellIndexes.length; i < len; i++) {\n            if (this.selectedRowCellIndexes[i].rowIndex === rowCellIndex.rowIndex) {\n                isRowAvail = true;\n                index = i;\n                break;\n            }\n        }\n        if (isRowAvail) {\n            if (this.selectedRowCellIndexes[index].cellIndexes.indexOf(rowCellIndex.cellIndex) < 0) {\n                this.selectedRowCellIndexes[index].cellIndexes.push(rowCellIndex.cellIndex);\n            }\n        }\n        else {\n            this.selectedRowCellIndexes.push({ rowIndex: rowCellIndex.rowIndex, cellIndexes: [rowCellIndex.cellIndex] });\n        }\n    };\n    /**\n     * Deselects the currently selected cells.\n     * @return {void}\n     */\n    Selection.prototype.clearCellSelection = function () {\n        if (this.isCellSelected) {\n            var gObj = this.parent;\n            var selectedCells = this.getSelectedCellsElement();\n            var rowCell = this.selectedRowCellIndexes;\n            var data = [];\n            var cells = [];\n            var foreignKeyData = [];\n            var currentViewData = gObj.getCurrentViewRecords();\n            var selectedTable = void 0;\n            var frzCols = gObj.getFrozenColumns();\n            for (var i = 0, len = rowCell.length; i < len; i++) {\n                data.push(currentViewData[rowCell[i].rowIndex]);\n                var rowObj = this.getRowObj(rowCell[i].rowIndex);\n                for (var j = 0, cLen = rowCell[i].cellIndexes.length; j < cLen; j++) {\n                    if (frzCols) {\n                        if (rowCell[i].cellIndexes[j] < frzCols) {\n                            cells.push(gObj.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                        }\n                        else {\n                            cells.push(gObj.getMovableCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                        }\n                    }\n                    else {\n                        foreignKeyData.push(rowObj.cells[rowCell[i].cellIndexes[j]].foreignKeyData);\n                        cells.push(gObj.getCellFromIndex(rowCell[i].rowIndex, rowCell[i].cellIndexes[j]));\n                    }\n                }\n            }\n            this.cellDeselect(events.cellDeselecting, rowCell, data, cells, foreignKeyData);\n            if (this.isPreventCellSelect === true) {\n                return;\n            }\n            for (var i = 0, len = selectedCells.length; i < len; i++) {\n                selectedCells[i].classList.remove('e-cellselectionbackground');\n                selectedCells[i].removeAttribute('aria-selected');\n            }\n            this.selectedRowCellIndexes = [];\n            this.isCellSelected = false;\n            this.cellDeselect(events.cellDeselected, rowCell, data, cells, foreignKeyData);\n        }\n    };\n    Selection.prototype.getSelectedCellsElement = function () {\n        var gObj = this.parent;\n        var rows = gObj.getDataRows();\n        var mRows;\n        if (gObj.getFrozenColumns()) {\n            mRows = gObj.getMovableDataRows();\n            rows = gObj.addMovableRows(rows, mRows);\n        }\n        var cells = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            cells = cells.concat([].slice.call(rows[i].querySelectorAll('.e-cellselectionbackground')));\n        }\n        return cells;\n    };\n    Selection.prototype.mouseMoveHandler = function (e) {\n        e.preventDefault();\n        var gBRect = this.parent.element.getBoundingClientRect();\n        var x1 = this.x;\n        var y1 = this.y;\n        var position = getPosition(e);\n        var x2 = position.x - gBRect.left;\n        var y2 = position.y - gBRect.top;\n        var tmp;\n        var target = closest(e.target, 'tr');\n        this.isDragged = true;\n        if (!this.isCellDrag) {\n            if (!target) {\n                target = closest(document.elementFromPoint(this.parent.element.offsetLeft + 2, e.clientY), 'tr');\n            }\n            if (x1 > x2) {\n                tmp = x2;\n                x2 = x1;\n                x1 = tmp;\n            }\n            if (y1 > y2) {\n                tmp = y2;\n                y2 = y1;\n                y1 = tmp;\n            }\n            this.element.style.left = x1 + 'px';\n            this.element.style.top = y1 + 'px';\n            this.element.style.width = x2 - x1 + 'px';\n            this.element.style.height = y2 - y1 + 'px';\n        }\n        if (target && !e.ctrlKey && !e.shiftKey) {\n            var rowIndex = parseInt(target.getAttribute('aria-rowindex'), 10);\n            if (!this.isCellDrag) {\n                this.selectRowsByRange(this.startIndex, rowIndex);\n            }\n            else {\n                var td = parentsUntil(e.target, 'e-rowcell');\n                if (td) {\n                    this.selectLikeExcel(rowIndex, parseInt(td.getAttribute('aria-colindex'), 10));\n                }\n            }\n        }\n    };\n    Selection.prototype.selectLikeExcel = function (rowIndex, cellIndex) {\n        this.clearCellSelection();\n        this.selectCellsByRange({ rowIndex: this.startIndex, cellIndex: this.startCellIndex }, { rowIndex: rowIndex, cellIndex: cellIndex });\n    };\n    Selection.prototype.mouseUpHandler = function (e) {\n        document.body.classList.remove('e-disableuserselect');\n        if (this.element) {\n            remove(this.element);\n        }\n        EventHandler.remove(this.parent.getContent(), 'mousemove', this.mouseMoveHandler);\n        EventHandler.remove(document.body, 'mouseup', this.mouseUpHandler);\n        this.isDragged = false;\n    };\n    Selection.prototype.mouseDownHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        var isDrag;\n        var gridElement = parentsUntil(target, 'e-grid');\n        if (gridElement && gridElement.id !== gObj.element.id) {\n            return;\n        }\n        if (e.shiftKey || e.ctrlKey) {\n            e.preventDefault();\n        }\n        if (target.classList.contains('e-rowcell') && !e.shiftKey && !e.ctrlKey) {\n            if (gObj.selectionSettings.cellSelectionMode === 'Box' && !this.isRowType() && !this.isSingleSel()) {\n                this.isCellDrag = true;\n                isDrag = true;\n            }\n            else if (gObj.allowRowDragAndDrop) {\n                if (!this.isRowType() || this.isSingleSel() || closest(target, 'td').classList.contains('e-selectionbackground')) {\n                    this.isDragged = false;\n                    return;\n                }\n                isDrag = true;\n                this.element = this.parent.createElement('div', { className: 'e-griddragarea' });\n                gObj.getContent().appendChild(this.element);\n            }\n            if (isDrag) {\n                var tr = closest(e.target, 'tr');\n                this.startIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n                this.startCellIndex = parseInt(parentsUntil(target, 'e-rowcell').getAttribute('aria-colindex'), 10);\n                document.body.classList.add('e-disableuserselect');\n                var gBRect = gObj.element.getBoundingClientRect();\n                var postion = getPosition(e);\n                this.x = postion.x - gBRect.left;\n                this.y = postion.y - gBRect.top;\n                EventHandler.add(gObj.getContent(), 'mousemove', this.mouseMoveHandler, this);\n                EventHandler.add(document.body, 'mouseup', this.mouseUpHandler, this);\n            }\n        }\n    };\n    Selection.prototype.clearSelAfterRefresh = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.initialEnd, this.initializeSelection, this);\n        this.parent.on(events.rowSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.cellSelectionComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.parent.on(events.beforeFragAppend, this.clearSelAfterRefresh, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.actionBeginFunction = this.actionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.on(events.rowsRemoved, this.rowsRemoved, this);\n        this.parent.on(events.headerRefreshed, this.refreshHeader, this);\n        this.addEventListener_checkbox();\n    };\n    /**\n     * @hidden\n     */\n    Selection.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.initialEnd, this.initializeSelection);\n        this.parent.off(events.rowSelectionComplete, this.onActionComplete);\n        this.parent.off(events.cellSelectionComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.cellFocused, this.onCellFocused);\n        this.parent.off(events.beforeFragAppend, this.clearSelAfterRefresh);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.off(events.rowsRemoved, this.rowsRemoved);\n        this.parent.off(events.headerRefreshed, this.refreshHeader);\n        this.removeEventListener_checkbox();\n    };\n    Selection.prototype.columnPositionChanged = function () {\n        if (!this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    Selection.prototype.refreshHeader = function () {\n        this.setCheckAllState();\n    };\n    Selection.prototype.rowsRemoved = function (e) {\n        for (var i = 0; i < e.records.length; i++) {\n            delete (this.selectedRowState[e.records[i][this.primaryKey]]);\n            --this.totalRecordsCount;\n        }\n        this.setCheckAllState();\n    };\n    ;\n    Selection.prototype.beforeFragAppend = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.clearSelection();\n        }\n    };\n    ;\n    Selection.prototype.getCheckAllBox = function () {\n        return this.parent.getHeaderContent().querySelector('.e-checkselectall');\n    };\n    Selection.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    Selection.prototype.render = function (e) {\n        EventHandler.add(this.parent.getContent(), 'mousedown', this.mouseDownHandler, this);\n    };\n    Selection.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        if (!isNullOrUndefined(e.properties.type) && this.selectionSettings.type === 'Single') {\n            if (this.selectedRowCellIndexes.length > 1) {\n                this.clearCellSelection();\n            }\n            if (this.selectedRowIndexes.length > 1) {\n                this.clearRowSelection();\n            }\n            this.enableSelectMultiTouch = false;\n            this.hidePopUp();\n        }\n        if (!isNullOrUndefined(e.properties.mode) ||\n            !isNullOrUndefined(e.properties.cellSelectionMode)) {\n            this.clearSelection();\n        }\n        this.checkBoxSelectionChanged();\n        this.initPerisistSelection();\n    };\n    Selection.prototype.hidePopUp = function () {\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-rowselect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.selectRow(this.parent.selectedRowIndex);\n    };\n    Selection.prototype.checkBoxSelectionChanged = function () {\n        this.parent.off(events.contentReady, this.checkBoxSelectionChanged);\n        var gobj = this.parent;\n        var checkboxColumn = gobj.getColumns().filter(function (col) { return col.type === 'checkbox'; });\n        if (checkboxColumn.length > 0) {\n            gobj.isCheckBoxSelection = true;\n            this.chkField = checkboxColumn[0].field;\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n            if (isNullOrUndefined(this.totalRecordsCount)) {\n                this.totalRecordsCount = this.parent.getCurrentViewRecords().length;\n            }\n            if (this.isSingleSel()) {\n                gobj.selectionSettings.type = 'Multiple';\n                gobj.dataBind();\n            }\n            else {\n                this.initPerisistSelection();\n            }\n        }\n        if (!gobj.isCheckBoxSelection) {\n            this.chkField = null;\n            this.initPerisistSelection();\n        }\n    };\n    Selection.prototype.initPerisistSelection = function () {\n        var gobj = this.parent;\n        if (this.parent.selectionSettings.persistSelection && this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = true;\n            this.ensureCheckboxFieldSelection();\n        }\n        else if (this.parent.getPrimaryKeyFieldNames().length > 0) {\n            gobj.isPersistSelection = false;\n            this.ensureCheckboxFieldSelection();\n        }\n        else {\n            gobj.isPersistSelection = false;\n            this.selectedRowState = {};\n        }\n    };\n    Selection.prototype.ensureCheckboxFieldSelection = function () {\n        var gobj = this.parent;\n        this.primaryKey = this.parent.getPrimaryKeyFieldNames()[0];\n        if (!gobj.enableVirtualization && this.chkField\n            && ((gobj.isPersistSelection && Object.keys(this.selectedRowState).length === 0) ||\n                !gobj.isPersistSelection)) {\n            var data = this.parent.getDataModule();\n            var query = new Query().where(this.chkField, 'equal', true);\n            var dataManager = data.getData({}, query);\n            var proxy_1 = this;\n            this.parent.showSpinner();\n            dataManager.then(function (e) {\n                proxy_1.dataSuccess(e.result);\n                proxy_1.refreshPersistSelection();\n                proxy_1.parent.hideSpinner();\n            });\n        }\n    };\n    Selection.prototype.dataSuccess = function (res) {\n        for (var i = 0; i < res.length; i++) {\n            if (isNullOrUndefined(this.selectedRowState[res[i][this.primaryKey]]) && res[i][this.chkField]) {\n                this.selectedRowState[res[i][this.primaryKey]] = res[i][this.chkField];\n            }\n        }\n        this.persistSelectedData = res;\n    };\n    Selection.prototype.setRowSelection = function (state) {\n        if (!this.parent.getDataModule().isRemote()) {\n            if (state) {\n                for (var _i = 0, _a = this.getData(); _i < _a.length; _i++) {\n                    var data = _a[_i];\n                    this.selectedRowState[data[this.primaryKey]] = true;\n                }\n            }\n            else {\n                this.selectedRowState = {};\n            }\n            // (this.getData()).forEach(function (data) {\n            //     this.selectedRowState[data[this.primaryKey]] = true;\n            // })\n        }\n    };\n    Selection.prototype.getData = function () {\n        return this.parent.getDataModule().dataManager.dataSource.json;\n    };\n    Selection.prototype.refreshPersistSelection = function () {\n        var rows = this.parent.getRows();\n        if (rows.length > 0 && (this.parent.isPersistSelection || this.chkField)) {\n            var indexes = [];\n            for (var j = 0; j < rows.length; j++) {\n                var rowObj = this.getRowObj(rows[j]);\n                var pKey = rowObj ? rowObj.data[this.primaryKey] : null;\n                if (pKey === null) {\n                    return;\n                }\n                var checkState = void 0;\n                var chkBox = rows[j].querySelector('.e-checkselect');\n                if (this.selectedRowState[pKey] || (this.parent.checkAllRows === 'Check' && this.chkAllCollec.indexOf(pKey) < 0)\n                    || (this.parent.checkAllRows === 'Uncheck' && this.chkAllCollec.indexOf(pKey) > 0)\n                    || (this.parent.checkAllRows === 'Intermediate' && !isNullOrUndefined(this.chkField) && rowObj.data[this.chkField])) {\n                    indexes.push(parseInt(rows[j].getAttribute('aria-rowindex'), 10));\n                    checkState = true;\n                }\n                else {\n                    checkState = false;\n                    if (this.checkedTarget !== chkBox && this.parent.isCheckBoxSelection) {\n                        removeAddCboxClasses(chkBox.nextElementSibling, checkState);\n                    }\n                }\n                this.updatePersistCollection(rows[j], checkState);\n            }\n            this.isSingleSel() && indexes.length > 0 ? this.selectRow(indexes[0], true) : this.selectRows(indexes);\n        }\n        if (this.parent.isCheckBoxSelection && this.parent.getCurrentViewRecords().length > 0) {\n            this.setCheckAllState();\n        }\n    };\n    Selection.prototype.actionBegin = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            var editChkBox = this.parent.element.querySelector('.e-edit-checkselect');\n            if (!isNullOrUndefined(editChkBox)) {\n                var row = closest(editChkBox, '.e-editedrow');\n                if (row) {\n                    if (this.parent.editSettings.mode === 'Dialog') {\n                        row = this.parent.element.querySelector('.e-dlgeditrow');\n                    }\n                    var rowObj = this.getRowObj(row);\n                    if (!rowObj) {\n                        return;\n                    }\n                    this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = editChkBox.checked;\n                }\n                else {\n                    this.isCheckedOnAdd = editChkBox.checked;\n                }\n            }\n        }\n    };\n    Selection.prototype.actionComplete = function (e) {\n        var _this = this;\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            if (e.action === 'add' && this.isCheckedOnAdd) {\n                var rowObj = this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute('data-uid'));\n                this.selectedRowState[rowObj.data[this.primaryKey]] = rowObj.isSelected = this.isCheckedOnAdd;\n            }\n            this.refreshPersistSelection();\n        }\n        if (e.requestType === 'delete' && this.parent.isPersistSelection) {\n            e.data.slice().forEach(function (data) {\n                if (!isNullOrUndefined(data[_this.primaryKey])) {\n                    _this.updatePersistDelete(data[_this.primaryKey]);\n                }\n            });\n            this.setCheckAllState();\n            this.totalRecordsCount = this.parent.pageSettings.totalRecordsCount;\n        }\n    };\n    Selection.prototype.onDataBound = function () {\n        if (!this.parent.enableVirtualization && this.parent.isPersistSelection) {\n            this.refreshPersistSelection();\n        }\n    };\n    Selection.prototype.checkSelectAllAction = function (checkState) {\n        var cRenderer = this.getRenderer();\n        var editForm = this.parent.element.querySelector('.e-gridform');\n        this.checkedTarget = this.getCheckAllBox();\n        if (checkState && this.parent.getCurrentViewRecords().length) {\n            this.selectRowsByRange(cRenderer.getVirtualRowIndex(0), cRenderer.getVirtualRowIndex(this.parent.getCurrentViewRecords().length));\n            this.parent.checkAllRows = 'Check';\n        }\n        else {\n            this.clearSelection();\n            this.parent.checkAllRows = 'Uncheck';\n        }\n        this.chkAllCollec = [];\n        if (this.parent.isPersistSelection) {\n            var rows = this.parent.getRows();\n            for (var i = 0; i < rows.length; i++) {\n                this.updatePersistCollection(rows[i], checkState);\n            }\n            if (this.parent.checkAllRows === 'Uncheck') {\n                this.setRowSelection(false);\n                this.persistSelectedData = this.parent.getDataModule().isRemote() ? this.persistSelectedData : [];\n            }\n            else if (this.parent.checkAllRows === 'Check') {\n                this.setRowSelection(true);\n                this.persistSelectedData = !this.parent.getDataModule().isRemote() ? this.getData().slice() : this.persistSelectedData;\n            }\n        }\n        if (!isNullOrUndefined(editForm)) {\n            var editChkBox = editForm.querySelector('.e-edit-checkselect');\n            removeAddCboxClasses(editChkBox.nextElementSibling, checkState);\n        }\n    };\n    Selection.prototype.checkSelectAll = function (checkBox) {\n        var _this = this;\n        var stateStr = this.getCheckAllStatus(checkBox);\n        var state = stateStr === 'Check';\n        if (stateStr === 'Intermediate') {\n            state = this.parent.getCurrentViewRecords().some(function (data) {\n                return data[_this.primaryKey] in _this.selectedRowState;\n            });\n        }\n        this.checkSelectAllAction(!state);\n        this.target = null;\n        if (this.parent.getCurrentViewRecords().length > 0) {\n            this.setCheckAllState();\n        }\n        this.triggerChkChangeEvent(checkBox, !state);\n    };\n    Selection.prototype.getCheckAllStatus = function (ele) {\n        var classes = ele ? ele.nextElementSibling.classList :\n            this.getCheckAllBox().nextElementSibling.classList;\n        var status;\n        if (classes.contains('e-check')) {\n            status = 'Check';\n        }\n        else if (classes.contains('e-uncheck')) {\n            status = 'Uncheck';\n        }\n        else if (classes.contains('e-stop')) {\n            status = 'Intermediate';\n        }\n        else {\n            status = 'None';\n        }\n        return status;\n    };\n    Selection.prototype.checkSelect = function (checkBox) {\n        var target = closest(this.checkedTarget, '.e-rowcell');\n        var checkObj = checkBox;\n        this.isMultiCtrlRequest = true;\n        var rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n        if (this.parent.isPersistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n            ++rIndex;\n        }\n        this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n        this.moveIntoUncheckCollection(closest(target, '.e-row'));\n        this.setCheckAllState();\n        this.isMultiCtrlRequest = false;\n        this.triggerChkChangeEvent(checkBox, checkBox.nextElementSibling.classList.contains('e-check'));\n    };\n    Selection.prototype.moveIntoUncheckCollection = function (row) {\n        if (this.parent.checkAllRows === 'Check' || this.parent.checkAllRows === 'Uncheck') {\n            var rowObj = this.getRowObj(row);\n            var pKey = rowObj && rowObj.data ? rowObj.data[this.primaryKey] : null;\n            if (!pKey) {\n                return;\n            }\n            if (this.chkAllCollec.indexOf(pKey) < 0) {\n                this.chkAllCollec.push(pKey);\n            }\n            else {\n                this.chkAllCollec.splice(this.chkAllCollec.indexOf(pKey), 1);\n            }\n        }\n    };\n    Selection.prototype.triggerChkChangeEvent = function (checkBox, checkState) {\n        this.parent.trigger(events.checkBoxChange, {\n            checked: checkState, selectedRowIndexes: this.parent.getSelectedRowIndexes(),\n            target: checkBox\n        });\n        if (!this.parent.isEdit) {\n            this.checkedTarget = null;\n        }\n    };\n    Selection.prototype.updateSelectedRowIndex = function (index) {\n        if (this.parent.isCheckBoxSelection && this.parent.enableVirtualization && !this.parent.getDataModule().isRemote()) {\n            if (this.parent.checkAllRows === 'Check') {\n                this.selectedRowIndexes = [];\n                for (var data = 0; data < this.getData().length; data++) {\n                    this.selectedRowIndexes.push(data);\n                }\n            }\n            else if (this.parent.checkAllRows === 'Uncheck') {\n                this.selectedRowIndexes = [];\n            }\n            else {\n                if (index && this.parent.getRowByIndex(index).getAttribute('aria-selected') === 'false') {\n                    var selectedVal = this.selectedRowIndexes.indexOf(index);\n                    this.selectedRowIndexes.splice(selectedVal, 1);\n                }\n            }\n        }\n    };\n    ;\n    Selection.prototype.setCheckAllState = function (index, isInteraction) {\n        if (this.parent.isCheckBoxSelection) {\n            var checkedLen = Object.keys(this.selectedRowState).length;\n            if (!this.parent.isPersistSelection) {\n                checkedLen = this.selectedRecords.length;\n                this.totalRecordsCount = this.parent.getCurrentViewRecords().length;\n            }\n            if (this.getCheckAllBox()) {\n                var spanEle = this.getCheckAllBox().nextElementSibling;\n                removeClass([spanEle], ['e-check', 'e-stop', 'e-uncheck']);\n                if (checkedLen === this.totalRecordsCount && this.totalRecordsCount || (this.parent.enableVirtualization\n                    && !this.parent.allowPaging && !this.parent.getDataModule().isRemote() && checkedLen === this.getData().length)) {\n                    addClass([spanEle], ['e-check']);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, true, true);\n                    }\n                    this.parent.checkAllRows = 'Check';\n                }\n                else if (checkedLen === 0 || this.parent.getCurrentViewRecords().length === 0) {\n                    addClass([spanEle], ['e-uncheck']);\n                    if (isInteraction) {\n                        this.getRenderer().setSelection(null, false, true);\n                    }\n                    this.parent.checkAllRows = 'Uncheck';\n                    if (checkedLen === 0 && this.parent.getCurrentViewRecords().length === 0) {\n                        addClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                    else {\n                        removeClass([spanEle.parentElement], ['e-checkbox-disabled']);\n                    }\n                }\n                else {\n                    addClass([spanEle], ['e-stop']);\n                    this.parent.checkAllRows = 'Intermediate';\n                }\n                if (this.parent.enableVirtualization && !this.parent.allowPaging && !this.parent.getDataModule().isRemote()) {\n                    this.updateSelectedRowIndex(index);\n                }\n            }\n        }\n    };\n    Selection.prototype.clickHandler = function (e) {\n        var target = e.target;\n        this.isMultiCtrlRequest = e.ctrlKey || this.enableSelectMultiTouch;\n        this.isMultiShiftRequest = e.shiftKey;\n        this.popUpClickHandler(e);\n        var chkSelect = false;\n        this.preventFocus = true;\n        var checkBox;\n        var checkWrap = parentsUntil(target, 'e-checkbox-wrapper');\n        if (checkWrap && checkWrap.querySelectorAll('.e-checkselect,.e-checkselectall').length > 0) {\n            checkBox = checkWrap.querySelector('input[type=\"checkbox\"]');\n            chkSelect = true;\n        }\n        target = parentsUntil(target, 'e-rowcell');\n        if ((target && target.parentElement.classList.contains('e-row') && !this.parent.selectionSettings.checkboxOnly) || chkSelect) {\n            if (this.parent.isCheckBoxSelection) {\n                this.isMultiCtrlRequest = true;\n            }\n            this.target = target;\n            if (!isNullOrUndefined(checkBox)) {\n                this.checkedTarget = checkBox;\n                if (checkBox.classList.contains('e-checkselectall')) {\n                    this.checkSelectAll(checkBox);\n                }\n                else {\n                    this.checkSelect(checkBox);\n                    this.target = closest(target, '.e-rowcell');\n                }\n            }\n            else {\n                var rIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n                if (this.parent.isPersistSelection && this.parent.element.querySelectorAll('.e-addedrow').length > 0) {\n                    ++rIndex;\n                }\n                this.rowCellSelectionHandler(rIndex, parseInt(target.getAttribute('aria-colindex'), 10));\n                if (this.parent.isCheckBoxSelection) {\n                    this.moveIntoUncheckCollection(closest(target, '.e-row'));\n                    this.setCheckAllState();\n                }\n            }\n            if (!this.parent.isCheckBoxSelection && Browser.isDevice && !this.isSingleSel()) {\n                this.showPopup(e);\n            }\n        }\n        this.isMultiCtrlRequest = false;\n        this.isMultiShiftRequest = false;\n        this.preventFocus = false;\n    };\n    Selection.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-rowselect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSelectMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSelectMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Selection.prototype.showPopup = function (e) {\n        setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-rowselect e-icons e-icon-rowselect' +\n            (!this.isSingleSel() && (this.selectedRecords.length > (this.parent.getFrozenColumns() ? 2 : 1)\n                || this.selectedRowCellIndexes.length > 1) ? ' e-spanclicked' : ''));\n    };\n    Selection.prototype.rowCellSelectionHandler = function (rowIndex, cellIndex) {\n        if ((!this.isMultiCtrlRequest && !this.isMultiShiftRequest) || this.isSingleSel()) {\n            if (!this.isDragged) {\n                this.selectRow(rowIndex, true);\n            }\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n        else if (this.isMultiShiftRequest) {\n            this.selectRowsByRange(isUndefined(this.prevRowIndex) ? rowIndex : this.prevRowIndex, rowIndex);\n            this.selectCellsByRange(isUndefined(this.prevCIdxs) ? { rowIndex: rowIndex, cellIndex: cellIndex } : this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        else {\n            this.addRowsToSelection([rowIndex]);\n            this.addCellsToSelection([{ rowIndex: rowIndex, cellIndex: cellIndex }]);\n        }\n        this.isDragged = false;\n    };\n    Selection.prototype.onCellFocused = function (e) {\n        if (this.parent.frozenRows && e.container.isHeader && e.byKey) {\n            if (e.keyArgs.action === 'upArrow') {\n                if (this.parent.allowFiltering) {\n                    e.isJump = e.element.tagName === 'INPUT' ? true : false;\n                }\n                else {\n                    e.isJump = e.element.tagName === 'TH' ? true : false;\n                }\n            }\n            else {\n                if (e.keyArgs.action === 'downArrow') {\n                    var rIdx = Number(e.element.parentElement.getAttribute('aria-rowindex'));\n                    e.isJump = rIdx === 0 ? true : false;\n                }\n                else {\n                    if (e.keyArgs.action === 'ctrlHome') {\n                        e.isJump = true;\n                    }\n                }\n            }\n        }\n        var clear = this.parent.getFrozenColumns() ? (((e.container.isHeader && e.element.tagName !== 'TD' && e.isJump) ||\n            ((e.container.isContent || e.element.tagName === 'TD') && !(e.container.isSelectable || e.element.tagName === 'TD')))\n            && !(e.byKey && e.keyArgs.action === 'space')) : ((e.container.isHeader && e.isJump) ||\n            (e.container.isContent && !e.container.isSelectable)) && !(e.byKey && e.keyArgs.action === 'space');\n        var headerAction = (e.container.isHeader && e.element.tagName !== 'TD' && !closest(e.element, '.e-rowcell'))\n            && !(e.byKey && e.keyArgs.action === 'space');\n        if (!e.byKey || clear) {\n            if (clear && !this.parent.isCheckBoxSelection) {\n                this.clearSelection();\n            }\n            return;\n        }\n        var _a = e.container.isContent ? e.container.indexes : e.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        var prev = this.focus.getPrevIndexes();\n        if (this.parent.frozenRows) {\n            if (e.container.isHeader && (e.element.tagName === 'TD' || closest(e.element, '.e-rowcell'))) {\n                var thLen = this.parent.getHeaderTable().querySelector('thead').childElementCount;\n                rowIndex -= thLen;\n                prev.rowIndex = prev.rowIndex ? prev.rowIndex - thLen : null;\n            }\n            else {\n                rowIndex += this.parent.frozenRows;\n                prev.rowIndex = prev.rowIndex === 0 || !isNullOrUndefined(prev.rowIndex) ? prev.rowIndex + this.parent.frozenRows : null;\n            }\n            if (this.parent.getFrozenColumns()) {\n                var cIdx = Number(e.element.getAttribute('aria-colindex'));\n                prev.cellIndex = prev.cellIndex ? (prev.cellIndex === cellIndex ? cIdx : cIdx - 1) : null;\n                cellIndex = cIdx;\n            }\n        }\n        if (headerAction || (['ctrlPlusA', 'escape'].indexOf(e.keyArgs.action) === -1 && e.keyArgs.action !== 'space' &&\n            rowIndex === prev.rowIndex && cellIndex === prev.cellIndex)) {\n            return;\n        }\n        this.preventFocus = true;\n        switch (e.keyArgs.action) {\n            case 'downArrow':\n            case 'upArrow':\n            case 'enter':\n            case 'shiftEnter':\n                this.applyDownUpKey(rowIndex, cellIndex);\n                break;\n            case 'rightArrow':\n            case 'leftArrow':\n                this.applyRightLeftKey(rowIndex, cellIndex);\n                break;\n            case 'shiftDown':\n            case 'shiftUp':\n                this.shiftDownKey(rowIndex, cellIndex);\n                break;\n            case 'shiftLeft':\n            case 'shiftRight':\n                this.applyShiftLeftRightKey(rowIndex, cellIndex);\n                break;\n            case 'home':\n            case 'end':\n                cellIndex = e.keyArgs.action === 'end' ? this.getLastColIndex(rowIndex) : 0;\n                this.applyHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'ctrlHome':\n            case 'ctrlEnd':\n                this.applyCtrlHomeEndKey(rowIndex, cellIndex);\n                break;\n            case 'escape':\n                this.clearSelection();\n                break;\n            case 'ctrlPlusA':\n                this.ctrlPlusA();\n                break;\n            case 'space':\n                this.applySpaceSelection(e.element);\n                break;\n        }\n        this.preventFocus = false;\n    };\n    /**\n     * Apply ctrl + A key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.ctrlPlusA = function () {\n        if (this.isRowType() && !this.isSingleSel()) {\n            this.selectRowsByRange(0, this.parent.getRows().length - 1);\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange({ rowIndex: 0, cellIndex: 0 }, { rowIndex: this.parent.getRows().length - 1, cellIndex: this.parent.getColumns().length - 1 });\n        }\n    };\n    Selection.prototype.applySpaceSelection = function (target) {\n        if (target.classList.contains('e-checkselectall')) {\n            this.checkedTarget = target;\n            this.checkSelectAll(this.checkedTarget);\n        }\n        else {\n            if (target.classList.contains('e-checkselect')) {\n                this.checkedTarget = target;\n                this.checkSelect(this.checkedTarget);\n            }\n        }\n    };\n    Selection.prototype.applyDownUpKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.parent.isCheckBoxSelection && this.parent.checkAllRows === 'Check') {\n            this.checkSelectAllAction(false);\n            this.checkedTarget = null;\n        }\n        if (this.isRowType()) {\n            if (this.parent.frozenRows) {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n            else {\n                this.selectRow(rowIndex, true);\n                this.applyUpDown(gObj.selectedRowIndex);\n            }\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.applyUpDown = function (rowIndex) {\n        if (rowIndex < 0) {\n            return;\n        }\n        if (!this.target) {\n            this.target = this.parent.getRows()[0].children[this.parent.groupSettings.columns.length || 0];\n        }\n        var cIndex = parseInt(this.target.getAttribute('aria-colindex'), 10);\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (cIndex >= frzCols) {\n                this.target =\n                    this.contentRenderer.getMovableRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex - frzCols];\n            }\n            else {\n                this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n            }\n        }\n        else {\n            this.target = this.contentRenderer.getRowByIndex(rowIndex).querySelectorAll('.e-rowcell')[cIndex];\n        }\n        this.addAttribute(this.target);\n    };\n    Selection.prototype.applyRightLeftKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n            this.addAttribute(this.target);\n        }\n    };\n    Selection.prototype.applyHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n        else {\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n    };\n    /**\n     * Apply shift+down key selection\n     * @return {void}\n     * @hidden\n     */\n    Selection.prototype.shiftDownKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        if (this.isRowType() && !this.isSingleSel()) {\n            if (!isUndefined(this.prevRowIndex)) {\n                this.selectRowsByRange(this.prevRowIndex, rowIndex);\n                this.applyUpDown(rowIndex);\n            }\n            else {\n                this.selectRow(0, true);\n            }\n        }\n        if (this.isCellType() && !this.isSingleSel()) {\n            this.selectCellsByRange(this.prevCIdxs || { rowIndex: 0, cellIndex: 0 }, { rowIndex: rowIndex, cellIndex: cellIndex });\n        }\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyShiftLeftRightKey = function (rowIndex, cellIndex) {\n        var gObj = this.parent;\n        this.isMultiShiftRequest = true;\n        this.selectCellsByRange(this.prevCIdxs, { rowIndex: rowIndex, cellIndex: cellIndex });\n        this.isMultiShiftRequest = false;\n    };\n    Selection.prototype.applyCtrlHomeEndKey = function (rowIndex, cellIndex) {\n        if (this.isRowType()) {\n            this.selectRow(rowIndex, true);\n            this.addAttribute(this.parent.getCellFromIndex(rowIndex, cellIndex));\n        }\n        if (this.isCellType()) {\n            this.selectCell({ rowIndex: rowIndex, cellIndex: cellIndex }, true);\n        }\n    };\n    Selection.prototype.addRemoveClassesForRow = function (row, isAdd, clearAll) {\n        var args = [];\n        for (var _i = 3; _i < arguments.length; _i++) {\n            args[_i - 3] = arguments[_i];\n        }\n        if (row) {\n            var cells = [].slice.call(row.querySelectorAll('.e-rowcell'));\n            var cell = row.querySelector('.e-detailrowcollapse') || row.querySelector('.e-detailrowexpand');\n            if (cell) {\n                cells.push(cell);\n            }\n            addRemoveActiveClasses.apply(void 0, [cells, isAdd].concat(args));\n        }\n        this.getRenderer().setSelection(row ? row.getAttribute('data-uid') : null, isAdd, clearAll);\n    };\n    Selection.prototype.isRowType = function () {\n        return this.selectionSettings.mode === 'Row' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isCellType = function () {\n        return this.selectionSettings.mode === 'Cell' || this.selectionSettings.mode === 'Both';\n    };\n    Selection.prototype.isSingleSel = function () {\n        return this.selectionSettings.type === 'Single';\n    };\n    Selection.prototype.getRenderer = function () {\n        if (isNullOrUndefined(this.contentRenderer)) {\n            this.contentRenderer = this.factory.getRenderer(RenderType.Content);\n        }\n        return this.contentRenderer;\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     */\n    Selection.prototype.getSelectedRecords = function () {\n        var selectedData = [];\n        if (!this.selectionSettings.persistSelection) {\n            selectedData = this.parent.getRowsObject().filter(function (row) { return row.isSelected; })\n                .map(function (m) { return m.data; });\n        }\n        else {\n            selectedData = this.persistSelectedData;\n        }\n        return selectedData;\n    };\n    Selection.prototype.addEventListener_checkbox = function () {\n        this.parent.on(events.dataReady, this.dataReady, this);\n        this.onDataBoundFunction = this.onDataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.on(events.contentReady, this.checkBoxSelectionChanged, this);\n        this.actionCompleteFunc = this.actionCompleteHandler.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.on(events.click, this.clickHandler, this);\n    };\n    Selection.prototype.removeEventListener_checkbox = function () {\n        this.parent.off(events.dataReady, this.dataReady);\n        this.parent.removeEventListener(events.dataBound, this.onDataBoundFunction);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n        this.parent.off(events.click, this.clickHandler);\n    };\n    Selection.prototype.dataReady = function (e) {\n        if (e.requestType !== 'virtualscroll' && !this.parent.isPersistSelection) {\n            this.disableUI = true;\n            this.clearSelection();\n            this.disableUI = false;\n        }\n    };\n    Selection.prototype.actionCompleteHandler = function (e) {\n        if (e.requestType === 'save' && this.parent.isPersistSelection) {\n            this.refreshPersistSelection();\n        }\n    };\n    return Selection;\n}());\nexport { Selection };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { isActionPrevent } from '../base/util';\n/**\n * The `Search` module is used to handle search action.\n */\nvar Search = /** @class */ (function () {\n    /**\n     * Constructor for Grid search module.\n     * @hidden\n     */\n    function Search(parent) {\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * Searches Grid records by given key.\n     *\n     * > You can customize the default search action by using [`searchSettings`](./api-grid.html#searchsettings-searchsettingsmodel).\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Search.prototype.search = function (searchString) {\n        var gObj = this.parent;\n        searchString = isNullOrUndefined(searchString) ? '' : searchString;\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.search, arg1: searchString });\n            return;\n        }\n        if (searchString !== gObj.searchSettings.key) {\n            gObj.searchSettings.key = searchString.toString();\n            gObj.dataBind();\n        }\n        else if (this.refreshSearch) {\n            gObj.refresh();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.searchComplete, this.onSearchComplete, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.actionCompleteFunc = this.onActionComplete.bind(this);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunc);\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.searchComplete, this.onSearchComplete);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunc);\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    /**\n     * @hidden\n     */\n    Search.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (!isNullOrUndefined(e.properties.key)) {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin, searchString: this.parent.searchSettings.key\n            });\n        }\n        else {\n            this.parent.notify(events.modelChanged, {\n                requestType: 'searching', type: events.actionBegin\n            });\n        }\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Search.prototype.onSearchComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, {\n            searchString: this.parent.searchSettings.key, requestType: 'searching', type: events.actionComplete\n        }));\n    };\n    Search.prototype.onActionComplete = function (e) {\n        this.refreshSearch = e.requestType !== 'searching';\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Search.prototype.getModuleName = function () {\n        return 'search';\n    };\n    return Search;\n}());\nexport { Search };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `ShowHide` module is used to control column visibility.\n */\nvar ShowHide = /** @class */ (function () {\n    /**\n     * Constructor for the show hide module.\n     * @hidden\n     */\n    function ShowHide(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Shows a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to show.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.show = function (columnName, showBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, showBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        columns.forEach(function (value) {\n            value.visible = true;\n        });\n        this.setVisible(columns);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} columnName - Defines a single or collection of column names to hide.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    ShowHide.prototype.hide = function (columnName, hideBy) {\n        var keys = this.getToggleFields(columnName);\n        var columns = this.getColumns(keys, hideBy);\n        this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        columns.forEach(function (value) {\n            value.visible = false;\n        });\n        this.setVisible(columns);\n    };\n    ShowHide.prototype.getToggleFields = function (key) {\n        var finalized = [];\n        if (typeof key === 'string') {\n            finalized = [key];\n        }\n        else {\n            finalized = key;\n        }\n        return finalized;\n    };\n    ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n        var _this = this;\n        var columns = iterateArrayOrObject(keys, function (key, index) {\n            return iterateArrayOrObject(_this.parent.getColumns(), function (item, index) {\n                if (item[getKeyBy] === key) {\n                    return item;\n                }\n                return undefined;\n            })[0];\n        });\n        return columns;\n    };\n    /**\n     * Shows or hides columns by given column collection.\n     * @private\n     * @param  {Column[]} columns - Specifies the columns.\n     * @return {void}\n     */\n    ShowHide.prototype.setVisible = function (columns) {\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, {\n                instance: this, handler: this.setVisible,\n                arg1: columns\n            });\n            return;\n        }\n        columns = isNullOrUndefined(columns) ? this.parent.getColumns() : columns;\n        if (this.parent.allowSelection && this.parent.getSelectedRecords().length) {\n            this.parent.clearSelection();\n        }\n        this.parent.notify(events.columnVisibilityChanged, columns);\n        if (this.parent.columnQueryMode !== 'All') {\n            this.parent.refresh();\n        }\n    };\n    return ShowHide;\n}());\nexport { ShowHide };\n","import { Browser, EventHandler } from '@syncfusion/ej2-base';\nimport { addClass, removeClass } from '@syncfusion/ej2-base';\nimport { formatUnit, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getScrollBarWidth, getUpdateUsingRaf } from '../base/util';\nimport { scroll, contentReady, uiUpdate, onEmpty, headerRefreshed } from '../base/constant';\nimport { ColumnWidthService } from '../services/width-controller';\n/**\n * The `Scroll` module is used to handle scrolling behaviour.\n */\nvar Scroll = /** @class */ (function () {\n    /**\n     * Constructor for the Grid scrolling.\n     * @hidden\n     */\n    function Scroll(parent) {\n        this.lastScrollTop = 0;\n        //To maintain scroll state on grid actions.\n        this.previousValues = { top: 0, left: 0 };\n        this.oneTimeReady = true;\n        this.parent = parent;\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Scroll.prototype.getModuleName = function () {\n        return 'scroll';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setWidth = function () {\n        this.parent.element.style.width = formatUnit(this.parent.width);\n        if (this.parent.toolbarModule && this.parent.toolbarModule.toolbar &&\n            this.parent.toolbarModule.toolbar.element) {\n            this.parent.toolbarModule.toolbar.refreshOverflow();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setHeight = function () {\n        var mHdrHeight = 0;\n        var content = this.parent.getContent().firstChild;\n        if (this.parent.frozenRows && this.parent.height !== 'auto') {\n            mHdrHeight =\n                this.parent.getHeaderContent().querySelector('tbody').offsetHeight;\n            content.style.height = formatUnit(this.parent.height - mHdrHeight);\n        }\n        else {\n            content.style.height = formatUnit(this.parent.height);\n        }\n        this.ensureOverflow(content);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.setPadding = function () {\n        var content = this.parent.getHeaderContent();\n        var scrollWidth = Scroll.getScrollBarWidth() - this.getThreshold();\n        var cssProps = this.getCssProperties();\n        content.firstChild.style[cssProps.border] = scrollWidth > 0 ? '1px' : '0px';\n        content.style[cssProps.padding] = scrollWidth > 0 ? scrollWidth + 'px' : '0px';\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removePadding = function (rtl) {\n        var cssProps = this.getCssProperties(rtl);\n        this.parent.getHeaderContent().firstChild.style[cssProps.border] = '';\n        this.parent.getHeaderContent().firstChild.parentElement.style[cssProps.padding] = '';\n    };\n    /**\n     * Refresh makes the Grid adoptable with the height of parent container.\n     *\n     * > The [`height`](./api-grid.html#height) must be set to 100%.\n     * @return\n     */\n    Scroll.prototype.refresh = function () {\n        if (this.parent.height !== '100%') {\n            return;\n        }\n        var content = this.parent.getContent();\n        this.parent.element.style.height = '100%';\n        var height = this.widthService.getSiblingsHeight(content);\n        content.style.height = 'calc(100% - ' + height + 'px)'; //Set the height to the '.e-gridcontent';\n    };\n    Scroll.prototype.getThreshold = function () {\n        /* Some browsers places the scroller outside the content,\n         * hence the padding should be adjusted.*/\n        var appName = Browser.info.name;\n        if (appName === 'mozilla') {\n            return 0.5;\n        }\n        return 1;\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(onEmpty, this.wireEvents, this);\n        this.parent.on(contentReady, this.wireEvents, this);\n        this.parent.on(uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(headerRefreshed, this.setScrollLeft, this);\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(onEmpty, this.wireEvents);\n        this.parent.off(contentReady, this.wireEvents);\n        this.parent.off(uiUpdate, this.onPropertyChanged);\n        this.parent.off(headerRefreshed, this.setScrollLeft);\n    };\n    Scroll.prototype.setScrollLeft = function () {\n        if (this.parent.frozenColumns) {\n            this.parent.headerModule.getMovableHeader().scrollLeft = this.previousValues.left;\n        }\n    };\n    Scroll.prototype.onContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        var isHeader = element.classList.contains('e-headercontent');\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null || _this.parent.isPreventScrollEvent) {\n                return;\n            }\n            var target = e.target;\n            var left = target.scrollLeft;\n            var sLimit = target.scrollWidth;\n            var isFooter = target.classList.contains('e-summarycontent');\n            if (_this.previousValues.left === left) {\n                _this.previousValues.top = !isHeader ? _this.previousValues.top : target.scrollTop;\n                return;\n            }\n            element.scrollLeft = left;\n            if (isFooter) {\n                _this.header.scrollLeft = left;\n            }\n            _this.previousValues.left = left;\n            _this.parent.notify(scroll, { left: left });\n        };\n    };\n    Scroll.prototype.onFreezeContentScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var target = e.target;\n            var top = target.scrollTop;\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            element.scrollTop = top;\n            _this.previousValues.top = top;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n        };\n    };\n    Scroll.prototype.onWheelScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (_this.content.querySelector('tbody') === null) {\n                return;\n            }\n            var top = element.scrollTop + (e.deltaMode === 1 ? e.deltaY * 30 : e.deltaY);\n            if (_this.previousValues.top === top) {\n                return;\n            }\n            e.preventDefault();\n            _this.parent.getContent().querySelector('.e-frozencontent').scrollTop = top;\n            element.scrollTop = top;\n            _this.previousValues.top = top;\n        };\n    };\n    Scroll.prototype.onTouchScroll = function (scrollTarget) {\n        var _this = this;\n        var element = scrollTarget;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            var cont;\n            var mHdr;\n            var pageXY = _this.getPointXY(e);\n            var top = element.scrollTop + (_this.pageXY.y - pageXY.y);\n            var left = element.scrollLeft + (_this.pageXY.x - pageXY.x);\n            if (_this.parent.getHeaderContent().contains(e.target)) {\n                mHdr = _this.parent.getFrozenColumns() ?\n                    _this.parent.getHeaderContent().querySelector('.e-movableheader') : _this.parent.getHeaderContent().firstChild;\n                if (_this.previousValues.left === left || (left < 0 || (mHdr.scrollWidth - mHdr.clientWidth) < left)) {\n                    return;\n                }\n                e.preventDefault();\n                mHdr.scrollLeft = left;\n                element.scrollLeft = left;\n                _this.pageXY.x = pageXY.x;\n                _this.previousValues.left = left;\n            }\n            else {\n                cont = _this.parent.getContent().querySelector('.e-frozencontent');\n                if (_this.previousValues.top === top || (top < 0 || (cont.scrollHeight - cont.clientHeight) < top)) {\n                    return;\n                }\n                e.preventDefault();\n                cont.scrollTop = top;\n                element.scrollTop = top;\n                _this.pageXY.y = pageXY.y;\n                _this.previousValues.top = top;\n            }\n        };\n    };\n    Scroll.prototype.setPageXY = function () {\n        var _this = this;\n        return function (e) {\n            if (e.pointerType === 'mouse') {\n                return;\n            }\n            _this.pageXY = _this.getPointXY(e);\n        };\n    };\n    Scroll.prototype.getPointXY = function (e) {\n        var pageXY = { x: 0, y: 0 };\n        if (e.touches && e.touches.length) {\n            pageXY.x = e.touches[0].pageX;\n            pageXY.y = e.touches[0].pageY;\n        }\n        else {\n            pageXY.x = e.pageX;\n            pageXY.y = e.pageY;\n        }\n        return pageXY;\n    };\n    Scroll.prototype.wireEvents = function () {\n        var _this = this;\n        if (this.oneTimeReady) {\n            var frzCols = this.parent.getFrozenColumns();\n            this.content = this.parent.getContent().firstChild;\n            this.header = this.parent.getHeaderContent().firstChild;\n            var mCont = this.content.querySelector('.e-movablecontent');\n            var fCont = this.content.querySelector('.e-frozencontent');\n            var mHdr = this.header.querySelector('.e-movableheader');\n            if (this.parent.frozenRows) {\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(frzCols ? mHdr : this.header, 'touchmove pointermove', this.onTouchScroll(frzCols ? mCont : this.content), this);\n            }\n            if (frzCols) {\n                EventHandler.add(mCont, 'scroll', this.onContentScroll(mHdr), this);\n                EventHandler.add(mCont, 'scroll', this.onFreezeContentScroll(fCont), this);\n                EventHandler.add(fCont, 'scroll', this.onFreezeContentScroll(mCont), this);\n                EventHandler.add(mHdr, 'scroll', this.onContentScroll(mCont), this);\n                EventHandler.add(fCont, 'wheel', this.onWheelScroll(mCont), this);\n                EventHandler.add(fCont, 'touchstart pointerdown', this.setPageXY(), this);\n                EventHandler.add(fCont, 'touchmove pointermove', this.onTouchScroll(mCont), this);\n            }\n            else {\n                EventHandler.add(this.content, 'scroll', this.onContentScroll(this.header), this);\n                EventHandler.add(this.header, 'scroll', this.onContentScroll(this.content), this);\n            }\n            if (this.parent.aggregates.length) {\n                EventHandler.add(this.parent.getFooterContent().firstChild, 'scroll', this.onContentScroll(this.content), this);\n            }\n            this.refresh();\n            this.oneTimeReady = false;\n        }\n        var table = this.parent.getContentTable();\n        var sLeft;\n        var sHeight;\n        var clientHeight;\n        getUpdateUsingRaf(function () {\n            sLeft = _this.header.scrollLeft;\n            sHeight = table.scrollHeight;\n            clientHeight = _this.parent.getContent().clientHeight;\n        }, function () {\n            if (!_this.parent.enableVirtualization) {\n                if (sHeight < clientHeight) {\n                    addClass(table.querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    if (_this.parent.getFrozenColumns()) {\n                        addClass(_this.parent.getContent().querySelector('.e-movablecontent').querySelectorAll('tr:last-child td'), 'e-lastrowcell');\n                    }\n                }\n                if ((_this.parent.frozenRows > 0 || _this.parent.frozenColumns > 0) && _this.header.querySelector('.e-movableheader')) {\n                    _this.header.querySelector('.e-movableheader').scrollLeft = _this.previousValues.left;\n                }\n                else {\n                    _this.header.scrollLeft = _this.previousValues.left;\n                }\n                _this.content.scrollLeft = _this.previousValues.left;\n                _this.content.scrollTop = _this.previousValues.top;\n            }\n            if (!_this.parent.enableColumnVirtualization) {\n                _this.content.scrollLeft = sLeft;\n            }\n            if (_this.parent.frozenColumns && _this.header.querySelector('.e-movableheader')) {\n                _this.header.querySelector('.e-movableheader').scrollLeft =\n                    _this.content.querySelector('.e-movablecontent').scrollLeft;\n            }\n        });\n        this.parent.isPreventScrollEvent = false;\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.getCssProperties = function (rtl) {\n        var css = {};\n        var enableRtl = isNullOrUndefined(rtl) ? this.parent.enableRtl : rtl;\n        css.border = enableRtl ? 'borderLeftWidth' : 'borderRightWidth';\n        css.padding = enableRtl ? 'paddingLeft' : 'paddingRight';\n        return css;\n    };\n    Scroll.prototype.ensureOverflow = function (content) {\n        if (this.parent.getFrozenColumns()) {\n            content.querySelector('.e-movablecontent').style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n        }\n        else {\n            content.style.overflowY = this.parent.height === 'auto' ? 'auto' : 'scroll';\n        }\n    };\n    Scroll.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        this.setPadding();\n        this.oneTimeReady = true;\n        if (this.parent.height === 'auto') {\n            this.removePadding();\n        }\n        this.wireEvents();\n        this.setHeight();\n        this.setWidth();\n    };\n    /**\n     * @hidden\n     */\n    Scroll.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.removeEventListener();\n        //Remove padding\n        this.removePadding();\n        removeClass([this.parent.getHeaderContent().firstChild], 'e-headercontent');\n        removeClass([this.parent.getContent().firstChild], 'e-content');\n        //Remove height\n        this.parent.getContent().firstChild.style.height = '';\n        //Remove width\n        this.parent.element.style.width = '';\n        //Remove Dom event\n        EventHandler.remove(this.parent.getContent().firstChild, 'scroll', this.onContentScroll);\n    };\n    /**\n     * Function to get the scrollbar width of the browser.\n     * @return {number}\n     * @hidden\n     */\n    Scroll.getScrollBarWidth = function () {\n        return getScrollBarWidth();\n    };\n    return Scroll;\n}());\nexport { Scroll };\n","import { print as printWindow, createElement, detach } from '@syncfusion/ej2-base';\nimport { removeElement, getActualProperties, getActualPropFromColl } from '../base/util';\nimport { Grid } from '../base/grid';\nimport * as events from '../base/constant';\n/**\n *\n * The `Print` module is used to handle print action.\n */\nvar Print = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function Print(parent, scrollModule) {\n        this.isAsyncPrint = false;\n        this.printing = 'isPrinting';\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.contentReady.bind(this));\n        this.parent.addEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.on(events.onEmpty, this.onEmpty.bind(this));\n        this.scrollModule = scrollModule;\n    }\n    /**\n     * By default, prints all the Grid pages and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](./api-grid.html#printmode-string).\n     * @return {void}\n     */\n    Print.prototype.print = function () {\n        this.renderPrintGrid();\n        this.printWind = window.open('', 'print', 'height=' + window.outerHeight + ',width=' + window.outerWidth + ',tabbar=no');\n        this.printWind.moveTo(0, 0);\n        this.printWind.resizeTo(screen.availWidth, screen.availHeight);\n    };\n    Print.prototype.onEmpty = function () {\n        if (this.isPrintGrid()) {\n            this.contentReady();\n        }\n    };\n    Print.prototype.actionBegin = function () {\n        if (this.isPrintGrid()) {\n            this.isAsyncPrint = true;\n        }\n    };\n    Print.prototype.renderPrintGrid = function () {\n        var gObj = this.parent;\n        var elem = 'element';\n        var printGridModel = {};\n        var element = createElement('div', {\n            id: this.parent.element.id + '_print', className: gObj.element.className + ' e-print-grid'\n        });\n        document.body.appendChild(element);\n        for (var _i = 0, _a = Print.printGridProp; _i < _a.length; _i++) {\n            var key = _a[_i];\n            if (key === 'columns') {\n                printGridModel[key] = getActualPropFromColl(gObj[key]);\n            }\n            else if (key === 'allowPaging') {\n                printGridModel[key] = this.parent.printMode === 'CurrentPage';\n            }\n            else {\n                printGridModel[key] = getActualProperties(gObj[key]);\n            }\n        }\n        var printGrid = new Grid(printGridModel);\n        printGrid.appendTo(element);\n        printGrid[this.printing] = true;\n        printGrid.trigger = gObj.trigger;\n    };\n    Print.prototype.contentReady = function () {\n        if (this.isPrintGrid()) {\n            var gObj = this.parent;\n            if (this.isAsyncPrint) {\n                this.printGrid();\n                return;\n            }\n            var args = {\n                requestType: 'print',\n                element: gObj.element,\n                selectedRows: gObj.getContentTable().querySelectorAll('tr[aria-selected=\"true\"]'),\n                cancel: false\n            };\n            if (!this.isAsyncPrint) {\n                gObj.trigger(events.beforePrint, args);\n            }\n            if (args.cancel) {\n                detach(gObj.element);\n                return;\n            }\n            else if (!this.isAsyncPrint) {\n                this.printGrid();\n            }\n        }\n    };\n    Print.prototype.printGrid = function () {\n        var gObj = this.parent;\n        // Pager eleement process based on primt mode\n        if (gObj.allowPaging && gObj.printMode === 'CurrentPage') {\n            gObj.element.querySelector('.e-gridpager').style.display = 'none';\n        }\n        // Height adjustment on print grid\n        if (gObj.height !== 'auto') {\n            var cssProps = this.scrollModule.getCssProperties();\n            var contentDiv = gObj.element.querySelector('.e-content');\n            var headerDiv = gObj.element.querySelector('.e-gridheader');\n            contentDiv.style.height = 'auto';\n            contentDiv.style.overflowY = 'auto';\n            headerDiv.style[cssProps.padding] = '';\n            headerDiv.firstElementChild.style[cssProps.border] = '';\n        }\n        // Grid alignment adjustment on grouping\n        if (gObj.allowGrouping) {\n            if (!gObj.groupSettings.columns.length) {\n                gObj.element.querySelector('.e-groupdroparea').style.display = 'none';\n            }\n            else {\n                this.removeColGroup(gObj.groupSettings.columns.length, gObj.element);\n                removeElement(gObj.element, '.e-grouptopleftcell');\n                removeElement(gObj.element, '.e-recordpluscollapse');\n                removeElement(gObj.element, '.e-indentcell');\n                removeElement(gObj.element, '.e-recordplusexpand');\n            }\n        }\n        // hide horizontal scroll\n        gObj.element.querySelector('.e-content').style.overflowX = 'hidden';\n        //hide filter bar in print grid\n        if (gObj.allowFiltering && gObj.filterSettings.type === 'FilterBar') {\n            gObj.element.querySelector('.e-filterbar').style.display = 'none';\n        }\n        // Hide the waiting popup\n        var waitingPop = gObj.element.querySelectorAll('.e-spin-show');\n        if (waitingPop.length > 0) {\n            waitingPop[0].classList.add('e-spin-hide');\n            waitingPop[0].classList.remove('e-spin-show');\n        }\n        if (gObj[this.printing]) {\n            detach(gObj.element);\n        }\n        gObj.element.classList.remove('e-print-grid');\n        this.printWind = printWindow(gObj.element, this.printWind);\n        gObj[this.printing] = false;\n        var args = {\n            element: gObj.element\n        };\n        gObj.trigger(events.printComplete, args);\n    };\n    Print.prototype.removeColGroup = function (depth, element) {\n        var groupCaption = element.querySelectorAll('.e-groupcaption');\n        var colSpan = groupCaption[depth - 1].getAttribute('colspan');\n        for (var i = 0; i < groupCaption.length; i++) {\n            groupCaption[i].setAttribute('colspan', colSpan);\n        }\n        var colGroups = element.querySelectorAll('colgroup');\n        for (var i = 0; i < colGroups.length; i++) {\n            for (var j = 0; j < depth; j++) {\n                colGroups[i].childNodes[j].style.display = 'none';\n            }\n        }\n    };\n    Print.prototype.isPrintGrid = function () {\n        return this.parent.element.id.indexOf('_print') > 0 && this.parent[this.printing];\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    Print.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.contentReady, this.contentReady.bind(this));\n        this.parent.removeEventListener(events.actionBegin, this.actionBegin.bind(this));\n        this.parent.off(events.onEmpty, this.onEmpty.bind(this));\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Print.prototype.getModuleName = function () {\n        return 'print';\n    };\n    Print.printGridProp = [\n        'aggregates', 'allowGrouping', 'allowFiltering', 'allowMultiSorting', 'allowReordering', 'allowSorting',\n        'allowTextWrap', 'childGrid', 'columns', 'currentViewData', 'dataSource', 'detailTemplate', 'enableAltRow',\n        'enableColumnVirtualization', 'filterSettings', 'gridLines',\n        'groupSettings', 'height', 'locale', 'pageSettings', 'printMode', 'query', 'queryString',\n        'rowHeight', 'rowTemplate', 'sortSettings', 'textWrapSettings', 'allowPaging',\n        events.beforePrint, events.printComplete\n    ];\n    return Print;\n}());\nexport { Print };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { compile } from '@syncfusion/ej2-base';\nimport { getEnumValue } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { Property, Collection, ChildProperty } from '@syncfusion/ej2-base';\nimport { ValueFormatter } from '../services/value-formatter';\n/**\n * Configures the Grid's aggregate column.\n */\nvar AggregateColumn = /** @class */ (function (_super) {\n    __extends(AggregateColumn, _super);\n    function AggregateColumn() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.templateFn = {};\n        return _this;\n    }\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setFormatter = function (cultureName) {\n        var valueFormatter = new ValueFormatter(cultureName);\n        if (this.format && (this.format.skeleton || this.format.format)) {\n            this.formatFn = valueFormatter.getFormatFunction(this.format);\n        }\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getFormatter = function () {\n        return this.formatFn;\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setTemplate = function (helper) {\n        if (helper === void 0) { helper = {}; }\n        if (this.footerTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.Summary)] = { fn: compile(this.footerTemplate, helper),\n                property: 'footerTemplate' };\n        }\n        if (this.groupFooterTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.GroupSummary)] = { fn: compile(this.groupFooterTemplate, helper),\n                property: 'groupFooterTemplate' };\n        }\n        if (this.groupCaptionTemplate !== undefined) {\n            this.templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = { fn: compile(this.groupCaptionTemplate, helper),\n                property: 'groupCaptionTemplate' };\n        }\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.getTemplate = function (type) {\n        return this.templateFn[getEnumValue(CellType, type)];\n    };\n    /**\n     * @hidden\n     */\n    AggregateColumn.prototype.setPropertiesSilent = function (prop) {\n        this.setProperties(prop, true);\n    };\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"columnName\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"format\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"footerTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupFooterTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"groupCaptionTemplate\", void 0);\n    __decorate([\n        Property()\n    ], AggregateColumn.prototype, \"customAggregate\", void 0);\n    return AggregateColumn;\n}(ChildProperty));\nexport { AggregateColumn };\n/**\n * Configures the aggregate rows.\n */\nvar AggregateRow = /** @class */ (function (_super) {\n    __extends(AggregateRow, _super);\n    function AggregateRow() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], AggregateColumn)\n    ], AggregateRow.prototype, \"columns\", void 0);\n    return AggregateRow;\n}(ChildProperty));\nexport { AggregateRow };\n","import { Browser, remove } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\n/**\n * The `Clipboard` module is used to handle clipboard copy action.\n */\nvar Clipboard = /** @class */ (function () {\n    /**\n     * Constructor for the Grid clipboard module\n     * @hidden\n     */\n    function Clipboard(parent) {\n        this.copyContent = '';\n        this.isSelect = false;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    Clipboard.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n    };\n    Clipboard.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.clipBoardTextArea = this.parent.createElement('textarea', {\n            className: 'e-clipboard',\n            styles: 'opacity: 0',\n            attrs: { readonly: 'true', tabindex: '-1', 'aria-label': 'clipboard' }\n        });\n        this.parent.element.appendChild(this.clipBoardTextArea);\n    };\n    Clipboard.prototype.keyDownHandler = function (e) {\n        if (e.action === 'ctrlPlusC') {\n            this.copy();\n        }\n        else if (e.action === 'ctrlShiftPlusH') {\n            this.copy(true);\n        }\n    };\n    Clipboard.prototype.setCopyData = function (withHeader) {\n        if (window.getSelection().toString() === '') {\n            var isFrozen = this.parent.getFrozenColumns();\n            this.clipBoardTextArea.value = this.copyContent = '';\n            var mRows = void 0;\n            var rows = this.parent.getRows();\n            if (isFrozen) {\n                mRows = this.parent.getMovableDataRows();\n            }\n            if (this.parent.selectionSettings.mode !== 'Cell') {\n                var selectedIndexes = this.parent.getSelectedRowIndexes().sort(function (a, b) { return a - b; });\n                if (withHeader) {\n                    var headerTextArray = [];\n                    for (var i = 0; i < this.parent.getVisibleColumns().length; i++) {\n                        headerTextArray[i] = this.parent.getVisibleColumns()[i].headerText;\n                    }\n                    this.getCopyData(headerTextArray, false, '\\t', withHeader);\n                    this.copyContent += '\\n';\n                }\n                for (var i = 0; i < selectedIndexes.length; i++) {\n                    if (i > 0) {\n                        this.copyContent += '\\n';\n                    }\n                    var cells = [].slice.call(rows[selectedIndexes[i]].querySelectorAll('.e-rowcell'));\n                    if (isFrozen) {\n                        cells.push.apply(cells, [].slice.call(mRows[selectedIndexes[i]].querySelectorAll('.e-rowcell')));\n                    }\n                    this.getCopyData(cells, false, '\\t', withHeader);\n                }\n            }\n            else {\n                var obj = this.checkBoxSelection();\n                if (obj.status) {\n                    if (withHeader) {\n                        var headers = [];\n                        for (var i = 0; i < obj.colIndexes.length; i++) {\n                            headers.push(this.parent.getColumnHeaderByIndex(obj.colIndexes[i]));\n                        }\n                        this.getCopyData(headers, false, '\\t', withHeader);\n                        this.copyContent += '\\n';\n                    }\n                    for (var i = 0; i < obj.rowIndexes.length; i++) {\n                        if (i > 0) {\n                            this.copyContent += '\\n';\n                        }\n                        var cells = [].slice.call(rows[obj.rowIndexes[i]].\n                            querySelectorAll('.e-cellselectionbackground'));\n                        if (isFrozen) {\n                            cells.push.apply(cells, [].slice.call(mRows[obj.rowIndexes[i]].querySelectorAll('.e-cellselectionbackground')));\n                        }\n                        this.getCopyData(cells, false, '\\t', withHeader);\n                    }\n                }\n                else {\n                    this.getCopyData([].slice.call(this.parent.element.querySelectorAll('.e-cellselectionbackground')), true, '\\n', withHeader);\n                }\n            }\n            var args = {\n                data: this.copyContent,\n                cancel: false,\n            };\n            this.parent.trigger(events.beforeCopy, args);\n            if (args.cancel) {\n                return;\n            }\n            this.clipBoardTextArea.value = this.copyContent = args.data;\n            if (!Browser.userAgent.match(/ipad|ipod|iphone/i)) {\n                this.clipBoardTextArea.select();\n            }\n            else {\n                this.clipBoardTextArea.setSelectionRange(0, this.clipBoardTextArea.value.length);\n            }\n            this.isSelect = true;\n        }\n    };\n    Clipboard.prototype.getCopyData = function (cells, isCell, splitKey, withHeader) {\n        var isElement = typeof cells[0] !== 'string';\n        for (var j = 0; j < cells.length; j++) {\n            if (withHeader && isCell) {\n                this.copyContent += this.parent.getColumns()[parseInt(cells[j].getAttribute('aria-colindex'), 10)].headerText + '\\n';\n            }\n            if (isElement) {\n                if (!cells[j].classList.contains('e-hide')) {\n                    this.copyContent += cells[j].textContent;\n                }\n            }\n            else {\n                this.copyContent += cells[j];\n            }\n            if (j < cells.length - 1) {\n                this.copyContent += splitKey;\n            }\n        }\n    };\n    /**\n     * Copy selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header data need to be copied or not.\n     */\n    Clipboard.prototype.copy = function (withHeader) {\n        if (document.queryCommandSupported('copy')) {\n            this.setCopyData(withHeader);\n            document.execCommand('copy');\n            this.clipBoardTextArea.blur();\n        }\n        if (this.isSelect) {\n            window.getSelection().removeAllRanges();\n            this.isSelect = false;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Clipboard.prototype.getModuleName = function () {\n        return 'clipboard';\n    };\n    /**\n     * To destroy the clipboard\n     * @return {void}\n     * @hidden\n     */\n    Clipboard.prototype.destroy = function () {\n        this.removeEventListener();\n        if (this.clipBoardTextArea) {\n            remove(this.clipBoardTextArea);\n        }\n    };\n    Clipboard.prototype.checkBoxSelection = function () {\n        var gridObj = this.parent;\n        var obj = { status: false };\n        if (gridObj.selectionSettings.mode === 'Cell') {\n            var rowCellIndxes = gridObj.getSelectedRowCellIndexes();\n            var str = void 0;\n            var isBox = void 0;\n            var rowIndexes = [];\n            var i = void 0;\n            for (i = 0; i < rowCellIndxes.length; i++) {\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    rowIndexes.push(rowCellIndxes[i].rowIndex);\n                }\n                if (rowCellIndxes[i].cellIndexes.length) {\n                    if (!str) {\n                        str = JSON.stringify(rowCellIndxes[i].cellIndexes.sort());\n                    }\n                    if (str !== JSON.stringify(rowCellIndxes[i].cellIndexes.sort())) {\n                        break;\n                    }\n                }\n            }\n            rowIndexes.sort();\n            if (i === rowCellIndxes.length && rowIndexes[rowIndexes.length - 1] - rowIndexes[0] === rowIndexes.length - 1) {\n                obj = { status: true, rowIndexes: rowIndexes, colIndexes: rowCellIndxes[0].cellIndexes };\n            }\n        }\n        return obj;\n    };\n    return Clipboard;\n}());\nexport { Clipboard };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, ChildProperty, Browser, closest, extend } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setValue, getValue } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, append, classList } from '@syncfusion/ej2-base';\nimport { Property, Collection, Complex, Event, NotifyPropertyChanges, L10n } from '@syncfusion/ej2-base';\nimport { EventHandler, KeyboardEvents } from '@syncfusion/ej2-base';\nimport { DataUtil } from '@syncfusion/ej2-data';\nimport { createSpinner, hideSpinner, showSpinner, Tooltip } from '@syncfusion/ej2-popups';\nimport { iterateArrayOrObject, prepareColumns, parentsUntil, wrap, templateCompiler, refreshForeignData, getRowHeight } from './util';\nimport * as events from '../base/constant';\nimport { Render } from '../renderer/render';\nimport { RenderType } from './enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { CellRendererFactory } from '../services/cell-render-factory';\nimport { ServiceLocator } from '../services/service-locator';\nimport { ValueFormatter } from '../services/value-formatter';\nimport { RendererFactory } from '../services/renderer-factory';\nimport { ColumnWidthService } from '../services/width-controller';\nimport { AriaService } from '../services/aria-service';\nimport { FocusStrategy } from '../services/focus-strategy';\nimport { PageSettings } from '../models/page-settings';\nimport { Selection } from '../actions/selection';\nimport { Search } from '../actions/search';\nimport { ShowHide } from '../actions/show-hide';\nimport { Scroll } from '../actions/scroll';\nimport { Print } from '../actions/print';\nimport { AggregateRow } from '../models/aggregate';\nimport { Clipboard } from '../actions/clipboard';\n/**\n * Represents the field name and direction of sort column.\n */\nvar SortDescriptor = /** @class */ (function (_super) {\n    __extends(SortDescriptor, _super);\n    function SortDescriptor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], SortDescriptor.prototype, \"direction\", void 0);\n    return SortDescriptor;\n}(ChildProperty));\nexport { SortDescriptor };\n/**\n * Configures the sorting behavior of Grid.\n */\nvar SortSettings = /** @class */ (function (_super) {\n    __extends(SortSettings, _super);\n    function SortSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], SortDescriptor)\n    ], SortSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], SortSettings.prototype, \"allowUnsort\", void 0);\n    return SortSettings;\n}(ChildProperty));\nexport { SortSettings };\n/**\n * Represents the predicate for the filter column.\n */\nvar Predicate = /** @class */ (function (_super) {\n    __extends(Predicate, _super);\n    function Predicate() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"field\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"operator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"value\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"matchCase\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ignoreAccent\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"predicate\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualFilterValue\", void 0);\n    __decorate([\n        Property({})\n    ], Predicate.prototype, \"actualOperator\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], Predicate.prototype, \"ejpredicate\", void 0);\n    return Predicate;\n}(ChildProperty));\nexport { Predicate };\n/**\n * Configures the filtering behavior of the Grid.\n */\nvar FilterSettings = /** @class */ (function (_super) {\n    __extends(FilterSettings, _super);\n    function FilterSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Collection([], Predicate)\n    ], FilterSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property('FilterBar')\n    ], FilterSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], FilterSettings.prototype, \"showFilterBarStatus\", void 0);\n    __decorate([\n        Property(1500)\n    ], FilterSettings.prototype, \"immediateModeDelay\", void 0);\n    __decorate([\n        Property()\n    ], FilterSettings.prototype, \"operators\", void 0);\n    __decorate([\n        Property(false)\n    ], FilterSettings.prototype, \"ignoreAccent\", void 0);\n    return FilterSettings;\n}(ChildProperty));\nexport { FilterSettings };\n/**\n * Configures the selection behavior of the Grid.\n */\nvar SelectionSettings = /** @class */ (function (_super) {\n    __extends(SelectionSettings, _super);\n    function SelectionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Row')\n    ], SelectionSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property('Flow')\n    ], SelectionSettings.prototype, \"cellSelectionMode\", void 0);\n    __decorate([\n        Property('Single')\n    ], SelectionSettings.prototype, \"type\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"checkboxOnly\", void 0);\n    __decorate([\n        Property(false)\n    ], SelectionSettings.prototype, \"persistSelection\", void 0);\n    return SelectionSettings;\n}(ChildProperty));\nexport { SelectionSettings };\n/**\n * Configures the search behavior of the Grid.\n */\nvar SearchSettings = /** @class */ (function (_super) {\n    __extends(SearchSettings, _super);\n    function SearchSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property([])\n    ], SearchSettings.prototype, \"fields\", void 0);\n    __decorate([\n        Property('')\n    ], SearchSettings.prototype, \"key\", void 0);\n    __decorate([\n        Property('contains')\n    ], SearchSettings.prototype, \"operator\", void 0);\n    __decorate([\n        Property(true)\n    ], SearchSettings.prototype, \"ignoreCase\", void 0);\n    __decorate([\n        Property(false)\n    ], SearchSettings.prototype, \"ignoreAccent\", void 0);\n    return SearchSettings;\n}(ChildProperty));\nexport { SearchSettings };\n/**\n * Configures the row drop settings of the Grid.\n */\nvar RowDropSettings = /** @class */ (function (_super) {\n    __extends(RowDropSettings, _super);\n    function RowDropSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property()\n    ], RowDropSettings.prototype, \"targetID\", void 0);\n    return RowDropSettings;\n}(ChildProperty));\nexport { RowDropSettings };\n/**\n * Configures the text wrap settings of the Grid.\n */\nvar TextWrapSettings = /** @class */ (function (_super) {\n    __extends(TextWrapSettings, _super);\n    function TextWrapSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('Both')\n    ], TextWrapSettings.prototype, \"wrapMode\", void 0);\n    return TextWrapSettings;\n}(ChildProperty));\nexport { TextWrapSettings };\n/**\n * Configures the group behavior of the Grid.\n */\nvar GroupSettings = /** @class */ (function (_super) {\n    __extends(GroupSettings, _super);\n    function GroupSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showDropArea\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showToggleButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"showGroupedColumn\", void 0);\n    __decorate([\n        Property(true)\n    ], GroupSettings.prototype, \"showUngroupButton\", void 0);\n    __decorate([\n        Property(false)\n    ], GroupSettings.prototype, \"disablePageWiseAggregates\", void 0);\n    __decorate([\n        Property([])\n    ], GroupSettings.prototype, \"columns\", void 0);\n    __decorate([\n        Property()\n    ], GroupSettings.prototype, \"captionTemplate\", void 0);\n    return GroupSettings;\n}(ChildProperty));\nexport { GroupSettings };\n/**\n * Configures the edit behavior of the Grid.\n */\nvar EditSettings = /** @class */ (function (_super) {\n    __extends(EditSettings, _super);\n    function EditSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowAdding\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowEditing\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"allowDeleting\", void 0);\n    __decorate([\n        Property('Normal')\n    ], EditSettings.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"allowEditOnDblClick\", void 0);\n    __decorate([\n        Property(true)\n    ], EditSettings.prototype, \"showConfirmDialog\", void 0);\n    __decorate([\n        Property(false)\n    ], EditSettings.prototype, \"showDeleteConfirmDialog\", void 0);\n    return EditSettings;\n}(ChildProperty));\nexport { EditSettings };\n/**\n * Represents the Grid component.\n * ```html\n * <div id=\"grid\"></div>\n * <script>\n *  var gridObj = new Grid({ allowPaging: true });\n *  gridObj.appendTo(\"#grid\");\n * </script>\n * ```\n */\nvar Grid = /** @class */ (function (_super) {\n    __extends(Grid, _super);\n    /**\n     * Constructor for creating the component\n     * @hidden\n     */\n    function Grid(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.isPreventScrollEvent = false;\n        _this.inViewIndexes = [];\n        _this.freezeRefresh = Component.prototype.refresh;\n        /**\n         * Gets the currently visible records of the Grid.\n         */\n        _this.currentViewData = [];\n        /** @hidden */\n        _this.prevPageMoving = false;\n        _this.needsID = true;\n        setValue('mergePersistData', _this.mergePersistGridData, _this);\n        return _this;\n    }\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @return {string}\n     * @hidden\n     */\n    Grid.prototype.getPersistData = function () {\n        var _this = this;\n        var keyEntity = ['pageSettings', 'sortSettings',\n            'filterSettings', 'groupSettings', 'columns', 'searchSettings', 'selectedRowIndex'];\n        var ignoreOnPersist = {\n            pageSettings: ['template', 'pageSizes', 'enableQueryString', 'totalRecordsCount', 'pageCount'],\n            filterSettings: ['type', 'mode', 'showFilterBarStatus', 'immediateModeDelay', 'ignoreAccent'],\n            groupSettings: ['showDropArea', 'showToggleButton', 'showGroupedColumn', 'showUngroupButton',\n                'disablePageWiseAggregates', 'hideCaptionCount'],\n            searchSettings: ['fields', 'operator', 'ignoreCase'],\n            sortSettings: [], columns: [], selectedRowIndex: []\n        };\n        var ignoreOnColumn = ['filter', 'edit', 'filterBarTemplate', 'headerTemplate', 'template',\n            'commandTemplate', 'commands', 'dataSource'];\n        keyEntity.forEach(function (value) {\n            var currentObject = _this[value];\n            for (var _i = 0, _a = ignoreOnPersist[value]; _i < _a.length; _i++) {\n                var val = _a[_i];\n                delete currentObject[val];\n            }\n        });\n        this.ignoreInArrays(ignoreOnColumn, this.columns);\n        return this.addOnPersist(keyEntity);\n    };\n    Grid.prototype.ignoreInArrays = function (ignoreOnColumn, columns) {\n        var _this = this;\n        columns.forEach(function (column) {\n            if (column.columns) {\n                _this.ignoreInColumn(ignoreOnColumn, column);\n                _this.ignoreInArrays(ignoreOnColumn, column.columns);\n            }\n            else {\n                _this.ignoreInColumn(ignoreOnColumn, column);\n            }\n        });\n    };\n    Grid.prototype.ignoreInColumn = function (ignoreOnColumn, column) {\n        ignoreOnColumn.forEach(function (val) {\n            delete column[val];\n            column.filter = {};\n        });\n    };\n    /**\n     * To provide the array of modules needed for component rendering\n     * @return {ModuleDeclaration[]}\n     * @hidden\n     */\n    Grid.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.isDestroyed) {\n            return modules;\n        }\n        if (this.allowFiltering) {\n            modules.push({\n                member: 'filter',\n                args: [this, this.filterSettings, this.serviceLocator]\n            });\n        }\n        if (this.allowExcelExport) {\n            modules.push({\n                member: 'ExcelExport',\n                args: [this]\n            });\n        }\n        if (this.allowPdfExport) {\n            modules.push({\n                member: 'PdfExport',\n                args: [this]\n            });\n        }\n        if (this.allowSorting) {\n            modules.push({\n                member: 'sort',\n                args: [this, this.sortSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.allowPaging) {\n            modules.push({\n                member: 'pager',\n                args: [this, this.pageSettings]\n            });\n        }\n        if (this.allowSelection) {\n            modules.push({\n                member: 'selection',\n                args: [this, this.selectionSettings, this.serviceLocator]\n            });\n        }\n        modules.push({\n            member: 'resize',\n            args: [this]\n        });\n        if (this.allowReordering) {\n            modules.push({\n                member: 'reorder',\n                args: [this]\n            });\n        }\n        if (this.allowRowDragAndDrop) {\n            modules.push({\n                member: 'rowDragAndDrop',\n                args: [this]\n            });\n        }\n        if (this.allowGrouping) {\n            modules.push({\n                member: 'group',\n                args: [this, this.groupSettings, this.sortedColumns, this.serviceLocator]\n            });\n        }\n        if (this.aggregates.length) {\n            modules.push({ member: 'aggregate', args: [this, this.serviceLocator] });\n        }\n        if (this.isDetail()) {\n            modules.push({\n                member: 'detailRow',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.toolbar || this.toolbarTemplate) {\n            modules.push({\n                member: 'toolbar',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.enableVirtualization || this.enableColumnVirtualization) {\n            modules.push({\n                member: 'virtualscroll',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.getFrozenColumns() || this.frozenRows) {\n            modules.push({ member: 'freeze', args: [this, this.serviceLocator] });\n        }\n        if (this.isCommandColumn(this.columns)) {\n            modules.push({\n                member: 'commandColumn',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.editSettings.allowAdding || this.editSettings.allowDeleting || this.editSettings.allowEditing) {\n            modules.push({\n                member: 'edit',\n                args: [this, this.serviceLocator]\n            });\n        }\n        this.extendRequiredModules(modules);\n        return modules;\n    };\n    Grid.prototype.extendRequiredModules = function (modules) {\n        if (this.contextMenuItems) {\n            modules.push({\n                member: 'contextMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnMenu) {\n            modules.push({\n                member: 'columnMenu',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.showColumnChooser) {\n            modules.push({\n                member: 'columnChooser',\n                args: [this, this.serviceLocator]\n            });\n        }\n        if (this.isForeignKeyEnabled(this.columns)) {\n            modules.push({ member: 'foreignKey', args: [this, this.serviceLocator] });\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler;\n     * @private\n     */\n    Grid.prototype.preRender = function () {\n        this.serviceLocator = new ServiceLocator;\n        this.initProperties();\n        this.initializeServices();\n    };\n    Grid.prototype.initProperties = function () {\n        /* tslint:disable */\n        this.isInitial = true;\n        this.sortedColumns = [];\n        this.inViewIndexes = [];\n        this.mediaCol = [];\n        this.isInitialLoad = false;\n        this.mergeCells = {};\n        this.isEdit = false;\n        this.checkAllRows = 'None';\n        this.isCheckBoxSelection = false;\n        this.isPersistSelection = false;\n        this.freezeRefresh = Component.prototype.refresh;\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.defaultLocale = {\n            EmptyRecord: 'No records to display',\n            True: 'true',\n            False: 'false',\n            InvalidFilterMessage: 'Invalid Filter Data',\n            GroupDropArea: 'Drag a column header here to group its column',\n            UnGroup: 'Click here to ungroup',\n            GroupDisable: 'Grouping is disabled for this column',\n            FilterbarTitle: '\\'s filter bar cell',\n            EmptyDataSourceError: 'DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid',\n            // Toolbar Items\n            Add: 'Add',\n            Edit: 'Edit',\n            Cancel: 'Cancel',\n            Update: 'Update',\n            Delete: 'Delete',\n            Print: 'Print',\n            Pdfexport: 'PDF Export',\n            Excelexport: 'Excel Export',\n            Wordexport: 'Word Export',\n            Csvexport: 'CSV Export',\n            Search: 'Search',\n            Columnchooser: 'Columns',\n            Save: 'Save',\n            Item: 'item',\n            Items: 'items',\n            EditOperationAlert: 'No records selected for edit operation',\n            DeleteOperationAlert: 'No records selected for delete operation',\n            SaveButton: 'Save',\n            OKButton: 'OK',\n            CancelButton: 'Cancel',\n            EditFormTitle: 'Details of ',\n            AddFormTitle: 'Add New Record',\n            BatchSaveConfirm: 'Are you sure you want to save changes?',\n            BatchSaveLostChanges: 'Unsaved changes will be lost. Are you sure you want to continue?',\n            ConfirmDelete: 'Are you sure you want to Delete Record?',\n            CancelEdit: 'Are you sure you want to Cancel the changes?',\n            ChooseColumns: 'Choose Column',\n            SearchColumns: 'search columns',\n            Matchs: 'No Matches Found',\n            FilterButton: 'Filter',\n            ClearButton: 'Clear',\n            StartsWith: 'Starts With',\n            EndsWith: 'Ends With',\n            Contains: 'Contains',\n            Equal: 'Equal',\n            NotEqual: 'Not Equal',\n            LessThan: 'Less Than',\n            LessThanOrEqual: 'Less Than Or Equal',\n            GreaterThan: 'Greater Than',\n            GreaterThanOrEqual: 'Greater Than Or Equal',\n            ChooseDate: 'Choose a Date',\n            EnterValue: 'Enter the value',\n            Copy: 'Copy',\n            Group: 'Group by this column',\n            Ungroup: 'Ungroup by this column',\n            autoFitAll: 'Auto Fit all columns',\n            autoFit: 'Auto Fit this column',\n            Export: 'Export',\n            FirstPage: 'First Page',\n            LastPage: 'Last Page',\n            PreviousPage: 'Previous Page',\n            NextPage: 'Next Page',\n            SortAscending: 'Sort Ascending',\n            SortDescending: 'Sort Descending',\n            EditRecord: 'Edit Record',\n            DeleteRecord: 'Delete Record',\n            FilterMenu: 'Filter',\n            SelectAll: 'Select All',\n            Blanks: 'Blanks',\n            FilterTrue: 'True',\n            FilterFalse: 'False',\n            NoResult: 'No Matches Found',\n            ClearFilter: 'Clear Filter',\n            NumberFilter: 'Number Filters',\n            TextFilter: 'Text Filters',\n            DateFilter: 'Date Filters',\n            MatchCase: 'Match Case',\n            Between: 'Between',\n            CustomFilter: 'Custom Filter',\n            CustomFilterPlaceHolder: 'Enter the value',\n            CustomFilterDatePlaceHolder: 'Choose a date',\n            AND: 'AND',\n            OR: 'OR',\n            ShowRowsWhere: 'Show rows where:'\n        };\n        this.keyConfigs = {\n            downArrow: 'downarrow',\n            upArrow: 'uparrow',\n            rightArrow: 'rightarrow',\n            leftArrow: 'leftarrow',\n            shiftDown: 'shift+downarrow',\n            shiftUp: 'shift+uparrow',\n            shiftRight: 'shift+rightarrow',\n            shiftLeft: 'shift+leftarrow',\n            home: 'home',\n            end: 'end',\n            escape: 'escape',\n            ctrlHome: 'ctrl+home',\n            ctrlEnd: 'ctrl+end',\n            pageUp: 'pageup',\n            pageDown: 'pagedown',\n            ctrlAltPageUp: 'ctrl+alt+pageup',\n            ctrlAltPageDown: 'ctrl+alt+pagedown',\n            altPageUp: 'alt+pageup',\n            altPageDown: 'alt+pagedown',\n            altDownArrow: 'alt+downarrow',\n            altUpArrow: 'alt+uparrow',\n            ctrlDownArrow: 'ctrl+downarrow',\n            ctrlUpArrow: 'ctrl+uparrow',\n            ctrlPlusA: 'ctrl+A',\n            ctrlPlusP: 'ctrl+P',\n            insert: 'insert',\n            delete: 'delete',\n            f2: 'f2',\n            enter: 'enter',\n            ctrlEnter: 'ctrl+enter',\n            shiftEnter: 'shift+enter',\n            tab: 'tab',\n            shiftTab: 'shift+tab',\n            space: 'space',\n            ctrlPlusC: 'ctrl+C',\n            ctrlShiftPlusH: 'ctrl+shift+H'\n        };\n        /* tslint:enable */\n    };\n    /**\n     * For internal use only - To Initialize the component rendering.\n     * @private\n     */\n    Grid.prototype.render = function () {\n        this.ariaService.setOptions(this.element, { role: 'grid' });\n        createSpinner({ target: this.element }, this.createElement);\n        this.renderModule = new Render(this, this.serviceLocator);\n        this.getMediaColumns();\n        this.searchModule = new Search(this);\n        this.scrollModule = new Scroll(this);\n        this.notify(events.initialLoad, {});\n        this.trigger(events.load);\n        prepareColumns(this.columns, this.enableColumnVirtualization);\n        this.getColumns();\n        this.processModel();\n        this.gridRender();\n        this.wireEvents();\n        this.addListener();\n        this.updateDefaultCursor();\n        this.updateStackedFilter();\n        this.showSpinner();\n        this.notify(events.initialEnd, {});\n    };\n    /**\n     * By default, grid shows the spinner for all its actions. You can use this method to show spinner at your needed time.\n     */\n    Grid.prototype.showSpinner = function () {\n        showSpinner(this.element);\n    };\n    /**\n     * Manually showed spinner needs to hide by `hideSpinnner`.\n     */\n    Grid.prototype.hideSpinner = function () {\n        hideSpinner(this.element);\n    };\n    Grid.prototype.updateStackedFilter = function () {\n        if (this.allowFiltering && this.filterSettings.type === 'FilterBar' &&\n            this.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n            this.getHeaderContent().classList.add('e-stackedfilter');\n        }\n        else {\n            this.getHeaderContent().classList.remove('e-stackedfilter');\n        }\n    };\n    Grid.prototype.getMediaColumns = function () {\n        if (!this.enableColumnVirtualization) {\n            var gcol = this.getColumns();\n            this.getShowHideService = this.serviceLocator.getService('showHideService');\n            if (!isNullOrUndefined(gcol)) {\n                for (var index = 0; index < gcol.length; index++) {\n                    if (!isNullOrUndefined(gcol[index].hideAtMedia)) {\n                        this.mediaCol.push(gcol[index]);\n                        var media = window.matchMedia(gcol[index].hideAtMedia);\n                        this.mediaQueryUpdate(index, media);\n                        media.addListener(this.mediaQueryUpdate.bind(this, index));\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.mediaQueryUpdate = function (columnIndex, e) {\n        var col = this.getColumns()[columnIndex];\n        col.visible = e.matches;\n        if (this.isInitialLoad) {\n            if (col.visible) {\n                this.showHider.show(col.headerText, 'headerText');\n            }\n            else {\n                this.showHider.hide(col.headerText, 'headerText');\n            }\n        }\n    };\n    Grid.prototype.refreshMediaCol = function () {\n        this.isInitialLoad = true;\n        if (this.aggregates.length && this.element.scrollHeight > this.height) {\n            var footerContent = this.element.querySelector('.e-gridfooter');\n            addClass([footerContent], ['e-footerpadding']);\n        }\n    };\n    /**\n     * For internal use only - Initialize the event handler\n     * @private\n     */\n    Grid.prototype.eventInitializer = function () {\n        //eventInitializer\n    };\n    /**\n     * Destroys the component (detaches/removes all event handlers, attributes, classes, and empties the component element).\n     * @method destroy\n     * @return {void}\n     */\n    Grid.prototype.destroy = function () {\n        var gridElement = this.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.e-gridheader') &&\n            gridElement.querySelector('.e-gridcontent') ? true : false;\n        if (hasGridChild) {\n            this.unwireEvents();\n        }\n        this.removeListener();\n        this.notify(events.destroy, {});\n        this.destroyDependentModules();\n        if (hasGridChild) {\n            _super.prototype.destroy.call(this);\n        }\n        this.toolTipObj.destroy();\n        var modules = ['renderModule', 'headerModule', 'contentModule', 'valueFormatterService',\n            'serviceLocator', 'ariaService', 'keyboardModule', 'widthService', 'searchModule', 'showHider',\n            'scrollModule', 'printModule', 'clipboardModule', 'focusModule'];\n        for (var i = 0; i < modules.length; i++) {\n            if (this[modules[i]]) {\n                this[modules[i]] = null;\n            }\n        }\n        this.element.innerHTML = '';\n        classList(this.element, [], ['e-rtl', 'e-gridhover', 'e-responsive', 'e-default', 'e-device', 'e-grid-min-height']);\n    };\n    Grid.prototype.destroyDependentModules = function () {\n        var gridElement = this.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.scrollModule.destroy();\n        this.keyboardModule.destroy();\n        this.focusModule.destroy();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Grid.prototype.getModuleName = function () {\n        return 'grid';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    /* tslint:disable-next-line:max-line-length */\n    Grid.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var requireRefresh = false;\n        var requireGridRefresh = false;\n        var checkCursor;\n        var args = { requestType: 'refresh' };\n        if (this.isDestroyed) {\n            return;\n        }\n        var properties = Object.keys(newProp);\n        if (properties.indexOf('columns') > -1) {\n            this.updateColumnObject();\n            requireGridRefresh = true;\n        }\n        for (var _i = 0, properties_1 = properties; _i < properties_1.length; _i++) {\n            var prop = properties_1[_i];\n            switch (prop) {\n                case 'allowPaging':\n                    this.notify(events.uiUpdate, { module: 'pager', enable: this.allowPaging });\n                    requireRefresh = true;\n                    break;\n                case 'pageSettings':\n                    this.notify(events.inBoundModelChanged, { module: 'pager', properties: newProp.pageSettings });\n                    if (isNullOrUndefined(newProp.pageSettings.currentPage) && isNullOrUndefined(newProp.pageSettings.totalRecordsCount)\n                        || !isNullOrUndefined(oldProp.pageSettings) &&\n                            ((newProp.pageSettings.currentPage !== oldProp.pageSettings.currentPage)\n                                && !this.enableColumnVirtualization && !this.enableVirtualization\n                                && this.pageSettings.totalRecordsCount <= this.pageSettings.pageSize)) {\n                        requireRefresh = true;\n                    }\n                    break;\n                case 'currencyCode':\n                case 'locale':\n                    _super.prototype.refresh.call(this);\n                    break;\n                case 'allowSorting':\n                    this.notify(events.uiUpdate, { module: 'sort', enable: this.allowSorting });\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'allowFiltering':\n                    this.updateStackedFilter();\n                    this.notify(events.uiUpdate, { module: 'filter', enable: this.allowFiltering });\n                    requireRefresh = true;\n                    if (this.filterSettings.type !== 'FilterBar') {\n                        this.refreshHeader();\n                    }\n                    break;\n                case 'height':\n                case 'width':\n                    this.notify(events.uiUpdate, { module: 'scroll', properties: { width: newProp.width, height: newProp.height } });\n                    break;\n                case 'allowReordering':\n                    this.headerModule.refreshUI();\n                    checkCursor = true;\n                    break;\n                case 'allowRowDragAndDrop':\n                    this.notify(events.uiUpdate, { module: 'rowDragAndDrop', enable: this.allowRowDragAndDrop });\n                    break;\n                case 'allowSelection':\n                    this.notify(events.uiUpdate, { module: 'selection', enable: this.allowSelection });\n                    break;\n                case 'rowTemplate':\n                    this.rowTemplateFn = templateCompiler(this.rowTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'detailTemplate':\n                    this.detailTemplateFn = templateCompiler(this.detailTemplate);\n                    requireRefresh = true;\n                    break;\n                case 'allowGrouping':\n                    this.notify(events.uiUpdate, { module: 'group', enable: this.allowGrouping });\n                    this.headerModule.refreshUI();\n                    requireRefresh = true;\n                    checkCursor = true;\n                    break;\n                case 'childGrid':\n                    requireRefresh = true;\n                    break;\n                case 'toolbar':\n                    this.notify(events.uiUpdate, { module: 'toolbar' });\n                    break;\n                case 'groupSettings':\n                    if (!(isNullOrUndefined(newProp.groupSettings.showDropArea))) {\n                        this.headerModule.refreshUI();\n                        requireRefresh = true;\n                        checkCursor = true;\n                    }\n                    this.notify(events.inBoundModelChanged, {\n                        module: 'group', properties: newProp.groupSettings,\n                        oldProperties: oldProp.groupSettings\n                    });\n                    break;\n                case 'aggregates':\n                    if (!this.aggregates.length && this.allowGrouping && this.groupSettings.columns.length) {\n                        requireRefresh = true;\n                    }\n                    this.notify(events.uiUpdate, { module: 'aggregate', properties: newProp });\n                    break;\n                case 'frozenColumns':\n                case 'frozenRows':\n                    this.freezeRefresh();\n                    break;\n                case 'enableVirtualization':\n                    _super.prototype.refresh.call(this);\n                    break;\n                default:\n                    this.extendedPropertyChange(prop, newProp);\n            }\n        }\n        if (checkCursor) {\n            this.updateDefaultCursor();\n        }\n        if (requireGridRefresh) {\n            this.refresh();\n            if (this.frozenColumns || this.frozenRows) {\n                this.freezeRefresh();\n            }\n        }\n        else if (requireRefresh) {\n            this.notify(events.modelChanged, args);\n            requireRefresh = false;\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    Grid.prototype.extendedPropertyChange = function (prop, newProp) {\n        switch (prop) {\n            case 'enableRtl':\n                this.updateRTL();\n                if (this.allowPaging) {\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.element.querySelector('.e-gridpager').ej2_instances[0].dataBind();\n                }\n                if (this.height !== 'auto') {\n                    this.scrollModule.removePadding(!newProp.enableRtl);\n                    this.scrollModule.setPadding();\n                }\n                if (this.toolbar) {\n                    this.toolbarModule.getToolbar().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.toolbarModule.getToolbar().ej2_instances[0].dataBind();\n                }\n                if (this.contextMenuItems) {\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind();\n                }\n                if (this.showColumnMenu) {\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl = newProp.enableRtl;\n                    this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind();\n                }\n                this.notify(events.rtlUpdated, {});\n                break;\n            case 'enableAltRow':\n                this.renderModule.refresh();\n                break;\n            case 'allowResizing':\n                this.headerModule.refreshUI();\n                this.updateResizeLines();\n                break;\n            case 'rowHeight':\n                if (this.rowHeight) {\n                    addClass([this.element], 'e-grid-min-height');\n                }\n                else {\n                    removeClass([this.element], 'e-grid-min-height');\n                }\n                this.renderModule.refresh();\n                this.headerModule.refreshUI();\n                break;\n            case 'gridLines':\n                this.updateGridLines();\n                break;\n            case 'showColumnMenu':\n                this.headerModule.refreshUI();\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: true });\n                break;\n            case 'columnMenuItems':\n                this.notify(events.uiUpdate, { module: 'columnMenu', enable: this.columnMenuItems });\n                break;\n            case 'contextMenuItems':\n                this.notify(events.uiUpdate, { module: 'contextMenu', enable: this.contextMenuItems });\n                break;\n            case 'showColumnChooser':\n                this.notify(events.uiUpdate, { module: 'columnChooser', enable: this.showColumnChooser });\n                break;\n            case 'filterSettings':\n                this.updateStackedFilter();\n                this.notify(events.inBoundModelChanged, { module: 'filter', properties: newProp.filterSettings });\n                break;\n            case 'searchSettings':\n                this.notify(events.inBoundModelChanged, { module: 'search', properties: newProp.searchSettings });\n                break;\n            case 'sortSettings':\n                this.notify(events.inBoundModelChanged, { module: 'sort' });\n                break;\n            case 'selectionSettings':\n                this.notify(events.inBoundModelChanged, { module: 'selection', properties: newProp.selectionSettings });\n                break;\n            case 'editSettings':\n                this.notify(events.inBoundModelChanged, { module: 'edit', properties: newProp.editSettings });\n                break;\n            case 'allowTextWrap':\n            case 'textWrapSettings':\n                if (this.allowTextWrap) {\n                    this.applyTextWrap();\n                }\n                else {\n                    this.removeTextWrap();\n                }\n                this.notify(events.freezeRender, { case: 'textwrap', isModeChg: (prop === 'textWrapSettings') });\n                break;\n            case 'dataSource':\n                var pending_1 = this.getDataModule().getState();\n                if (pending_1.isPending) {\n                    var gResult_1 = !isNullOrUndefined(this.dataSource) ? this.dataSource.result : [];\n                    (pending_1.group || []).forEach(function (name) {\n                        gResult_1 = DataUtil.group(gResult_1, name, pending_1.aggregates || []);\n                    });\n                    this.dataSource = {\n                        result: gResult_1, count: this.dataSource.count,\n                        aggregates: this.dataSource.aggregates\n                    };\n                    pending_1.resolver(this.dataSource);\n                }\n                else {\n                    this.getDataModule().setState({ isDataChanged: false });\n                    this.notify(events.dataSourceModified, {});\n                    this.renderModule.refresh();\n                }\n                break;\n            case 'enableHover':\n                var action = newProp.enableHover ? addClass : removeClass;\n                action([this.element], 'e-gridhover');\n                break;\n        }\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.setProperties = function (prop, muteOnChange) {\n        _super.prototype.setProperties.call(this, prop, muteOnChange);\n        if (this.filterModule && muteOnChange) {\n            this.filterModule.refreshFilter();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.updateDefaultCursor = function () {\n        var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            if (this.allowSorting || (this.allowGrouping && this.groupSettings.showDropArea) || this.allowReordering) {\n                row.classList.remove('e-defaultcursor');\n            }\n            else {\n                row.classList.add('e-defaultcursor');\n            }\n        }\n    };\n    Grid.prototype.updateColumnModel = function (columns) {\n        for (var i = 0, len = columns.length; i < len; i++) {\n            if (columns[i].columns) {\n                this.updateColumnModel(columns[i].columns);\n            }\n            else {\n                this.columnModel.push(columns[i]);\n            }\n        }\n        this.updateFrozenColumns();\n    };\n    Grid.prototype.updateFrozenColumns = function () {\n        var cols = this.columnModel;\n        var count = 0;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].isFrozen) {\n                cols.splice(this.frozenColumns + count, 0, cols.splice(i, 1)[0]);\n                count++;\n            }\n        }\n    };\n    /**\n     * Gets the columns from the Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getColumns = function (isRefresh) {\n        var _this = this;\n        var inview = this.inViewIndexes.map(function (v) { return v - _this.groupSettings.columns.length; }).filter(function (v) { return v > -1; });\n        var vLen = inview.length;\n        if (!this.enableColumnVirtualization || isNullOrUndefined(this.columnModel) || this.columnModel.length === 0 || isRefresh) {\n            this.columnModel = [];\n            this.updateColumnModel(this.columns);\n        }\n        var columns = vLen === 0 ? this.columnModel :\n            this.columnModel.slice(inview[0], inview[vLen - 1] + 1);\n        return columns;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getStackedHeaderColumnByHeaderText = function (stackedHeader, col) {\n        for (var i = 0; i < col.length; i++) {\n            var individualColumn = col[i];\n            if (individualColumn.field === stackedHeader || individualColumn.headerText === stackedHeader) {\n                this.stackedColumn = individualColumn;\n                break;\n            }\n            else if (individualColumn.columns) {\n                this.getStackedHeaderColumnByHeaderText(stackedHeader, individualColumn.columns);\n            }\n        }\n        return this.stackedColumn;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getColumnIndexesInView = function () {\n        return this.inViewIndexes;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.getLocaleConstants = function () {\n        return this.defaultLocale;\n    };\n    /**\n     * @private\n     */\n    Grid.prototype.setColumnIndexesInView = function (indexes) {\n        this.inViewIndexes = indexes;\n    };\n    /**\n     * Gets the visible columns from the Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getVisibleColumns = function () {\n        var cols = [];\n        for (var _i = 0, _a = this.columnModel; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.visible) {\n                cols.push(col);\n            }\n        }\n        return cols;\n    };\n    /**\n     * Gets the header div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderContent = function () {\n        return this.headerModule.getPanel();\n    };\n    /**\n     * Sets the header div of the Grid to replace the old header.\n     * @param  {Element} element - Specifies the Grid header.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderContent = function (element) {\n        this.headerModule.setPanel(element);\n    };\n    /**\n     * Gets the content table of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContentTable = function () {\n        return this.contentModule.getTable();\n    };\n    /**\n     * Sets the content table of the Grid to replace the old content table.\n     * @param  {Element} element - Specifies the Grid content table.\n     * @return {void}\n     */\n    Grid.prototype.setGridContentTable = function (element) {\n        this.contentModule.setTable(element);\n    };\n    /**\n     * Gets the content div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getContent = function () {\n        return this.contentModule.getPanel();\n    };\n    /**\n     * Sets the content div of the Grid to replace the old Grid content.\n     * @param  {Element} element - Specifies the Grid content.\n     * @return {void}\n     */\n    Grid.prototype.setGridContent = function (element) {\n        this.contentModule.setPanel(element);\n    };\n    /**\n     * Gets the header table element of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getHeaderTable = function () {\n        return this.headerModule.getTable();\n    };\n    /**\n     * Sets the header table of the Grid to replace the old one.\n     * @param  {Element} element - Specifies the Grid header table.\n     * @return {void}\n     */\n    Grid.prototype.setGridHeaderTable = function (element) {\n        this.headerModule.setTable(element);\n    };\n    /**\n     * Gets the footer div of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContent = function () {\n        if (isNullOrUndefined(this.footerElement)) {\n            this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        }\n        return this.footerElement;\n    };\n    /**\n     * Gets the footer table element of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getFooterContentTable = function () {\n        if (isNullOrUndefined(this.footerElement)) {\n            this.footerElement = this.element.getElementsByClassName('e-gridfooter')[0];\n        }\n        return this.footerElement.firstChild.firstChild;\n    };\n    /**\n     * Gets the pager of the Grid.\n     * @return {Element}\n     */\n    Grid.prototype.getPager = function () {\n        return this.gridPager; //get element from pager\n    };\n    /**\n     * Sets the pager of the Grid to replace the old pager.\n     * @param  {Element} element - Specifies the Grid pager.\n     * @return {void}\n     */\n    Grid.prototype.setGridPager = function (element) {\n        this.gridPager = element;\n    };\n    /**\n     * Gets a row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getRowByIndex = function (index) {\n        return this.contentModule.getRowByIndex(index);\n    };\n    /**\n     * Gets a movable tables row by index.\n     * @param  {number} index - Specifies the row index.\n     * @return {Element}\n     */\n    Grid.prototype.getMovableRowByIndex = function (index) {\n        return this.contentModule.getMovableRowByIndex(index);\n    };\n    /**\n     * Gets all the data rows of the Grid.\n     * @return {Element[]}\n     */\n    Grid.prototype.getRows = function () {\n        return this.contentModule.getRowElements();\n    };\n    /**\n     * Get a row information based on cell\n     * @param {Element}\n     * @return RowInfo\n     */\n    Grid.prototype.getRowInfo = function (target) {\n        var ele = target;\n        var args = { target: target };\n        if (!isNullOrUndefined(target) && isNullOrUndefined(parentsUntil(ele, 'e-detailrowcollapse')\n            && isNullOrUndefined(parentsUntil(ele, 'e-recordplusexpand'))) && !this.isEdit) {\n            var cell = closest(ele, '.e-rowcell');\n            if (!cell) {\n                return args;\n            }\n            var cellIndex = parseInt(cell.getAttribute('aria-colindex'), 10);\n            if (!isNullOrUndefined(cell) && !isNaN(cellIndex)) {\n                var row_1 = closest(cell, '.e-row');\n                var rowIndex = parseInt(row_1.getAttribute('aria-rowindex'), 10);\n                var frzCols = this.getFrozenColumns();\n                var isMovable = frzCols ? cellIndex >= frzCols : false;\n                var rows = (isMovable ?\n                    this.contentModule.getMovableRows() : this.contentModule.getRows());\n                var rowsObject = rows.filter(function (r) { return r.uid === row_1.getAttribute('data-uid'); });\n                var rowData = rowsObject[0].data;\n                var column = rowsObject[0].cells[isMovable ? cellIndex - frzCols : cellIndex].column;\n                args = { cell: cell, cellIndex: cellIndex, row: row_1, rowIndex: rowIndex, rowData: rowData, column: column, target: target };\n            }\n        }\n        return args;\n    };\n    /**\n     * Gets the Grid's movable content rows from frozen grid.\n     * @return {Element[]}\n     */\n    Grid.prototype.getMovableRows = function () {\n        return this.contentModule.getMovableRowElements();\n    };\n    /**\n     * Gets all the Grid's data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getDataRows = function () {\n        var rows = [].slice.call(this.getContentTable().querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderTable().querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows);\n        return dataRows;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.addMovableRows = function (fRows, mrows) {\n        for (var i = 0, len = mrows.length; i < len; i++) {\n            fRows.push(mrows[i]);\n        }\n        return fRows;\n    };\n    Grid.prototype.generateDataRows = function (rows) {\n        var dRows = [];\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n                dRows.push(rows[i]);\n            }\n        }\n        return dRows;\n    };\n    /**\n     * Gets all the Grid's movable table data rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getMovableDataRows = function () {\n        var rows = [].slice.call(this.getContent().querySelector('.e-movablecontent').querySelector('tbody').children);\n        if (this.frozenRows) {\n            var freezeRows = [].slice.call(this.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').children);\n            rows = this.addMovableRows(freezeRows, rows);\n        }\n        var dataRows = this.generateDataRows(rows);\n        return dataRows;\n    };\n    /**\n     * Updates particular cell value based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     * @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     * @param {string } field - Specifies the field name which you want to update.\n     * @param {string | number | boolean | Date} value - To update new value for the particular cell.\n     */\n    Grid.prototype.setCellValue = function (key, field, value) {\n        var cells = 'cells';\n        var rowData = 'data';\n        var rowIdx = 'index';\n        var rowuID = 'uid';\n        var fieldIdx;\n        var col;\n        var tr;\n        var mTr;\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var cell = new CellRenderer(this, this.serviceLocator);\n        var selectedRow = {};\n        var movableSelectedRow = {};\n        var rowObjects = this.contentModule.getRows();\n        var movableRowObjects = this.contentModule.getMovableRows();\n        fieldIdx = this.getColumnIndexByField(field);\n        col = this.getColumnByField(field);\n        selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        movableSelectedRow = movableRowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        tr = !isNullOrUndefined(selectedRow) ? this.element.querySelector('[data-uid=' + selectedRow[rowuID] + ']') : null;\n        mTr = !isNullOrUndefined(movableSelectedRow) ? this.element.querySelector('[data-uid=' + movableSelectedRow[rowuID] + ']') : null;\n        if (!isNullOrUndefined(tr)) {\n            setValue(field, value, selectedRow[rowData]);\n            var td = !isNullOrUndefined(tr.childNodes[fieldIdx]) ?\n                tr.childNodes[fieldIdx] : mTr.childNodes[fieldIdx - this.frozenColumns];\n            if (!isNullOrUndefined(td)) {\n                var sRow = selectedRow[cells][fieldIdx];\n                var mRow = void 0;\n                if (this.frozenColumns) {\n                    mRow = movableSelectedRow[cells][fieldIdx - this.frozenColumns];\n                }\n                cell.refreshTD(td, !isNullOrUndefined(sRow) ? sRow : mRow, selectedRow[rowData]);\n                /* tslint:disable:no-string-literal */\n                if (!isNullOrUndefined(movableSelectedRow) && !isNullOrUndefined(movableSelectedRow['changes'])) {\n                    movableSelectedRow['changes'][field] = value;\n                }\n                /* tslint:disable:no-string-literal */\n                this.trigger(events.queryCellInfo, {\n                    cell: td, column: col, data: selectedRow[rowData]\n                });\n            }\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Updates and refresh the particular row values based on the given primary key value.\n     * > Primary key column must be specified using `columns.isPrimaryKey` property.\n     *  @param {string| number} key - Specifies the PrimaryKey value of dataSource.\n     *  @param {Object} rowData - To update new data for the particular row.\n     */\n    Grid.prototype.setRowData = function (key, rowData) {\n        var rwdata = 'data';\n        var rowuID = 'uid';\n        var rowObjects = this.contentModule.getRows();\n        var selectedRow;\n        var pkName = this.getPrimaryKeyFieldNames()[0];\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this);\n        selectedRow = rowObjects.filter(function (r) {\n            return getValue(pkName, r.data) === key;\n        })[0];\n        if (!isNullOrUndefined(selectedRow) && this.element.querySelectorAll('[data-uid=' + selectedRow[rowuID] + ']').length) {\n            selectedRow.changes = rowData;\n            refreshForeignData(selectedRow, this.getForeignKeyColumns(), selectedRow.changes);\n            rowRenderer.refresh(selectedRow, this.getColumns(), true);\n        }\n        else {\n            return;\n        }\n    };\n    /**\n     * Gets a cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getCellFromIndex = function (rowIndex, columnIndex) {\n        return this.getDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex];\n    };\n    /**\n     * Gets a movable table cell by row and column index.\n     * @param  {number} rowIndex - Specifies the row index.\n     * @param  {number} columnIndex - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getMovableCellFromIndex = function (rowIndex, columnIndex) {\n        return this.getMovableDataRows()[rowIndex].querySelectorAll('.e-rowcell')[columnIndex - this.getFrozenColumns()];\n    };\n    /**\n     * Gets a column header by column index.\n     * @param  {number} index - Specifies the column index.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByIndex = function (index) {\n        return this.getHeaderTable().querySelectorAll('.e-headercell')[index];\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowObjectFromUID = function (uid) {\n        var rows = this.contentModule.getRows();\n        var row = this.rowObject(rows, uid);\n        if (this.getFrozenColumns()) {\n            if (!row) {\n                row = this.rowObject(this.contentModule.getMovableRows(), uid);\n                return row;\n            }\n        }\n        return row;\n    };\n    Grid.prototype.rowObject = function (rows, uid) {\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (row.uid === uid) {\n                return row;\n            }\n        }\n        return null;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowsObject = function () {\n        return this.contentModule.getRows();\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getMovableRowsObject = function () {\n        return this.contentModule.getMovableRows();\n    };\n    /**\n     * Gets a column header by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByField = function (field) {\n        return this.getColumnHeaderByUid(this.getColumnByField(field).uid);\n    };\n    /**\n     * Gets a column header by UID.\n     * @param  {string} field - Specifies the column uid.\n     * @return {Element}\n     */\n    Grid.prototype.getColumnHeaderByUid = function (uid) {\n        return this.getHeaderContent().querySelector('[e-mappinguid=' + uid + ']').parentElement;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getColumnByIndex = function (index) {\n        var column;\n        this.getColumns().some(function (col, i) {\n            column = col;\n            return i === index;\n        });\n        return column;\n    };\n    /**\n     * Gets a Column by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {Column}\n     */\n    Grid.prototype.getColumnByField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets a column index by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByField = function (field) {\n        var cols = this.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * Gets a column by UID.\n     * @param  {string} uid - Specifies the column UID.\n     * @return {Column}\n     */\n    Grid.prototype.getColumnByUid = function (uid) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.uid === uid) {\n                return item;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets a column index by UID.\n     * @param  {string} uid - Specifies the column UID.\n     * @return {number}\n     */\n    Grid.prototype.getColumnIndexByUid = function (uid) {\n        var index = iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.uid === uid) {\n                return index;\n            }\n            return undefined;\n        })[0];\n        return !isNullOrUndefined(index) ? index : -1;\n    };\n    /**\n     * Gets UID by column name.\n     * @param  {string} field - Specifies the column name.\n     * @return {string}\n     */\n    Grid.prototype.getUidByColumnField = function (field) {\n        return iterateArrayOrObject(this.getColumns(), function (item, index) {\n            if (item.field === field) {\n                return item.uid;\n            }\n            return undefined;\n        })[0];\n    };\n    /**\n     * Gets TH index by column uid value.\n     * @private\n     * @param  {string} uid - Specifies the column uid.\n     * @return {number}\n     */\n    Grid.prototype.getNormalizedColumnIndex = function (uid) {\n        var index = this.getColumnIndexByUid(uid);\n        if (this.allowGrouping) {\n            index += this.groupSettings.columns.length;\n        }\n        if (this.isDetail()) {\n            index++;\n        }\n        /**\n         * TODO: index normalization based on the stacked header, grouping and detailTemplate\n         * and frozen should be handled here\n         */\n        return index;\n    };\n    /**\n     * Gets the collection of column fields.\n     * @return {string[]}\n     */\n    Grid.prototype.getColumnFieldNames = function () {\n        var columnNames = [];\n        var column;\n        for (var i = 0, len = this.getColumns().length; i < len; i++) {\n            column = this.getColumns()[i];\n            if (column.visible) {\n                columnNames.push(column.field);\n            }\n        }\n        return columnNames;\n    };\n    /**\n     * Gets a compiled row template.\n     * @return {Function}\n     * @private\n     */\n    Grid.prototype.getRowTemplate = function () {\n        return this.rowTemplateFn;\n    };\n    /**\n     * Gets a compiled detail row template.\n     * @private\n     * @return {Function}\n     */\n    Grid.prototype.getDetailTemplate = function () {\n        return this.detailTemplateFn;\n    };\n    /**\n     * Get the names of the primary key columns of the Grid.\n     * @return {string[]}\n     */\n    Grid.prototype.getPrimaryKeyFieldNames = function () {\n        var keys = [];\n        this.columnModel.forEach(function (column) {\n            if (column.isPrimaryKey) {\n                keys.push(column.field);\n            }\n        });\n        return keys;\n    };\n    /**\n     * Refreshes the Grid header and content.\n     */\n    Grid.prototype.refresh = function () {\n        this.headerModule.refreshUI();\n        this.updateStackedFilter();\n        this.renderModule.refresh();\n    };\n    /**\n     * Refreshes the Grid header.\n     */\n    Grid.prototype.refreshHeader = function () {\n        this.headerModule.refreshUI();\n    };\n    /**\n     * Gets the collection of selected rows.\n     * @return {Element[]}\n     */\n    Grid.prototype.getSelectedRows = function () {\n        return this.selectionModule ? this.selectionModule.selectedRecords : [];\n    };\n    /**\n     * Gets the collection of selected row indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowIndexes = function () {\n        return this.selectionModule ? this.selectionModule.selectedRowIndexes : [];\n    };\n    /**\n     * Gets the collection of selected row and cell indexes.\n     * @return {number[]}\n     */\n    Grid.prototype.getSelectedRowCellIndexes = function () {\n        return this.selectionModule.selectedRowCellIndexes;\n    };\n    /**\n     * Gets the collection of selected records.\n     * @return {Object[]}\n     */\n    Grid.prototype.getSelectedRecords = function () {\n        return this.selectionModule.getSelectedRecords();\n    };\n    /**\n     * Gets the data module.\n     * @return {Data}\n     */\n    Grid.prototype.getDataModule = function () {\n        return this.renderModule.data;\n    };\n    /**\n     * Shows a column by its column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} showBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.showColumns = function (keys, showBy) {\n        showBy = showBy ? showBy : 'headerText';\n        this.showHider.show(keys, showBy);\n    };\n    /**\n     * Hides a column by column name.\n     * @param  {string|string[]} keys - Defines a single or collection of column names.\n     * @param  {string} hideBy - Defines the column key either as field name or header text.\n     * @return {void}\n     */\n    Grid.prototype.hideColumns = function (keys, hideBy) {\n        hideBy = hideBy ? hideBy : 'headerText';\n        this.showHider.hide(keys, hideBy);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getFrozenColumns = function () {\n        return this.frozenColumns + this.getFrozenCount(this.columns, 0);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getVisibleFrozenColumns = function () {\n        return this.getVisibleFrozenColumnsCount() + this.getVisibleFrozenCount(this.columns, 0);\n    };\n    Grid.prototype.getVisibleFrozenColumnsCount = function () {\n        var visibleFrozenColumns = 0;\n        var col = this.columns;\n        for (var i = 0; i < this.frozenColumns; i++) {\n            if (col[i].visible) {\n                visibleFrozenColumns++;\n            }\n        }\n        return visibleFrozenColumns;\n    };\n    Grid.prototype.getVisibleFrozenCount = function (cols, cnt) {\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].columns) {\n                cnt = this.getVisibleFrozenCount(cols[i].columns, cnt);\n            }\n            else {\n                if (cols[i].isFrozen && cols[i].visible) {\n                    cnt++;\n                }\n            }\n        }\n        return cnt;\n    };\n    Grid.prototype.getFrozenCount = function (cols, cnt) {\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].columns) {\n                cnt = this.getFrozenCount(cols[i].columns, cnt);\n            }\n            else {\n                if (cols[i].isFrozen) {\n                    cnt++;\n                }\n            }\n        }\n        return cnt;\n    };\n    /**\n     * Navigates to the specified target page.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Grid.prototype.goToPage = function (pageNo) {\n        this.pagerModule.goToPage(pageNo);\n    };\n    /**\n     * Defines the text of external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Grid.prototype.updateExternalMessage = function (message) {\n        this.pagerModule.updateExternalMessage(message);\n    };\n    /**\n     * Sorts a column with the given options.\n     * @param {string} columnName - Defines the column name to be sorted.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previous sorted columns are to be maintained.\n     * @return {void}\n     */\n    Grid.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        this.sortModule.sortColumn(columnName, direction, isMultiSort);\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearSorting = function () {\n        this.sortModule.clearSorting();\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeSortColumn = function (field) {\n        this.sortModule.removeSortColumn(field);\n    };\n    /**\n     * Filters grid row by column name with the given options.\n     * @param  {string} fieldName - Defines the field name of the column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query and another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, the grid filters the records with exact match. if false, it filters case\n     * insensitive records (uppercase and lowercase letters treated the same).\n     * @param  {boolean} ignoreAccent - If ignoreAccent set to true,\n     * then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Grid.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        this.filterModule.filterByColumn(fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator);\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     * @return {void}\n     */\n    Grid.prototype.clearFiltering = function () {\n        this.filterModule.clearFiltering();\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        this.filterModule.removeFilteredColsByField(field, isClearFilterBar);\n    };\n    /**\n     * Selects a row by given index.\n     * @param  {number} index - Defines the row index.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectRow = function (index, isToggle) {\n        this.selectionModule.selectRow(index, isToggle);\n    };\n    /**\n     * Selects a collection of rows by indexes.\n     * @param  {number[]} rowIndexes - Specifies the row indexes.\n     * @return {void}\n     */\n    Grid.prototype.selectRows = function (rowIndexes) {\n        this.selectionModule.selectRows(rowIndexes);\n    };\n    /**\n     * Deselects the current selected rows and cells.\n     * @return {void}\n     */\n    Grid.prototype.clearSelection = function () {\n        this.selectionModule.clearSelection();\n    };\n    /**\n     * Selects a cell by the given index.\n     * @param  {IIndex} cellIndex - Defines the row and column indexes.\n     * @param  {boolean} isToggle - If set to true, then it toggles the selection.\n     * @return {void}\n     */\n    Grid.prototype.selectCell = function (cellIndex, isToggle) {\n        this.selectionModule.selectCell(cellIndex, isToggle);\n    };\n    /**\n     * Searches Grid records using the given key.\n     * You can customize the default search option by using the\n     * [`searchSettings`](./api-searchSettings.html).\n     * @param  {string} searchString - Defines the key.\n     * @return {void}\n     */\n    Grid.prototype.search = function (searchString) {\n        this.searchModule.search(searchString);\n    };\n    /**\n     * By default, prints all the pages of the Grid and hides the pager.\n     * > You can customize print options using the\n     * [`printMode`](./api-grid.html#printmode-string).\n     * @return {void}\n     */\n    Grid.prototype.print = function () {\n        this.printModule.print();\n    };\n    /**\n     * Delete a record with Given options. If fieldname and data is not given then grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field, 'Name of the column'.\n     * @param {Object} data - Defines the JSON data of the record to be deleted.\n     */\n    Grid.prototype.deleteRecord = function (fieldname, data) {\n        this.editModule.deleteRecord(fieldname, data);\n    };\n    /**\n     * To edit any particular row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row to be edited.\n     */\n    Grid.prototype.startEdit = function () {\n        this.editModule.startEdit();\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     */\n    Grid.prototype.endEdit = function () {\n        this.editModule.endEdit();\n    };\n    /**\n     * Cancels edited state.\n     */\n    Grid.prototype.closeEdit = function () {\n        this.editModule.closeEdit();\n    };\n    /**\n     * Adds a new record to the Grid. Without passing parameters, it adds empty rows.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     */\n    Grid.prototype.addRecord = function (data, index) {\n        this.editModule.addRecord(data, index);\n    };\n    /**\n     * Delete any visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Grid.prototype.deleteRow = function (tr) {\n        this.editModule.deleteRow(tr);\n    };\n    /**\n     * Copy the selected rows or cells data into clipboard.\n     * @param {boolean} withHeader - Specifies whether the column header text needs to be copied along with rows or cells.\n     */\n    Grid.prototype.copy = function (withHeader) {\n        this.clipboardModule.copy(withHeader);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.recalcIndentWidth = function () {\n        if (!this.getHeaderTable().querySelector('.e-emptycell')) {\n            return;\n        }\n        if ((!this.groupSettings.columns.length && !this.isDetail()) ||\n            this.getHeaderTable().querySelector('.e-emptycell').getAttribute('indentRefreshed') ||\n            !this.getContentTable()) {\n            return;\n        }\n        var indentWidth = this.getHeaderTable().querySelector('.e-emptycell').parentElement.offsetWidth;\n        var headerCol = [].slice.call(this.getHeaderTable().querySelector('colgroup').childNodes);\n        var contentCol = [].slice.call(this.getContentTable().querySelector('colgroup').childNodes);\n        var perPixel = indentWidth / 30;\n        var i = 0;\n        if (perPixel >= 1) {\n            indentWidth = (30 / perPixel);\n        }\n        if (this.enableColumnVirtualization) {\n            indentWidth = 30;\n        }\n        while (i < this.groupSettings.columns.length) {\n            headerCol[i].style.width = indentWidth + 'px';\n            contentCol[i].style.width = indentWidth + 'px';\n            this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n            i++;\n        }\n        if (this.isDetail()) {\n            headerCol[i].style.width = indentWidth + 'px';\n            contentCol[i].style.width = indentWidth + 'px';\n            this.notify(events.columnWidthChanged, { index: i, width: indentWidth });\n        }\n        this.getHeaderTable().querySelector('.e-emptycell').setAttribute('indentRefreshed', 'true');\n    };\n    /**\n     * Changes the Grid column positions by field names.\n     * @param  {string} fromFName - Defines the origin field name.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Grid.prototype.reorderColumns = function (fromFName, toFName) {\n        this.reorderModule.reorderColumns(fromFName, toFName);\n    };\n    /**\n     * Changes the column width to automatically fit its content to ensure that the width shows the content without wrapping/hiding.\n     * > * This method ignores the hidden columns.\n     * > * Uses the `autoFitColumns` method in the `dataBound` event to resize at initial rendering.\n     * @param  {string |string[]} fieldNames - Defines the column names.\n     * @return {void}\n     *\n     *\n     * ```typescript\n     * <div id=\"Grid\"></div>\n     * <script>\n     * let gridObj: Grid = new Grid({\n     *     dataSource: employeeData,\n     *     columns: [\n     *         { field: 'OrderID', headerText: 'Order ID', width:100 },\n     *         { field: 'EmployeeID', headerText: 'Employee ID' }],\n     *     dataBound: () => gridObj.autoFitColumns('EmployeeID')\n     * });\n     * gridObj.appendTo('#Grid');\n     * </script>\n     * ```\n     *\n     */\n    Grid.prototype.autoFitColumns = function (fieldNames) {\n        this.resizeModule.autoFitColumns(fieldNames);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.createColumnchooser = function (x, y, target) {\n        this.columnChooserModule.renderColumnChooser(x, y, target);\n    };\n    Grid.prototype.initializeServices = function () {\n        this.serviceLocator.register('widthService', this.widthService = new ColumnWidthService(this));\n        this.serviceLocator.register('cellRendererFactory', new CellRendererFactory);\n        this.serviceLocator.register('rendererFactory', new RendererFactory);\n        this.serviceLocator.register('localization', this.localeObj = new L10n(this.getModuleName(), this.defaultLocale, this.locale));\n        this.serviceLocator.register('valueFormatter', this.valueFormatterService = new ValueFormatter(this.locale));\n        this.serviceLocator.register('showHideService', this.showHider = new ShowHide(this));\n        this.serviceLocator.register('ariaService', this.ariaService = new AriaService());\n        this.serviceLocator.register('focus', this.focusModule = new FocusStrategy(this));\n    };\n    Grid.prototype.processModel = function () {\n        var _this = this;\n        var gCols = this.groupSettings.columns;\n        var sCols = this.sortSettings.columns;\n        var flag;\n        var j;\n        if (this.allowGrouping) {\n            var _loop_1 = function (i, len) {\n                j = 0;\n                for (var sLen = sCols.length; j < sLen; j++) {\n                    if (sCols[j].field === gCols[i]) {\n                        flag = true;\n                        break;\n                    }\n                }\n                if (!flag) {\n                    sCols.push({ field: gCols[i], direction: 'Ascending' });\n                }\n                else {\n                    if (this_1.allowSorting) {\n                        this_1.sortedColumns.push(sCols[j].field);\n                    }\n                    else {\n                        sCols[j].direction = 'Ascending';\n                    }\n                }\n                if (!this_1.groupSettings.showGroupedColumn) {\n                    var column = this_1.enableColumnVirtualization ?\n                        this_1.columns.filter(function (c) { return c.field === gCols[i]; })[0] : this_1.getColumnByField(gCols[i]);\n                    column.visible = false;\n                }\n            };\n            var this_1 = this;\n            for (var i = 0, len = gCols.length; i < len; i++) {\n                _loop_1(i, len);\n            }\n        }\n        if (!gCols.length) {\n            sCols.forEach(function (col) {\n                _this.sortedColumns.push(col.field);\n            });\n        }\n        this.rowTemplateFn = templateCompiler(this.rowTemplate);\n        this.detailTemplateFn = templateCompiler(this.detailTemplate);\n        if (!isNullOrUndefined(this.parentDetails)) {\n            var value = isNullOrUndefined(this.parentDetails.parentKeyFieldValue) ? 'undefined' :\n                this.parentDetails.parentKeyFieldValue;\n            this.query.where(this.queryString, 'equal', value, true);\n        }\n        this.initForeignColumn();\n    };\n    Grid.prototype.initForeignColumn = function () {\n        if (this.isForeignKeyEnabled(this.getColumns())) {\n            this.notify(events.initForeignKeyColumn, this.getForeignKeyColumns());\n        }\n    };\n    Grid.prototype.gridRender = function () {\n        this.updateRTL();\n        if (this.enableHover) {\n            this.element.classList.add('e-gridhover');\n        }\n        if (Browser.isDevice) {\n            this.element.classList.add('e-device');\n        }\n        if (this.rowHeight) {\n            this.element.classList.add('e-grid-min-height');\n        }\n        classList(this.element, ['e-responsive', 'e-default'], []);\n        var rendererFactory = this.serviceLocator.getService('rendererFactory');\n        this.headerModule = rendererFactory.getRenderer(RenderType.Header);\n        this.contentModule = rendererFactory.getRenderer(RenderType.Content);\n        this.printModule = new Print(this, this.scrollModule);\n        this.clipboardModule = new Clipboard(this);\n        this.renderModule.render();\n        this.eventInitializer();\n        this.createGridPopUpElement();\n        this.widthService.setWidthToColumns();\n        this.updateGridLines();\n        this.applyTextWrap();\n        this.createTooltip(); //for clip mode ellipsis\n    };\n    Grid.prototype.dataReady = function () {\n        this.scrollModule.setWidth();\n        this.scrollModule.setHeight();\n        if (this.height !== 'auto') {\n            this.scrollModule.setPadding();\n        }\n    };\n    Grid.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Grid.prototype.createGridPopUpElement = function () {\n        var popup = this.createElement('div', { className: 'e-gridpopup', styles: 'display:none;' });\n        var content = this.createElement('div', { className: 'e-content', attrs: { tabIndex: '-1' } });\n        append([content, this.createElement('div', { className: 'e-uptail e-tail' })], popup);\n        content.appendChild(this.createElement('span'));\n        append([content, this.createElement('div', { className: 'e-downtail e-tail' })], popup);\n        this.element.appendChild(popup);\n    };\n    Grid.prototype.updateGridLines = function () {\n        classList(this.element, [], ['e-verticallines', 'e-horizontallines', 'e-hidelines', 'e-bothlines']);\n        switch (this.gridLines) {\n            case 'Horizontal':\n                this.element.classList.add('e-horizontallines');\n                break;\n            case 'Vertical':\n                this.element.classList.add('e-verticallines');\n                break;\n            case 'None':\n                this.element.classList.add('e-hidelines');\n                break;\n            case 'Both':\n                this.element.classList.add('e-bothlines');\n                break;\n        }\n        this.updateResizeLines();\n    };\n    Grid.prototype.updateResizeLines = function () {\n        if (this.allowResizing &&\n            !(this.gridLines === 'Vertical' || this.gridLines === 'Both')) {\n            this.element.classList.add('e-resize-lines');\n        }\n        else {\n            this.element.classList.remove('e-resize-lines');\n        }\n    };\n    /**\n     * The function is used to apply text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.applyTextWrap = function () {\n        if (this.allowTextWrap) {\n            var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n            switch (this.textWrapSettings.wrapMode) {\n                case 'Header':\n                    wrap(this.element, false);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, true);\n                    break;\n                case 'Content':\n                    wrap(this.getContent(), true);\n                    wrap(this.element, false);\n                    wrap(headerRows, false);\n                    break;\n                default:\n                    wrap(this.element, true);\n                    wrap(this.getContent(), false);\n                    wrap(headerRows, false);\n            }\n        }\n    };\n    /**\n     * The function is used to remove text wrap\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.removeTextWrap = function () {\n        wrap(this.element, false);\n        var headerRows = [].slice.call(this.element.querySelectorAll('.e-columnheader'));\n        wrap(headerRows, false);\n        wrap(this.getContent(), false);\n    };\n    /**\n     * The function is used to add Tooltip to the grid cell that has ellipsiswithtooltip clip mode.\n     * @return {void}\n     * @hidden\n     */\n    Grid.prototype.createTooltip = function () {\n        this.toolTipObj = new Tooltip({ opensOn: 'custom', content: '' }, this.element);\n    };\n    Grid.prototype.getTooltipStatus = function (element) {\n        var width;\n        var headerTable = this.getHeaderTable();\n        var contentTable = this.getContentTable();\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var htable = this.createTable(headerTable, headerDivTag, 'header');\n        var ctable = this.createTable(headerTable, headerDivTag, 'content');\n        var td = element;\n        var table = headerTable.contains(element) ? htable : ctable;\n        var ele = headerTable.contains(element) ? 'th' : 'tr';\n        table.querySelector(ele).className = element.className;\n        table.querySelector(ele).innerHTML = element.innerHTML;\n        width = table.querySelector(ele).getBoundingClientRect().width;\n        document.body.removeChild(htable);\n        document.body.removeChild(ctable);\n        if (width > element.getBoundingClientRect().width) {\n            return true;\n        }\n        return false;\n    };\n    Grid.prototype.mouseMoveHandler = function (e) {\n        if (this.isEllipsisTooltip()) {\n            var element = parentsUntil(e.target, 'e-ellipsistooltip');\n            if (element) {\n                if (element.getAttribute('aria-describedby')) {\n                    return;\n                }\n                if (this.getTooltipStatus(element)) {\n                    if (element.getElementsByClassName('e-headertext').length) {\n                        this.toolTipObj.content = element.getElementsByClassName('e-headertext')[0].innerText;\n                    }\n                    else {\n                        this.toolTipObj.content = element.innerText;\n                    }\n                    this.toolTipObj.open(element);\n                }\n                else {\n                    this.toolTipObj.close();\n                }\n            }\n            else {\n                this.toolTipObj.close();\n            }\n        }\n    };\n    Grid.prototype.isEllipsisTooltip = function () {\n        var cols = this.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (cols[i].clipMode === 'EllipsisWithTooltip') {\n                return true;\n            }\n        }\n        return false;\n    };\n    Grid.prototype.scrollHandler = function () {\n        if (this.isEllipsisTooltip()) {\n            this.toolTipObj.close();\n        }\n    };\n    /**\n     * To create table for ellipsiswithtooltip\n     * @hidden\n     */\n    Grid.prototype.createTable = function (table, tag, type) {\n        var myTableDiv = this.createElement('div');\n        myTableDiv.className = this.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.createElement('table');\n        myTable.className = table.className;\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var ele = (type === 'header') ? 'th' : 'td';\n        var myTr = this.createElement('tr');\n        var mytd = this.createElement(ele);\n        myTr.appendChild(mytd);\n        myTable.appendChild(myTr);\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        return myTableDiv;\n    };\n    /**\n     * Binding events to the element while component creation.\n     * @hidden\n     */\n    Grid.prototype.wireEvents = function () {\n        EventHandler.add(this.element, 'click', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'touchend', this.mouseClickHandler, this);\n        EventHandler.add(this.element, 'focusout', this.focusOutHandler, this);\n        EventHandler.add(this.getContent(), 'dblclick', this.dblClickHandler, this);\n        if (this.allowKeyboard) {\n            this.element.tabIndex = this.element.tabIndex === -1 ? 0 : this.element.tabIndex;\n        }\n        this.keyboardModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyActionHandler.bind(this),\n            keyConfigs: this.keyConfigs,\n            eventName: 'keydown'\n        });\n        EventHandler.add(this.getContent().firstElementChild, 'scroll', this.scrollHandler, this);\n        EventHandler.add(this.element, 'mousemove', this.mouseMoveHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy.\n     * @hidden\n     */\n    Grid.prototype.unwireEvents = function () {\n        EventHandler.remove(this.element, 'click', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'touchend', this.mouseClickHandler);\n        EventHandler.remove(this.element, 'focusout', this.focusOutHandler);\n        EventHandler.remove(this.getContent().firstElementChild, 'scroll', this.scrollHandler);\n        EventHandler.remove(this.element, 'mousemove', this.mouseMoveHandler);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.addListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.on(events.dataReady, this.dataReady, this);\n        this.on(events.contentReady, this.recalcIndentWidth, this);\n        this.on(events.headerRefreshed, this.recalcIndentWidth, this);\n        this.dataBoundFunction = this.refreshMediaCol.bind(this);\n        this.addEventListener(events.dataBound, this.dataBoundFunction);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.removeListener = function () {\n        if (this.isDestroyed) {\n            return;\n        }\n        this.off(events.dataReady, this.dataReady);\n        this.off(events.contentReady, this.recalcIndentWidth);\n        this.off(events.headerRefreshed, this.recalcIndentWidth);\n        this.removeEventListener(events.dataBound, this.dataBoundFunction);\n    };\n    /**\n     * Get current visible data of grid.\n     * @return {Object[]}\n     * @hidden\n     */\n    Grid.prototype.getCurrentViewRecords = function () {\n        return (this.allowGrouping && this.groupSettings.columns.length && this.currentViewData.length) ?\n            this.currentViewData.records : this.currentViewData;\n    };\n    Grid.prototype.mouseClickHandler = function (e) {\n        if (this.isChildGrid(e) || (parentsUntil(e.target, 'e-gridpopup') && e.touches) ||\n            this.element.querySelectorAll('.e-cloneproperties').length || this.checkEdit(e)) {\n            return;\n        }\n        if (((!this.allowRowDragAndDrop && (parentsUntil(e.target, 'e-gridcontent') ||\n            e.target.tagName === 'TD')) || (!(this.allowGrouping || this.allowReordering) &&\n            parentsUntil(e.target, 'e-gridheader'))) && e.touches) {\n            return;\n        }\n        if (parentsUntil(e.target, 'e-gridheader') && this.allowRowDragAndDrop) {\n            e.preventDefault();\n        }\n        this.notify(events.click, e);\n    };\n    Grid.prototype.checkEdit = function (e) {\n        var tr = parentsUntil(e.target, 'e-row');\n        var isEdit = this.editSettings.mode !== 'Batch' &&\n            this.isEdit && tr && (tr.classList.contains('e-editedrow') || tr.classList.contains('e-addedrow'));\n        return !parentsUntil(e.target, 'e-unboundcelldiv') && (isEdit || (parentsUntil(e.target, 'e-rowcell') &&\n            parentsUntil(e.target, 'e-rowcell').classList.contains('e-editedbatchcell')));\n    };\n    Grid.prototype.dblClickHandler = function (e) {\n        var grid = parentsUntil(e.target, 'e-grid');\n        if (isNullOrUndefined(grid) || grid.id !== this.element.id || closest(e.target, '.e-unboundcelldiv')) {\n            return;\n        }\n        var args = this.getRowInfo(e.target);\n        args.target = e.target;\n        this.trigger(events.recordDoubleClick, args);\n        this.notify(events.dblclick, e);\n    };\n    Grid.prototype.focusOutHandler = function (e) {\n        if (this.isChildGrid(e)) {\n            return;\n        }\n        if (!parentsUntil(e.target, 'e-grid')) {\n            this.element.querySelector('.e-gridpopup').style.display = 'None';\n        }\n        var filterClear = this.element.querySelector('.e-cancel:not(.e-hide)');\n        if (filterClear) {\n            filterClear.classList.add('e-hide');\n        }\n        if ((!e.relatedTarget || !parentsUntil(e.relatedTarget, 'e-grid'))\n            && !this.keyPress && this.editSettings.mode === 'Batch' && this.isEdit && !Browser.isDevice) {\n            this.editModule.saveCell();\n            this.notify(events.editNextValCell, {});\n        }\n        this.keyPress = false;\n    };\n    Grid.prototype.isChildGrid = function (e) {\n        var gridElement = parentsUntil(e.target, 'e-grid');\n        if (gridElement && gridElement.id !== this.element.id) {\n            return true;\n        }\n        return false;\n    };\n    Grid.prototype.mergePersistGridData = function () {\n        var data = window.localStorage.getItem(this.getModuleName() + this.element.id);\n        if (!(isNullOrUndefined(data) || (data === ''))) {\n            var dataObj = JSON.parse(data);\n            var keys = Object.keys(dataObj);\n            this.isProtectedOnChange = true;\n            for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                var key = keys_1[_i];\n                if ((typeof this[key] === 'object') && !isNullOrUndefined(this[key])) {\n                    if (Array.isArray(this[key]) && key === 'columns') {\n                        this.mergeColumns(dataObj[key], this[key]);\n                        this[key] = dataObj[key];\n                    }\n                    else {\n                        extend(this[key], dataObj[key]);\n                    }\n                }\n                else {\n                    this[key] = dataObj[key];\n                }\n            }\n            this.isProtectedOnChange = false;\n        }\n    };\n    Grid.prototype.mergeColumns = function (storedColumn, columns) {\n        var _this = this;\n        storedColumn.forEach(function (col, index, arr) {\n            var ind;\n            var localCol = _this.getColumnByField(col.field) ||\n                columns.some(function (element, i) {\n                    ind = i;\n                    return element.headerText === col.headerText;\n                }) && columns[ind];\n            if (!isNullOrUndefined(localCol)) {\n                if (localCol.columns && localCol.columns.length) {\n                    _this.mergeColumns(col.columns, localCol.columns);\n                }\n                else {\n                    arr[index] = extend({}, localCol, col, true);\n                }\n            }\n        });\n    };\n    Grid.prototype.isDetail = function () {\n        return !isNullOrUndefined(this.detailTemplate) || !isNullOrUndefined(this.childGrid);\n    };\n    Grid.prototype.isCommandColumn = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isCommandColumn(col.columns);\n            }\n            return !!(col.commands || col.commandsTemplate);\n        });\n    };\n    Grid.prototype.isForeignKeyEnabled = function (columns) {\n        var _this = this;\n        return columns.some(function (col) {\n            if (col.columns) {\n                return _this.isForeignKeyEnabled(col.columns);\n            }\n            return !!(col.dataSource && col.foreignKeyValue);\n        });\n    };\n    Grid.prototype.keyActionHandler = function (e) {\n        this.keyPress = true;\n        if (this.isChildGrid(e) ||\n            (this.isEdit && e.action !== 'escape' && e.action !== 'enter' && e.action !== 'shiftEnter'\n                && e.action !== 'tab' && e.action !== 'shiftTab')) {\n            return;\n        }\n        if (this.allowKeyboard) {\n            if (e.action === 'ctrlPlusP') {\n                e.preventDefault();\n                this.print();\n            }\n            this.notify(events.keyPressed, e);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.setInjectedModules = function (modules) {\n        this.injectedModules = modules;\n    };\n    Grid.prototype.updateColumnObject = function () {\n        prepareColumns(this.columns, this.enableColumnVirtualization);\n        this.initForeignColumn();\n        this.notify(events.autoCol, {});\n    };\n    /**\n     * Gets the foreign columns from Grid.\n     * @return {Column[]}\n     */\n    Grid.prototype.getForeignKeyColumns = function () {\n        return this.getColumns().filter(function (col) {\n            return col.isForeignColumn();\n        });\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.getRowHeight = function () {\n        return this.rowHeight ? this.rowHeight : getRowHeight(this.element);\n    };\n    /**\n     * Refreshes the Grid column changes.\n     */\n    Grid.prototype.refreshColumns = function () {\n        this.isPreventScrollEvent = true;\n        this.updateColumnObject();\n        this.refresh();\n    };\n    /**\n     * Export Grid data to Excel file(.xlsx).\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     */\n    Grid.prototype.excelExport = function (excelExportProperties, isMultipleExport, \n        /* tslint:disable-next-line:no-any */\n        workbook, isBlob) {\n        return this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, false, isBlob);\n    };\n    /**\n     * Export Grid data to CSV file.\n     * @param  {ExcelExportProperties} excelExportProperties - Defines the export properties of the Grid.\n     * @param  {boolean} isMultipleExport - Define to enable multiple export.\n     * @param  {workbook} workbook - Defines the Workbook if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     *\n     */\n    Grid.prototype.csvExport = function (excelExportProperties, \n        /* tslint:disable-next-line:no-any */\n        isMultipleExport, workbook, isBlob) {\n        return this.excelExportModule.Map(this, excelExportProperties, isMultipleExport, workbook, true, isBlob);\n    };\n    /**\n     * Export Grid data to PDF document.\n     * @param  {pdfExportProperties} PdfExportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Define to enable multiple export.\n     * @param  {pdfDoc} pdfDoc - Defined the Pdf Document if multiple export is enabled.\n     * @param  {boolean} isBlob - If 'isBlob' set to true, then it will be returned as blob data.\n     * @return {Promise<any>}\n     *\n     */\n    Grid.prototype.pdfExport = function (pdfExportProperties, \n        /* tslint:disable-next-line:no-any */\n        isMultipleExport, pdfDoc, isBlob) {\n        return this.pdfExportModule.Map(this, pdfExportProperties, isMultipleExport, pdfDoc, isBlob);\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Grid.prototype.groupColumn = function (columnName) {\n        this.groupModule.groupColumn(columnName);\n    };\n    /**\n     * Ungroups a column by column name.\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @return {void}\n     */\n    Grid.prototype.ungroupColumn = function (columnName) {\n        this.groupModule.ungroupColumn(columnName);\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.isContextMenuOpen = function () {\n        return this.contextMenuModule && this.contextMenuModule.isOpen;\n    };\n    /**\n     * @hidden\n     */\n    Grid.prototype.ensureModuleInjected = function (module) {\n        return this.getInjectedModules().indexOf(module) >= 0;\n    };\n    /**\n     * Destroys the given template reference.\n     * @param {string[]} propertyNames - Defines the collection of template name.\n     */\n    Grid.prototype.destroyTemplate = function (propertyNames) {\n        this.clearTemplate(propertyNames);\n    };\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"columns\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableAltRow\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"enableHover\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowKeyboard\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowTextWrap\", void 0);\n    __decorate([\n        Complex({}, TextWrapSettings)\n    ], Grid.prototype, \"textWrapSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPaging\", void 0);\n    __decorate([\n        Complex({}, PageSettings)\n    ], Grid.prototype, \"pageSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableVirtualization\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"enableColumnVirtualization\", void 0);\n    __decorate([\n        Complex({}, SearchSettings)\n    ], Grid.prototype, \"searchSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowSorting\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowMultiSorting\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowExcelExport\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowPdfExport\", void 0);\n    __decorate([\n        Complex({}, SortSettings)\n    ], Grid.prototype, \"sortSettings\", void 0);\n    __decorate([\n        Property(true)\n    ], Grid.prototype, \"allowSelection\", void 0);\n    __decorate([\n        Property(-1)\n    ], Grid.prototype, \"selectedRowIndex\", void 0);\n    __decorate([\n        Complex({}, SelectionSettings)\n    ], Grid.prototype, \"selectionSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowFiltering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowReordering\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowResizing\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowRowDragAndDrop\", void 0);\n    __decorate([\n        Complex({}, RowDropSettings)\n    ], Grid.prototype, \"rowDropSettings\", void 0);\n    __decorate([\n        Complex({}, FilterSettings)\n    ], Grid.prototype, \"filterSettings\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"allowGrouping\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnMenu\", void 0);\n    __decorate([\n        Complex({}, GroupSettings)\n    ], Grid.prototype, \"groupSettings\", void 0);\n    __decorate([\n        Complex({}, EditSettings)\n    ], Grid.prototype, \"editSettings\", void 0);\n    __decorate([\n        Collection([], AggregateRow)\n    ], Grid.prototype, \"aggregates\", void 0);\n    __decorate([\n        Property(false)\n    ], Grid.prototype, \"showColumnChooser\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"height\", void 0);\n    __decorate([\n        Property('auto')\n    ], Grid.prototype, \"width\", void 0);\n    __decorate([\n        Property('Default')\n    ], Grid.prototype, \"gridLines\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"rowTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"detailTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"childGrid\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"queryString\", void 0);\n    __decorate([\n        Property('AllPages')\n    ], Grid.prototype, \"printMode\", void 0);\n    __decorate([\n        Property([])\n    ], Grid.prototype, \"dataSource\", void 0);\n    __decorate([\n        Property(null)\n    ], Grid.prototype, \"rowHeight\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"query\", void 0);\n    __decorate([\n        Property('USD')\n    ], Grid.prototype, \"currencyCode\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbar\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"contextMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"columnMenuItems\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"toolbarTemplate\", void 0);\n    __decorate([\n        Property()\n    ], Grid.prototype, \"pagerTemplate\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenRows\", void 0);\n    __decorate([\n        Property(0)\n    ], Grid.prototype, \"frozenColumns\", void 0);\n    __decorate([\n        Property('All')\n    ], Grid.prototype, \"columnQueryMode\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"destroyed\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"load\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"queryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"headerCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionBegin\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"actionFailure\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"recordDoubleClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSelected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselecting\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellDeselected\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"printComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePrint\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelHeaderQueryCellInfo\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeExcelExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"excelExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforePdfExport\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"pdfExportComplete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"detailDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrag\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"rowDrop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"toolbarClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeOpenColumnChooser\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"batchCancel\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchAdd\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchDelete\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeBatchSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beginEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellEdit\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSave\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"cellSaved\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStart\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizing\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"resizeStop\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeDataBound\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"contextMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuOpen\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"columnMenuClick\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"checkBoxChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"beforeCopy\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataStateChange\", void 0);\n    __decorate([\n        Event()\n    ], Grid.prototype, \"dataSourceChanged\", void 0);\n    Grid = __decorate([\n        NotifyPropertyChanges\n    ], Grid);\n    return Grid;\n}(Component));\nexport { Grid };\nGrid.Inject(Selection);\n","import { Browser } from '@syncfusion/ej2-base';\nimport { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest, classList } from '@syncfusion/ej2-base';\nimport { setCssInGridPopUp, getActualPropFromColl, isActionPrevent, iterateExtend } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\n/**\n *\n * The `Sort` module is used to handle sorting action.\n */\nvar Sort = /** @class */ (function () {\n    /**\n     * Constructor for Grid sorting module\n     * @hidden\n     */\n    function Sort(parent, sortSettings, sortedColumns, locator) {\n        this.contentRefresh = true;\n        this.isModelChanged = true;\n        this.aria = new AriaService();\n        this.parent = parent;\n        this.sortSettings = sortSettings;\n        this.sortedColumns = sortedColumns;\n        this.focus = locator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * The function used to update sortSettings\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.updateModel = function () {\n        var sortedColumn = { field: this.columnName, direction: this.direction };\n        var index;\n        var gCols = this.parent.groupSettings.columns;\n        var flag = false;\n        if (!this.isMultiSort) {\n            if (!gCols.length) {\n                this.sortSettings.columns = [sortedColumn];\n            }\n            else {\n                var sortedCols = [];\n                for (var i = 0, len = gCols.length; i < len; i++) {\n                    index = this.getSortedColsIndexByField(gCols[i], sortedCols);\n                    if (this.columnName === gCols[i]) {\n                        flag = true;\n                        sortedCols.push(sortedColumn);\n                    }\n                    else {\n                        var sCol = this.getSortColumnFromField(gCols[i]);\n                        sortedCols.push({ field: sCol.field, direction: sCol.direction });\n                    }\n                }\n                if (!flag) {\n                    sortedCols.push(sortedColumn);\n                }\n                this.sortSettings.columns = sortedCols;\n            }\n        }\n        else {\n            index = this.getSortedColsIndexByField(this.columnName);\n            if (index > -1) {\n                this.sortSettings.columns.splice(index, 1);\n            }\n            this.sortSettings.columns.push(sortedColumn);\n            this.sortSettings.columns = this.sortSettings.columns;\n        }\n        this.parent.dataBind();\n        this.lastSortedCol = this.columnName;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionComplete\n        } : { requestType: 'sorting', type: events.actionComplete };\n        this.isRemove = false;\n        this.parent.trigger(events.actionComplete, extend(e, args));\n    };\n    /**\n     * Sorts a column with the given options.\n     * @param {string} columnName - Defines the column name to sort.\n     * @param {SortDirection} direction - Defines the direction of sorting field.\n     * @param {boolean} isMultiSort - Specifies whether the previously sorted columns are to be maintained.\n     * @return {void}\n     */\n    Sort.prototype.sortColumn = function (columnName, direction, isMultiSort) {\n        var gObj = this.parent;\n        if (this.parent.getColumnByField(columnName).allowSorting === false || this.parent.isContextMenuOpen()) {\n            return;\n        }\n        if (!gObj.allowMultiSorting) {\n            isMultiSort = gObj.allowMultiSorting;\n        }\n        if (this.isActionPrevent()) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.sortColumn,\n                arg1: columnName, arg2: direction, arg3: isMultiSort\n            });\n            return;\n        }\n        this.backupSettings();\n        this.columnName = columnName;\n        this.direction = direction;\n        this.isMultiSort = isMultiSort;\n        this.removeSortIcons();\n        var column = gObj.getColumnHeaderByField(columnName);\n        this.updateSortedCols(columnName, isMultiSort);\n        this.updateModel();\n    };\n    Sort.prototype.backupSettings = function () {\n        this.lastSortedCols = iterateExtend(this.sortSettings.columns);\n        this.lastCols = this.sortedColumns;\n    };\n    Sort.prototype.restoreSettings = function () {\n        this.isModelChanged = false;\n        this.isMultiSort = true;\n        this.parent.setProperties({ sortSettings: { columns: this.lastSortedCols } }, true);\n        //this.parent.sortSettings.columns =  this.lastSortedCols;        \n        this.sortedColumns = this.lastCols;\n        this.isModelChanged = true;\n    };\n    Sort.prototype.updateSortedCols = function (columnName, isMultiSort) {\n        if (!isMultiSort) {\n            if (this.parent.allowGrouping) {\n                for (var i = 0, len = this.sortedColumns.length; i < len; i++) {\n                    if (this.parent.groupSettings.columns.indexOf(this.sortedColumns[i]) < 0) {\n                        this.sortedColumns.splice(i, 1);\n                        len--;\n                        i--;\n                    }\n                }\n            }\n            else {\n                this.sortedColumns.splice(0, this.sortedColumns.length);\n            }\n        }\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            this.sortedColumns.push(columnName);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        if (this.contentRefresh) {\n            var args = this.sortSettings.columns.length ? {\n                columnName: this.columnName, direction: this.direction, requestType: 'sorting', type: events.actionBegin\n            } : { requestType: 'sorting', type: events.actionBegin, cancel: false };\n            this.parent.notify(events.modelChanged, args);\n        }\n        this.refreshSortSettings();\n        this.removeSortIcons();\n        this.addSortIcons();\n    };\n    Sort.prototype.refreshSortSettings = function () {\n        var _this = this;\n        this.sortedColumns = [];\n        this.sortSettings.columns.forEach(function (e) {\n            _this.sortedColumns.push(e.field);\n        });\n    };\n    /**\n     * Clears all the sorted columns of the Grid.\n     * @return {void}\n     */\n    Sort.prototype.clearSorting = function () {\n        var cols = getActualPropFromColl(this.sortSettings.columns);\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearSorting });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.removeSortColumn(cols[i].field);\n        }\n    };\n    Sort.prototype.isActionPrevent = function () {\n        return isActionPrevent(this.parent);\n    };\n    /**\n     * Remove sorted column by field name.\n     * @param {string} field - Defines the column field name to remove sort.\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.removeSortColumn = function (field) {\n        var gObj = this.parent;\n        var cols = this.sortSettings.columns;\n        if (this.sortedColumns.indexOf(field) < 0) {\n            return;\n        }\n        if (this.isActionPrevent()) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.removeSortColumn, arg1: field });\n            return;\n        }\n        this.backupSettings();\n        this.removeSortIcons();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1) {\n                    continue;\n                }\n                this.sortedColumns.splice(this.sortedColumns.indexOf(cols[i].field), 1);\n                cols.splice(i, 1);\n                this.isRemove = true;\n                if (this.isModelChanged) {\n                    this.parent.notify(events.modelChanged, {\n                        requestType: 'sorting', type: events.actionBegin\n                    });\n                }\n                break;\n            }\n        }\n        this.addSortIcons();\n    };\n    Sort.prototype.getSortedColsIndexByField = function (field, sortedColumns) {\n        var cols = sortedColumns ? sortedColumns : this.sortSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === field) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Sort.prototype.getModuleName = function () {\n        return 'sort';\n    };\n    Sort.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.sortSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            this.isMultiSort = this.sortSettings.columns.length > 1;\n            for (var _i = 0, _a = gObj.sortSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                if (this.sortedColumns.indexOf(col.field) > -1) {\n                    this.sortColumn(col.field, col.direction, true);\n                }\n            }\n            this.isMultiSort = false;\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.sortComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressed, this);\n        this.parent.on(events.cancelBegin, this.cancelBeginEvent, this);\n    };\n    /**\n     * @hidden\n     */\n    Sort.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.sortComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressed);\n        this.parent.off(events.cancelBegin, this.cancelBeginEvent);\n    };\n    /**\n     * To destroy the sorting\n     * @return {void}\n     * @hidden\n     */\n    Sort.prototype.destroy = function () {\n        this.isModelChanged = false;\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.parent.element.querySelector('.e-gridpopup').querySelectorAll('.e-sortdirect').length) {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n        this.clearSorting();\n        this.isModelChanged = true;\n        this.removeEventListener();\n    };\n    Sort.prototype.cancelBeginEvent = function (e) {\n        if (e.requestType === 'sorting') {\n            this.restoreSettings();\n            this.refreshSortIcons();\n            this.isMultiSort = true;\n        }\n    };\n    Sort.prototype.clickHandler = function (e) {\n        this.popUpClickHandler(e);\n        var target = closest(e.target, '.e-headercell');\n        if (target && !e.target.classList.contains('e-grptogglebtn') &&\n            !e.target.classList.contains('e-stackedheadercell') &&\n            !e.target.classList.contains('e-stackedheadercelldiv') &&\n            !(target.classList.contains('e-resized')) &&\n            !e.target.classList.contains('e-rhandler') &&\n            !e.target.classList.contains('e-columnmenu') &&\n            !e.target.classList.contains('e-filtermenudiv')) {\n            var gObj = this.parent;\n            var colObj = gObj.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            var direction = !target.querySelectorAll('.e-ascending').length ? 'Ascending' :\n                'Descending';\n            if (colObj.type !== 'checkbox') {\n                this.initiateSort(target, e, colObj);\n                if (Browser.isDevice) {\n                    this.showPopUp(e);\n                }\n            }\n        }\n        if (target) {\n            target.classList.remove('e-resized');\n        }\n    };\n    Sort.prototype.keyPressed = function (e) {\n        var ele = e.target;\n        if (!this.parent.isEdit && (e.action === 'enter' || e.action === 'ctrlEnter' || e.action === 'shiftEnter')\n            && closest(ele, '.e-headercell')) {\n            var target = this.focus.getFocusedElement();\n            if (isNullOrUndefined(target) || !target.classList.contains('e-headercell')\n                || !target.querySelector('.e-headercelldiv')) {\n                return;\n            }\n            var col = this.parent.getColumnByUid(target.querySelector('.e-headercelldiv').getAttribute('e-mappinguid'));\n            this.initiateSort(target, e, col);\n        }\n    };\n    Sort.prototype.initiateSort = function (target, e, column) {\n        var gObj = this.parent;\n        var field = column.field;\n        var direction = !target.querySelectorAll('.e-ascending').length ? 'Ascending' :\n            'Descending';\n        if (e.shiftKey || (this.sortSettings.allowUnsort && target.querySelectorAll('.e-descending').length)\n            && !(gObj.groupSettings.columns.indexOf(field) > -1)) {\n            this.removeSortColumn(field);\n        }\n        else {\n            this.sortColumn(field, direction, e.ctrlKey || this.enableSortMultiTouch);\n        }\n    };\n    Sort.prototype.showPopUp = function (e) {\n        var target = closest(e.target, '.e-headercell');\n        if (!isNullOrUndefined(target) || this.parent.isContextMenuOpen()) {\n            setCssInGridPopUp(this.parent.element.querySelector('.e-gridpopup'), e, 'e-sortdirect e-icons e-icon-sortdirect' + (this.sortedColumns.length > 1 ? ' e-spanclicked' : ''));\n        }\n    };\n    Sort.prototype.popUpClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.e-headercell') || e.target.classList.contains('e-rowcell') ||\n            closest(target, '.e-gridpopup')) {\n            if (target.classList.contains('e-sortdirect')) {\n                if (!target.classList.contains('e-spanclicked')) {\n                    target.classList.add('e-spanclicked');\n                    this.enableSortMultiTouch = true;\n                }\n                else {\n                    target.classList.remove('e-spanclicked');\n                    this.enableSortMultiTouch = false;\n                    this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n                }\n            }\n        }\n        else {\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    Sort.prototype.addSortIcons = function () {\n        var gObj = this.parent;\n        var header;\n        var filterElement;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            this.aria.setSort(header, cols[i].direction);\n            if (this.isMultiSort && cols.length > 1) {\n                header.querySelector('.e-headercelldiv').insertBefore(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }), header.querySelector('.e-headertext'));\n            }\n            filterElement = header.querySelector('.e-sortfilterdiv');\n            if (cols[i].direction === 'Ascending') {\n                classList(filterElement, ['e-ascending', 'e-icon-ascending'], []);\n            }\n            else {\n                classList(filterElement, ['e-descending', 'e-icon-descending'], []);\n            }\n        }\n    };\n    Sort.prototype.removeSortIcons = function (position) {\n        var gObj = this.parent;\n        var header;\n        var cols = this.sortSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var i = position ? position : 0, len = !isNullOrUndefined(position) ? position + 1 : cols.length; i < len; i++) {\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (gObj.allowGrouping && gObj.groupSettings.columns.indexOf(cols[i].field) > -1 &&\n                (isNullOrUndefined(header) || !header.querySelector('.e-sortfilterdiv'))) {\n                continue;\n            }\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            this.aria.setSort(header, 'none');\n            classList(header.querySelector('.e-sortfilterdiv'), [], ['e-descending', 'e-icon-descending', 'e-ascending', 'e-icon-ascending']);\n            if (header.querySelector('.e-sortnumber')) {\n                header.querySelector('.e-headercelldiv').removeChild(header.querySelector('.e-sortnumber'));\n            }\n        }\n    };\n    Sort.prototype.getSortColumnFromField = function (field) {\n        for (var i = 0, len = this.sortSettings.columns.length; i < len; i++) {\n            if (this.sortSettings.columns[i].field === field) {\n                return this.sortSettings.columns[i];\n            }\n        }\n        return false;\n    };\n    Sort.prototype.updateAriaAttr = function () {\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        for (var _i = 0, _a = this.sortedColumns; _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (fieldNames.indexOf(col) === -1) {\n                continue;\n            }\n            var header = this.parent.getColumnHeaderByField(col);\n            this.aria.setSort(header, this.getSortColumnFromField(col).direction);\n        }\n    };\n    Sort.prototype.refreshSortIcons = function (params) {\n        if (params === void 0) { params = { args: { isFrozen: false } }; }\n        if (!params.args.isFrozen) {\n            this.removeSortIcons();\n            this.isMultiSort = true;\n            this.removeSortIcons();\n            this.addSortIcons();\n            this.isMultiSort = false;\n            this.updateAriaAttr();\n        }\n    };\n    return Sort;\n}());\nexport { Sort };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { EventHandler } from '@syncfusion/ej2-base';\nimport { classList, append } from '@syncfusion/ej2-base';\n/**\n * `NumericContainer` module handles rendering and refreshing numeric container.\n */\nvar NumericContainer = /** @class */ (function () {\n    /**\n     * Constructor for numericContainer module\n     * @hidden\n     */\n    function NumericContainer(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render numericContainer\n     * @hidden\n     */\n    NumericContainer.prototype.render = function () {\n        this.pagerElement = this.pagerModule.element;\n        this.renderNumericContainer();\n        this.refreshNumericLinks();\n        this.wireEvents();\n    };\n    /**\n     * Refreshes the numeric container of Pager.\n     */\n    NumericContainer.prototype.refresh = function () {\n        this.pagerModule.updateTotalPages();\n        if (this.links.length) {\n            this.updateLinksHtml();\n        }\n        this.updateStyles();\n    };\n    /**\n     * The function is used to refresh refreshNumericLinks\n     * @hidden\n     */\n    NumericContainer.prototype.refreshNumericLinks = function () {\n        var link;\n        var pagerObj = this.pagerModule;\n        var div = pagerObj.element.querySelector('.e-numericcontainer');\n        var frag = document.createDocumentFragment();\n        div.innerHTML = '';\n        for (var i = 1; i <= pagerObj.pageCount; i++) {\n            link = this.pagerModule.createElement('a', {\n                className: 'e-link e-numericitem e-spacing e-pager-default',\n                attrs: { role: 'link', tabindex: '-1', 'aria-label': 'Goto Page ' + i,\n                    href: 'javascript:void(0);', name: 'Goto page' + i }\n            });\n            if (pagerObj.currentPage === i) {\n                classList(link, ['e-currentitem', 'e-active'], ['e-pager-default']);\n            }\n            frag.appendChild(link);\n        }\n        div.appendChild(frag);\n        this.links = [].slice.call(div.childNodes);\n    };\n    /**\n     * Binding events to the element while component creation\n     * @hidden\n     */\n    NumericContainer.prototype.wireEvents = function () {\n        EventHandler.add(this.pagerElement, 'click', this.clickHandler, this);\n    };\n    /**\n     * Unbinding events from the element while component destroy\n     * @hidden\n     */\n    NumericContainer.prototype.unwireEvents = function () {\n        EventHandler.remove(this.pagerElement, 'click', this.clickHandler);\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    NumericContainer.prototype.destroy = function () {\n        this.unwireEvents();\n    };\n    NumericContainer.prototype.renderNumericContainer = function () {\n        this.element = this.pagerModule.createElement('div', {\n            className: 'e-pagercontainer', attrs: { 'role': 'navigation' }\n        });\n        this.renderFirstNPrev(this.element);\n        this.renderPrevPagerSet(this.element);\n        this.element.appendChild(this.pagerModule.createElement('div', { className: 'e-numericcontainer' }));\n        this.renderNextPagerSet(this.element);\n        this.renderNextNLast(this.element);\n        this.pagerModule.element.appendChild(this.element);\n    };\n    NumericContainer.prototype.renderFirstNPrev = function (pagerContainer) {\n        this.first = this.pagerModule.createElement('div', {\n            className: 'e-first e-icons e-icon-first',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('firstPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.prev = this.pagerModule.createElement('div', {\n            className: 'e-prev e-icons e-icon-prev',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('previousPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.first, this.prev], pagerContainer);\n    };\n    NumericContainer.prototype.renderPrevPagerSet = function (pagerContainer) {\n        var prevPager = this.pagerModule.createElement('div');\n        this.PP = this.pagerModule.createElement('a', {\n            className: 'e-link e-pp e-spacing', innerHTML: '...',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('previousPagerTooltip'), role: 'link',\n                'aria-label': this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                tabindex: '-1',\n                name: this.pagerModule.getLocalizedLabel('previousPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        prevPager.appendChild(this.PP);\n        pagerContainer.appendChild(prevPager);\n    };\n    NumericContainer.prototype.renderNextPagerSet = function (pagerContainer) {\n        var nextPager = this.pagerModule.createElement('div');\n        this.NP = this.pagerModule.createElement('a', {\n            className: 'e-link e-np e-spacing',\n            innerHTML: '...', attrs: {\n                title: this.pagerModule.getLocalizedLabel('nextPagerTooltip'), role: 'link',\n                'aria-label': this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                tabindex: '-1',\n                name: this.pagerModule.getLocalizedLabel('nextPagerTooltip'),\n                href: 'javascript:void(0);'\n            }\n        });\n        nextPager.appendChild(this.NP);\n        pagerContainer.appendChild(nextPager);\n    };\n    NumericContainer.prototype.renderNextNLast = function (pagerContainer) {\n        this.next = this.pagerModule.createElement('div', {\n            className: 'e-next e-icons e-icon-next',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('nextPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        this.last = this.pagerModule.createElement('div', {\n            className: 'e-last e-icons e-icon-last',\n            attrs: {\n                title: this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                'aria-label': this.pagerModule.getLocalizedLabel('lastPageTooltip'),\n                tabindex: '-1'\n            }\n        });\n        append([this.next, this.last], pagerContainer);\n    };\n    NumericContainer.prototype.clickHandler = function (e) {\n        var pagerObj = this.pagerModule;\n        var target = e.target;\n        pagerObj.previousPageNo = pagerObj.currentPage;\n        if (!target.classList.contains('e-disable') && !isNullOrUndefined(target.getAttribute('index'))) {\n            pagerObj.currentPage = parseInt(target.getAttribute('index'), 10);\n            pagerObj.dataBind();\n        }\n        return false;\n    };\n    NumericContainer.prototype.updateLinksHtml = function () {\n        var pagerObj = this.pagerModule;\n        var currentPageSet;\n        var pageNo;\n        pagerObj.currentPage = pagerObj.totalPages === 1 ? 1 : pagerObj.currentPage;\n        if (pagerObj.currentPage > pagerObj.totalPages && pagerObj.totalPages) {\n            pagerObj.currentPage = pagerObj.totalPages;\n        }\n        currentPageSet = parseInt((pagerObj.currentPage / pagerObj.pageCount).toString(), 10);\n        if (pagerObj.currentPage % pagerObj.pageCount === 0 && currentPageSet > 0) {\n            currentPageSet = currentPageSet - 1;\n        }\n        for (var i = 0; i < pagerObj.pageCount; i++) {\n            pageNo = (currentPageSet * pagerObj.pageCount) + 1 + i;\n            if (pageNo <= pagerObj.totalPages) {\n                this.links[i].style.display = '';\n                this.links[i].setAttribute('index', pageNo.toString());\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                if (pagerObj.currentPage !== pageNo) {\n                    this.links[i].classList.add('e-pager-default');\n                }\n                else {\n                    this.links[i].classList.remove('e-pager-default');\n                }\n            }\n            else {\n                this.links[i].innerHTML = !pagerObj.customText ? pageNo.toString() : pagerObj.customText + pageNo;\n                this.links[i].style.display = 'none';\n            }\n            classList(this.links[i], [], ['e-currentitem', 'e-active']);\n        }\n        this.first.setAttribute('index', '1');\n        this.last.setAttribute('index', pagerObj.totalPages.toString());\n        this.prev.setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.next.setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.pagerElement.querySelector('.e-mfirst').setAttribute('index', '1');\n        this.pagerElement.querySelector('.e-mlast').setAttribute('index', pagerObj.totalPages.toString());\n        this.pagerElement.querySelector('.e-mprev').setAttribute('index', (pagerObj.currentPage - 1).toString());\n        this.pagerElement.querySelector('.e-mnext').setAttribute('index', (pagerObj.currentPage + 1).toString());\n        this.PP.setAttribute('index', (parseInt(this.links[0].getAttribute('index'), 10) - pagerObj.pageCount).toString());\n        this.NP.setAttribute('index', (parseInt(this.links[this.links.length - 1].getAttribute('index'), 10) + 1).toString());\n    };\n    NumericContainer.prototype.updateStyles = function () {\n        this.updateFirstNPrevStyles();\n        this.updatePrevPagerSetStyles();\n        this.updateNextPagerSetStyles();\n        this.updateNextNLastStyles();\n        if (this.links.length) {\n            classList(this.links[(this.pagerModule.currentPage - 1) % this.pagerModule.pageCount], ['e-currentitem', 'e-active'], []);\n        }\n    };\n    NumericContainer.prototype.updateFirstNPrevStyles = function () {\n        var firstPage = ['e-firstpage', 'e-pager-default'];\n        var firstPageDisabled = ['e-firstpagedisabled', 'e-disable'];\n        var prevPage = ['e-prevpage', 'e-pager-default'];\n        var prevPageDisabled = ['e-prevpagedisabled', 'e-disable'];\n        if (this.pagerModule.totalPages > 0 && this.pagerModule.currentPage > 1) {\n            classList(this.prev, prevPage, prevPageDisabled);\n            classList(this.first, firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPage, firstPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPage, prevPageDisabled);\n        }\n        else {\n            classList(this.prev, prevPageDisabled, prevPage);\n            classList(this.first, firstPageDisabled, firstPage);\n            classList(this.pagerElement.querySelector('.e-mprev'), prevPageDisabled, prevPage);\n            classList(this.pagerElement.querySelector('.e-mfirst'), firstPageDisabled, firstPage);\n        }\n    };\n    NumericContainer.prototype.updatePrevPagerSetStyles = function () {\n        if (this.pagerModule.currentPage > this.pagerModule.pageCount) {\n            classList(this.PP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n        else {\n            classList(this.PP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n    };\n    NumericContainer.prototype.updateNextPagerSetStyles = function () {\n        var pagerObj = this.pagerModule;\n        var firstPage = this.links[0].innerHTML.replace(pagerObj.customText, '');\n        if (!firstPage.length || !this.links.length || (parseInt(firstPage, 10) + pagerObj.pageCount > pagerObj.totalPages)) {\n            classList(this.NP, ['e-nextprevitemdisabled', 'e-disable'], ['e-numericitem', 'e-pager-default']);\n        }\n        else {\n            classList(this.NP, ['e-numericitem', 'e-pager-default'], ['e-nextprevitemdisabled', 'e-disable']);\n        }\n    };\n    NumericContainer.prototype.updateNextNLastStyles = function () {\n        var lastPage = ['e-lastpage', 'e-pager-default'];\n        var lastPageDisabled = ['e-lastpagedisabled', 'e-disable'];\n        var nextPage = ['e-nextpage', 'e-pager-default'];\n        var nextPageDisabled = ['e-nextpagedisabled', 'e-disable'];\n        var pagerObj = this.pagerModule;\n        if (pagerObj.currentPage === pagerObj.totalPages || pagerObj.totalRecordsCount === 0) {\n            classList(this.last, lastPageDisabled, lastPage);\n            classList(this.next, nextPageDisabled, nextPage);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPageDisabled, lastPage);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPageDisabled, nextPage);\n        }\n        else {\n            classList(this.last, lastPage, lastPageDisabled);\n            classList(this.next, nextPage, nextPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mlast'), lastPage, lastPageDisabled);\n            classList(this.pagerElement.querySelector('.e-mnext'), nextPage, nextPageDisabled);\n        }\n    };\n    return NumericContainer;\n}());\nexport { NumericContainer };\n","import { append } from '@syncfusion/ej2-base';\n/**\n * `PagerMessage` module is used to display pager information.\n */\nvar PagerMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @hidden\n     */\n    function PagerMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * The function is used to render pager message\n     * @hidden\n     */\n    PagerMessage.prototype.render = function () {\n        var div = this.pagerModule\n            .createElement('div', { className: 'e-parentmsgbar', attrs: { 'aria-label': 'Pager Information' } });\n        this.pageNoMsgElem = this.pagerModule.createElement('span', { className: 'e-pagenomsg', styles: 'textalign:right' });\n        this.pageCountMsgElem = this.pagerModule.createElement('span', { className: 'e-pagecountmsg', styles: 'textalign:right' });\n        append([this.pageNoMsgElem, this.pageCountMsgElem], div);\n        this.pagerModule.element.appendChild(div);\n        this.refresh();\n    };\n    /**\n     * Refreshes the pager information.\n     */\n    PagerMessage.prototype.refresh = function () {\n        var pagerObj = this.pagerModule;\n        this.pageNoMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('currentPageInfo'), [pagerObj.totalRecordsCount === 0 ? 0 :\n                pagerObj.currentPage, pagerObj.totalPages || 0]) + ' ';\n        this.pageCountMsgElem.textContent = this.format(pagerObj.getLocalizedLabel('totalItemsInfo'), [pagerObj.totalRecordsCount || 0]);\n        this.pageNoMsgElem.parentElement.setAttribute('aria-label', this.pageNoMsgElem.textContent + this.pageCountMsgElem.textContent);\n    };\n    /**\n     * Hides the Pager information.\n     */\n    PagerMessage.prototype.hideMessage = function () {\n        if (this.pageNoMsgElem) {\n            this.pageNoMsgElem.style.display = 'none';\n        }\n        if (this.pageCountMsgElem) {\n            this.pageCountMsgElem.style.display = 'none';\n        }\n    };\n    /**\n     * Shows the Pager information.\n     */\n    PagerMessage.prototype.showMessage = function () {\n        if (!this.pageNoMsgElem) {\n            this.render();\n        }\n        this.pageNoMsgElem.style.display = '';\n        this.pageCountMsgElem.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerMessage.prototype.destroy = function () {\n        //destroy\n    };\n    PagerMessage.prototype.format = function (str, args) {\n        var regx;\n        for (var i = 0; i < args.length; i++) {\n            regx = new RegExp('\\\\{' + (i) + '\\\\}', 'gm');\n            str = str.replace(regx, args[i].toString());\n        }\n        return str;\n    };\n    return PagerMessage;\n}());\nexport { PagerMessage };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, L10n, Browser } from '@syncfusion/ej2-base';\nimport { compile as templateCompiler } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Property, Event, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { NumericContainer } from './numeric-container';\nimport { PagerMessage } from './pager-message';\nimport { appendChildren } from '../grid/base/util';\n/**\n * Represents the `Pager` component.\n * ```html\n * <div id=\"pager\"/>\n * ```\n * ```typescript\n * <script>\n *   var pagerObj = new Pager({ totalRecordsCount: 50, pageSize:10 });\n *   pagerObj.appendTo(\"#pager\");\n * </script>\n * ```\n */\nvar Pager = /** @class */ (function (_super) {\n    __extends(Pager, _super);\n    /**\n     * Constructor for creating the component.\n     * @hidden\n     */\n    function Pager(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.defaultConstants = {\n            currentPageInfo: '{0} of {1} pages',\n            totalItemsInfo: '({0} items)',\n            firstPageTooltip: 'Go to first page',\n            lastPageTooltip: 'Go to last page',\n            nextPageTooltip: 'Go to next page',\n            previousPageTooltip: 'Go to previous page',\n            nextPagerTooltip: 'Go to next pager',\n            previousPagerTooltip: 'Go to previous pager',\n            pagerDropDown: 'Items per page',\n            pagerAllDropDown: 'Items',\n            All: 'All'\n        };\n        /**\n         * `containerModule` is used to manipulate numeric container behavior of Pager.\n         */\n        _this.containerModule = new NumericContainer(_this);\n        /**\n         * `pagerMessageModule` is used to manipulate pager message of Pager.\n         */\n        _this.pagerMessageModule = new PagerMessage(_this);\n        return _this;\n    }\n    /**\n     * To provide the array of modules needed for component rendering\n     * @hidden\n     */\n    Pager.prototype.requiredModules = function () {\n        var modules = [];\n        if (this.enableExternalMessage) {\n            modules.push({\n                member: 'externalMessage',\n                args: [this]\n            });\n        }\n        if (this.checkpagesizes()) {\n            modules.push({\n                member: 'pagerdropdown',\n                args: [this]\n            });\n        }\n        return modules;\n    };\n    /**\n     * Initialize the event handler\n     * @hidden\n     */\n    Pager.prototype.preRender = function () {\n        //preRender\n    };\n    /**\n     * To Initialize the component rendering\n     */\n    Pager.prototype.render = function () {\n        if (this.template) {\n            this.pagerTemplate();\n        }\n        else {\n            this.initLocalization();\n            this.updateRTL();\n            this.totalRecordsCount = this.totalRecordsCount || 0;\n            this.renderFirstPrevDivForDevice();\n            this.containerModule.render();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.render();\n            }\n            this.renderNextLastDivForDevice();\n            if (this.checkpagesizes()) {\n                this.pagerdropdownModule.render();\n            }\n            this.addAriaLabel();\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.render();\n            }\n            this.refresh();\n            this.trigger('created', { 'currentPage': this.currentPage, 'totalRecordsCount': this.totalRecordsCount });\n        }\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     * @hidden\n     */\n    Pager.prototype.getPersistData = function () {\n        var keyEntity = ['currentPage', 'pageSize'];\n        return this.addOnPersist(keyEntity);\n    };\n    /**\n     * To destroy the Pager component.\n     * @method destroy\n     * @return {void}\n     */\n    Pager.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.containerModule.destroy();\n        this.pagerMessageModule.destroy();\n        this.element.innerHTML = '';\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Pager.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @hidden\n     */\n    Pager.prototype.onPropertyChanged = function (newProp, oldProp) {\n        if (this.isDestroyed) {\n            return;\n        }\n        if (newProp.pageCount !== oldProp.pageCount) {\n            this.containerModule.refreshNumericLinks();\n            this.containerModule.refresh();\n        }\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'currentPage':\n                    if (this.checkGoToPage(newProp.currentPage, oldProp.currentPage)) {\n                        this.currentPageChanged();\n                    }\n                    break;\n                case 'pageSize':\n                case 'totalRecordsCount':\n                case 'customText':\n                    if (this.checkpagesizes()) {\n                        this.pagerdropdownModule.setDropDownValue('value', this.pageSize);\n                    }\n                    this.refresh();\n                    break;\n                case 'pageSizes':\n                    if (this.checkpagesizes()) {\n                        this.pagerdropdownModule.destroy();\n                        this.pagerdropdownModule.render();\n                    }\n                    this.refresh();\n                    break;\n                case 'template':\n                    this.templateFn = this.compile(this.template);\n                    this.refresh();\n                    break;\n                case 'locale':\n                    this.initLocalization();\n                    this.refresh();\n                    break;\n                case 'enableExternalMessage':\n                    if (this.enableExternalMessage) {\n                        this.externalMessageModule.render();\n                    }\n                    break;\n                case 'externalMessage':\n                    if (this.externalMessageModule) {\n                        this.externalMessageModule.refresh();\n                    }\n                    break;\n                case 'enableRtl':\n                    this.updateRTL();\n                    break;\n                case 'enablePagerMessage':\n                    if (this.enablePagerMessage) {\n                        this.pagerMessageModule.showMessage();\n                    }\n                    else {\n                        this.pagerMessageModule.hideMessage();\n                    }\n                    break;\n            }\n        }\n    };\n    /**\n     * Gets the localized label by locale keyword.\n     * @param  {string} key\n     * @return {string}\n     */\n    Pager.prototype.getLocalizedLabel = function (key) {\n        return this.localeObj.getConstant(key);\n    };\n    /**\n     * Navigate to target page by given number.\n     * @param  {number} pageNo - Defines page number.\n     * @return {void}\n     */\n    Pager.prototype.goToPage = function (pageNo) {\n        if (this.checkGoToPage(pageNo)) {\n            this.currentPage = pageNo;\n            this.dataBind();\n        }\n    };\n    Pager.prototype.checkpagesizes = function () {\n        if (this.pageSizes === true || this.pageSizes.length) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.checkGoToPage = function (newPageNo, oldPageNo) {\n        if (newPageNo !== this.currentPage) {\n            this.previousPageNo = this.currentPage;\n        }\n        if (!isNullOrUndefined(oldPageNo)) {\n            this.previousPageNo = oldPageNo;\n        }\n        if (this.previousPageNo !== newPageNo && (newPageNo >= 1 && newPageNo <= this.totalPages)) {\n            return true;\n        }\n        return false;\n    };\n    Pager.prototype.currentPageChanged = function () {\n        if (this.enableQueryString) {\n            this.updateQueryString(this.currentPage);\n        }\n        var args = { currentPage: this.currentPage, cancel: false };\n        this.trigger('click', args);\n        if (!args.cancel) {\n            this.refresh();\n        }\n    };\n    Pager.prototype.pagerTemplate = function () {\n        var result;\n        this.element.classList.add('e-pagertemplate');\n        this.compile(this.template);\n        var data = {\n            currentPage: this.currentPage, pageSize: this.pageSize, pageCount: this.pageCount,\n            totalRecordsCount: this.totalRecordsCount, totalPages: this.totalPages\n        };\n        result = this.getPagerTemplate()(data);\n        appendChildren(this.element, result);\n    };\n    /** @hidden */\n    Pager.prototype.updateTotalPages = function () {\n        this.totalPages = (this.totalRecordsCount % this.pageSize === 0) ? (this.totalRecordsCount / this.pageSize) :\n            (parseInt((this.totalRecordsCount / this.pageSize).toString(), 10) + 1);\n    };\n    /** @hidden */\n    Pager.prototype.getPagerTemplate = function () {\n        return this.templateFn;\n    };\n    Pager.prototype.compile = function (template) {\n        if (template) {\n            var e = void 0;\n            try {\n                if (document.querySelectorAll(template).length) {\n                    this.templateFn = templateCompiler(document.querySelector(template).innerHTML.trim());\n                }\n            }\n            catch (e) {\n                this.templateFn = templateCompiler(template);\n            }\n        }\n        return undefined;\n    };\n    /**\n     * Refreshes page count, pager information and external message.\n     * @return {void}\n     */\n    Pager.prototype.refresh = function () {\n        if (this.template) {\n            this.element.innerHTML = '';\n            this.updateTotalPages();\n            this.pagerTemplate();\n        }\n        else {\n            this.updateRTL();\n            this.containerModule.refresh();\n            if (this.enablePagerMessage) {\n                this.pagerMessageModule.refresh();\n            }\n            if (this.enableExternalMessage && this.externalMessageModule) {\n                this.externalMessageModule.refresh();\n            }\n        }\n    };\n    Pager.prototype.updateRTL = function () {\n        if (this.enableRtl) {\n            this.element.classList.add('e-rtl');\n        }\n        else {\n            this.element.classList.remove('e-rtl');\n        }\n    };\n    Pager.prototype.initLocalization = function () {\n        this.localeObj = new L10n(this.getModuleName(), this.defaultConstants, this.locale);\n    };\n    Pager.prototype.updateQueryString = function (value) {\n        var updatedUrl = this.getUpdatedURL(window.location.href, 'page', value.toString());\n        window.history.pushState({ path: updatedUrl }, '', updatedUrl);\n    };\n    Pager.prototype.getUpdatedURL = function (uri, key, value) {\n        var regx = new RegExp('([?|&])' + key + '=.*?(&|#|$)', 'i');\n        if (uri.match(regx)) {\n            return uri.replace(regx, '$1' + key + '=' + value + '$2');\n        }\n        else {\n            var hash = '';\n            if (uri.indexOf('#') !== -1) {\n                hash = uri.replace(/.*#/, '#');\n                uri = uri.replace(/#.*/, '');\n            }\n            return uri + (uri.indexOf('?') !== -1 ? '&' : '?') + key + '=' + value + hash;\n        }\n    };\n    Pager.prototype.renderFirstPrevDivForDevice = function () {\n        this.element.appendChild(this.createElement('div', {\n            className: 'e-mfirst e-icons e-icon-first',\n            attrs: { title: this.getLocalizedLabel('firstPageTooltip'), tabindex: '-1' }\n        }));\n        this.element.appendChild(this.createElement('div', {\n            className: 'e-mprev e-icons e-icon-prev',\n            attrs: { title: this.getLocalizedLabel('previousPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.renderNextLastDivForDevice = function () {\n        this.element.appendChild(this.createElement('div', {\n            className: 'e-mnext e-icons e-icon-next',\n            attrs: { title: this.getLocalizedLabel('nextPageTooltip'), tabindex: '-1' }\n        }));\n        this.element.appendChild(this.createElement('div', {\n            className: 'e-mlast e-icons e-icon-last',\n            attrs: { title: this.getLocalizedLabel('lastPageTooltip'), tabindex: '-1' }\n        }));\n    };\n    Pager.prototype.addAriaLabel = function () {\n        var _this = this;\n        var classList = ['.e-mfirst', '.e-mprev', '.e-mnext', '.e-mlast'];\n        if (!Browser.isDevice) {\n            classList.forEach(function (value) {\n                var element = _this.element.querySelector(value);\n                element.setAttribute('aria-label', element.getAttribute('title'));\n            });\n        }\n    };\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableQueryString\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"enableExternalMessage\", void 0);\n    __decorate([\n        Property(true)\n    ], Pager.prototype, \"enablePagerMessage\", void 0);\n    __decorate([\n        Property(12)\n    ], Pager.prototype, \"pageSize\", void 0);\n    __decorate([\n        Property(10)\n    ], Pager.prototype, \"pageCount\", void 0);\n    __decorate([\n        Property(1)\n    ], Pager.prototype, \"currentPage\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"totalRecordsCount\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"externalMessage\", void 0);\n    __decorate([\n        Property(false)\n    ], Pager.prototype, \"pageSizes\", void 0);\n    __decorate([\n        Property()\n    ], Pager.prototype, \"template\", void 0);\n    __decorate([\n        Property('')\n    ], Pager.prototype, \"customText\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"click\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"dropDownChanged\", void 0);\n    __decorate([\n        Event()\n    ], Pager.prototype, \"created\", void 0);\n    Pager = __decorate([\n        NotifyPropertyChanges\n    ], Pager);\n    return Pager;\n}(Component));\nexport { Pager };\n","import { remove } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\n/**\n * `PagerDropDown` module handles selected pageSize from DropDownList.\n */\nvar PagerDropDown = /** @class */ (function () {\n    /**\n     * Constructor for pager module\n     * @hidden\n     */\n    function PagerDropDown(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.getModuleName = function () {\n        return 'pagerdropdown';\n    };\n    /**\n     * The function is used to render pager dropdown\n     * @hidden\n     */\n    PagerDropDown.prototype.render = function () {\n        var pagerObj = this.pagerModule;\n        this.pagerDropDownDiv = this.pagerModule.createElement('div', { className: 'e-pagesizes' });\n        var dropDownDiv = this.pagerModule.createElement('div', { className: 'e-pagerdropdown' });\n        var defaultTextDiv = this.pagerModule.createElement('div', { className: 'e-pagerconstant' });\n        var input = this.pagerModule.createElement('input', { attrs: { type: 'text', tabindex: '1' } });\n        this.pagerCons = this.pagerModule\n            .createElement('span', { className: 'e-constant', innerHTML: this.pagerModule.getLocalizedLabel('pagerDropDown') });\n        dropDownDiv.appendChild(input);\n        defaultTextDiv.appendChild(this.pagerCons);\n        this.pagerDropDownDiv.appendChild(dropDownDiv);\n        this.pagerDropDownDiv.appendChild(defaultTextDiv);\n        this.pagerModule.element.appendChild(this.pagerDropDownDiv);\n        var pageSizesModule = this.pagerModule.pageSizes;\n        var pageSizesArray = (pageSizesModule.length ? this.convertValue(pageSizesModule) :\n            [this.pagerModule.getLocalizedLabel('All'), '5', '10', '12', '20']);\n        var defaultValue = this.pagerModule.pageSize;\n        this.dropDownListObject = new DropDownList({\n            dataSource: pageSizesArray,\n            value: defaultValue.toString(),\n            change: this.onChange.bind(this),\n            cssClass: 'e-alldrop'\n        });\n        this.dropDownListObject.appendTo(input);\n        if (pageSizesModule.length) {\n            this.dropDownListObject.element.value = this.pagerModule.pageSize.toString();\n        }\n        pagerObj.pageSize = defaultValue;\n        pagerObj.dataBind();\n        pagerObj.trigger('dropDownChanged', { pageSize: defaultValue });\n        this.addEventListener();\n    };\n    /**\n     * For internal use only - Get the pagesize.\n     * @private\n     * @hidden\n     */\n    PagerDropDown.prototype.onChange = function (e) {\n        if (this.dropDownListObject.value === this.pagerModule.getLocalizedLabel('All')) {\n            this.pagerModule.pageSize = this.pagerModule.totalRecordsCount;\n            this.pagerCons.innerHTML = this.pagerModule.getLocalizedLabel('pagerAllDropDown');\n            e.value = this.pagerModule.pageSize;\n            if (document.getElementsByClassName('e-popup-open e-alldrop').length) {\n                document.getElementsByClassName('e-alldrop')[1].style.display = 'none';\n            }\n        }\n        else {\n            this.pagerModule.pageSize = parseInt(this.dropDownListObject.value, 10);\n            if (this.pagerCons.innerHTML !== this.pagerModule.getLocalizedLabel('pagerDropDown')) {\n                this.pagerCons.innerHTML = this.pagerModule.getLocalizedLabel('pagerDropDown');\n            }\n        }\n        this.pagerModule.dataBind();\n        this.pagerModule.trigger('dropDownChanged', { pageSize: this.dropDownListObject.value });\n    };\n    PagerDropDown.prototype.beforeValueChange = function (prop) {\n        if (typeof prop.newProp.value === 'number') {\n            var val = prop.newProp.value.toString();\n            prop.newProp.value = val;\n        }\n    };\n    PagerDropDown.prototype.convertValue = function (pageSizeValue) {\n        var item = pageSizeValue;\n        for (var i = 0; i < item.length; i++) {\n            item[i] = typeof item[i] === 'number' ? item[i].toString() : item[i];\n        }\n        return item;\n    };\n    PagerDropDown.prototype.setDropDownValue = function (prop, value) {\n        if (this.dropDownListObject) {\n            this.dropDownListObject[prop] = value;\n        }\n    };\n    PagerDropDown.prototype.addEventListener = function () {\n        this.dropDownListObject.on('beforeValueChange', this.beforeValueChange, this);\n    };\n    PagerDropDown.prototype.removeEventListener = function () {\n        this.dropDownListObject.off('beforeValueChange', this.beforeValueChange);\n    };\n    /**\n     * To destroy the Pagerdropdown\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    PagerDropDown.prototype.destroy = function (args) {\n        if (this.dropDownListObject && !this.dropDownListObject.isDestroyed) {\n            this.removeEventListener();\n            this.dropDownListObject.destroy();\n            remove(this.pagerDropDownDiv);\n        }\n    };\n    return PagerDropDown;\n}());\nexport { PagerDropDown };\n","import { remove } from '@syncfusion/ej2-base';\n/**\n * `ExternalMessage` module is used to display user provided message.\n */\nvar ExternalMessage = /** @class */ (function () {\n    /**\n     * Constructor for externalMessage module\n     * @param  {Pager} pagerModule?\n     * @returns defaultType\n     * @hidden\n     */\n    function ExternalMessage(pagerModule) {\n        this.pagerModule = pagerModule;\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExternalMessage.prototype.getModuleName = function () {\n        return 'externalMessage';\n    };\n    /**\n     * The function is used to render pager externalMessage\n     * @hidden\n     */\n    ExternalMessage.prototype.render = function () {\n        this.element = this.pagerModule\n            .createElement('div', { className: 'e-pagerexternalmsg', attrs: { 'aria-label': 'Pager external message' } });\n        this.pagerModule.element.appendChild(this.element);\n        this.refresh();\n    };\n    /**\n     * Refreshes the external message of Pager.\n     */\n    ExternalMessage.prototype.refresh = function () {\n        if (this.pagerModule.externalMessage && this.pagerModule.externalMessage.toString().length) {\n            this.showMessage();\n            this.element.innerHTML = this.pagerModule.externalMessage;\n        }\n        else {\n            this.hideMessage();\n        }\n    };\n    /**\n     * Hides the external message of Pager.\n     */\n    ExternalMessage.prototype.hideMessage = function () {\n        this.element.style.display = 'none';\n    };\n    /**\n     * Shows the external message of the Pager.\n     */\n    ExternalMessage.prototype.showMessage = function () {\n        this.element.style.display = '';\n    };\n    /**\n     * To destroy the PagerMessage\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    ExternalMessage.prototype.destroy = function () {\n        remove(this.element);\n    };\n    return ExternalMessage;\n}());\nexport { ExternalMessage };\n","import { extend } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Pager } from '../../pager/pager';\nimport { PagerDropDown } from '../../pager/pager-dropdown';\nimport { ExternalMessage } from '../../pager/external-message';\nimport { extend as gridExtend, getActualProperties, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nPager.Inject(ExternalMessage, PagerDropDown);\n/**\n * The `Page` module is used to render pager and handle paging action.\n */\nvar Page = /** @class */ (function () {\n    /**\n     * Constructor for the Grid paging module\n     * @hidden\n     */\n    function Page(parent, pageSettings) {\n        this.parent = parent;\n        this.pageSettings = pageSettings;\n        this.addEventListener();\n    }\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Page.prototype.getModuleName = function () {\n        return 'pager';\n    };\n    /**\n     * The function used to render pager from grid pageSettings\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.render = function () {\n        var gObj = this.parent;\n        var pagerObj;\n        this.pagerDestroy();\n        if (!isNullOrUndefined(this.parent.pagerTemplate)) {\n            this.pageSettings.template = this.parent.pagerTemplate;\n        }\n        this.element = this.parent.createElement('div', { className: 'e-gridpager' });\n        pagerObj = gridExtend({}, extend({}, getActualProperties(this.pageSettings)), {\n            click: this.clickHandler.bind(this),\n            dropDownChanged: this.onSelect.bind(this),\n            enableRtl: gObj.enableRtl, locale: gObj.locale,\n            created: this.addAriaAttr.bind(this)\n        }, ['parentObj', 'propName']);\n        this.pagerObj = new Pager(pagerObj);\n    };\n    Page.prototype.onSelect = function (e) {\n        this.pageSettings.pageSize = e.pageSize;\n        this.pageSettings.currentPage = 1;\n    };\n    Page.prototype.addAriaAttr = function () {\n        var _this = this;\n        if (!(this.pageSettings.template)) {\n            var numericContainerNew = this.parent.createElement('div', { className: 'e-numericcontainer' });\n            var pagerContainer = this.element.querySelector('.e-pagercontainer');\n            var frag = document.createDocumentFragment();\n            var numericContainer = this.element.querySelector('.e-numericcontainer');\n            var links = numericContainer.querySelectorAll('a');\n            for (var i = 0; i < links.length; i++) {\n                if (this.parent.getContentTable()) {\n                    links[i].setAttribute('aria-owns', this.parent.getContentTable().id);\n                }\n                else {\n                    links[i].setAttribute('aria-owns', this.parent.element.getAttribute('id') + '_content_table');\n                }\n                var numericContainerDiv = this.parent.createElement('div');\n                numericContainerDiv.appendChild(links[i]);\n                frag.appendChild(numericContainerDiv);\n            }\n            numericContainerNew.appendChild(frag);\n            pagerContainer.replaceChild(numericContainerNew, numericContainer);\n            var classList = ['.e-mfirst', '.e-mprev', '.e-first', '.e-prev', '.e-next', '.e-last', '.e-mnext', '.e-mlast'];\n            classList.forEach(function (value) {\n                var element = _this.element.querySelector(value);\n                if (_this.parent.getContentTable()) {\n                    element.setAttribute('aria-owns', _this.parent.getContentTable().id);\n                }\n            });\n        }\n    };\n    Page.prototype.dataReady = function (e) {\n        this.updateModel(e);\n    };\n    /**\n     * Refreshes the page count, pager information, and external message.\n     * @return {void}\n     */\n    Page.prototype.refresh = function () {\n        this.pagerObj.refresh();\n    };\n    /**\n     * Navigates to the target page according to the given number.\n     * @param  {number} pageNo - Defines the page number to navigate.\n     * @return {void}\n     */\n    Page.prototype.goToPage = function (pageNo) {\n        this.pagerObj.goToPage(pageNo);\n    };\n    /**\n     * The function used to update pageSettings model\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.updateModel = function (e) {\n        this.parent.pageSettings.totalRecordsCount = e.count;\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, {\n            currentPage: this.parent.pageSettings.currentPage, requestType: 'paging',\n            type: events.actionComplete\n        }));\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            this.pagerObj[prop] = newProp[prop];\n        }\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.clickHandler = function (e) {\n        var gObj = this.parent;\n        if (this.isForceCancel || isActionPrevent(gObj) && !gObj.prevPageMoving) {\n            if (!this.isForceCancel) {\n                gObj.notify(events.preventBatch, { instance: this, handler: this.goToPage, arg1: e.currentPage });\n                this.isForceCancel = true;\n                this.pagerObj.currentPage = gObj.pageSettings.currentPage;\n                this.pagerObj.dataBind();\n            }\n            else {\n                this.isForceCancel = false;\n            }\n            e.cancel = true;\n            return;\n        }\n        gObj.prevPageMoving = false;\n        var prevPage = this.pageSettings.currentPage;\n        this.pageSettings.currentPage = e.currentPage;\n        this.parent.notify(events.modelChanged, {\n            requestType: 'paging',\n            previousPage: prevPage,\n            currentPage: e.currentPage,\n            type: events.actionBegin\n        });\n    };\n    Page.prototype.keyPressHandler = function (e) {\n        if (e.action in keyActions) {\n            e.preventDefault();\n            this.element.querySelector(keyActions[e.action]).click();\n        }\n    };\n    /**\n     * Defines the text of the external message.\n     * @param  {string} message - Defines the message to update.\n     * @return {void}\n     */\n    Page.prototype.updateExternalMessage = function (message) {\n        if (!this.pagerObj.enableExternalMessage) {\n            this.pagerObj.enableExternalMessage = true;\n            this.pagerObj.dataBind();\n        }\n        this.pagerObj.externalMessage = message;\n        this.pagerObj.dataBind();\n    };\n    Page.prototype.appendToElement = function (e) {\n        this.parent.element.appendChild(this.element);\n        this.parent.setGridPager(this.element);\n        this.pagerObj.appendTo(this.element);\n    };\n    Page.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n            this.appendToElement();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.addEventListener = function () {\n        this.handlers = {\n            load: this.render,\n            end: this.appendToElement,\n            ready: this.dataReady,\n            complete: this.onActionComplete,\n            updateLayout: this.enableAfterRender,\n            inboundChange: this.onPropertyChanged,\n            keyPress: this.keyPressHandler\n        };\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.handlers.load, this);\n        this.parent.on(events.initialEnd, this.handlers.end, this); //For initial rendering\n        this.parent.on(events.dataReady, this.handlers.ready, this);\n        this.parent.on(events.pageComplete, this.handlers.complete, this);\n        this.parent.on(events.uiUpdate, this.handlers.updateLayout, this);\n        this.parent.on(events.inBoundModelChanged, this.handlers.inboundChange, this);\n        this.parent.on(events.keyPressed, this.handlers.keyPress, this);\n    };\n    /**\n     * @hidden\n     */\n    Page.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.handlers.load);\n        this.parent.off(events.initialEnd, this.handlers.end); //For initial rendering\n        this.parent.off(events.dataReady, this.handlers.ready);\n        this.parent.off(events.pageComplete, this.handlers.complete);\n        this.parent.off(events.uiUpdate, this.handlers.updateLayout);\n        this.parent.off(events.inBoundModelChanged, this.handlers.inboundChange);\n        this.parent.off(events.keyPressed, this.handlers.keyPress);\n    };\n    /**\n     * To destroy the pager\n     * @return {void}\n     * @hidden\n     */\n    Page.prototype.destroy = function () {\n        this.removeEventListener();\n        this.pagerDestroy();\n    };\n    Page.prototype.pagerDestroy = function () {\n        if (this.pagerObj && !this.pagerObj.isDestroyed) {\n            this.pagerObj.destroy();\n            remove(this.element);\n        }\n    };\n    return Page;\n}());\nexport { Page };\n/**\n * @hidden\n */\nvar keyActions = {\n    pageUp: '.e-prev',\n    pageDown: '.e-next',\n    ctrlAltPageDown: '.e-last',\n    ctrlAltPageUp: '.e-first',\n    altPageUp: '.e-pp',\n    altPageDown: '.e-np'\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, getValue } from '@syncfusion/ej2-base';\nimport { attributes } from '@syncfusion/ej2-base';\nimport { CellRenderer } from './cell-renderer';\nimport { Input } from '@syncfusion/ej2-inputs';\n/**\n * FilterCellRenderer class which responsible for building filter cell.\n * @hidden\n */\nvar FilterCellRenderer = /** @class */ (function (_super) {\n    __extends(FilterCellRenderer, _super);\n    function FilterCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent.createElement('TH', { className: 'e-filterbarcell' });\n        return _this;\n    }\n    /**\n     * Function to return the wrapper for the TH content.\n     * @returns string\n     */\n    FilterCellRenderer.prototype.getGui = function () {\n        return this.parent.createElement('div');\n    };\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Cell} cell\n     * @param  {Object} data\n     */\n    FilterCellRenderer.prototype.render = function (cell, data) {\n        var tr = this.parent.element.querySelector('.e-filterbar');\n        var node = this.element.cloneNode();\n        var innerDIV = this.getGui();\n        var input;\n        var column = cell.column;\n        tr.appendChild(node);\n        node.setAttribute('e-mappinguid', column.uid);\n        if (column.type !== 'checkbox') {\n            if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                node.classList.add('e-fltrtemp');\n                attributes(innerDIV, {\n                    'class': 'e-fltrtempdiv'\n                });\n                if (isNullOrUndefined(column.filterBarTemplate.create)) {\n                    input = this.parent.createElement('input', {\n                        id: column.field + '_filterBarcell', className: 'e-filterUi_input e-filtertext e-fltrTemp',\n                        attrs: { type: 'search', title: column.headerText }\n                    });\n                    innerDIV.appendChild(input);\n                }\n                else {\n                    var args = { column: column, node: Element };\n                    var temp = column.filterBarTemplate.create;\n                    if (typeof temp === 'string') {\n                        temp = getValue(temp, window);\n                    }\n                    input = temp(args);\n                    if (typeof input === 'string') {\n                        var div = this.parent.createElement('div');\n                        div.innerHTML = input;\n                        input = div.firstChild;\n                    }\n                    attributes(innerDIV, {\n                        class: 'e-filterUi_input e-filtertext e-fltrTemp',\n                        title: column.headerText,\n                        id: column.field + '_filterBarcell',\n                    });\n                    innerDIV.appendChild(input);\n                }\n            }\n            else {\n                attributes(innerDIV, {\n                    'class': 'e-filterdiv e-fltrinputdiv'\n                });\n                input = this.parent.createElement('input', {\n                    id: column.field + '_filterBarcell', className: 'e-filtertext',\n                    attrs: {\n                        type: 'search', title: column.headerText + cell.attributes.title,\n                        value: data[cell.column.field] ? data[cell.column.field] : '', role: 'search'\n                    }\n                });\n                innerDIV.appendChild(input);\n                var args = {\n                    element: input, floatLabelType: 'Never',\n                    properties: {\n                        enableRtl: this.parent.enableRtl, showClearButton: true\n                    }\n                };\n                Input.createInput(args, this.parent.createElement);\n            }\n            //TODO: apply intial filtering\n            if (column.allowFiltering === false || column.field === '' || isNullOrUndefined(column.field)) {\n                input.setAttribute('disabled', 'true');\n                input.classList.add('e-disable');\n            }\n            if (!column.visible) {\n                node.classList.add('e-hide');\n            }\n            this.appendHtml(node, innerDIV);\n            if ((isNullOrUndefined(column.allowFiltering) || column.allowFiltering) && !isNullOrUndefined(column.filterBarTemplate)) {\n                var templateWrite = column.filterBarTemplate.write;\n                var args = { element: input, column: column };\n                if (typeof templateWrite === 'string') {\n                    templateWrite = getValue(templateWrite, window);\n                }\n                templateWrite.call(this, args);\n            }\n        }\n        return node;\n    };\n    /**\n     * Function to specifies how the result content to be placed in the cell.\n     * @param  {Element} node\n     * @param  {string|Element} innerHTML\n     * @returns Element\n     */\n    FilterCellRenderer.prototype.appendHtml = function (node, innerHtml) {\n        node.appendChild(innerHtml);\n        return node;\n    };\n    return FilterCellRenderer;\n}(CellRenderer));\nexport { FilterCellRenderer };\n","import { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * `filter operators` render boolean column.\n * @hidden\n */\nvar FlMenuOptrUI = /** @class */ (function () {\n    function FlMenuOptrUI(parent, customFltrOperators, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n        this.customFilterOperators = customFltrOperators;\n    }\n    /**\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.renderOperatorUI = function (dlgConetntEle, target, column, dlgObj) {\n        this.dialogObj = dlgObj;\n        var optr = column.type + 'Operator';\n        this.optrData = this.customOptr = (!isNullOrUndefined(this.parent.filterSettings.operators) &&\n            !isNullOrUndefined(this.parent.filterSettings.operators[optr])) ?\n            this.parent.filterSettings.operators[optr] : this.customFilterOperators[optr];\n        var dropDatasource = this.customOptr;\n        var selectedValue = this.dropSelectedVal(column, optr);\n        var optrDiv = this.parent.createElement('div', { className: 'e-flm_optrdiv' });\n        dlgConetntEle.appendChild(optrDiv);\n        var optrInput = this.parent.createElement('input', { id: column.uid + '-floptr' });\n        optrDiv.appendChild(optrInput);\n        this.dropOptr = new DropDownList({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            open: this.dropDownOpen.bind(this),\n            text: selectedValue\n        });\n        this.dropOptr.appendTo('#' + column.uid + '-floptr');\n    };\n    FlMenuOptrUI.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    FlMenuOptrUI.prototype.dropSelectedVal = function (col, optr) {\n        var selValue = '';\n        var columns = this.parent.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.field === column.field || (col.isForeignColumn() && col.foreignKeyValue === column.field)) {\n                var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', column.operator));\n                selValue = !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n            }\n        }\n        if (selValue === '') {\n            selValue = this.optrData[0].text;\n        }\n        return selValue;\n    };\n    /**\n     * @hidden\n     */\n    FlMenuOptrUI.prototype.getFlOperator = function () {\n        return this.dropOptr.value;\n    };\n    return FlMenuOptrUI;\n}());\nexport { FlMenuOptrUI };\n","import { AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getZIndexCalcualtion } from '../base/util';\n/**\n * `string filterui` render string column.\n * @hidden\n */\nvar StringFilterUI = /** @class */ (function () {\n    function StringFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    StringFilterUI.prototype.create = function (args) {\n        var data;\n        var floptr;\n        this.instance = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'strui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.dialogObj = args.dialogObj;\n        this.actObj = new AutoComplete(this.getAutoCompleteOptions(args));\n        this.actObj.appendTo(this.instance);\n    };\n    StringFilterUI.prototype.getAutoCompleteOptions = function (args) {\n        var _this = this;\n        var isForeignColumn = args.column.isForeignColumn();\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = { value: isForeignColumn ? args.column.foreignKeyValue : args.column.field };\n        return {\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            query: this.parent.query.clone(),\n            sortOrder: 'Ascending',\n            open: this.openPopup.bind(this),\n            cssClass: 'e-popup-flmenu',\n            focus: function () {\n                _this.actObj.filterType = args.getOptrInstance.getFlOperator();\n            },\n            autofill: true,\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            actionComplete: function (e) {\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObj) {\n                        return mapObj[_this.actObj.fields.value];\n                    }).indexOf(obj[_this.actObj.fields.value]) === index;\n                });\n            }\n        };\n    };\n    StringFilterUI.prototype.write = function (args) {\n        var columns = this.filterSettings.columns;\n        if (args.filteredValue !== '' && !isNullOrUndefined(args.filteredValue)) {\n            var struiObj = document.querySelector('#strui-' + args.column.uid).ej2_instances[0];\n            struiObj.value = args.filteredValue;\n        }\n    };\n    StringFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var actuiObj = document.querySelector('#strui-' + column.uid).ej2_instances[0];\n        if (Browser.isDevice) {\n            actuiObj.hidePopup();\n            actuiObj.focusOut();\n        }\n        var filterValue = actuiObj.value;\n        if (isNullOrUndefined(filterValue) || filterValue === '') {\n            filterValue = null;\n        }\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n    };\n    StringFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return StringFilterUI;\n}());\nexport { StringFilterUI };\n","import { NumericTextBox } from '@syncfusion/ej2-inputs';\n/**\n * `numberfilterui` render number column.\n * @hidden\n */\nvar NumberFilterUI = /** @class */ (function () {\n    function NumberFilterUI(parent, serviceLocator, filterSettings) {\n        this.filterSettings = filterSettings;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n    }\n    NumberFilterUI.prototype.create = function (args) {\n        this.instance = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'numberui-' + args.column.uid });\n        args.target.appendChild(this.instance);\n        this.numericTxtObj = new NumericTextBox({\n            format: args.column.format,\n            locale: this.parent.locale,\n            cssClass: 'e-popup-flmenu',\n            placeholder: args.localizeText.getConstant('EnterValue'),\n            enableRtl: this.parent.enableRtl,\n        });\n        this.numericTxtObj.appendTo(this.instance);\n    };\n    NumberFilterUI.prototype.write = function (args) {\n        var numberuiObj = document.querySelector('#numberui-' + args.column.uid).ej2_instances[0];\n        numberuiObj.value = args.filteredValue;\n    };\n    NumberFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var numberuiObj = document.querySelector('#numberui-' + column.uid).ej2_instances[0];\n        var filterValue = numberuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    return NumberFilterUI;\n}());\nexport { NumberFilterUI };\n","import { getZIndexCalcualtion } from '../base/util';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\n/**\n * `boolfilterui` render boolean column.\n * @hidden\n */\nvar BooleanFilterUI = /** @class */ (function () {\n    function BooleanFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.filterSettings = filterSettings;\n    }\n    BooleanFilterUI.prototype.create = function (args) {\n        var isForeignColumn = args.column.isForeignColumn();\n        var dataSource = isForeignColumn ? args.column.dataSource : this.parent.dataSource;\n        var fields = isForeignColumn ? args.column.foreignKeyValue : args.column.field;\n        this.elem = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'bool-ui-' + args.column.uid });\n        args.target.appendChild(this.elem);\n        this.dialogObj = args.dialogObj;\n        this.dropInstance = new DropDownList({\n            dataSource: dataSource instanceof DataManager ?\n                dataSource : new DataManager(dataSource),\n            query: new Query().select(fields),\n            fields: { text: fields, value: fields },\n            placeholder: args.localizeText.getConstant('SelectValue'),\n            cssClass: 'e-popup-flmenu',\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            open: this.openPopup.bind(this),\n            actionComplete: function (e) {\n                e.result = DataUtil.distinct(e.result, fields, true);\n            }\n        });\n        this.dropInstance.appendTo(this.elem);\n    };\n    BooleanFilterUI.prototype.write = function (args) {\n        var drpuiObj = document.querySelector('#bool-ui-' + args.column.uid).ej2_instances[0];\n        if (!isNullOrUndefined(args.filteredValue)) {\n            drpuiObj.text = args.filteredValue;\n        }\n    };\n    BooleanFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var drpuiObj = document.querySelector('#bool-ui-' + column.uid).ej2_instances[0];\n        var filterValue = drpuiObj.value;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', false);\n    };\n    BooleanFilterUI.prototype.openPopup = function (args) {\n        getZIndexCalcualtion(args, this.dialogObj);\n    };\n    return BooleanFilterUI;\n}());\nexport { BooleanFilterUI };\n","import { DatePicker } from '@syncfusion/ej2-calendars';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Internationalization } from '@syncfusion/ej2-base';\n/**\n * `datefilterui` render date column.\n * @hidden\n */\nvar DateFilterUI = /** @class */ (function () {\n    function DateFilterUI(parent, serviceLocator, filterSettings) {\n        this.parent = parent;\n        this.locator = serviceLocator;\n        this.fltrSettings = filterSettings;\n    }\n    DateFilterUI.prototype.create = function (args) {\n        var intl = new Internationalization();\n        var colFormat = args.column.format;\n        var format = intl.getDatePattern({ type: 'date', skeleton: colFormat }, false);\n        this.dialogObj = args.dialogObj;\n        this.inputElem = this.parent.createElement('input', { className: 'e-flmenu-input', id: 'dateui-' + args.column.uid });\n        args.target.appendChild(this.inputElem);\n        this.datePickerObj = new DatePicker({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: args.localizeText.getConstant('ChooseDate'),\n            width: '100%',\n            locale: this.parent.locale,\n            enableRtl: this.parent.enableRtl,\n            open: this.openPopup.bind(this),\n        });\n        this.datePickerObj.appendTo(this.inputElem);\n    };\n    DateFilterUI.prototype.write = function (args) {\n        var columns = this.fltrSettings.columns;\n        var dateuiObj = document.querySelector('#dateui-' + args.column.uid).ej2_instances[0];\n        dateuiObj.value = !isNullOrUndefined(args.filteredValue) ? new Date(args.filteredValue) : null;\n    };\n    DateFilterUI.prototype.read = function (element, column, filterOptr, filterObj) {\n        var dateuiObj = document.querySelector('#dateui-' + column.uid).ej2_instances[0];\n        var filterValue = dateuiObj.value;\n        filterValue = isNullOrUndefined(filterValue) ? null : filterValue;\n        filterObj.filterByColumn(column.field, filterOptr, filterValue, 'and', true);\n    };\n    DateFilterUI.prototype.openPopup = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    return DateFilterUI;\n}());\nexport { DateFilterUI };\n","import { isNullOrUndefined, getValue, remove } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { FlMenuOptrUI } from './filter-menu-operator';\nimport { StringFilterUI } from './string-filter-ui';\nimport { NumberFilterUI } from './number-filter-ui';\nimport { BooleanFilterUI } from './boolean-filter-ui';\nimport { DateFilterUI } from './date-filter-ui';\nimport { getFilterMenuPostion, parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * `filter menu` render boolean column.\n * @hidden\n */\nvar FilterMenuRenderer = /** @class */ (function () {\n    function FilterMenuRenderer(parent, filterSettings, serviceLocator, customFltrOperators, fltrObj) {\n        this.isDialogOpen = false;\n        this.colTypes = {\n            'string': StringFilterUI, 'number': NumberFilterUI, 'date': DateFilterUI, 'boolean': BooleanFilterUI, 'datetime': DateFilterUI\n        };\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.customFilterOperators = customFltrOperators;\n        this.filterObj = fltrObj;\n        this.flMuiObj = new FlMenuOptrUI(this.parent, this.customFilterOperators, this.serviceLocator);\n        this.l10n = this.serviceLocator.getService('localization');\n    }\n    FilterMenuRenderer.prototype.openDialog = function (args) {\n        this.col = this.parent.getColumnByField(args.field);\n        if (isNullOrUndefined(this.col.filter) || (isNullOrUndefined(this.col.filter.type) || this.col.filter.type === 'Menu')) {\n            this.renderDlgContent(args.target, this.col);\n        }\n    };\n    FilterMenuRenderer.prototype.closeDialog = function () {\n        if (!this.dlgObj) {\n            return;\n        }\n        var elem = document.getElementById(this.dlgObj.element.id);\n        if (this.dlgObj && !this.dlgObj.isDestroyed && elem) {\n            this.parent.notify(events.filterMenuClose, { field: this.col.field });\n            this.isDialogOpen = false;\n            this.dlgObj.destroy();\n            remove(elem);\n        }\n    };\n    FilterMenuRenderer.prototype.renderDlgContent = function (target, column) {\n        var args = {\n            requestType: events.filterBeforeOpen, filterModel: this,\n            columnName: column.field, columnType: column.type\n        };\n        this.parent.trigger(events.actionBegin, args);\n        var mainDiv = this.parent.createElement('div', { className: 'e-flmenu-maindiv', id: column.uid + '-flmenu' });\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-flmenu', id: column.uid + '-flmdlg' });\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            created: this.dialogCreated.bind(this, target, column),\n            position: this.parent.element.classList.contains('e-device') ? { X: 'center', Y: 'center' } : { X: '', Y: '' },\n            target: this.parent.element.classList.contains('e-device') ? document.body : this.parent.element,\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.l10n.getConstant('FilterButton'), isPrimary: true, cssClass: 'e-flmenu-okbtn'\n                    }\n                },\n                {\n                    click: this.clearBtnClick.bind(this, column),\n                    buttonModel: { content: this.l10n.getConstant('ClearButton'), cssClass: 'e-flmenu-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: (!isNullOrUndefined(parentsUntil(target, 'e-bigger'))) || this.parent.element.classList.contains('e-device') ? 260 : 250,\n            animationSettings: { effect: 'None' },\n            cssClass: 'e-filter-popup'\n        });\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    FilterMenuRenderer.prototype.dialogCreated = function (target, column) {\n        if (!Browser.isDevice) {\n            getFilterMenuPostion(target, this.dlgObj, this.parent);\n        }\n        this.renderFilterUI(target, column);\n        this.parent.notify(events.filterDialogCreated, {});\n        this.dlgObj.element.style.maxHeight = '350px';\n        this.dlgObj.show();\n        this.writeMethod(column, this.dlgObj.element.querySelector('#' + column.uid + '-flmenu'));\n        var args = {\n            requestType: events.filterAfterOpen,\n            filterModel: this, columnName: column.field, columnType: column.type\n        };\n        this.isDialogOpen = true;\n        this.parent.trigger(events.actionComplete, args);\n    };\n    FilterMenuRenderer.prototype.renderFilterUI = function (target, col) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-flmenu-maindiv');\n        this.renderOperatorUI(dlgConetntEle, target, col);\n        this.renderFlValueUI(dlgConetntEle, target, col);\n    };\n    FilterMenuRenderer.prototype.renderOperatorUI = function (dlgConetntEle, target, column) {\n        this.flMuiObj.renderOperatorUI(dlgConetntEle, target, column, this.dlgObj);\n    };\n    FilterMenuRenderer.prototype.renderFlValueUI = function (dlgConetntEle, target, column) {\n        var valueDiv = this.parent.createElement('div', { className: 'e-flmenu-valuediv' });\n        dlgConetntEle.appendChild(valueDiv);\n        var args = { target: valueDiv, column: column, getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj };\n        var instanceofFilterUI = new this.colTypes[column.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (!isNullOrUndefined(column.filter) && !isNullOrUndefined(column.filter.ui)\n            && !isNullOrUndefined(column.filter.ui.create)) {\n            var temp = column.filter.ui.create;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n            }\n            temp({\n                column: column, target: valueDiv,\n                getOptrInstance: this.flMuiObj, dialogObj: this.dlgObj\n            });\n        }\n        else {\n            instanceofFilterUI.create({\n                column: column, target: valueDiv,\n                getOptrInstance: this.flMuiObj, localizeText: this.l10n, dialogObj: this.dlgObj\n            });\n        }\n    };\n    FilterMenuRenderer.prototype.writeMethod = function (col, dlgContentEle) {\n        var flValue;\n        var target = dlgContentEle.querySelector('.e-flmenu-valinput');\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var column = columns_1[_i];\n            if (col.field === column.field || col.foreignKeyValue === column.field) {\n                flValue = column.value;\n            }\n        }\n        if (!isNullOrUndefined(col.filter) && !isNullOrUndefined(col.filter.ui)\n            && !isNullOrUndefined(col.filter.ui.write)) {\n            var temp = col.filter.ui.write;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n            }\n            temp({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n        else {\n            instanceofFilterUI.write({ column: col, target: target, parent: this.parent, filteredValue: flValue });\n        }\n    };\n    FilterMenuRenderer.prototype.filterBtnClick = function (col) {\n        var flValue;\n        var flOptrValue;\n        var targ = this.dlgObj.element.querySelector('.e-flmenu-valuediv input');\n        flOptrValue = this.flMuiObj.getFlOperator();\n        var instanceofFilterUI = new this.colTypes[col.type](this.parent, this.serviceLocator, this.parent.filterSettings);\n        if (!isNullOrUndefined(col.filter) &&\n            !isNullOrUndefined(col.filter.ui) && !isNullOrUndefined(col.filter.ui.read)) {\n            var temp = col.filter.ui.read;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n            }\n            flValue = temp({ element: targ, column: col, operator: flOptrValue, fltrObj: this.filterObj });\n        }\n        else {\n            instanceofFilterUI.read(targ, col, flOptrValue, this.filterObj);\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var column = this.parent.element.querySelector('[e-mappinguid=\"' + col.uid + '\"]').parentElement;\n        var flIcon = column.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.add('e-filtered');\n        }\n        this.closeDialog();\n    };\n    FilterMenuRenderer.prototype.clearBtnClick = function (column) {\n        this.filterObj.removeFilteredColsByField(column.field);\n        this.closeDialog();\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        var col = this.parent.element.querySelector('[e-mappinguid=\"' + column.uid + '\"]').parentElement;\n        var flIcon = col.querySelector(iconClass);\n        if (flIcon) {\n            flIcon.classList.remove('e-filtered');\n        }\n    };\n    FilterMenuRenderer.prototype.destroy = function () {\n        this.closeDialog();\n    };\n    return FilterMenuRenderer;\n}());\nexport { FilterMenuRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, remove, Browser } from '@syncfusion/ej2-base';\nimport { parentsUntil, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nimport { ContextMenu } from '@syncfusion/ej2-navigations';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { isNullOrUndefined, } from '@syncfusion/ej2-base';\nimport { Internationalization } from '@syncfusion/ej2-base';\nimport { Query, DataManager, Predicate } from '@syncfusion/ej2-data';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, AutoComplete } from '@syncfusion/ej2-dropdowns';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { RadioButton, CheckBox } from '@syncfusion/ej2-buttons';\nimport { distinctStringValues, isComplexField, getComplexFieldID } from '../base/util';\nimport { generateQuery } from '../base/constant';\nimport { DatePicker } from '@syncfusion/ej2-calendars';\n/**\n * @hidden\n * `ExcelFilter` module is used to handle filtering action.\n */\nvar ExcelFilter = /** @class */ (function (_super) {\n    __extends(ExcelFilter, _super);\n    /**\n     * Constructor for excel filtering module\n     * @hidden\n     */\n    function ExcelFilter(parent, filterSettings, serviceLocator, customFltrOperators) {\n        var _this = _super.call(this, parent, filterSettings, serviceLocator) || this;\n        _this.customFilterOperators = customFltrOperators;\n        _this.isExcel = true;\n        return _this;\n    }\n    ExcelFilter.prototype.getCMenuDS = function (type, operator) {\n        var options = {\n            number: ['Equal', 'NotEqual', '', 'LessThan', 'LessThanOrEqual', 'GreaterThan',\n                'GreaterThanOrEqual', 'Between', '', 'CustomFilter'],\n            string: ['Equal', 'NotEqual', '', 'StartsWith', 'EndsWith', '', 'Contains', '', 'CustomFilter'],\n        };\n        options.date = options.number;\n        options.datetime = options.number;\n        var model = [];\n        for (var i = 0; i < options[type].length; i++) {\n            if (options[type][i].length) {\n                if (operator) {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...',\n                        iconCss: 'e-icons e-icon-check ' + (operator === options[type][i].toLowerCase() ? '' : 'e-emptyicon')\n                    });\n                }\n                else {\n                    model.push({\n                        text: this.getLocalizedLabel(options[type][i]) + '...'\n                    });\n                }\n            }\n            else {\n                model.push({ separator: true });\n            }\n        }\n        return model;\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    ExcelFilter.prototype.destroy = function () {\n        if (this.dlg) {\n            this.unwireExEvents();\n            _super.prototype.destroy.call(this);\n        }\n        if (this.cmenu && this.cmenu.parentElement) {\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilter.prototype.createMenu = function (type, isFiltered, isCheckIcon) {\n        var options = { string: 'TextFilter', date: 'DateFilter', datetime: 'DateFilter', number: 'NumberFilter' };\n        this.menu = this.parent.createElement('div', { className: 'e-contextmenu-wrapper' });\n        if (this.parent.enableRtl) {\n            this.menu.classList.add('e-rtl');\n        }\n        else {\n            this.menu.classList.remove('e-rtl');\n        }\n        var ul = this.parent.createElement('ul');\n        var icon = isFiltered ? 'e-excl-filter-icon e-filtered' : 'e-excl-filter-icon';\n        ul.appendChild(this.createMenuElem(this.getLocalizedLabel('ClearFilter'), isFiltered ? '' : 'e-disabled', icon));\n        if (type !== 'boolean') {\n            ul.appendChild(this.createMenuElem(this.getLocalizedLabel(options[type]), 'e-submenu', isCheckIcon && this.ensureTextFilter() ? 'e-icon-check' : icon + ' e-emptyicon', true));\n        }\n        this.menu.appendChild(ul);\n    };\n    ExcelFilter.prototype.createMenuElem = function (val, className, iconName, isSubMenu) {\n        var li = this.parent.createElement('li', { className: className + ' e-menu-item' });\n        li.innerHTML = val;\n        li.insertBefore(this.parent.createElement('span', { className: 'e-menu-icon e-icons ' + iconName }), li.firstChild);\n        if (isSubMenu) {\n            li.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n        }\n        return li;\n    };\n    ExcelFilter.prototype.wireExEvents = function () {\n        EventHandler.add(this.dlg, 'mouseover', this.hoverHandler, this);\n        EventHandler.add(this.dlg, 'click', this.clickExHandler, this);\n    };\n    ExcelFilter.prototype.unwireExEvents = function () {\n        EventHandler.remove(this.dlg, 'mouseover', this.hoverHandler);\n        EventHandler.remove(this.dlg, 'click', this.clickExHandler);\n    };\n    ExcelFilter.prototype.clickExHandler = function (e) {\n        var menuItem = parentsUntil(e.target, 'e-menu-item');\n        if (menuItem && this.getLocalizedLabel('ClearFilter') === menuItem.innerText.trim()) {\n            this.clearFilter();\n            this.closeDialog();\n        }\n    };\n    ExcelFilter.prototype.destroyCMenu = function () {\n        if (this.menuObj && !this.menuObj.isDestroyed) {\n            this.menuObj.destroy();\n            remove(this.cmenu);\n        }\n    };\n    ExcelFilter.prototype.hoverHandler = function (e) {\n        var target = e.target.querySelector('.e-contextmenu');\n        var li = parentsUntil(e.target, 'e-menu-item');\n        var focused = this.menu.querySelector('.e-focused');\n        var isSubMenu;\n        if (focused) {\n            focused.classList.remove('e-focused');\n        }\n        if (li) {\n            li.classList.add('e-focused');\n            isSubMenu = li.classList.contains('e-submenu');\n        }\n        if (target) {\n            return;\n        }\n        if (!isSubMenu) {\n            var submenu = this.menu.querySelector('.e-submenu');\n            if (!isNullOrUndefined(submenu)) {\n                submenu.classList.remove('e-selected');\n            }\n            this.isCMenuOpen = false;\n            this.destroyCMenu();\n        }\n        var selectedMenu = this.ensureTextFilter();\n        if (!this.isCMenuOpen && isSubMenu) {\n            li.classList.add('e-selected');\n            this.isCMenuOpen = true;\n            var menuOptions = {\n                items: this.getCMenuDS(this.options.type, selectedMenu ? selectedMenu.replace(/\\s/g, '') : undefined),\n                select: this.selectHandler.bind(this),\n                onClose: this.destroyCMenu.bind(this),\n                enableRtl: this.parent.enableRtl,\n                beforeClose: this.preventClose\n            };\n            this.parent.element.appendChild(this.cmenu);\n            this.menuObj = new ContextMenu(menuOptions, this.cmenu);\n            var client = this.menu.querySelector('.e-submenu').getBoundingClientRect();\n            var pos = { top: 0, left: 0 };\n            if (Browser.isDevice) {\n                var contextRect = this.getContextBounds(this.menuObj);\n                pos.top = (window.innerHeight - contextRect.height) / 2;\n                pos.left = (window.innerWidth - contextRect.width) / 2;\n                this.closeDialog();\n            }\n            else {\n                pos.top = client.top;\n                pos.left = this.getCMenuYPosition(this.dlg, this.menuObj);\n            }\n            this.menuObj.open(pos.top, pos.left, e.target);\n        }\n    };\n    ExcelFilter.prototype.ensureTextFilter = function () {\n        var selectedMenu;\n        var predicates = this.existingPredicate[this.options.field];\n        if (predicates && predicates.length === 2) {\n            if (predicates[0].operator === 'greaterThanOrEqual' && predicates[1].operator === 'lessThanOrEqual') {\n                selectedMenu = 'Between';\n            }\n            else {\n                selectedMenu = 'CustomFilter';\n            }\n        }\n        else {\n            if (predicates && predicates.length === 1) {\n                this.optrData = this.customFilterOperators[this.options.type + 'Operator'];\n                selectedMenu = predicates[0].operator;\n            }\n        }\n        return selectedMenu;\n    };\n    ExcelFilter.prototype.preventClose = function (args) {\n        if (args.event instanceof MouseEvent && args.event.target.classList.contains('e-submenu')) {\n            args.cancel = true;\n        }\n    };\n    ExcelFilter.prototype.getContextBounds = function (context) {\n        var elementVisible = this.menuObj.element.style.display;\n        this.menuObj.element.style.display = 'block';\n        return this.menuObj.element.getBoundingClientRect();\n    };\n    ExcelFilter.prototype.getCMenuYPosition = function (target, context) {\n        var contextWidth = this.getContextBounds(context).width;\n        var targetPosition = target.getBoundingClientRect();\n        var leftPos = targetPosition.right + contextWidth - this.parent.element.clientWidth;\n        return (leftPos < 1) ? (targetPosition.right + 1) : (targetPosition.left - contextWidth - 1);\n    };\n    ExcelFilter.prototype.openDialog = function (options) {\n        var _this = this;\n        this.updateModel(options);\n        this.getAndSetChkElem(options);\n        this.showDialog(options);\n        this.dialogObj.dataBind();\n        var filterLength = (this.existingPredicate[options.field] && this.existingPredicate[options.field].length) ||\n            this.options.filteredColumns.filter(function (col) {\n                return _this.options.field === col.field;\n            }).length;\n        this.createMenu(options.type, filterLength > 0, (filterLength === 1 || filterLength === 2));\n        this.dlg.insertBefore(this.menu, this.dlg.firstChild);\n        this.dlg.classList.add('e-excelfilter');\n        this.dlg.classList.remove('e-checkboxfilter');\n        this.cmenu = this.parent.createElement('ul', { className: 'e-excel-menu' });\n        this.wireExEvents();\n    };\n    ExcelFilter.prototype.closeDialog = function () {\n        _super.prototype.closeDialog.call(this);\n    };\n    ExcelFilter.prototype.selectHandler = function (e) {\n        if (e.item) {\n            this.menuItem = e.item;\n            this.renderDialogue(e);\n        }\n    };\n    ExcelFilter.prototype.renderDialogue = function (e) {\n        var _this = this;\n        var target = e.element;\n        var column = this.options.field;\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var mainDiv = this.parent.createElement('div', {\n            className: 'e-xlfl-maindiv',\n            id: isComplex ? complexFieldName + '-xlflmenu' : column + '-xlflmenu'\n        });\n        this.dlgDiv = this.parent.createElement('div', {\n            className: 'e-xlflmenu',\n            id: isComplex ? complexFieldName + '-xlfldlg' : column + '-xlfldlg'\n        });\n        this.parent.element.appendChild(this.dlgDiv);\n        this.dlgObj = new Dialog({\n            header: this.getLocalizedLabel('CustomFilter'),\n            isModal: true,\n            overlayClick: this.removeDialog.bind(this),\n            showCloseIcon: true,\n            closeOnEscape: false,\n            target: document.body,\n            // target: this.parent.element,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            open: function () {\n                var row = _this.dlgObj.element.querySelector('table.e-xlfl-table>tr');\n                row.cells[1].querySelector('input:not([type=hidden])').focus();\n            },\n            close: this.removeDialog.bind(this),\n            created: this.createdDialog.bind(this, target, column),\n            buttons: [{\n                    click: this.filterBtnClick.bind(this, column),\n                    buttonModel: {\n                        content: this.getLocalizedLabel('OKButton'), isPrimary: true, cssClass: 'e-xlfl-okbtn'\n                    }\n                },\n                {\n                    click: this.removeDialog.bind(this),\n                    buttonModel: { content: this.getLocalizedLabel('CancelButton'), cssClass: 'e-xlfl-cancelbtn' }\n                }],\n            content: mainDiv,\n            width: 430,\n            animationSettings: { effect: 'None' },\n        });\n        this.dlgObj.appendTo(this.dlgDiv);\n    };\n    ExcelFilter.prototype.removeDialog = function () {\n        this.removeObjects([this.dropOptr, this.datePicker, this.actObj, this.numericTxtObj, this.dlgObj]);\n        remove(this.dlgDiv);\n    };\n    ExcelFilter.prototype.clearBtnClick = function (field) {\n        this.clearFilter();\n        this.removeDialog();\n    };\n    ExcelFilter.prototype.createdDialog = function (target, column) {\n        this.renderCustomFilter(target, column);\n        this.dlgObj.element.style.left = '0px';\n        this.dlgObj.element.style.top = '0px';\n        if (Browser.isDevice && window.innerWidth < 440) {\n            this.dlgObj.element.style.width = '90%';\n        }\n        this.dlgObj.show();\n    };\n    ExcelFilter.prototype.renderCustomFilter = function (target, column) {\n        var dlgConetntEle = this.dlgObj.element.querySelector('.e-xlfl-maindiv');\n        /* tslint:disable-next-line:max-line-length */\n        var dlgFields = this.parent.createElement('div', { innerHTML: this.getLocalizedLabel('ShowRowsWhere'), className: 'e-xlfl-dlgfields' });\n        dlgConetntEle.appendChild(dlgFields);\n        //column name\n        var fieldSet = this.parent.createElement('div', { innerHTML: this.options.displayName, className: 'e-xlfl-fieldset' });\n        dlgConetntEle.appendChild(fieldSet);\n        this.renderFilterUI(column, dlgConetntEle);\n    };\n    ExcelFilter.prototype.filterBtnClick = function (col) {\n        var isComplex = !isNullOrUndefined(col) && isComplexField(col);\n        var complexFieldName = !isNullOrUndefined(col) && getComplexFieldID(col);\n        var colValue = isComplex ? complexFieldName : col;\n        var fValue = this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstvalue').ej2_instances[0];\n        var fOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-frstoptr').ej2_instances[0];\n        var sValue = this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndvalue').ej2_instances[0];\n        var sOperator = this.dlgDiv.querySelector('#' + colValue + '-xlfl-secndoptr').ej2_instances[0];\n        var checkBoxValue;\n        if (this.options.type === 'string') {\n            var checkBox = this.dlgDiv.querySelector('#' + colValue + '-xlflmtcase').ej2_instances[0];\n            checkBoxValue = checkBox.checked;\n        }\n        var andRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-frstpredicate').ej2_instances[0];\n        var orRadio = this.dlgDiv.querySelector('#' + colValue + 'e-xlfl-secndpredicate').ej2_instances[0];\n        var predicate = (andRadio.checked ? 'and' : 'or');\n        if (sValue.value === null) {\n            predicate = 'or';\n        }\n        this.filterByColumn(this.options.field, fOperator.value, fValue.value, predicate, checkBoxValue, this.parent.filterSettings.ignoreAccent, sOperator.value, sValue.value);\n        this.removeDialog();\n    };\n    /**\n     * Filters grid row by column name with given options.\n     * @param {string} fieldName - Defines the field name of the filter column.\n     * @param {string} firstOperator - Defines the first operator by how to filter records.\n     * @param {string | number | Date | boolean} firstValue - Defines the first value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship between one filter query with another by using AND or OR predicate.\n     * @param {boolean} matchCase - If ignore case set to true, then filter records with exact match or else\n     * filter records with case insensitive(uppercase and lowercase letters treated as same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then ignores the diacritic characters or accents when filtering.\n     * @param {string} secondOperator - Defines the second operator by how to filter records.\n     * @param {string | number | Date | boolean} secondValue - Defines the first value which is used to filter records.\n     */\n    ExcelFilter.prototype.filterByColumn = function (fieldName, firstOperator, firstValue, predicate, matchCase, ignoreAccent, secondOperator, secondValue) {\n        var _this = this;\n        var col = this.parent.getColumnByField(fieldName);\n        var field = col.isForeignColumn() ? col.foreignKeyValue : fieldName;\n        var fColl = [];\n        var mPredicate;\n        fColl.push({\n            field: field,\n            predicate: predicate,\n            matchCase: matchCase,\n            ignoreAccent: ignoreAccent,\n            operator: firstOperator,\n            value: firstValue,\n            type: this.options.type\n        });\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, {\n                instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: firstOperator, arg3: firstValue, arg4: predicate,\n                arg5: matchCase, arg6: ignoreAccent, arg7: secondOperator, arg8: secondValue\n            });\n            return;\n        }\n        mPredicate = new Predicate(field, firstOperator.toLowerCase(), firstValue, !matchCase, ignoreAccent);\n        if (secondValue) {\n            secondOperator = !isNullOrUndefined(secondOperator) ? secondOperator : 'equal';\n            fColl.push({\n                field: field,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: secondOperator,\n                value: secondValue,\n                type: this.options.type\n            });\n            /*Â tslint:disable-next-line:max-line-length */\n            mPredicate = mPredicate[predicate](field, secondOperator.toLowerCase(), secondValue, !matchCase, ignoreAccent);\n        }\n        var args = {\n            action: 'filtering', filterCollection: fColl, field: this.options.field,\n            ejpredicate: mPredicate, actualPredicate: fColl\n        };\n        var fPredicate = {};\n        var filterCollection = [];\n        if (col.isForeignColumn()) {\n            this.options.column.dataSource.\n                executeQuery(new Query().where(mPredicate)).then(function (e) {\n                _this.options.column.columnData = e.result;\n                _this.parent.notify(generateQuery, { predicate: fPredicate, column: col });\n                args.ejpredicate = fPredicate.predicate.predicates;\n                fPredicate.predicate.predicates.forEach(function (fpred) {\n                    filterCollection.push({\n                        field: fpred.field,\n                        predicate: 'or',\n                        matchCase: fpred.ignoreCase,\n                        ignoreAccent: fpred.ignoreAccent,\n                        operator: fpred.operator,\n                        value: fpred.value,\n                        type: _this.options.type\n                    });\n                });\n                args.filterCollection = filterCollection.length ? filterCollection :\n                    fColl.filter(function (col) { return col.field = _this.options.field; });\n                _this.options.handler(args);\n            });\n        }\n        else {\n            this.options.handler(args);\n        }\n    };\n    /*Â tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderOperatorUI = function (column, table, elementID, predicates, isFirst) {\n        var fieldElement = this.parent.createElement('tr', { className: 'e-xlfl-fields' });\n        table.appendChild(fieldElement);\n        var xlfloptr = this.parent.createElement('td', { className: 'e-xlfl-optr' });\n        fieldElement.appendChild(xlfloptr);\n        var optrDiv = this.parent.createElement('div', { className: 'e-xlfl-optrdiv' });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var optrInput = this.parent\n            .createElement('input', { id: isComplex ? complexFieldName + elementID : column + elementID });\n        optrDiv.appendChild(optrInput);\n        xlfloptr.appendChild(optrDiv);\n        var optr = this.options.type + 'Operator';\n        var dropDatasource = this.customFilterOperators[optr];\n        this.optrData = dropDatasource;\n        var selectedValue = this.dropSelectedVal(column, predicates, isFirst);\n        //Trailing three dots are sliced.\n        var menuText = '';\n        if (this.menuItem) {\n            menuText = this.menuItem.text.slice(0, -3);\n            if (menuText !== this.getLocalizedLabel('CustomFilter')) {\n                selectedValue = isFirst ? menuText : undefined;\n            }\n            if (menuText === this.getLocalizedLabel('Between')) {\n                selectedValue = this.getLocalizedLabel(isFirst ? 'GreaterThanOrEqual' : 'LessThanOrEqual');\n            }\n        }\n        this.dropOptr = new DropDownList({\n            dataSource: dropDatasource,\n            fields: { text: 'text', value: 'value' },\n            text: selectedValue,\n            open: this.dropDownOpen.bind(this),\n            enableRtl: this.parent.enableRtl\n        });\n        this.dropOptr.appendTo(optrInput);\n        var operator = this.getSelectedValue(selectedValue);\n        return { fieldElement: fieldElement, operator: operator };\n    };\n    ExcelFilter.prototype.dropDownOpen = function (args) {\n        args.popup.element.style.zIndex = (this.dialogObj.zIndex + 1).toString();\n    };\n    ExcelFilter.prototype.getSelectedValue = function (text) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('text', 'equal', text));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].value : '';\n    };\n    ExcelFilter.prototype.dropSelectedVal = function (col, predicates, isFirst) {\n        var operator;\n        if (predicates && predicates.length > 0) {\n            operator = predicates.length === 2 ?\n                (isFirst ? predicates[0].operator : predicates[1].operator) :\n                (isFirst ? predicates[0].operator : undefined);\n        }\n        else {\n            operator = isFirst ? 'equal' : undefined;\n        }\n        return this.getSelectedText(operator);\n    };\n    ExcelFilter.prototype.getSelectedText = function (operator) {\n        var selectedField = new DataManager(this.optrData).executeLocal(new Query().where('value', 'equal', operator));\n        return !isNullOrUndefined(selectedField[0]) ? selectedField[0].text : '';\n    };\n    ExcelFilter.prototype.renderFilterUI = function (column, dlgConetntEle) {\n        var predicates = this.existingPredicate[column];\n        var table = this.parent.createElement('table', { className: 'e-xlfl-table' });\n        dlgConetntEle.appendChild(table);\n        var colGroup = this.parent.createElement('colGroup');\n        colGroup.innerHTML = '<col style=\"width: 50%\"></col><col style=\"width: 50%\"></col>';\n        table.appendChild(colGroup);\n        //Renders first dropdown\n        /*Â tslint:disable-next-line:max-line-length */\n        var optr = this.renderOperatorUI(column, table, '-xlfl-frstoptr', predicates, true);\n        //Renders first value\n        this.renderFlValueUI(column, optr, '-xlfl-frstvalue', predicates, true);\n        var predicate = this.parent.createElement('tr', { className: 'e-xlfl-predicate' });\n        table.appendChild(predicate);\n        //Renders first radion button\n        this.renderRadioButton(column, predicate, predicates);\n        //Renders second dropdown\n        optr = this.renderOperatorUI(column, table, '-xlfl-secndoptr', predicates, false);\n        //Renders second text box\n        this.renderFlValueUI(column, optr, '-xlfl-secndvalue', predicates, false);\n    };\n    ExcelFilter.prototype.renderRadioButton = function (column, tr, predicates) {\n        var td = this.parent.createElement('td', { className: 'e-xlfl-radio', attrs: { 'colSpan': '2' } });\n        tr.appendChild(td);\n        var radioDiv = this.parent\n            .createElement('div', { className: 'e-xlfl-radiodiv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        /* tslint:disable-next-line:max-line-length */\n        var frstpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-frstpredicate' : column + 'e-xlfl-frstpredicate', attrs: { 'type': 'radio' } });\n        /* tslint:disable-next-line:max-line-length */\n        var secndpredicate = this.parent.createElement('input', { id: isComplex ? complexFieldName + 'e-xlfl-secndpredicate' : column + 'e-xlfl-secndpredicate', attrs: { 'type': 'radio' } });\n        //appends into div\n        radioDiv.appendChild(frstpredicate);\n        radioDiv.appendChild(secndpredicate);\n        td.appendChild(radioDiv);\n        if (this.options.type === 'string') {\n            this.renderMatchCase(column, tr, td, '-xlflmtcase', predicates);\n        }\n        // Initialize AND RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var andRadio = new RadioButton({ label: this.getLocalizedLabel('AND'), name: 'default', cssClass: 'e-xlfl-radio-and', checked: true, enableRtl: this.parent.enableRtl });\n        // Initialize OR RadioButton component.\n        /* tslint:disable-next-line:max-line-length */\n        var orRadio = new RadioButton({ label: this.getLocalizedLabel('OR'), name: 'default', cssClass: 'e-xlfl-radio-or', enableRtl: this.parent.enableRtl });\n        var flValue = predicates && predicates.length === 2 ? predicates[1].predicate : 'and';\n        if (flValue === 'and') {\n            andRadio.checked = true;\n            orRadio.checked = false;\n        }\n        else {\n            orRadio.checked = true;\n            andRadio.checked = false;\n        }\n        // Render initialized RadioButton.\n        andRadio.appendTo(frstpredicate);\n        orRadio.appendTo(secndpredicate);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelFilter.prototype.removeObjects = function (elements) {\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var obj = elements_1[_i];\n            if (obj && !obj.isDestroyed) {\n                obj.destroy();\n            }\n        }\n    };\n    /*Â tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderFlValueUI = function (column, optr, elementId, predicates, isFirst) {\n        var value = this.parent.createElement('td', { className: 'e-xlfl-value' });\n        optr.fieldElement.appendChild(value);\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var valueDiv = this.parent.createElement('div', { className: 'e-xlfl-valuediv' });\n        var valueInput = this.parent.createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId });\n        valueDiv.appendChild(valueInput);\n        value.appendChild(valueDiv);\n        var flValue;\n        var predicate;\n        if (predicates && predicates.length > 0) {\n            predicate = predicates.length === 2 ?\n                (isFirst ? predicates[0] : predicates[1]) :\n                (isFirst ? predicates[0] : undefined);\n            flValue = (predicate && predicate.operator === optr.operator) ? predicate.value : undefined;\n        }\n        var types = {\n            'string': this.renderAutoComplete.bind(this),\n            'number': this.renderNumericTextBox.bind(this),\n            'date': this.renderDate.bind(this),\n            'datetime': this.renderDate.bind(this)\n        };\n        types[this.options.type](this.options, column, valueInput, flValue, this.parent.enableRtl);\n    };\n    /*Â tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderMatchCase = function (column, tr, matchCase, elementId, predicates) {\n        /*Â tslint:disable-next-line:max-line-length */\n        var matchCaseDiv = this.parent.createElement('div', { className: 'e-xlfl-matchcasediv', attrs: { 'style': 'display: inline-block' } });\n        var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n        var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n        var matchCaseInput = this.parent.createElement('input', { id: isComplex ? complexFieldName + elementId : column + elementId, attrs: { 'type': 'checkbox' } });\n        matchCaseDiv.appendChild(matchCaseInput);\n        matchCase.appendChild(matchCaseDiv);\n        var flValue = predicates && predicates.length > 0 ?\n            (predicates && predicates.length === 2 ? predicates[1].matchCase : predicates[0].matchCase) :\n            false;\n        // Initialize Match Case check box.\n        var checkbox = new CheckBox({\n            label: this.getLocalizedLabel('MatchCase'),\n            enableRtl: this.parent.enableRtl, checked: flValue\n        });\n        // Render initialized CheckBox.\n        checkbox.appendTo(matchCaseInput);\n    };\n    /*Â tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderDate = function (options, column, inputValue, fValue, isRtl) {\n        var intl = new Internationalization();\n        var format = intl.getDatePattern({ type: 'date', skeleton: options.format }, false);\n        this.datePicker = new DatePicker({\n            format: format,\n            cssClass: 'e-popup-flmenu',\n            placeholder: this.getLocalizedLabel('CustomFilterDatePlaceHolder'),\n            width: '100%',\n            enableRtl: isRtl,\n            value: new Date(fValue),\n        });\n        this.datePicker.appendTo(inputValue);\n    };\n    ExcelFilter.prototype.completeAction = function (e) {\n        e.result = distinctStringValues(e.result);\n    };\n    /*Â tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderNumericTextBox = function (options, column, inputValue, fValue, isRtl) {\n        this.numericTxtObj = new NumericTextBox({\n            format: options.format,\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            value: fValue\n        });\n        this.numericTxtObj.appendTo(inputValue);\n    };\n    /*Â tslint:disable-next-line:max-line-length */\n    ExcelFilter.prototype.renderAutoComplete = function (options, column, inputValue, fValue, isRtl) {\n        var _this = this;\n        var colObj = this.parent.getColumnByField(column);\n        var isForeignColumn = colObj.isForeignColumn();\n        var dataSource = isForeignColumn ? colObj.dataSource : options.dataSource;\n        var fields = { value: isForeignColumn ? colObj.foreignKeyValue : column };\n        var actObj = new AutoComplete({\n            dataSource: dataSource instanceof DataManager ? dataSource : new DataManager(dataSource),\n            fields: fields,\n            query: this.parent.query.clone(),\n            sortOrder: 'Ascending',\n            locale: this.parent.locale,\n            autofill: true,\n            focus: function () {\n                var isComplex = !isNullOrUndefined(column) && isComplexField(column);\n                var complexFieldName = !isNullOrUndefined(column) && getComplexFieldID(column);\n                var columnvalue = isComplex ? complexFieldName : column;\n                actObj.filterType = _this.dlgDiv.querySelector('#' + columnvalue +\n                    (inputValue.id === (columnvalue + '-xlfl-frstvalue') ?\n                        '-xlfl-frstoptr' :\n                        '-xlfl-secndoptr')).ej2_instances[0].value;\n                actObj.ignoreCase = options.type === 'string' ?\n                    !_this.dlgDiv.querySelector('#' + columnvalue + '-xlflmtcase').ej2_instances[0].checked :\n                    true;\n                actObj.filterType = !isNullOrUndefined(actObj.filterType) ? actObj.filterType :\n                    'equal';\n            },\n            placeholder: this.getLocalizedLabel('CustomFilterPlaceHolder'),\n            enableRtl: isRtl,\n            actionComplete: function (e) {\n                e.result = e.result.filter(function (obj, index, arr) {\n                    return arr.map(function (mapObject) {\n                        return mapObject[actObj.fields.value];\n                    }).indexOf(obj[_this.actObj.fields.value]) === index;\n                });\n            },\n            value: fValue\n        });\n        actObj.appendTo(inputValue);\n        this.actObj = actObj;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    ExcelFilter.prototype.getModuleName = function () {\n        return 'excelFilter';\n    };\n    return ExcelFilter;\n}(CheckBoxFilter));\nexport { ExcelFilter };\n","import { EventHandler, isNullOrUndefined, extend, closest, getValue } from '@syncfusion/ej2-base';\nimport { getActualPropFromColl, isActionPrevent, getColumnByForeignKeyValue } from '../base/util';\nimport { remove, matches } from '@syncfusion/ej2-base';\nimport { DataUtil, Query, DataManager } from '@syncfusion/ej2-data';\nimport * as events from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { Cell } from '../models/cell';\nimport { Row } from '../models/row';\nimport { FilterCellRenderer } from '../renderer/filter-cell-renderer';\nimport { parentsUntil } from '../base/util';\nimport { FilterMenuRenderer } from '../renderer/filter-menu-renderer';\nimport { CheckBoxFilter } from '../actions/checkbox-filter';\nimport { ExcelFilter } from '../actions/excel-filter';\n/**\n *\n * The `Filter` module is used to handle filtering action.\n */\nvar Filter = /** @class */ (function () {\n    /**\n     * Constructor for Grid filtering module\n     * @hidden\n     */\n    function Filter(parent, filterSettings, serviceLocator) {\n        this.predicate = 'and';\n        this.contentRefresh = true;\n        this.values = {};\n        this.cellText = {};\n        this.nextFlMenuOpen = '';\n        this.type = { 'Menu': FilterMenuRenderer, 'CheckBox': CheckBoxFilter, 'Excel': ExcelFilter };\n        this.filterOperators = {\n            contains: 'contains', endsWith: 'endswith', equal: 'equal', greaterThan: 'greaterthan', greaterThanOrEqual: 'greaterthanorequal',\n            lessThan: 'lessthan', lessThanOrEqual: 'lessthanorequal', notEqual: 'notequal', startsWith: 'startswith'\n        };\n        this.fltrDlgDetails = { field: '', isOpen: false };\n        this.actualPredicate = {};\n        this.parent = parent;\n        this.filterSettings = filterSettings;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * To render filter bar when filtering enabled.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.render = function (e) {\n        if (DataUtil.getObject('args.isFrozen', e)) {\n            return;\n        }\n        var gObj = this.parent;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.getLocalizedCustomOperators();\n        if (this.parent.filterSettings.type === 'FilterBar') {\n            if (gObj.columns.length) {\n                var fltrElem = this.parent.element.querySelector('.e-filterbar');\n                if (fltrElem) {\n                    remove(fltrElem);\n                }\n                var rowRenderer = new RowRenderer(this.serviceLocator, CellType.Filter, gObj);\n                var row = void 0;\n                var cellrender = this.serviceLocator.getService('cellRendererFactory');\n                cellrender.addCellRenderer(CellType.Filter, new FilterCellRenderer(this.parent, this.serviceLocator));\n                this.valueFormatter = this.serviceLocator.getService('valueFormatter');\n                rowRenderer.element = this.parent.createElement('tr', { className: 'e-filterbar' });\n                row = this.generateRow();\n                row.data = this.values;\n                this.parent.getHeaderContent().querySelector('thead').appendChild(rowRenderer.element);\n                this.element = rowRenderer.render(row, gObj.getColumns(), null, null, rowRenderer.element);\n                var detail = this.element.querySelector('.e-detailheadercell');\n                if (detail) {\n                    detail.className = 'e-filterbarcell e-mastercell';\n                }\n                var gCells = [].slice.call(this.element.querySelectorAll('.e-grouptopleftcell'));\n                if (gCells.length) {\n                    gCells[gCells.length - 1].classList.add('e-lastgrouptopleftcell');\n                }\n                this.wireEvents();\n                this.parent.notify(events.freezeRender, { case: 'filter' });\n            }\n        }\n    };\n    /**\n     * To destroy the filter bar.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.filterModule) {\n            this.filterModule.destroy();\n        }\n        this.filterSettings.columns = [];\n        this.updateFilterMsg();\n        this.removeEventListener();\n        this.unWireEvents();\n        if (this.element) {\n            remove(this.element);\n            var filterBarElement = this.parent.getHeaderContent().querySelector('.e-filterbar');\n            if (this.parent.getFrozenColumns() && filterBarElement) {\n                remove(filterBarElement);\n            }\n        }\n    };\n    Filter.prototype.generateRow = function (index) {\n        var options = {};\n        var row = new Row(options);\n        row.cells = this.generateCells();\n        return row;\n    };\n    Filter.prototype.generateCells = function () {\n        //TODO: generate dummy column for group, detail, stacked row here for filtering;\n        var cells = [];\n        if (this.parent.allowGrouping) {\n            for (var c = 0, len = this.parent.groupSettings.columns.length; c < len; c++) {\n                cells.push(this.generateCell({}, CellType.HeaderIndent));\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            cells.push(this.generateCell({}, CellType.DetailHeader));\n        }\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var dummy = _a[_i];\n            cells.push(this.generateCell(dummy));\n        }\n        return cells;\n    };\n    Filter.prototype.generateCell = function (column, cellType) {\n        var opt = {\n            'visible': column.visible,\n            'isDataCell': false,\n            'rowId': '',\n            'column': column,\n            'cellType': cellType ? cellType : CellType.Filter,\n            'attributes': { title: this.l10n.getConstant('FilterbarTitle') }\n        };\n        return new Cell(opt);\n    };\n    /**\n     * To update filterSettings when applying filter.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.updateModel = function () {\n        var col = this.parent.getColumnByField(this.fieldName);\n        var field = col.isForeignColumn() ? col.foreignKeyValue : this.fieldName;\n        this.currentFilterObject = {\n            field: field, operator: this.operator, value: this.value, predicate: this.predicate,\n            matchCase: this.matchCase, ignoreAccent: this.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n        };\n        var index = this.getFilteredColsIndexByField(col);\n        if (index > -1) {\n            this.filterSettings.columns[index] = this.currentFilterObject;\n        }\n        else {\n            this.filterSettings.columns.push(this.currentFilterObject);\n        }\n        this.filterSettings.columns = this.filterSettings.columns;\n        this.parent.dataBind();\n    };\n    Filter.prototype.getFilteredColsIndexByField = function (col) {\n        var cols = this.filterSettings.columns;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (cols[i].field === col.field || (col.isForeignColumn() && cols[i].field === col.foreignKeyValue)) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    /**\n     * To trigger action complete event.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.onActionComplete = function (e) {\n        var args = !this.isRemove ? {\n            currentFilterObject: this.currentFilterObject,\n            /* tslint:disable:no-string-literal */\n            currentFilteringColumn: !isNullOrUndefined(this.column) ? this.column.field : undefined,\n            /* tslint:enable:no-string-literal */\n            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionComplete\n        } : {\n            requestType: 'filtering', type: events.actionComplete\n        };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.isRemove = false;\n    };\n    Filter.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler, this);\n    };\n    Filter.prototype.unWireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), 'keyup', this.keyUpHandler);\n    };\n    Filter.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    Filter.prototype.initialEnd = function () {\n        this.parent.off(events.contentReady, this.initialEnd);\n        if (this.parent.getColumns().length && this.filterSettings.columns.length) {\n            var gObj = this.parent;\n            this.contentRefresh = false;\n            for (var _i = 0, _a = gObj.filterSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.filterByColumn(col.field, col.operator, col.value, col.predicate, col.matchCase, col.ignoreAccent, col.actualFilterValue, col.actualOperator);\n            }\n            this.updateFilterMsg();\n            this.contentRefresh = true;\n        }\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.filterComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.keyPressed, this.keyUpHandler, this);\n        this.parent.on(events.columnPositionChanged, this.columnPositionChanged, this);\n        this.parent.on(events.headerRefreshed, this.render, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.filterMenuClose, this.filterMenuClose, this);\n        EventHandler.add(document, 'click', this.clickHandler, this);\n        this.parent.on(events.filterOpen, this.columnMenuFilter, this);\n        this.parent.on(events.click, this.filterIconClickHandler, this);\n    };\n    /**\n     * @hidden\n     */\n    Filter.prototype.removeEventListener = function () {\n        EventHandler.remove(document, 'click', this.clickHandler);\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.filterComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.keyPressed, this.keyUpHandler);\n        this.parent.off(events.columnPositionChanged, this.columnPositionChanged);\n        this.parent.off(events.headerRefreshed, this.render);\n        this.parent.off(events.filterOpen, this.columnMenuFilter);\n        this.parent.off(events.filterMenuClose, this.filterMenuClose);\n        this.parent.off(events.click, this.filterIconClickHandler);\n    };\n    Filter.prototype.filterMenuClose = function (args) {\n        this.fltrDlgDetails.isOpen = false;\n    };\n    /**\n     * Filters the Grid row by fieldName, filterOperator, and filterValue.\n     * @param  {string} fieldName - Defines the field name of the filter column.\n     * @param  {string} filterOperator - Defines the operator to filter records.\n     * @param  {string | number | Date | boolean} filterValue - Defines the value which is used to filter records.\n     * @param  {string} predicate - Defines the relationship of one filter query with another by using AND or OR predicate.\n     * @param  {boolean} matchCase - If match case is set to true, then the filter records\n     * the exact match or <br> filters records that are case insensitive (uppercase and lowercase letters treated the same).\n     * @param {boolean} ignoreAccent - If ignoreAccent set to true, then filter ignores the diacritic characters or accents while filtering.\n     * @param  {string} actualFilterValue - Defines the actual filter value for the filter column.\n     * @param  {string} actualOperator - Defines the actual filter operator for the filter column.\n     * @return {void}\n     */\n    Filter.prototype.filterByColumn = function (fieldName, filterOperator, filterValue, predicate, matchCase, ignoreAccent, actualFilterValue, actualOperator) {\n        var gObj = this.parent;\n        var filterCell;\n        this.column = gObj.getColumnByField(fieldName);\n        if (this.filterSettings.type === 'FilterBar') {\n            filterCell = gObj.getHeaderContent().querySelector('[id=\\'' + this.column.field + '_filterBarcell\\']');\n        }\n        if (!isNullOrUndefined(this.column.allowFiltering) && !this.column.allowFiltering) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, {\n                instance: this, handler: this.filterByColumn, arg1: fieldName, arg2: filterOperator, arg3: filterValue, arg4: predicate,\n                arg5: matchCase, arg6: ignoreAccent, arg7: actualFilterValue, arg8: actualOperator\n            });\n            return;\n        }\n        this.value = filterValue;\n        this.matchCase = matchCase || false;\n        this.ignoreAccent = this.ignoreAccent = !isNullOrUndefined(ignoreAccent) ? ignoreAccent : this.parent.filterSettings.ignoreAccent;\n        this.fieldName = fieldName;\n        this.predicate = predicate || 'and';\n        this.operator = filterOperator;\n        filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n        if (this.column.type === 'number' || this.column.type === 'date') {\n            this.matchCase = true;\n        }\n        gObj.getColumnHeaderByField(fieldName).setAttribute('aria-filtered', 'true');\n        if (filterValue.length < 1 || this.checkForSkipInput(this.column, filterValue)) {\n            this.filterStatusMsg = filterValue.length < 1 ? '' : this.l10n.getConstant('InvalidFilterMessage');\n            this.updateFilterMsg();\n            return;\n        }\n        if (this.filterSettings.type === 'FilterBar' && filterCell.value !== filterValue) {\n            filterCell.value = filterValue;\n        }\n        if (!isNullOrUndefined(this.column.format)) {\n            this.applyColumnFormat(filterValue);\n        }\n        else {\n            this.values[this.column.field] = filterValue; //this line should be above updateModel\n        }\n        this.actualPredicate[this.fieldName] = [{\n                field: this.fieldName,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: this.operator,\n                value: this.value,\n                type: this.column.type\n            }];\n        this.addFilteredClass(this.fieldName);\n        if (this.checkAlreadyColFiltered(this.column.field)) {\n            return;\n        }\n        this.updateModel();\n    };\n    Filter.prototype.applyColumnFormat = function (filterValue) {\n        var getFlvalue = (this.column.type === 'date' || this.column.type === 'datetime') ?\n            new Date(filterValue) : parseFloat(filterValue);\n        this.values[this.column.field] = this.setFormatForFlColumn(getFlvalue, this.column);\n    };\n    Filter.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'columns':\n                    if (this.contentRefresh) {\n                        this.parent.notify(events.modelChanged, {\n                            currentFilterObject: this.currentFilterObject, currentFilteringColumn: this.column ?\n                                this.column.field : undefined,\n                            columns: this.filterSettings.columns, requestType: 'filtering', type: events.actionBegin\n                        });\n                        this.refreshFilterSettings();\n                        this.updateFilterMsg();\n                        this.updateFilter();\n                    }\n                    break;\n                case 'showFilterBarStatus':\n                    if (e.properties[prop]) {\n                        this.updateFilterMsg();\n                    }\n                    else if (this.parent.allowPaging) {\n                        this.parent.updateExternalMessage('');\n                    }\n                    break;\n                case 'type':\n                    this.parent.refreshHeader();\n                    this.refreshFilterSettings();\n                    break;\n            }\n        }\n    };\n    Filter.prototype.refreshFilterSettings = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            for (var i = 0; i < this.filterSettings.columns.length; i++) {\n                this.column = this.parent.getColumnByField(this.filterSettings.columns[i].field) ||\n                    getColumnByForeignKeyValue(this.filterSettings.columns[i].field, this.parent.getForeignKeyColumns());\n                var filterValue = this.filterSettings.columns[i].value;\n                filterValue = !isNullOrUndefined(filterValue) && filterValue.toString();\n                if (!isNullOrUndefined(this.column.format)) {\n                    this.applyColumnFormat(filterValue);\n                }\n                else {\n                    var key = this.filterSettings.columns[i].field;\n                    this.values[key] = this.filterSettings.columns[i].value;\n                }\n                var filterElement = this.getFilterBarElement(this.filterSettings.columns[i].field);\n                if (filterElement) {\n                    if (!isNullOrUndefined(this.cellText[this.filterSettings.columns[i].field])) {\n                        filterElement.value = this.cellText[this.filterSettings.columns[i].field];\n                    }\n                    else {\n                        filterElement.value = this.filterSettings.columns[i].value;\n                    }\n                }\n            }\n            if (this.filterSettings.columns.length === 0) {\n                var col = this.parent.getColumns();\n                for (var i = 0; i < col.length; i++) {\n                    var filterElement = this.getFilterBarElement(col[i].field);\n                    if (filterElement && filterElement.value !== '') {\n                        filterElement.value = '';\n                        delete this.values[col[i].field];\n                    }\n                }\n            }\n        }\n    };\n    Filter.prototype.getFilterBarElement = function (col) {\n        var selector = '[id=\\'' + col + '_filterBarcell\\']';\n        var filterElement;\n        if (selector && !isNullOrUndefined(this.element)) {\n            filterElement = this.element.querySelector(selector);\n        }\n        return filterElement;\n    };\n    /**\n     * @private\n     */\n    Filter.prototype.refreshFilter = function () {\n        this.refreshFilterSettings();\n        this.updateFilterMsg();\n    };\n    /**\n     * Clears all the filtered rows of the Grid.\n     * @return {void}\n     */\n    Filter.prototype.clearFiltering = function () {\n        var cols = getActualPropFromColl(this.filterSettings.columns);\n        if (isActionPrevent(this.parent)) {\n            this.parent.notify(events.preventBatch, { instance: this, handler: this.clearFiltering });\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.removeFilteredColsByField(cols[i].field, false);\n        }\n        if (this.parent.filterSettings.columns.length === 0 && this.parent.element.querySelector('.e-filtered')) {\n            var fltrElement = [].slice.call(this.parent.element.querySelectorAll('.e-filtered'));\n            for (var i = 0, len = fltrElement.length; i < len; i++) {\n                fltrElement[0].removeAttribute('aria-filtered');\n                fltrElement[0].classList.remove('e-filtered');\n            }\n        }\n        this.isRemove = true;\n        this.filterStatusMsg = '';\n        this.updateFilterMsg();\n    };\n    Filter.prototype.checkAlreadyColFiltered = function (field) {\n        var columns = this.filterSettings.columns;\n        for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {\n            var col = columns_1[_i];\n            if (col.field === field && col.value === this.value &&\n                col.operator === this.operator && col.predicate === this.predicate) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Filter.prototype.columnMenuFilter = function (args) {\n        this.column = args.col;\n        var ele = closest(args.target, '#' + args.id);\n        if (args.isClose && !ele) {\n            this.filterModule.closeDialog();\n        }\n        else if (ele) {\n            this.filterDialogOpen(this.column, args.target);\n        }\n    };\n    Filter.prototype.filterDialogOpen = function (col, target, left, top) {\n        var gObj = this.parent;\n        if (this.filterModule) {\n            this.filterModule.closeDialog();\n        }\n        this.filterModule = new this.type[col.filter.type || this.parent.filterSettings.type](this.parent, gObj.filterSettings, this.serviceLocator, this.customOperators, this);\n        var dataSource = col.filter.dataSource || gObj.getDataModule().dataManager;\n        this.filterModule.openDialog({\n            type: col.type, field: col.field, displayName: col.headerText,\n            dataSource: dataSource, format: col.format,\n            filteredColumns: gObj.filterSettings.columns, target: target,\n            sortedColumns: gObj.sortSettings.columns, formatFn: col.getFormatter(),\n            parserFn: col.getParser(), query: gObj.query, template: col.getFilterItemTemplate(),\n            hideSearchbox: isNullOrUndefined(col.filter.hideSearchbox) ? false : col.filter.hideSearchbox,\n            handler: this.filterHandler.bind(this), localizedStrings: gObj.getLocaleConstants(),\n            position: { X: left, Y: top }, column: col, foreignKeyValue: col.foreignKeyValue,\n            actualPredicate: this.actualPredicate, localeObj: this.parent.localeObj\n        });\n    };\n    /**\n     * Removes filtered column by field name.\n     * @param  {string} field - Defines column field name to remove filter.\n     * @param  {boolean} isClearFilterBar -  Specifies whether the filter bar value needs to be cleared.\n     * @return {void}\n     * @hidden\n     */\n    Filter.prototype.removeFilteredColsByField = function (field, isClearFilterBar) {\n        var fCell;\n        var cols = this.filterSettings.columns;\n        if (isActionPrevent(this.parent)) {\n            var args = { instance: this, handler: this.removeFilteredColsByField, arg1: field, arg2: isClearFilterBar };\n            this.parent.notify(events.preventBatch, args);\n            return;\n        }\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var column = this.parent.getColumnByField(field) ||\n                getColumnByForeignKeyValue(field, this.parent.getForeignKeyColumns());\n            if (cols[i].field === field || cols[i].field === column.foreignKeyValue) {\n                if (this.filterSettings.type === 'FilterBar' && !isClearFilterBar) {\n                    var selector = '[id=\\'' + cols[i].field + '_filterBarcell\\']';\n                    fCell = this.parent.getHeaderContent().querySelector(selector);\n                    fCell.value = '';\n                    delete this.values[field];\n                }\n                cols.splice(i, 1);\n                var fltrElement = this.parent.getColumnHeaderByField(column.field);\n                fltrElement.removeAttribute('aria-filtered');\n                if (this.filterSettings.type !== 'FilterBar') {\n                    var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n                    fltrElement.querySelector(iconClass).classList.remove('e-filtered');\n                }\n                this.isRemove = true;\n                if (this.actualPredicate[field]) {\n                    delete this.actualPredicate[field];\n                }\n                if (this.values[field]) {\n                    delete this.values[field];\n                }\n                this.parent.notify(events.modelChanged, {\n                    requestType: 'filtering', type: events.actionBegin, currentFilterObject: {\n                        field: column.field, operator: this.operator, value: this.value, predicate: this.predicate,\n                        matchCase: this.matchCase, ignoreAccent: this.ignoreAccent, actualFilterValue: {}, actualOperator: {}\n                    }, currentFilterColumn: column\n                });\n                break;\n            }\n        }\n        this.updateFilterMsg();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Filter.prototype.getModuleName = function () {\n        return 'filter';\n    };\n    Filter.prototype.keyUpHandler = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (target && matches(target, '.e-filterbar input')) {\n            var closeHeaderEle = closest(target, 'th.e-filterbarcell');\n            this.column = gObj.getColumnByUid(closeHeaderEle.getAttribute('e-mappinguid'));\n            if (!this.column) {\n                return;\n            }\n            if ((this.filterSettings.mode === 'Immediate' || e.keyCode === 13) && e.keyCode !== 9) {\n                this.value = target.value.trim();\n                this.processFilter(e);\n            }\n        }\n    };\n    Filter.prototype.updateCrossIcon = function (element) {\n        if (element.value.length) {\n            element.nextElementSibling.classList.remove('e-hide');\n        }\n    };\n    Filter.prototype.updateFilterMsg = function () {\n        if (this.filterSettings.type === 'FilterBar') {\n            var gObj = this.parent;\n            var getFormatFlValue = void 0;\n            var columns = this.filterSettings.columns;\n            var formater = this.serviceLocator.getService('valueFormatter');\n            var column = void 0;\n            var value = void 0;\n            if (!this.filterSettings.showFilterBarStatus) {\n                return;\n            }\n            if (columns.length > 0 && this.filterStatusMsg !== this.l10n.getConstant('InvalidFilterMessage')) {\n                this.filterStatusMsg = '';\n                for (var index = 0; index < columns.length; index++) {\n                    column = gObj.getColumnByField(columns[index].field) ||\n                        getColumnByForeignKeyValue(columns[index].field, this.parent.getForeignKeyColumns());\n                    if (index) {\n                        this.filterStatusMsg += ' && ';\n                    }\n                    if (!isNullOrUndefined(column.format)) {\n                        var flValue = (column.type === 'date' || column.type === 'datetime') ?\n                            new Date(this.values[column.field]) :\n                            this.values[column.field];\n                        if (!(column.type === 'date' || column.type === 'datetime')) {\n                            var formater_1 = this.serviceLocator.getService('valueFormatter');\n                            getFormatFlValue = formater_1.toView(flValue, column.getParser()).toString();\n                        }\n                        else {\n                            getFormatFlValue = this.setFormatForFlColumn(flValue, column);\n                        }\n                        this.filterStatusMsg += column.headerText + ': ' + getFormatFlValue;\n                    }\n                    else {\n                        this.filterStatusMsg += column.headerText + ': ' + this.values[column.field];\n                    }\n                }\n            }\n            if (gObj.allowPaging) {\n                gObj.updateExternalMessage(this.filterStatusMsg);\n            }\n            //TODO: virtual paging       \n            this.filterStatusMsg = '';\n        }\n    };\n    Filter.prototype.setFormatForFlColumn = function (value, column) {\n        var formater = this.serviceLocator.getService('valueFormatter');\n        return formater.toView(value, column.getFormatter()).toString();\n    };\n    Filter.prototype.checkForSkipInput = function (column, value) {\n        var isSkip;\n        var skipInput;\n        if (column.type === 'number') {\n            skipInput = ['=', ' ', '!'];\n            if (DataUtil.operatorSymbols[value] || skipInput.indexOf(value) > -1) {\n                isSkip = true;\n            }\n        }\n        else if (column.type === 'string') {\n            skipInput = ['>', '<', '=', '!'];\n            for (var _i = 0, value_1 = value; _i < value_1.length; _i++) {\n                var val = value_1[_i];\n                if (skipInput.indexOf(val) > -1) {\n                    isSkip = true;\n                }\n            }\n        }\n        return isSkip;\n    };\n    Filter.prototype.processFilter = function (e) {\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    Filter.prototype.startTimer = function (e) {\n        var _this = this;\n        this.timer = window.setInterval(function () { _this.onTimerTick(); }, e.keyCode === 13 ? 0 : this.filterSettings.immediateModeDelay);\n    };\n    Filter.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Filter.prototype.onTimerTick = function () {\n        var selector = '[id=\\'' + this.column.field + '_filterBarcell\\']';\n        var filterElement = this.element.querySelector(selector);\n        if (!filterElement && this.parent.getFrozenColumns()) {\n            filterElement = this.parent.getHeaderContent().querySelector(selector);\n        }\n        var filterValue;\n        this.cellText[this.column.field] = filterElement.value;\n        this.stopTimer();\n        if (!isNullOrUndefined(this.column.filterBarTemplate)) {\n            var templateRead = this.column.filterBarTemplate.read;\n            if (typeof templateRead === 'string') {\n                templateRead = getValue(templateRead, window);\n            }\n            if (!isNullOrUndefined(templateRead)) {\n                this.value = templateRead.call(this, filterElement);\n            }\n        }\n        else {\n            filterValue = JSON.parse(JSON.stringify(filterElement.value));\n        }\n        if (isNullOrUndefined(this.value) || this.value === '') {\n            this.removeFilteredColsByField(this.column.field);\n            return;\n        }\n        this.validateFilterValue(this.value);\n        this.filterByColumn(this.column.field, this.operator, this.value, this.predicate, this.matchCase, this.ignoreAccent);\n        filterElement.value = filterValue;\n        this.updateFilterMsg();\n    };\n    Filter.prototype.validateFilterValue = function (value) {\n        var gObj = this.parent;\n        var skipInput;\n        var index;\n        this.matchCase = true;\n        switch (this.column.type) {\n            case 'number':\n                this.operator = this.filterOperators.equal;\n                skipInput = ['>', '<', '=', '!'];\n                for (var i = 0; i < value.length; i++) {\n                    if (skipInput.indexOf(value[i]) > -1) {\n                        index = i;\n                        break;\n                    }\n                }\n                this.getOperator(value.substring(index));\n                if (index !== 0) {\n                    this.value = value.substring(0, index);\n                }\n                if (this.value !== '' && value.length >= 1) {\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                }\n                if (isNaN(this.value)) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                this.operator = this.filterOperators.equal;\n                if (this.value !== '' && !(this.value instanceof Date)) {\n                    this.getOperator(value);\n                    this.value = this.valueFormatter.fromView(this.value, this.column.getParser(), this.column.type);\n                    if (isNullOrUndefined(this.value)) {\n                        this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                    }\n                }\n                break;\n            case 'string':\n                this.matchCase = false;\n                if (value.charAt(0) === '*') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(value.length - 1) === '%') {\n                    this.value = this.value.slice(0, -1);\n                    this.operator = this.filterOperators.startsWith;\n                }\n                else if (value.charAt(0) === '%') {\n                    this.value = this.value.slice(1);\n                    this.operator = this.filterOperators.endsWith;\n                }\n                else {\n                    this.operator = this.filterOperators.startsWith;\n                }\n                break;\n            case 'boolean':\n                if (value.toLowerCase() === 'true' || value === '1') {\n                    this.value = true;\n                }\n                else if (value.toLowerCase() === 'false' || value === '0') {\n                    this.value = false;\n                }\n                else if (value.length) {\n                    this.filterStatusMsg = this.l10n.getConstant('InvalidFilterMessage');\n                }\n                this.operator = this.filterOperators.equal;\n                break;\n            default:\n                this.operator = this.filterOperators.equal;\n        }\n    };\n    Filter.prototype.getOperator = function (value) {\n        var singleOp = value.charAt(0);\n        var multipleOp = value.slice(0, 2);\n        var operators = extend({ '=': this.filterOperators.equal, '!': this.filterOperators.notEqual }, DataUtil.operatorSymbols);\n        if (operators.hasOwnProperty(singleOp) || operators.hasOwnProperty(multipleOp)) {\n            this.operator = operators[singleOp];\n            this.value = value.substring(1);\n            if (!this.operator) {\n                this.operator = operators[multipleOp];\n                this.value = value.substring(2);\n            }\n        }\n        if (this.operator === this.filterOperators.lessThan || this.operator === this.filterOperators.greaterThan) {\n            if (this.value.charAt(0) === '=') {\n                this.operator = this.operator + 'orequal';\n                this.value = this.value.substring(1);\n            }\n        }\n    };\n    Filter.prototype.columnPositionChanged = function (e) {\n        if (this.parent.filterSettings.type !== 'FilterBar') {\n            return;\n        }\n    };\n    Filter.prototype.getLocalizedCustomOperators = function () {\n        var numOptr = [\n            { value: 'equal', text: this.l10n.getConstant('Equal') },\n            { value: 'greaterthan', text: this.l10n.getConstant('GreaterThan') },\n            { value: 'greaterthanorequal', text: this.l10n.getConstant('GreaterThanOrEqual') },\n            { value: 'lessthan', text: this.l10n.getConstant('LessThan') },\n            { value: 'lessthanorequal', text: this.l10n.getConstant('LessThanOrEqual') },\n            { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n        ];\n        this.customOperators = {\n            stringOperator: [\n                { value: 'startswith', text: this.l10n.getConstant('StartsWith') },\n                { value: 'endswith', text: this.l10n.getConstant('EndsWith') },\n                { value: 'contains', text: this.l10n.getConstant('Contains') },\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ],\n            numberOperator: numOptr,\n            dateOperator: numOptr,\n            datetimeOperator: numOptr,\n            booleanOperator: [\n                { value: 'equal', text: this.l10n.getConstant('Equal') },\n                { value: 'notequal', text: this.l10n.getConstant('NotEqual') }\n            ]\n        };\n    };\n    ;\n    Filter.prototype.filterIconClickHandler = function (e) {\n        var target = e.target;\n        if (target.classList.contains('e-filtermenudiv') && (this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel')) {\n            var gObj = this.parent;\n            var col = gObj.getColumnByUid(parentsUntil(target, 'e-headercell').firstElementChild.getAttribute('e-mappinguid'));\n            var gClient = gObj.element.getBoundingClientRect();\n            var fClient = target.getBoundingClientRect();\n            this.column = col;\n            if (this.fltrDlgDetails.field === col.field && this.fltrDlgDetails.isOpen) {\n                return;\n            }\n            if (this.filterModule) {\n                this.filterModule.closeDialog();\n            }\n            this.fltrDlgDetails = { field: col.field, isOpen: true };\n            this.filterDialogOpen(this.column, target, fClient.right - gClient.left, fClient.bottom - gClient.top);\n        }\n    };\n    Filter.prototype.clickHandler = function (e) {\n        if (this.filterSettings.mode === 'Immediate' || this.parent.filterSettings.type === 'Menu' ||\n            this.parent.filterSettings.type === 'CheckBox' || this.parent.filterSettings.type === 'Excel') {\n            var gObj = this.parent;\n            var target = e.target;\n            var datepickerEle = target.classList.contains('e-day'); // due to datepicker popup cause\n            if (parentsUntil(target, 'e-filter-popup') || target.classList.contains('e-filtermenudiv')) {\n                return;\n            }\n            else if (this.filterModule &&\n                (!parentsUntil(target, 'e-popup-wrapper')\n                    && (!closest(target, '.e-filter-item.e-menu-item'))\n                    && (!parentsUntil(target, 'e-popup'))) && !datepickerEle) {\n                this.filterModule.closeDialog(target);\n            }\n            if (this.filterSettings.mode === 'Immediate' && target.classList.contains('e-clear-icon')) {\n                var targetText = target.previousElementSibling;\n                this.removeFilteredColsByField(targetText.id.slice(0, -14)); //Length of _filterBarcell = 14\n            }\n        }\n    };\n    Filter.prototype.filterHandler = function (args) {\n        var filterIconElement;\n        this.actualPredicate[args.field] = args.actualPredicate;\n        var dataManager = new DataManager(this.filterSettings.columns);\n        var query = new Query().where('field', this.filterOperators.equal, args.field);\n        var result = dataManager.executeLocal(query);\n        for (var i = 0; i < result.length; i++) {\n            var index = -1;\n            for (var j = 0; j < this.filterSettings.columns.length; j++) {\n                if (result[i].field === this.filterSettings.columns[j].field) {\n                    index = j;\n                    break;\n                }\n            }\n            if (index !== -1) {\n                this.filterSettings.columns.splice(index, 1);\n            }\n        }\n        if (this.values[args.field]) {\n            delete this.values[args.field];\n        }\n        var iconClass = this.parent.showColumnMenu ? '.e-columnmenu' : '.e-icon-filter';\n        filterIconElement = this.parent.getColumnHeaderByField(args.field).querySelector(iconClass);\n        if (args.action === 'filtering') {\n            this.filterSettings.columns = this.filterSettings.columns.concat(args.filterCollection);\n            if (this.filterSettings.columns.length && filterIconElement) {\n                filterIconElement.classList.add('e-filtered');\n            }\n        }\n        else {\n            if (filterIconElement) {\n                filterIconElement.classList.remove('e-filtered');\n            }\n            this.parent.renderModule.refresh(); //hot-fix onpropertychanged not working for object { array }           \n        }\n        this.parent.dataBind();\n    };\n    Filter.prototype.updateFilter = function () {\n        var cols = this.filterSettings.columns;\n        for (var i = 0; i < cols.length; i++) {\n            this.column = this.parent.getColumnByField(cols[i].field) ||\n                getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns());\n            var fieldName = cols[i].field;\n            if (!this.parent.getColumnByField(cols[i].field)) {\n                fieldName = getColumnByForeignKeyValue(cols[i].field, this.parent.getForeignKeyColumns()).field;\n            }\n            /* tslint:disable-next-line:max-line-length */\n            this.refreshFilterIcon(fieldName, cols[i].operator, cols[i].value, cols[i].type, cols[i].predicate, cols[i].matchCase, cols[i].ignoreAccent);\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    Filter.prototype.refreshFilterIcon = function (fieldName, operator, value, type, predicate, matchCase, ignoreAccent) {\n        this.actualPredicate[fieldName] = [{\n                field: fieldName,\n                predicate: predicate,\n                matchCase: matchCase,\n                ignoreAccent: ignoreAccent,\n                operator: operator,\n                value: value,\n                type: type\n            }];\n        this.addFilteredClass(fieldName);\n    };\n    Filter.prototype.addFilteredClass = function (fieldName) {\n        var filterIconElement;\n        filterIconElement = this.parent.getColumnHeaderByField(fieldName).querySelector('.e-icon-filter');\n        if (filterIconElement) {\n            filterIconElement.classList.add('e-filtered');\n        }\n    };\n    return Filter;\n}());\nexport { Filter };\n","import { EventHandler, detach, formatUnit, Browser, closest, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Column } from '../models/column';\nimport { ColumnWidthService } from '../services/width-controller';\nimport * as events from '../base/constant';\nimport { getScrollBarWidth, parentsUntil } from '../base/util';\nexport var resizeClassList = {\n    root: 'e-rhandler',\n    suppress: 'e-rsuppress',\n    icon: 'e-ricon',\n    helper: 'e-rhelper',\n    header: 'th.e-headercell',\n    cursor: 'e-rcursor'\n};\n/**\n * `Resize` module is used to handle Resize to fit for columns.\n * @hidden\n * @private\n */\nvar Resize = /** @class */ (function () {\n    /**\n     * Constructor for the Grid resize module\n     * @hidden\n     */\n    function Resize(parent) {\n        this.tapped = false;\n        this.isDblClk = true;\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.widthService = new ColumnWidthService(parent);\n        this.addEventListener();\n    }\n    /**\n     * Resize by field names.\n     * @param  {string|string[]} fName - Defines the field name.\n     * @return {void}\n     */\n    Resize.prototype.autoFitColumns = function (fName) {\n        var columnName = (fName === undefined || fName === null || fName.length <= 0) ?\n            this.parent.getColumns().map(function (x) { return x.field; }) : (typeof fName === 'string') ? [fName] : fName;\n        this.findColumn(columnName);\n    };\n    Resize.prototype.resizeColumn = function (fName, index, id) {\n        var gObj = this.parent;\n        var tWidth = 0;\n        var headerTable;\n        var contentTable;\n        var footerTable;\n        var headerDivTag = 'e-gridheader';\n        var contentDivTag = 'e-gridcontent';\n        var indentWidth = 0;\n        var uid = id ? id : this.parent.getUidByColumnField(fName);\n        var columnIndex = this.parent.getNormalizedColumnIndex(uid);\n        var headerTextClone;\n        var contentTextClone;\n        var frzCols = gObj.getFrozenColumns();\n        if (!isNullOrUndefined(gObj.getFooterContent())) {\n            footerTable = gObj.getFooterContentTable();\n        }\n        if (frzCols) {\n            if (index < frzCols) {\n                headerTable = gObj.getHeaderTable();\n                contentTable = gObj.getContentTable();\n                headerTextClone = headerTable.querySelectorAll('th')[columnIndex].cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \")\");\n            }\n            else {\n                headerTable = gObj.getHeaderContent().querySelector('.e-movableheader').children[0];\n                contentTable = gObj.getContent().querySelector('.e-movablecontent').children[0];\n                headerTextClone = headerTable.querySelectorAll('th')[columnIndex - frzCols].cloneNode(true);\n                contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + ((columnIndex - frzCols) + 1) + \")\");\n            }\n        }\n        else {\n            headerTable = gObj.getHeaderTable();\n            contentTable = gObj.getContentTable();\n            headerTextClone = headerTable.querySelectorAll('th')[columnIndex].cloneNode(true);\n            contentTextClone = contentTable.querySelectorAll(\"td:nth-child(\" + (columnIndex + 1) + \"):not(.e-groupcaption)\");\n        }\n        var indentWidthClone = headerTable.querySelector('tr').querySelectorAll('.e-grouptopleftcell');\n        if (indentWidthClone.length > 0) {\n            for (var i = 0; i < indentWidthClone.length; i++) {\n                indentWidth += indentWidthClone[i].offsetWidth;\n            }\n        }\n        if (this.parent.detailTemplate || this.parent.childGrid) {\n            indentWidth += contentTable.querySelector('.e-detailrowcollapse').offsetWidth;\n        }\n        var headerText = [headerTextClone];\n        var contentText = [];\n        for (var i = 0; i < contentTextClone.length; i++) {\n            contentText[i] = contentTextClone[i].cloneNode(true);\n        }\n        var wHeader = this.createTable(headerTable, headerText, headerDivTag);\n        var wContent = this.createTable(contentTable, contentText, contentDivTag);\n        var columnbyindex = gObj.getColumns()[index];\n        var result;\n        var width = (wHeader > wContent) ? columnbyindex.width = formatUnit(wHeader) : columnbyindex.width = formatUnit(wContent);\n        this.widthService.setColumnWidth(gObj.getColumns()[index]);\n        result = gObj.getColumns().some(function (x) { return x.width === null || x.width === undefined || x.width.length <= 0; });\n        if (result === false) {\n            gObj.getColumns().forEach(function (element) {\n                if (element.visible) {\n                    tWidth = tWidth + parseInt(element.width, 10);\n                }\n            });\n        }\n        var calcTableWidth = tWidth + indentWidth;\n        if (tWidth > 0 && !gObj.getFrozenColumns()) {\n            if (this.parent.detailTemplate || this.parent.childGrid) {\n                this.widthService.setColumnWidth(new Column({ width: '30px' }));\n            }\n            headerTable.style.width = formatUnit(calcTableWidth);\n            contentTable.style.width = formatUnit(calcTableWidth);\n            if (!isNullOrUndefined(footerTable)) {\n                footerTable.style.width = formatUnit(calcTableWidth);\n            }\n        }\n        var tableWidth = headerTable.offsetWidth;\n        var contentwidth = (gObj.getContent().scrollWidth);\n        if (contentwidth > tableWidth) {\n            headerTable.classList.add('e-tableborder');\n            contentTable.classList.add('e-tableborder');\n        }\n        else {\n            headerTable.classList.remove('e-tableborder');\n            contentTable.classList.remove('e-tableborder');\n        }\n        if (!isNullOrUndefined(footerTable)) {\n            footerTable.classList.add('e-tableborder');\n        }\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    Resize.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.widthService = null;\n        this.unwireEvents();\n        this.removeEventListener();\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    Resize.prototype.findColumn = function (fName) {\n        var _this = this;\n        fName.forEach(function (element) {\n            var fieldName = element;\n            var columnIndex = _this.parent.getColumnIndexByField(fieldName);\n            if (_this.parent.getColumns()[columnIndex].visible === true) {\n                _this.resizeColumn(fieldName, columnIndex);\n            }\n        });\n    };\n    /**\n     * To create table for autofit\n     * @hidden\n     */\n    Resize.prototype.createTable = function (table, text, tag) {\n        var myTableDiv = this.parent.createElement('div');\n        myTableDiv.className = this.parent.element.className;\n        myTableDiv.style.cssText = 'display: inline-block;visibility:hidden;position:absolute';\n        var mySubDiv = this.parent.createElement('div');\n        mySubDiv.className = tag;\n        var myTable = this.parent.createElement('table');\n        myTable.className = table.className;\n        myTable.classList.add('e-resizetable');\n        myTable.style.cssText = 'table-layout: auto;width: auto';\n        var myTr = this.parent.createElement('tr');\n        text.forEach(function (element) {\n            var tr = myTr.cloneNode();\n            tr.className = table.querySelector('tr').className;\n            tr.appendChild(element);\n            myTable.appendChild(tr);\n        });\n        mySubDiv.appendChild(myTable);\n        myTableDiv.appendChild(mySubDiv);\n        document.body.appendChild(myTableDiv);\n        var offsetWidthValue = myTable.getBoundingClientRect().width;\n        document.body.removeChild(myTableDiv);\n        return Math.ceil(offsetWidthValue);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.refreshHeight, this);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.refreshHeight);\n        this.parent.off(events.initialEnd, this.wireEvents);\n    };\n    /**\n     * @hidden\n     */\n    Resize.prototype.render = function () {\n        this.unwireEvents();\n        this.wireEvents();\n        this.setHandlerHeight();\n    };\n    Resize.prototype.refreshHeight = function () {\n        this.getResizeHandlers().forEach(function (ele) {\n            if (ele.parentElement.offsetHeight > 0) {\n                ele.style.height = ele.parentElement.offsetHeight + 'px';\n            }\n        });\n    };\n    Resize.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getHeaderContent(), Browser.touchStartEvent, this.resizeStart, this);\n        EventHandler.add(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit, this);\n    };\n    Resize.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getHeaderContent(), Browser.touchStartEvent, this.resizeStart);\n        EventHandler.remove(this.parent.getHeaderContent(), events.dblclick, this.callAutoFit);\n    };\n    Resize.prototype.getResizeHandlers = function () {\n        return this.parent.getFrozenColumns() ?\n            [].slice.call(this.parent.getHeaderContent().querySelectorAll('.' + resizeClassList.root))\n            : [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.root));\n    };\n    Resize.prototype.setHandlerHeight = function () {\n        [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + resizeClassList.suppress)).forEach(function (ele) {\n            ele.style.height = ele.parentElement.offsetHeight + 'px';\n        });\n    };\n    Resize.prototype.callAutoFit = function (e) {\n        if (e.target.classList.contains('e-rhandler')) {\n            var col = this.getTargetColumn(e);\n            this.resizeColumn(col.field, this.parent.getNormalizedColumnIndex(col.uid), col.uid);\n            var header = closest(e.target, resizeClassList.header);\n            header.classList.add('e-resized');\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        if (e.target.classList.contains('e-rhandler')) {\n            if (!this.helper) {\n                if (this.getScrollBarWidth() === 0) {\n                    for (var _i = 0, _a = this.refreshColumnWidth(); _i < _a.length; _i++) {\n                        var col = _a[_i];\n                        this.widthService.setColumnWidth(col);\n                    }\n                    this.widthService.setWidthToTable();\n                }\n                this.element = e.target;\n                this.parentElementWidth = this.parent.element.getBoundingClientRect().width;\n                this.appendHelper();\n                this.column = this.getTargetColumn(e);\n                this.pageX = this.getPointX(e);\n                if (this.parent.enableRtl) {\n                    this.minMove = parseInt(this.column.width.toString(), 10)\n                        - (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0);\n                }\n                else {\n                    this.minMove = (this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0)\n                        - parseInt(this.column.width.toString(), 10);\n                }\n                this.minMove += this.pageX;\n            }\n            if (Browser.isDevice && !this.helper.classList.contains(resizeClassList.icon)) {\n                this.helper.classList.add(resizeClassList.icon);\n                EventHandler.add(document, Browser.touchStartEvent, this.removeHelper, this);\n                EventHandler.add(this.helper, Browser.touchStartEvent, this.resizeStart, this);\n            }\n            else {\n                var args = {\n                    e: e,\n                    column: this.column\n                };\n                this.parent.trigger(events.resizeStart, args);\n                if (args.cancel) {\n                    this.cancelResizeAction();\n                    return;\n                }\n                EventHandler.add(document, Browser.touchEndEvent, this.resizeEnd, this);\n                EventHandler.add(this.parent.element, Browser.touchMoveEvent, this.resizing, this);\n                this.updateCursor('add');\n            }\n        }\n    };\n    Resize.prototype.cancelResizeAction = function (removeEvents) {\n        if (removeEvents) {\n            EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n            EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n            this.updateCursor('remove');\n        }\n        if (Browser.isDevice) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n        }\n        detach(this.helper);\n        this.refresh();\n    };\n    Resize.prototype.getWidth = function (width, minWidth, maxWidth) {\n        if (minWidth && width < minWidth) {\n            return minWidth;\n        }\n        else if ((maxWidth && width > maxWidth)) {\n            return maxWidth;\n        }\n        else {\n            return width;\n        }\n    };\n    Resize.prototype.resizing = function (e) {\n        if (this.parent.allowTextWrap) {\n            if (this.parent.getFrozenColumns()) {\n                if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n                    this.parent.notify(events.freezeRender, { case: 'textwrap' });\n                }\n            }\n            this.element.style.height = this.element.parentElement.offsetHeight + 'px';\n            this.setHelperHeight();\n        }\n        var pageX = this.getPointX(e);\n        var mousemove = this.parent.enableRtl ? -(pageX - this.pageX) : (pageX - this.pageX);\n        var colData = {\n            width: parseInt(this.widthService.getWidth(this.column).toString(), 10) + mousemove,\n            minWidth: this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : null,\n            maxWidth: this.column.maxWidth ? parseInt(this.column.maxWidth.toString(), 10) : null\n        };\n        var width = this.getWidth(colData.width, colData.minWidth, colData.maxWidth);\n        if ((!this.parent.enableRtl && this.minMove >= pageX) || (this.parent.enableRtl && this.minMove <= pageX)) {\n            width = this.column.minWidth ? parseInt(this.column.minWidth.toString(), 10) : 0;\n            this.pageX = pageX = this.minMove;\n        }\n        if (width !== parseInt(this.column.width.toString(), 10)) {\n            this.pageX = pageX;\n            this.column.width = formatUnit(width);\n            var args = {\n                e: e,\n                column: this.column\n            };\n            this.parent.trigger(events.onResize, args);\n            if (args.cancel) {\n                this.cancelResizeAction(true);\n                return;\n            }\n            this.widthService.setColumnWidth(this.column, null, 'resize');\n            this.updateHelper();\n        }\n        this.isDblClk = false;\n    };\n    Resize.prototype.resizeEnd = function (e) {\n        if (!this.helper || this.parent.isDestroyed) {\n            return;\n        }\n        EventHandler.remove(this.parent.element, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeEnd);\n        this.updateCursor('remove');\n        detach(this.helper);\n        var args = {\n            e: e,\n            column: this.column\n        };\n        this.parent.trigger(events.resizeStop, args);\n        closest(this.element, '.e-headercell').classList.add('e-resized');\n        if (parentsUntil(this.element, 'e-frozenheader')) {\n            this.isFrozenColResized = true;\n        }\n        else {\n            this.isFrozenColResized = false;\n        }\n        if (this.parent.getFrozenColumns()) {\n            this.parent.notify(events.freezeRender, { case: 'textwrap' });\n        }\n        this.refresh();\n        this.doubleTapEvent(e);\n        this.isDblClk = true;\n    };\n    Resize.prototype.getPointX = function (e) {\n        if (e.touches && e.touches.length) {\n            return e.touches[0].pageX;\n        }\n        else {\n            return e.pageX;\n        }\n    };\n    Resize.prototype.refreshColumnWidth = function () {\n        var columns = this.parent.getColumns();\n        for (var _i = 0, _a = [].slice.apply(this.parent.getHeaderTable().querySelectorAll('th.e-headercell')); _i < _a.length; _i++) {\n            var ele = _a[_i];\n            for (var _b = 0, columns_1 = columns; _b < columns_1.length; _b++) {\n                var column = columns_1[_b];\n                if (ele.querySelector('[e-mappinguid]') &&\n                    ele.querySelector('[e-mappinguid]').getAttribute('e-mappinguid') === column.uid && column.visible) {\n                    column.width = ele.getBoundingClientRect().width;\n                    break;\n                }\n            }\n        }\n        return columns;\n    };\n    Resize.prototype.getTargetColumn = function (e) {\n        var cell = closest(e.target, resizeClassList.header);\n        var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n        return this.parent.getColumnByUid(uid);\n    };\n    Resize.prototype.updateCursor = function (action) {\n        var headerRows = [].slice.call(this.parent.getHeaderContent().querySelectorAll('th'));\n        headerRows.push(this.parent.element);\n        for (var _i = 0, headerRows_1 = headerRows; _i < headerRows_1.length; _i++) {\n            var row = headerRows_1[_i];\n            row.classList[action](resizeClassList.cursor);\n        }\n    };\n    Resize.prototype.refresh = function () {\n        this.column = null;\n        this.pageX = null;\n        this.element = null;\n        this.helper = null;\n    };\n    Resize.prototype.appendHelper = function () {\n        this.helper = this.parent.createElement('div', {\n            className: resizeClassList.helper\n        });\n        this.parent.element.appendChild(this.helper);\n        this.setHelperHeight();\n    };\n    Resize.prototype.setHelperHeight = function () {\n        var height = this.parent.getContent().offsetHeight - this.getScrollBarWidth();\n        var rect = closest(this.element, resizeClassList.header);\n        var tr = [].slice.call(this.parent.getHeaderContent().querySelectorAll('tr'));\n        var frzCols = this.parent.getFrozenColumns();\n        if (frzCols) {\n            if (rect.parentElement.children.length !== frzCols) {\n                tr.splice(0, tr.length / 2);\n            }\n            else {\n                tr.splice(tr.length / 2, tr.length / 2);\n            }\n        }\n        for (var i = tr.indexOf(rect.parentElement); i < tr.length; i++) {\n            height += tr[i].offsetHeight;\n        }\n        var pos = this.calcPos(rect);\n        pos.left += (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2);\n        this.helper.style.cssText = 'height: ' + height + 'px; top: ' + pos.top + 'px; left:' + Math.floor(pos.left) + 'px;';\n    };\n    Resize.prototype.getScrollBarWidth = function (height) {\n        var ele = this.parent.getFrozenColumns() ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstChild;\n        return (ele.scrollHeight > ele.clientHeight && height) ||\n            ele.scrollWidth > ele.clientWidth ? getScrollBarWidth() : 0;\n    };\n    Resize.prototype.removeHelper = function (e) {\n        var cls = e.target.classList;\n        if (!(cls.contains(resizeClassList.root) || cls.contains(resizeClassList.icon)) && this.helper) {\n            EventHandler.remove(document, Browser.touchStartEvent, this.removeHelper);\n            EventHandler.remove(this.helper, Browser.touchStartEvent, this.resizeStart);\n            detach(this.helper);\n            this.refresh();\n        }\n    };\n    Resize.prototype.updateHelper = function () {\n        var rect = closest(this.element, resizeClassList.header);\n        var left = Math.floor(this.calcPos(rect).left + (this.parent.enableRtl ? 0 - 1 : rect.offsetWidth - 2));\n        var borderWidth = 2; // to maintain the helper inside of grid element.\n        if (left > this.parentElementWidth) {\n            left = this.parentElementWidth - borderWidth;\n        }\n        if (this.parent.getFrozenColumns()) {\n            var table = closest(rect, '.e-table');\n            var fLeft = table.offsetLeft;\n            if (left < fLeft) {\n                left = fLeft;\n            }\n        }\n        this.helper.style.left = left + 'px';\n    };\n    Resize.prototype.calcPos = function (elem) {\n        var parentOffset = {\n            top: 0,\n            left: 0\n        };\n        var offset = elem.getBoundingClientRect();\n        var doc = elem.ownerDocument;\n        var offsetParent = elem.offsetParent || doc.documentElement;\n        while (offsetParent &&\n            (offsetParent === doc.body || offsetParent === doc.documentElement) &&\n            offsetParent.style.position === 'static') {\n            offsetParent = offsetParent.parentNode;\n        }\n        if (offsetParent && offsetParent !== elem && offsetParent.nodeType === 1) {\n            parentOffset = offsetParent.getBoundingClientRect();\n        }\n        return {\n            top: offset.top - parentOffset.top,\n            left: offset.left - parentOffset.left\n        };\n    };\n    Resize.prototype.doubleTapEvent = function (e) {\n        if (this.getUserAgent() && this.isDblClk) {\n            if (!this.tapped) {\n                this.tapped = setTimeout(this.timeoutHandler(), 300);\n            }\n            else {\n                clearTimeout(this.tapped);\n                this.callAutoFit(e);\n                this.tapped = null;\n            }\n        }\n    };\n    Resize.prototype.getUserAgent = function () {\n        var userAgent = Browser.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    Resize.prototype.timeoutHandler = function () {\n        this.tapped = null;\n    };\n    return Resize;\n}());\nexport { Resize };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { closest as closestElement, removeClass, classList, remove } from '@syncfusion/ej2-base';\nimport { getElementIndex, inArray, parentsUntil, getPosition, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n *\n * The `Reorder` module is used for reordering columns.\n */\nvar Reorder = /** @class */ (function () {\n    /**\n     * Constructor for the Grid reorder module\n     * @hidden\n     */\n    function Reorder(parent) {\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.reorderComplete, this.onActionComplete, this);\n        this.parent.on(events.columnDrag, this.drag, this);\n        this.parent.on(events.columnDragStart, this.dragStart, this);\n        this.parent.on(events.columnDragStop, this.dragStop, this);\n        this.parent.on(events.headerDrop, this.headerDrop, this);\n        this.parent.on(events.headerRefreshed, this.createReorderElement, this);\n    }\n    Reorder.prototype.chkDropPosition = function (srcElem, destElem) {\n        return (srcElem.parentElement.isEqualNode(destElem.parentElement) || (this.parent.getFrozenColumns()\n            && Array.prototype.indexOf.call(closestElement(srcElem, 'thead').children, srcElem.parentElement)\n                === Array.prototype.indexOf.call(closestElement(destElem, 'thead').children, destElem.parentElement)))\n            && this.targetParentContainerIndex(srcElem, destElem) > -1;\n    };\n    Reorder.prototype.chkDropAllCols = function (srcElem, destElem) {\n        var isFound;\n        var headers = this.getHeaderCells();\n        var header;\n        while (!isFound && headers.length > 0) {\n            header = headers.pop();\n            isFound = srcElem !== header && this.targetParentContainerIndex(srcElem, destElem) > -1;\n        }\n        return isFound;\n    };\n    Reorder.prototype.findColParent = function (col, cols, parent) {\n        parent = parent;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (col === cols[i]) {\n                return true;\n            }\n            else if (cols[i].columns) {\n                var cnt = parent.length;\n                parent.push(cols[i]);\n                if (!this.findColParent(col, cols[i].columns, parent)) {\n                    parent.splice(cnt, parent.length - cnt);\n                }\n                else {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    Reorder.prototype.getColumnsModel = function (cols) {\n        var columnModel = [];\n        var subCols = [];\n        for (var i = 0, len = cols.length; i < len; i++) {\n            columnModel.push(cols[i]);\n            if (cols[i].columns) {\n                subCols = subCols.concat(cols[i].columns);\n            }\n        }\n        if (subCols.length) {\n            columnModel = columnModel.concat(this.getColumnsModel(subCols));\n        }\n        return columnModel;\n    };\n    Reorder.prototype.headerDrop = function (e) {\n        var gObj = this.parent;\n        var dropElement = this.element.querySelector('.e-headercelldiv') || this.element.querySelector('.e-stackedheadercelldiv');\n        var uId = dropElement.getAttribute('e-mappinguid');\n        var column = gObj.getColumnByUid(uId);\n        if (!closestElement(e.target, 'th') || (!isNullOrUndefined(column) && column.allowReordering === false)) {\n            return;\n        }\n        var destElem = closestElement(e.target, '.e-headercell');\n        var destElemDiv = destElem.querySelector('.e-headercelldiv') || destElem.querySelector('.e-stackedheadercelldiv');\n        var destElemUid = destElemDiv.getAttribute('e-mappinguid');\n        var destColumn = gObj.getColumnByUid(destElemUid);\n        if (isNullOrUndefined(destColumn) || destColumn.allowReordering === false) {\n            return;\n        }\n        if (destElem && !(!this.chkDropPosition(this.element, destElem) || !this.chkDropAllCols(this.element, destElem))) {\n            if (this.parent.enableColumnVirtualization) {\n                var columns = this.parent.columns;\n                var sourceUid_1 = this.element.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var col = this.parent.getColumns(true).filter(function (col) { return col.uid === sourceUid_1; });\n                var colMatchIndex_1 = null;\n                var column_1 = col[0];\n                var destUid_1 = destElem.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n                var bool = columns.some(function (col, index) {\n                    if (col.uid === destUid_1) {\n                        colMatchIndex_1 = index;\n                        return col.uid === destUid_1;\n                    }\n                    return false;\n                });\n                if (!isNullOrUndefined(colMatchIndex_1)) {\n                    this.moveColumns(colMatchIndex_1, column_1);\n                }\n            }\n            else {\n                var headers = this.getHeaderCells();\n                var oldIdx = getElementIndex(this.element, headers);\n                var columns = this.getColumnsModel(this.parent.columns);\n                var column_2 = columns[oldIdx];\n                var newIndex = this.targetParentContainerIndex(this.element, destElem);\n                this.moveColumns(newIndex, column_2);\n            }\n        }\n    };\n    Reorder.prototype.isActionPrevent = function (gObj) {\n        return isActionPrevent(gObj);\n    };\n    Reorder.prototype.moveColumns = function (destIndex, column) {\n        var gObj = this.parent;\n        if (this.isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.moveColumns, arg1: destIndex, arg2: column });\n            return;\n        }\n        var parent = this.getColParent(column, this.parent.columns);\n        var cols = parent ? parent.columns : this.parent.columns;\n        var srcIdx = inArray(column, cols);\n        if (!gObj.allowReordering || srcIdx === destIndex || srcIdx === -1 || destIndex === -1) {\n            return;\n        }\n        cols.splice(destIndex, 0, cols.splice(srcIdx, 1)[0]);\n        gObj.getColumns(true);\n        gObj.notify(events.columnPositionChanged, { fromIndex: destIndex, toIndex: srcIdx });\n        gObj.notify(events.modelChanged, {\n            type: events.actionBegin, requestType: 'reorder'\n        });\n    };\n    Reorder.prototype.targetParentContainerIndex = function (srcElem, destElem) {\n        var headers = this.getHeaderCells();\n        var cols = this.parent.columns;\n        var flatColumns = this.getColumnsModel(cols);\n        var parent = this.getColParent(flatColumns[getElementIndex(srcElem, headers)], cols);\n        cols = parent ? parent.columns : cols;\n        return inArray(flatColumns[getElementIndex(destElem, headers)], cols);\n    };\n    Reorder.prototype.getHeaderCells = function () {\n        if (this.parent.getFrozenColumns()) {\n            var fTh = void 0;\n            var mTh = void 0;\n            var fHeaders = [];\n            var fRows = [].slice.call(this.parent.getHeaderTable().querySelectorAll('.e-columnheader'));\n            var mRows = [].slice.call(this.parent.getHeaderContent()\n                .querySelector('.e-movableheader').querySelectorAll('.e-columnheader'));\n            for (var i = 0; i < fRows.length; i++) {\n                fTh = [].slice.call(fRows[i].getElementsByClassName('e-headercell'));\n                mTh = [].slice.call(mRows[i].getElementsByClassName('e-headercell'));\n                fHeaders = fHeaders.concat(fTh);\n                for (var j = 0; j < mTh.length; j++) {\n                    if (!fTh.length || j !== 0 || fTh[fTh.length - 1].innerText !== mTh[0].innerText) {\n                        fHeaders.push(mTh[j]);\n                    }\n                }\n            }\n            return fHeaders;\n        }\n        else {\n            return [].slice.call(this.parent.element.getElementsByClassName('e-headercell'));\n        }\n    };\n    Reorder.prototype.getColParent = function (column, columns) {\n        var parents = [];\n        this.findColParent(column, columns, parents);\n        return parents[parents.length - 1];\n    };\n    /**\n     * Changes the position of the Grid columns by field names.\n     * @param  {string} fromFName - Defines the origin field name.\n     * @param  {string} toFName - Defines the destination field name.\n     * @return {void}\n     */\n    Reorder.prototype.reorderColumns = function (fromFName, toFName) {\n        var fColumn = this.parent.getColumnByField(fromFName);\n        var toColumn = this.parent.getColumnByField(toFName);\n        if ((!isNullOrUndefined(fColumn) && !fColumn.allowReordering) || (!isNullOrUndefined(toColumn) && !toColumn.allowReordering)) {\n            return;\n        }\n        var column = this.parent.getColumnByField(toFName);\n        var parent = this.getColParent(column, this.parent.columns);\n        var columns = parent ? parent.columns : this.parent.columns;\n        var destIndex = inArray(column, columns);\n        if (destIndex > -1) {\n            this.moveColumns(destIndex, this.parent.getColumnByField(fromFName));\n        }\n    };\n    Reorder.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.createReorderElement();\n        }\n    };\n    Reorder.prototype.createReorderElement = function () {\n        var header = this.parent.element.querySelector('.e-headercontent');\n        this.upArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderuparrow e-reorderuparrow', attrs: { style: 'display:none' } }));\n        this.downArrow = header.appendChild(this.parent\n            .createElement('div', { className: 'e-icons e-icon-reorderdownarrow e-reorderdownarrow', attrs: { style: 'display:none' } }));\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, { type: events.actionComplete }));\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Reorder.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        remove(this.upArrow);\n        remove(this.downArrow);\n        this.parent.off(events.headerDrop, this.headerDrop);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.reorderComplete, this.onActionComplete);\n        this.parent.off(events.columnDrag, this.drag);\n        this.parent.off(events.columnDragStart, this.dragStart);\n        this.parent.off(events.columnDragStop, this.dragStop);\n        this.parent.off(events.headerRefreshed, this.createReorderElement);\n        //call ejdrag and drop destroy\n    };\n    Reorder.prototype.drag = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        if (e.column.allowReordering === false) {\n            return;\n        }\n        var closest = closestElement(target, '.e-headercell:not(.e-stackedHeaderCell)');\n        var cloneElement = gObj.element.querySelector('.e-cloneproperties');\n        var isLeft = this.x > getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n        this.setDisplay('none');\n        this.stopTimer();\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        this.updateScrollPostion(e.event);\n        if (closest && !closest.isEqualNode(this.element)) {\n            target = closest;\n            //consider stacked, detail header cell \n            if (!(!this.chkDropPosition(this.element, target) || !this.chkDropAllCols(this.element, target))) {\n                this.updateArrowPosition(target, isLeft);\n                classList(target, ['e-allowDrop', 'e-reorderindicate'], []);\n            }\n            else if (!(gObj.allowGrouping && parentsUntil(e.target, 'e-groupdroparea'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        }\n        gObj.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: e.column });\n    };\n    Reorder.prototype.updateScrollPostion = function (e) {\n        var _this = this;\n        var frzCols = this.parent.getFrozenColumns();\n        var x = getPosition(e).x;\n        var cliRect = this.parent.element.getBoundingClientRect();\n        var cliRectBaseLeft = frzCols ? this.parent.element.querySelector('.e-movableheader')\n            .getBoundingClientRect().left : cliRect.left;\n        var cliRectBaseRight = cliRect.right;\n        var scrollElem = frzCols ? this.parent.getContent().querySelector('.e-movablecontent')\n            : this.parent.getContent().firstElementChild;\n        if (x > cliRectBaseLeft && x < cliRectBaseLeft + 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, true); }, 50);\n        }\n        else if (x < cliRectBaseRight && x > cliRectBaseRight - 35) {\n            this.timer = window.setInterval(function () { _this.setScrollLeft(scrollElem, false); }, 50);\n        }\n    };\n    Reorder.prototype.setScrollLeft = function (scrollElem, isLeft) {\n        var scrollLeft = scrollElem.scrollLeft;\n        scrollElem.scrollLeft = scrollElem.scrollLeft + (isLeft ? -5 : 5);\n        if (scrollLeft !== scrollElem.scrollLeft) {\n            this.setDisplay('none');\n        }\n    };\n    Reorder.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    Reorder.prototype.updateArrowPosition = function (target, isLeft) {\n        var cliRect = target.getBoundingClientRect();\n        var cliRectBase = this.parent.element.getBoundingClientRect();\n        if ((isLeft && cliRect.left < cliRectBase.left) || (!isLeft && cliRect.right > cliRectBase.right)) {\n            return;\n        }\n        this.upArrow.style.top = cliRect.top + cliRect.height - cliRectBase.top + 'px';\n        this.downArrow.style.top = cliRect.top - cliRectBase.top - 4 + 'px';\n        this.upArrow.style.left = this.downArrow.style.left = (isLeft ? cliRect.left : cliRect.right) - cliRectBase.left - 4 + 'px';\n        this.setDisplay('');\n    };\n    Reorder.prototype.dragStart = function (e) {\n        var gObj = this.parent;\n        var target = e.target;\n        this.element = target.classList.contains('e-headercell') ? target :\n            parentsUntil(target, 'e-headercell');\n        if (e.column.allowReordering === false) {\n            return;\n        }\n        this.x = getPosition(e.event).x + gObj.getContent().firstElementChild.scrollLeft;\n        gObj.trigger(events.columnDragStart, {\n            target: target, draggableType: 'headercell', column: e.column\n        });\n    };\n    Reorder.prototype.dragStop = function (e) {\n        var gObj = this.parent;\n        this.setDisplay('none');\n        this.stopTimer();\n        if (!e.cancel) {\n            gObj.trigger(events.columnDrop, { target: e.target, draggableType: 'headercell', column: e.column });\n        }\n        removeClass(gObj.getHeaderTable().querySelectorAll('.e-reorderindicate'), ['e-reorderindicate']);\n    };\n    Reorder.prototype.setDisplay = function (display) {\n        this.upArrow.style.display = display;\n        this.downArrow.style.display = display;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Reorder.prototype.getModuleName = function () {\n        return 'reorder';\n    };\n    return Reorder;\n}());\nexport { Reorder };\n","import { Draggable } from '@syncfusion/ej2-base';\nimport { extend } from '@syncfusion/ej2-base';\nimport { remove, closest as closestElement, classList } from '@syncfusion/ej2-base';\nimport { parentsUntil, removeElement, getPosition } from '../base/util';\nimport * as events from '../base/constant';\n/**\n *\n * Reorder module is used to handle row reordering.\n * @hidden\n */\nvar RowDD = /** @class */ (function () {\n    /**\n     * Constructor for the Grid print module\n     * @hidden\n     */\n    function RowDD(parent) {\n        var _this = this;\n        //Internal variables    \n        this.selectedRows = [];\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            if (document.getElementsByClassName('e-griddragarea').length ||\n                (!e.sender.target.classList.contains('e-selectionbackground') && gObj.selectionSettings.type !== 'Single')) {\n                return false;\n            }\n            var visualElement = _this.parent.createElement('div', {\n                className: 'e-cloneproperties e-draganddrop e-grid e-dragclone',\n                styles: 'height:\"auto\", z-index:2, width:' + gObj.element.offsetWidth\n            });\n            var table = _this.parent.createElement('table', { styles: 'width:' + gObj.element.offsetWidth });\n            var tbody = _this.parent.createElement('tbody');\n            if (gObj.selectionSettings.mode === 'Row' && gObj.selectionSettings.type === 'Single') {\n                var index = parseInt(e.sender.target.parentElement.getAttribute('aria-rowindex'), 10);\n                gObj.selectRow(index);\n            }\n            var selectedRows = gObj.getSelectedRows();\n            for (var i = 0, len = selectedRows.length; i < len; i++) {\n                var selectedRow = selectedRows[i].cloneNode(true);\n                removeElement(selectedRow, '.e-indentcell');\n                removeElement(selectedRow, '.e-detailrowcollapse');\n                removeElement(selectedRow, '.e-detailrowexpand');\n                tbody.appendChild(selectedRow);\n            }\n            table.appendChild(tbody);\n            visualElement.appendChild(table);\n            gObj.element.appendChild(visualElement);\n            return visualElement;\n        };\n        this.dragStart = function (e) {\n            var gObj = _this.parent;\n            if (document.getElementsByClassName('e-griddragarea').length) {\n                return;\n            }\n            gObj.trigger(events.rowDragStart, {\n                rows: gObj.getSelectedRows(),\n                target: e.target, draggableType: 'rows', data: gObj.getSelectedRecords()\n            });\n            var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n                dropElem.ej2_instances[0].getContent().classList.add('e-allowRowDrop');\n            }\n            _this.isDragStop = false;\n        };\n        this.drag = function (e) {\n            var gObj = _this.parent;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            var target = _this.getElementFromPosition(cloneElement, e.event);\n            classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n            gObj.trigger(events.rowDrag, {\n                rows: gObj.getSelectedRows(),\n                target: target, draggableType: 'rows', data: gObj.getSelectedRecords()\n            });\n            gObj.element.classList.add('e-rowdrag');\n            if (!parentsUntil(target, 'e-gridcontent') ||\n                parentsUntil(cloneElement.parentElement, 'e-grid').id === parentsUntil(target, 'e-grid').id) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        };\n        this.dragStop = function (e) {\n            var gObj = _this.parent;\n            if (_this.parent.isDestroyed) {\n                return;\n            }\n            var target = _this.getElementFromPosition(e.helper, e.event);\n            gObj.element.classList.remove('e-rowdrag');\n            var dropElem = document.getElementById(gObj.rowDropSettings.targetID);\n            if (gObj.rowDropSettings.targetID && dropElem && dropElem.ej2_instances) {\n                dropElem.ej2_instances[0].getContent().classList.remove('e-allowRowDrop');\n            }\n            var args = {\n                target: target, draggableType: 'rows', cancel: false,\n                rows: gObj.getSelectedRows(), data: gObj.getSelectedRecords()\n            };\n            gObj.trigger(events.rowDrop, args);\n            if (!parentsUntil(target, 'e-gridcontent') || args.cancel) {\n                remove(e.helper);\n                return;\n            }\n        };\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.initializeDrag, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.parent.on(events.rowDragAndDropComplete, this.onActionComplete, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n    }\n    RowDD.prototype.initializeDrag = function () {\n        var gObj = this.parent;\n        var column;\n        var drag;\n        drag = new Draggable(gObj.getContent(), {\n            dragTarget: '.e-rowcell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop\n        });\n    };\n    RowDD.prototype.getElementFromPosition = function (element, event) {\n        var target;\n        var position = getPosition(event);\n        element.style.display = 'none';\n        target = document.elementFromPoint(position.x, position.y);\n        element.style.display = '';\n        return target;\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    RowDD.prototype.onActionComplete = function (e) {\n        this.parent.trigger(events.actionComplete, extend(e, { type: events.actionComplete }));\n    };\n    RowDD.prototype.getTargetIdx = function (targetRow) {\n        return targetRow ? parseInt(targetRow.getAttribute('aria-rowindex'), 10) : 0;\n    };\n    RowDD.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        if (e.droppedElement.getAttribute('action') !== 'grouping') {\n            var targetRow = closestElement(e.target, 'tr');\n            var srcControl = void 0;\n            var currentIndex = void 0;\n            if (e.droppedElement.parentElement.id !== gObj.element.id) {\n                srcControl = e.droppedElement.parentElement.ej2_instances[0];\n            }\n            else {\n                return;\n            }\n            if (srcControl.element.id !== gObj.element.id && srcControl.rowDropSettings.targetID !== gObj.element.id) {\n                return;\n            }\n            var records = srcControl.getSelectedRecords();\n            var targetIndex = currentIndex = this.getTargetIdx(targetRow);\n            var count = 0;\n            if (isNaN(targetIndex)) {\n                targetIndex = currentIndex = 0;\n            }\n            if (gObj.allowPaging) {\n                targetIndex = targetIndex + (gObj.pageSettings.currentPage * gObj.pageSettings.pageSize) - gObj.pageSettings.pageSize;\n            }\n            //Todo: drag and drop mapper & BatchChanges                   \n            gObj.notify(events.rowsAdded, { toIndex: targetIndex, records: records });\n            gObj.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n            var selectedRows = srcControl.getSelectedRowIndexes();\n            var skip = srcControl.allowPaging ?\n                (srcControl.pageSettings.currentPage * srcControl.pageSettings.pageSize) - srcControl.pageSettings.pageSize : 0;\n            this.selectedRows = [];\n            for (var i = 0, len = records.length; i < len; i++) {\n                this.selectedRows.push(skip + selectedRows[i]);\n            }\n            srcControl.notify(events.rowsRemoved, { indexes: this.selectedRows, records: records });\n            srcControl.notify(events.modelChanged, {\n                type: events.actionBegin, requestType: 'rowdraganddrop'\n            });\n        }\n    };\n    RowDD.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.initializeDrag();\n        }\n    };\n    /**\n     * To destroy the print\n     * @return {void}\n     * @hidden\n     */\n    RowDD.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.initializeDrag);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.off(events.rowDragAndDropComplete, this.onActionComplete);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        //destory ejdrag and drop\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    RowDD.prototype.getModuleName = function () {\n        return 'rowDragAndDrop';\n    };\n    return RowDD;\n}());\nexport { RowDD };\n","import { Draggable, Droppable } from '@syncfusion/ej2-base';\nimport { createElement, closest, remove, classList, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, extend } from '@syncfusion/ej2-base';\nimport { parentsUntil, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\n/**\n *\n * The `Group` module is used to handle group action.\n */\nvar Group = /** @class */ (function () {\n    /**\n     * Constructor for Grid group module\n     * @hidden\n     */\n    function Group(parent, groupSettings, sortedColumns, serviceLocator) {\n        var _this = this;\n        this.isAppliedGroup = false;\n        this.isAppliedUnGroup = false;\n        this.visualElement = createElement('div', {\n            className: 'e-cloneproperties e-dragclone e-gdclone',\n            styles: 'line-height:23px', attrs: { action: 'grouping' }\n        });\n        this.helper = function (e) {\n            var gObj = _this.parent;\n            var target = e.sender.target;\n            var element = target.classList.contains('e-groupheadercell') ? target :\n                parentsUntil(target, 'e-groupheadercell');\n            if (!element) {\n                return false;\n            }\n            _this.column = gObj.getColumnByField(element.firstElementChild.getAttribute('ej-mappingname'));\n            _this.visualElement.textContent = element.textContent;\n            _this.visualElement.style.width = element.offsetWidth + 2 + 'px';\n            _this.visualElement.style.height = element.offsetHeight + 2 + 'px';\n            _this.visualElement.setAttribute('e-mappinguid', _this.column.uid);\n            gObj.element.appendChild(_this.visualElement);\n            return _this.visualElement;\n        };\n        this.dragStart = function () {\n            _this.parent.element.classList.add('e-ungroupdrag');\n        };\n        this.drag = function (e) {\n            var target = e.target;\n            var cloneElement = _this.parent.element.querySelector('.e-cloneproperties');\n            _this.parent.trigger(events.columnDrag, { target: target, draggableType: 'headercell', column: _this.column });\n            classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n            if (!(parentsUntil(target, 'e-gridcontent') || parentsUntil(target, 'e-headercell'))) {\n                classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n            }\n        };\n        this.dragStop = function (e) {\n            _this.parent.element.classList.remove('e-ungroupdrag');\n            if (!(parentsUntil(e.target, 'e-gridcontent') || parentsUntil(e.target, 'e-gridheader'))) {\n                remove(e.helper);\n                return;\n            }\n        };\n        this.drop = function (e) {\n            var gObj = _this.parent;\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            _this.element.classList.remove('e-hover');\n            remove(e.droppedElement);\n            _this.aria.setDropTarget(_this.parent.element.querySelector('.e-groupdroparea'), false);\n            _this.aria.setGrabbed(_this.parent.getHeaderTable().querySelector('[aria-grabbed=true]'), false);\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                return;\n            }\n            _this.groupColumn(column.field);\n        };\n        this.contentRefresh = true;\n        this.aria = new AriaService();\n        this.parent = parent;\n        this.groupSettings = groupSettings;\n        this.serviceLocator = serviceLocator;\n        this.sortedColumns = sortedColumns;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n    }\n    Group.prototype.columnDrag = function (e) {\n        var gObj = this.parent;\n        var cloneElement = this.parent.element.querySelector('.e-cloneproperties');\n        classList(cloneElement, ['e-defaultcur'], ['e-notallowedcur']);\n        if (!parentsUntil(e.target, 'e-groupdroparea') &&\n            !(this.parent.allowReordering && parentsUntil(e.target, 'e-headercell'))) {\n            classList(cloneElement, ['e-notallowedcur'], ['e-defaultcur']);\n        }\n        e.target.classList.contains('e-groupdroparea') ? this.element.classList.add('e-hover') : this.element.classList.remove('e-hover');\n    };\n    Group.prototype.columnDragStart = function (e) {\n        if (e.target.classList.contains('e-stackedheadercell')) {\n            return;\n        }\n        var gObj = this.parent;\n        var dropArea = this.parent.element.querySelector('.e-groupdroparea');\n        this.aria.setDropTarget(dropArea, e.column.allowGrouping);\n        var element = e.target.classList.contains('e-headercell') ? e.target : parentsUntil(e.target, 'e-headercell');\n        this.aria.setGrabbed(element, true, !e.column.allowGrouping);\n    };\n    Group.prototype.columnDrop = function (e) {\n        var gObj = this.parent;\n        if (e.droppedElement.getAttribute('action') === 'grouping') {\n            var column = gObj.getColumnByUid(e.droppedElement.getAttribute('e-mappinguid'));\n            if (isNullOrUndefined(column) || column.allowGrouping === false ||\n                parentsUntil(gObj.getColumnHeaderByUid(column.uid), 'e-grid').getAttribute('id') !==\n                    gObj.element.getAttribute('id')) {\n                return;\n            }\n            this.ungroupColumn(column.field);\n        }\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRender, this);\n        this.parent.on(events.groupComplete, this.onActionComplete, this);\n        this.parent.on(events.ungroupComplete, this.onActionComplete, this);\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.columnDrag, this.columnDrag, this);\n        this.parent.on(events.columnDragStart, this.columnDragStart, this);\n        this.parent.on(events.columnDrop, this.columnDrop, this);\n        this.parent.on(events.headerRefreshed, this.refreshSortIcons, this);\n        this.parent.on(events.sortComplete, this.refreshSortIcons, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.contentReady, this.initialEnd, this);\n        this.parent.on(events.onEmpty, this.initialEnd, this);\n        this.parent.on(events.initialEnd, this.render, this);\n    };\n    /**\n     * @hidden\n     */\n    Group.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRender);\n        this.parent.off(events.groupComplete, this.onActionComplete);\n        this.parent.off(events.ungroupComplete, this.onActionComplete);\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.columnDrag, this.columnDrag);\n        this.parent.off(events.columnDragStart, this.columnDragStart);\n        this.parent.off(events.columnDrop, this.columnDrop);\n        this.parent.off(events.headerRefreshed, this.refreshSortIcons);\n        this.parent.off(events.sortComplete, this.refreshSortIcons);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n    };\n    Group.prototype.initialEnd = function () {\n        var gObj = this.parent;\n        this.parent.off(events.contentReady, this.initialEnd);\n        this.parent.off(events.onEmpty, this.initialEnd);\n        if (this.parent.getColumns().length && this.groupSettings.columns.length) {\n            this.contentRefresh = false;\n            for (var _i = 0, _a = gObj.groupSettings.columns; _i < _a.length; _i++) {\n                var col = _a[_i];\n                this.groupColumn(col);\n            }\n            this.contentRefresh = true;\n        }\n    };\n    Group.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        if ((!this.groupSettings.columns.length ||\n            ['altDownArrow', 'altUpArrow', 'ctrlDownArrow', 'ctrlUpArrow', 'enter'].indexOf(e.action) === -1)) {\n            return;\n        }\n        e.preventDefault();\n        switch (e.action) {\n            case 'altDownArrow':\n            case 'altUpArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var rows = gObj.getContentTable().querySelector('tbody').children;\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var grpRow = void 0;\n                    for (var i = dataRow.rowIndex; i >= 0; i--) {\n                        if (!rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-detailrow')) {\n                            grpRow = rows[i];\n                            break;\n                        }\n                    }\n                    this.expandCollapseRows(grpRow.querySelector(e.action === 'altUpArrow' ?\n                        '.e-recordplusexpand' : '.e-recordpluscollapse'));\n                }\n                break;\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'enter':\n                if (this.parent.isEdit || (closest(e.target, '#' + this.parent.element.id + '_searchbar') !== null)) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                var row = element ? element.parentElement.querySelector('[class^=\"e-record\"]') : null;\n                if (!row) {\n                    break;\n                }\n                this.expandCollapseRows(row);\n                break;\n        }\n    };\n    Group.prototype.clickHandler = function (e) {\n        this.expandCollapseRows(e.target);\n        this.applySortFromTarget(e.target);\n        this.unGroupFromTarget(e.target);\n        this.toogleGroupFromHeader(e.target);\n    };\n    Group.prototype.unGroupFromTarget = function (target) {\n        if (target.classList.contains('e-ungroupbutton')) {\n            this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n        }\n    };\n    Group.prototype.toogleGroupFromHeader = function (target) {\n        if (this.groupSettings.showToggleButton) {\n            if (target.classList.contains('e-grptogglebtn')) {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n                else {\n                    this.groupColumn(this.parent.getColumnByUid(target.parentElement.getAttribute('e-mappinguid')).field);\n                }\n            }\n            else {\n                if (target.classList.contains('e-toggleungroup')) {\n                    this.ungroupColumn(target.parentElement.getAttribute('ej-mappingname'));\n                }\n            }\n        }\n    };\n    Group.prototype.applySortFromTarget = function (target) {\n        var gObj = this.parent;\n        var gHeader = closest(target, '.e-groupheadercell');\n        if (gObj.allowSorting && gHeader && !target.classList.contains('e-ungroupbutton') &&\n            !target.classList.contains('e-toggleungroup')) {\n            var field = gHeader.firstElementChild.getAttribute('ej-mappingname');\n            if (gObj.getColumnHeaderByField(field).querySelectorAll('.e-ascending').length) {\n                gObj.sortColumn(field, 'Descending', true);\n            }\n            else {\n                gObj.sortColumn(field, 'Ascending', true);\n            }\n        }\n    };\n    /**\n     * Expands or collapses grouped rows by target element.\n     * @param  {Element} target - Defines the target element of the grouped row.\n     * @return {void}\n     */\n    Group.prototype.expandCollapseRows = function (target) {\n        var trgt = parentsUntil(target, 'e-recordplusexpand') ||\n            parentsUntil(target, 'e-recordpluscollapse');\n        if (trgt) {\n            var cellIdx = trgt.cellIndex;\n            var rowIdx = trgt.parentElement.rowIndex;\n            var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n            var rows = [].slice.call(rowNodes).slice(rowIdx + 1, rowNodes.length);\n            var isHide = void 0;\n            var expandElem = void 0;\n            var toExpand = [];\n            var indent = trgt.parentElement.querySelectorAll('.e-indentcell').length;\n            var expand = false;\n            if (trgt.classList.contains('e-recordpluscollapse')) {\n                addClass([trgt], 'e-recordplusexpand');\n                removeClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gdiagonaldown e-icon-gdownarrow';\n                expand = true;\n            }\n            else {\n                isHide = true;\n                removeClass([trgt], 'e-recordplusexpand');\n                addClass([trgt], 'e-recordpluscollapse');\n                trgt.firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n            }\n            this.aria.setExpand(trgt, expand);\n            for (var i = 0, len = rows.length; i < len; i++) {\n                if (rows[i].querySelectorAll('td')[cellIdx] &&\n                    rows[i].querySelectorAll('td')[cellIdx].classList.contains('e-indentcell') && rows) {\n                    if (isHide) {\n                        rows[i].style.display = 'none';\n                    }\n                    else {\n                        if (rows[i].querySelectorAll('.e-indentcell').length === indent + 1) {\n                            rows[i].style.display = '';\n                            expandElem = rows[i].querySelector('.e-recordplusexpand');\n                            if (expandElem) {\n                                toExpand.push(expandElem);\n                            }\n                            if (rows[i].classList.contains('e-detailrow')) {\n                                if (rows[i - 1].querySelectorAll('.e-detailrowcollapse').length) {\n                                    rows[i].style.display = 'none';\n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n            for (var i = 0, len = toExpand.length; i < len; i++) {\n                removeClass([toExpand[i]], 'e-recordplusexpand');\n                addClass([toExpand[i]], 'e-recordpluscollapse');\n                toExpand[i].firstElementChild.className = 'e-icons e-gnextforward e-icon-grightarrow';\n                this.expandCollapseRows(toExpand[i]);\n            }\n        }\n    };\n    Group.prototype.expandCollapse = function (isExpand) {\n        var rowNodes = this.parent.getContentTable().querySelector('tbody').children;\n        var row;\n        for (var i = 0, len = rowNodes.length; i < len; i++) {\n            if (rowNodes[i].querySelectorAll('.e-recordplusexpand, .e-recordpluscollapse').length) {\n                row = rowNodes[i].querySelector(isExpand ? '.e-recordpluscollapse' : '.e-recordplusexpand');\n                if (row) {\n                    row.className = isExpand ? 'e-recordplusexpand' : 'e-recordpluscollapse';\n                    row.firstElementChild.className = isExpand ? 'e-icons e-gdiagonaldown e-icon-gdownarrow' :\n                        'e-icons e-gnextforward e-icon-grightarrow';\n                }\n                if (!(rowNodes[i].firstElementChild.classList.contains('e-recordplusexpand') ||\n                    rowNodes[i].firstElementChild.classList.contains('e-recordpluscollapse'))) {\n                    rowNodes[i].style.display = isExpand ? '' : 'none';\n                }\n            }\n            else {\n                rowNodes[i].style.display = isExpand ? '' : 'none';\n            }\n        }\n    };\n    /**\n     * Expands all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Group.prototype.expandAll = function () {\n        this.expandCollapse(true);\n    };\n    /**\n     * Collapses all the grouped rows of the Grid.\n     * @return {void}\n     */\n    Group.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n    };\n    /**\n     * The function is used to render grouping\n     * @return {Element}\n     * @hidden\n     */\n    Group.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderGroupDropArea();\n        this.initDragAndDrop();\n        this.refreshToggleBtn();\n    };\n    Group.prototype.renderGroupDropArea = function () {\n        var groupElem = this.parent.element.querySelector('.e-groupdroparea');\n        if (groupElem) {\n            remove(groupElem);\n        }\n        this.element = this.parent.createElement('div', { className: 'e-groupdroparea', attrs: { 'tabindex': '-1' } });\n        this.updateGroupDropArea();\n        this.parent.element.insertBefore(this.element, this.parent.element.firstChild);\n        if (!this.groupSettings.showDropArea) {\n            this.element.style.display = 'none';\n        }\n    };\n    Group.prototype.updateGroupDropArea = function (clear) {\n        if (this.groupSettings.showDropArea && !this.groupSettings.columns.length) {\n            var dragLabel = this.l10n.getConstant('GroupDropArea');\n            this.element.innerHTML = dragLabel;\n            this.element.classList.remove('e-grouped');\n        }\n        else {\n            if ((this.element.innerHTML === this.l10n.getConstant('GroupDropArea') && (this.groupSettings.columns.length === 1\n                || !this.isAppliedGroup && !this.isAppliedUnGroup)) || clear) {\n                this.element.innerHTML = '';\n            }\n            this.element.classList.add('e-grouped');\n        }\n    };\n    Group.prototype.initDragAndDrop = function () {\n        this.initializeGHeaderDrop();\n        this.initializeGHeaderDrag();\n    };\n    Group.prototype.initializeGHeaderDrag = function () {\n        var drag = new Draggable(this.element, {\n            dragTarget: '.e-groupheadercell',\n            distance: 5,\n            helper: this.helper,\n            dragStart: this.dragStart,\n            drag: this.drag,\n            dragStop: this.dragStop\n        });\n    };\n    Group.prototype.initializeGHeaderDrop = function () {\n        var gObj = this.parent;\n        var drop = new Droppable(this.element, {\n            accept: '.e-dragclone',\n            drop: this.drop\n        });\n    };\n    /**\n     * Groups a column by column name.\n     * @param  {string} columnName - Defines the column name to group.\n     * @return {void}\n     */\n    Group.prototype.groupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false ||\n            (this.contentRefresh && this.groupSettings.columns.indexOf(columnName) > -1)) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.groupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = gObj.groupSettings.showGroupedColumn;\n        this.colName = columnName;\n        this.isAppliedGroup = true;\n        if (this.contentRefresh) {\n            this.updateModel();\n        }\n        else {\n            this.addColToGroupDrop(columnName);\n        }\n        this.updateGroupDropArea();\n        this.isAppliedGroup = false;\n    };\n    /**\n     * Ungroups a column by column name.\n     * @param  {string} columnName - Defines the column name to ungroup.\n     * @return {void}\n     */\n    Group.prototype.ungroupColumn = function (columnName) {\n        var gObj = this.parent;\n        var column = this.parent.enableColumnVirtualization ?\n            this.parent.columns.filter(function (c) { return c.field === columnName; })[0] : gObj.getColumnByField(columnName);\n        if (isNullOrUndefined(column) || column.allowGrouping === false || this.groupSettings.columns.indexOf(columnName) < 0) {\n            return;\n        }\n        if (isActionPrevent(gObj)) {\n            gObj.notify(events.preventBatch, { instance: this, handler: this.ungroupColumn, arg1: columnName });\n            return;\n        }\n        column.visible = true;\n        this.colName = column.field;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns.splice(columns.indexOf(this.colName), 1);\n        if (this.sortedColumns.indexOf(columnName) < 0) {\n            for (var i = 0, len = gObj.sortSettings.columns.length; i < len; i++) {\n                if (columnName === gObj.sortSettings.columns[i].field) {\n                    gObj.sortSettings.columns.splice(i, 1);\n                    break;\n                }\n            }\n        }\n        this.groupSettings.columns = columns;\n        if (gObj.allowGrouping) {\n            this.isAppliedUnGroup = true;\n            this.parent.dataBind();\n        }\n    };\n    /**\n     * The function used to update groupSettings\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.updateModel = function () {\n        var gObj = this.parent;\n        var i = 0;\n        var columns = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        columns.push(this.colName);\n        this.groupSettings.columns = columns;\n        this.groupAddSortingQuery(this.colName);\n        this.parent.dataBind();\n    };\n    /**\n     * The function used to trigger onActionComplete\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.onActionComplete = function (e) {\n        var gObj = this.parent;\n        if (e.requestType === 'grouping') {\n            this.addColToGroupDrop(this.colName);\n        }\n        else {\n            this.removeColFromGroupDrop(this.colName);\n        }\n        var args = this.groupSettings.columns.indexOf(this.colName) > -1 ? {\n            columnName: this.colName, requestType: 'grouping', type: events.actionComplete\n        } : { requestType: 'ungrouping', type: events.actionComplete };\n        this.parent.trigger(events.actionComplete, extend(e, args));\n        this.colName = null;\n    };\n    Group.prototype.groupAddSortingQuery = function (colName) {\n        var i = 0;\n        while (i < this.parent.sortSettings.columns.length) {\n            if (this.parent.sortSettings.columns[i].field === colName) {\n                break;\n            }\n            i++;\n        }\n        if (this.parent.sortSettings.columns.length === i) {\n            this.parent.sortSettings.columns.push({ field: colName, direction: 'Ascending' });\n        }\n        else if (!this.parent.allowSorting) {\n            this.parent.sortSettings.columns[i].direction = 'Ascending';\n        }\n    };\n    Group.prototype.addColToGroupDrop = function (field) {\n        var gObj = this.parent;\n        var direction = 'Ascending';\n        var groupedColumn = this.parent.createElement('div', { className: 'e-grid-icon e-groupheadercell' });\n        var childDiv = this.parent.createElement('div', { attrs: { 'ej-mappingname': field } });\n        var column = this.parent.getColumnByField(field);\n        if (isNullOrUndefined(column)) {\n            return;\n        }\n        //Todo headerTemplateID for grouped column, disableHtmlEncode                          \n        var headerCell = gObj.getColumnHeaderByUid(column.uid);\n        if (!isNullOrUndefined(column.headerTemplate)) {\n            if (column.headerTemplate.indexOf('#') !== -1) {\n                childDiv.innerHTML = document.querySelector(column.headerTemplate).innerHTML.trim();\n            }\n            else {\n                childDiv.innerHTML = column.headerTemplate;\n            }\n            childDiv.firstElementChild.classList.add('e-grouptext');\n        }\n        else {\n            childDiv.appendChild(this.parent.createElement('span', {\n                className: 'e-grouptext', innerHTML: column.headerText,\n                attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n            }));\n        }\n        if (this.groupSettings.showToggleButton) {\n            childDiv.appendChild(this.parent.createElement('span', {\n                className: 'e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup', innerHTML: '&nbsp;',\n                attrs: { tabindex: '-1', 'aria-label': 'ungroup button' }\n            }));\n        }\n        if (headerCell.querySelectorAll('.e-ascending,.e-descending').length) {\n            direction = headerCell.querySelector('.e-ascending') ? 'Ascending' : 'Descending';\n        }\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-groupsort e-icons ' +\n                ('e-' + direction.toLowerCase() + ' e-icon-' + direction.toLowerCase()), innerHTML: '&nbsp;',\n            attrs: { tabindex: '-1', 'aria-label': 'sort the grouped column' }\n        }));\n        childDiv.appendChild(this.parent.createElement('span', {\n            className: 'e-ungroupbutton e-icons e-icon-hide', innerHTML: '&nbsp;',\n            attrs: { title: this.l10n.getConstant('UnGroup'), tabindex: '-1', 'aria-label': 'ungroup the grouped column' },\n            styles: this.groupSettings.showUngroupButton ? '' : 'display:none'\n        }));\n        groupedColumn.appendChild(childDiv);\n        this.element.appendChild(groupedColumn);\n        //Todo:  rtl \n    };\n    Group.prototype.refreshToggleBtn = function (isRemove) {\n        if (this.groupSettings.showToggleButton) {\n            var headers = [].slice.call(this.parent.element.getElementsByClassName('e-headercelldiv'));\n            for (var i = 0, len = headers.length; i < len; i++) {\n                if (!((headers[i].classList.contains('e-emptycell')) || (headers[i].classList.contains('e-headerchkcelldiv')))) {\n                    var column = this.parent.getColumnByUid(headers[i].getAttribute('e-mappinguid'));\n                    if (!this.parent.showColumnMenu || (this.parent.showColumnMenu && !column.showColumnMenu)) {\n                        if (headers[i].querySelectorAll('.e-grptogglebtn').length) {\n                            remove(headers[i].querySelectorAll('.e-grptogglebtn')[0]);\n                        }\n                        if (!isRemove) {\n                            headers[i].appendChild(this.parent.createElement('span', {\n                                className: 'e-grptogglebtn e-icons ' +\n                                    (this.groupSettings.columns.indexOf(column.field) > -1 ? 'e-toggleungroup e-icon-ungroup'\n                                        : 'e-togglegroup e-icon-group'), attrs: { tabindex: '-1', 'aria-label': 'Group button' }\n                            }));\n                        }\n                    }\n                }\n            }\n        }\n    };\n    Group.prototype.removeColFromGroupDrop = function (field) {\n        if (!isNullOrUndefined(this.getGHeaderCell(field))) {\n            remove(this.getGHeaderCell(field));\n            this.updateGroupDropArea();\n        }\n        this.isAppliedUnGroup = false;\n    };\n    Group.prototype.onPropertyChanged = function (e) {\n        var _this = this;\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var _loop_1 = function (prop) {\n            switch (prop) {\n                case 'columns':\n                    var args = void 0;\n                    if (this_1.contentRefresh) {\n                        if (!this_1.isAppliedUnGroup) {\n                            if (!this_1.isAppliedGroup) {\n                                this_1.updateGroupDropArea(true);\n                                for (var i = 0; i < this_1.groupSettings.columns.length; i++) {\n                                    this_1.colName = this_1.groupSettings.columns[i];\n                                    var col = this_1.parent.getColumnByField(this_1.colName);\n                                    col.visible = this_1.parent.groupSettings.showGroupedColumn;\n                                    this_1.groupAddSortingQuery(this_1.colName);\n                                    if (i < this_1.groupSettings.columns.length - 1) {\n                                        this_1.addColToGroupDrop(this_1.groupSettings.columns[i]);\n                                    }\n                                }\n                            }\n                            args = { columnName: this_1.colName, requestType: e.properties[prop].length ? 'grouping' : 'ungrouping',\n                                type: events.actionBegin };\n                        }\n                        else {\n                            args = { requestType: 'ungrouping', type: events.actionBegin };\n                        }\n                        if (!this_1.groupSettings.showGroupedColumn) {\n                            e.oldProperties[prop].forEach(function (column) {\n                                if (e.properties[prop].indexOf(column) === -1) {\n                                    _this.parent.getColumnByField(column).visible = true;\n                                }\n                            });\n                        }\n                        this_1.parent.notify(events.modelChanged, args);\n                    }\n                    break;\n                case 'showDropArea':\n                    this_1.updateGroupDropArea();\n                    this_1.groupSettings.showDropArea ? this_1.element.style.display = '' : this_1.element.style.display = 'none';\n                    break;\n                case 'showGroupedColumn':\n                    this_1.updateGroupedColumn(this_1.groupSettings.showGroupedColumn);\n                    this_1.parent.notify(events.modelChanged, { requestType: 'refresh' });\n                    break;\n                case 'showUngroupButton':\n                    this_1.updateButtonVisibility(this_1.groupSettings.showUngroupButton, 'e-ungroupbutton');\n                    break;\n                case 'showToggleButton':\n                    this_1.updateButtonVisibility(this_1.groupSettings.showToggleButton, 'e-togglegroupbutton ');\n                    this_1.parent.refreshHeader();\n                    break;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            _loop_1(prop);\n        }\n    };\n    Group.prototype.updateGroupedColumn = function (isVisible) {\n        for (var i = 0; i < this.groupSettings.columns.length; i++) {\n            this.parent.getColumnByField(this.groupSettings.columns[i]).visible = isVisible;\n        }\n    };\n    Group.prototype.updateButtonVisibility = function (isVisible, className) {\n        var gHeader = [].slice.call(this.element.querySelectorAll('.' + className));\n        for (var i = 0; i < gHeader.length; i++) {\n            gHeader[i].style.display = isVisible ? '' : 'none';\n        }\n    };\n    Group.prototype.enableAfterRender = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    /**\n     * To destroy the reorder\n     * @return {void}\n     * @hidden\n     */\n    Group.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        if (!this.parent.isDestroyed) {\n            this.clearGrouping();\n        }\n        this.removeEventListener();\n        this.refreshToggleBtn(true);\n        remove(this.element);\n        //call ejdrag and drop destroy\n    };\n    /**\n     * Clears all the grouped columns of the Grid.\n     * @return {void}\n     */\n    Group.prototype.clearGrouping = function () {\n        var cols = JSON.parse(JSON.stringify(this.groupSettings.columns));\n        this.contentRefresh = false;\n        for (var i = 0, len = cols.length; i < len; i++) {\n            this.ungroupColumn(cols[i]);\n        }\n        this.contentRefresh = true;\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Group.prototype.getModuleName = function () {\n        return 'group';\n    };\n    Group.prototype.refreshSortIcons = function (e) {\n        var gObj = this.parent;\n        var header;\n        var cols = gObj.sortSettings.columns;\n        var gCols = gObj.groupSettings.columns;\n        var fieldNames = this.parent.getColumns().map(function (c) { return c.field; });\n        this.refreshToggleBtn();\n        for (var i = 0, len = cols.length; i < len; i++) {\n            if (fieldNames.indexOf(cols[i].field) === -1) {\n                continue;\n            }\n            header = gObj.getColumnHeaderByField(cols[i].field);\n            if (!gObj.allowSorting && (this.sortedColumns.indexOf(cols[i].field) > -1 ||\n                this.groupSettings.columns.indexOf(cols[i].field) > -1)) {\n                classList(header.querySelector('.e-sortfilterdiv'), ['e-ascending', 'e-icon-ascending'], []);\n                if (cols.length > 1) {\n                    header.querySelector('.e-headercelldiv').appendChild(this.parent.createElement('span', { className: 'e-sortnumber', innerHTML: (i + 1).toString() }));\n                }\n            }\n            else if (this.getGHeaderCell(cols[i].field) && this.getGHeaderCell(cols[i].field).querySelectorAll('.e-groupsort').length) {\n                if (cols[i].direction === 'Ascending') {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-ascending', 'e-icon-ascending'], ['e-descending', 'e-icon-descending']);\n                }\n                else {\n                    classList(this.getGHeaderCell(cols[i].field).querySelector('.e-groupsort'), ['e-descending', 'e-icon-descending'], ['e-ascending', 'e-icon-ascending']);\n                }\n            }\n        }\n        for (var i = 0, len = gCols.length; i < len; i++) {\n            if (fieldNames.indexOf(gCols[i]) === -1) {\n                continue;\n            }\n            gObj.getColumnHeaderByField(gCols[i]).setAttribute('aria-grouped', 'true');\n        }\n    };\n    Group.prototype.getGHeaderCell = function (field) {\n        if (this.element && this.element.querySelector('[ej-mappingname=\"' + field + '\"]')) {\n            return this.element.querySelector('[ej-mappingname=\"' + field + '\"]').parentElement;\n        }\n        return null;\n    };\n    return Group;\n}());\nexport { Group };\n","import { closest, classList } from '@syncfusion/ej2-base';\nimport { Grid } from '../base/grid';\nimport { parents, getUid, appendChildren } from '../base/util';\nimport * as events from '../base/constant';\nimport { AriaService } from '../services/aria-service';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { CellType } from '../base/enum';\n/**\n * The `DetailRow` module is used to handle detail template and hierarchy Grid operations.\n */\nvar DetailRow = /** @class */ (function () {\n    /**\n     * Constructor for the Grid detail template module\n     * @hidden\n     */\n    function DetailRow(parent, locator) {\n        //Internal variables\n        this.aria = new AriaService();\n        this.parent = parent;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.focus = locator.getService('focus');\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n    }\n    DetailRow.prototype.clickHandler = function (e) {\n        this.toogleExpandcollapse(closest(e.target, 'td'));\n    };\n    DetailRow.prototype.toogleExpandcollapse = function (target) {\n        var gObj = this.parent;\n        var parent = 'parentDetails';\n        if (target && (target.classList.contains('e-detailrowcollapse') || target.classList.contains('e-detailrowexpand'))) {\n            var tr = target.parentElement;\n            var uid_1 = tr.getAttribute('data-uid');\n            var nextRow = this.parent.getContentTable().querySelector('tbody').children[tr.rowIndex + 1];\n            if (target.classList.contains('e-detailrowcollapse')) {\n                var key = 'records';\n                var currentViewData = gObj.allowGrouping && gObj.groupSettings.columns.length ?\n                    gObj.currentViewData[key] : gObj.currentViewData;\n                var data = currentViewData[tr.getAttribute('aria-rowindex')];\n                if (this.isDetailRow(nextRow)) {\n                    nextRow.style.display = '';\n                }\n                else if (gObj.getDetailTemplate() || gObj.childGrid) {\n                    var detailRow = this.parent.createElement('tr', { className: 'e-detailrow' });\n                    var detailCell = this.parent.createElement('td', { className: 'e-detailcell' });\n                    detailCell.setAttribute('colspan', this.parent.getVisibleColumns().length.toString());\n                    var row = new Row({\n                        isDataRow: true,\n                        isExpand: true,\n                        cells: [new Cell({ cellType: CellType.Indent }), new Cell({ isDataCell: true, visible: true })]\n                    });\n                    for (var i = 0, len = gObj.groupSettings.columns.length; i < len; i++) {\n                        detailRow.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n                        row.cells.unshift(new Cell({ cellType: CellType.Indent }));\n                    }\n                    detailRow.appendChild(this.parent.createElement('td', { className: 'e-detailindentcell' }));\n                    detailRow.appendChild(detailCell);\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                    if (gObj.detailTemplate) {\n                        appendChildren(detailCell, gObj.getDetailTemplate()(data, gObj, 'detailTemplate'));\n                    }\n                    else {\n                        gObj.childGrid[parent] = {\n                            parentID: gObj.element.id,\n                            parentPrimaryKeys: gObj.getPrimaryKeyFieldNames(),\n                            parentKeyField: gObj.childGrid.queryString,\n                            parentKeyFieldValue: data[gObj.childGrid.queryString],\n                            parentRowData: data\n                        };\n                        var grid = new Grid(gObj.childGrid);\n                        var modules = grid.getInjectedModules();\n                        var injectedModues = gObj.getInjectedModules();\n                        if (!modules || modules.length !== injectedModues.length) {\n                            grid.setInjectedModules(injectedModues);\n                        }\n                        var gridElem = this.parent.createElement('div', {\n                            id: 'child' + parents(tr, 'e-grid').length +\n                                '_grid' + tr.rowIndex + getUid('')\n                        });\n                        detailCell.appendChild(gridElem);\n                        grid.appendTo(gridElem);\n                    }\n                    detailRow.appendChild(detailCell);\n                    tr.parentNode.insertBefore(detailRow, tr.nextSibling);\n                    var idx_1;\n                    this.parent.getRowsObject().some(function (r, rIndex) { idx_1 = rIndex; return r.uid === uid_1; });\n                    gObj.getRows().splice(tr.rowIndex + 1, 0, detailRow);\n                    this.parent.getRowsObject().splice(idx_1 + 1, 0, row);\n                    gObj.trigger(events.detailDataBound, { detailElement: detailCell, data: data });\n                    gObj.notify(events.detailDataBound, { rows: this.parent.getRowsObject() });\n                }\n                classList(target, ['e-detailrowexpand'], ['e-detailrowcollapse']);\n                classList(target.firstElementChild, ['e-dtdiagonaldown', 'e-icon-gdownarrow'], ['e-dtdiagonalright', 'e-icon-grightarrow']);\n                this.parent.getRowsObject()[tr.rowIndex].isExpand = true;\n                this.aria.setExpand(target, true);\n            }\n            else {\n                if (this.isDetailRow(nextRow)) {\n                    nextRow.style.display = 'none';\n                }\n                classList(target, ['e-detailrowcollapse'], ['e-detailrowexpand']);\n                classList(target.firstElementChild, ['e-dtdiagonalright', 'e-icon-grightarrow'], ['e-dtdiagonaldown', 'e-icon-gdownarrow']);\n                this.parent.getRowsObject()[tr.rowIndex].isExpand = false;\n                this.aria.setExpand(target, false);\n            }\n        }\n    };\n    DetailRow.prototype.isDetailRow = function (row) {\n        return row && row.classList.contains('e-detailrow');\n    };\n    DetailRow.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (this.parent.isDestroyed || !gridElement || (!gridElement.querySelector('.e-gridheader') &&\n            !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n    };\n    DetailRow.prototype.getTDfromIndex = function (index, className) {\n        var tr = this.parent.getDataRows()[index];\n        if (tr && tr.querySelector(className)) {\n            return tr.querySelector(className);\n        }\n        return null;\n    };\n    /**\n     * Expands a detail row with the given target.\n     * @param  {Element} target - Defines the collapsed element to expand.\n     * @return {void}\n     */\n    DetailRow.prototype.expand = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowcollapse');\n        }\n        if (target && target.classList.contains('e-detailrowcollapse')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Collapses a detail row with the given target.\n     * @param  {Element} target - Defines the expanded element to collapse.\n     * @return {void}\n     */\n    DetailRow.prototype.collapse = function (target) {\n        if (!isNaN(target)) {\n            target = this.getTDfromIndex(target, '.e-detailrowexpand');\n        }\n        if (target && target.classList.contains('e-detailrowexpand')) {\n            this.toogleExpandcollapse(target);\n        }\n    };\n    /**\n     * Expands all the detail rows of the Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.expandAll = function () {\n        this.expandCollapse(true);\n    };\n    /**\n     * Collapses all the detail rows of the Grid.\n     * @return {void}\n     */\n    DetailRow.prototype.collapseAll = function () {\n        this.expandCollapse(false);\n    };\n    DetailRow.prototype.expandCollapse = function (isExpand) {\n        var td;\n        var rows = this.parent.getDataRows();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            td = rows[i].querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n            isExpand ? this.expand(td) : this.collapse(td);\n        }\n    };\n    DetailRow.prototype.keyPressHandler = function (e) {\n        var gObj = this.parent;\n        switch (e.action) {\n            case 'ctrlDownArrow':\n                this.expandAll();\n                break;\n            case 'ctrlUpArrow':\n                this.collapseAll();\n                break;\n            case 'altUpArrow':\n            case 'altDownArrow':\n                var selected = gObj.allowSelection ? gObj.getSelectedRowIndexes() : [];\n                if (selected.length) {\n                    var dataRow = gObj.getDataRows()[selected[selected.length - 1]];\n                    var td = dataRow.querySelector('.e-detailrowcollapse, .e-detailrowexpand');\n                    e.action === 'altDownArrow' ? this.expand(td) : this.collapse(td);\n                }\n                break;\n            case 'enter':\n                if (this.parent.isEdit) {\n                    return;\n                }\n                var element = this.focus.getFocusedElement();\n                if (!e.target.classList.contains('e-detailrowcollapse') &&\n                    !e.target.classList.contains('e-detailrowexpand')) {\n                    break;\n                }\n                this.toogleExpandcollapse(element);\n                break;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    DetailRow.prototype.getModuleName = function () {\n        return 'detailRow';\n    };\n    return DetailRow;\n}());\nexport { DetailRow };\n","import { EventHandler, extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { Toolbar as tool } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { templateCompiler, appendChildren } from '../base/util';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `Toolbar` module is used to handle ToolBar actions.\n * @hidden\n */\nvar Toolbar = /** @class */ (function () {\n    function Toolbar(parent, serviceLocator) {\n        this.predefinedItems = {};\n        this.items = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print', 'Search',\n            'ColumnChooser', 'PdfExport', 'ExcelExport', 'CsvExport', 'WordExport'];\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    Toolbar.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        var preItems = ['Add', 'Edit', 'Update', 'Delete', 'Cancel', 'Print',\n            'PdfExport', 'ExcelExport', 'WordExport', 'CsvExport'];\n        for (var _i = 0, preItems_1 = preItems; _i < preItems_1.length; _i++) {\n            var item = preItems_1[_i];\n            var itemStr = item.toLowerCase();\n            var localeName = itemStr[0].toUpperCase() + itemStr.slice(1);\n            this.predefinedItems[item] = {\n                id: this.gridID + '_' + itemStr, prefixIcon: 'e-' + itemStr,\n                text: this.l10n.getConstant(localeName), tooltipText: this.l10n.getConstant(localeName)\n            };\n        }\n        this.predefinedItems.Search = {\n            id: this.gridID + '_search',\n            template: '<div class=\"e-input-group e-search\" role=\"search\">\\\n            <input id=\"' + this.gridID + '_searchbar\" class=\"e-input\" name=\"input\" type=\"search\" \\\n            placeholder= \\\"' + this.l10n.getConstant('Search') + '\\\"/>\\\n            <span id=\"' + this.gridID + '_searchbutton\" class=\"e-input-group-icon e-search-icon e-icons\" \\\n            tabindex=\"-1\" title=\"' + this.l10n.getConstant('Search') + '\" aria-label= \"search\"></span> \\\n            </div>',\n            tooltipText: this.l10n.getConstant('Search'), align: 'Right', cssClass: 'e-search-wrapper'\n        };\n        this.predefinedItems.ColumnChooser = {\n            id: this.gridID + '_' + 'columnchooser', cssClass: 'e-cc e-ccdiv e-cc-toolbar', suffixIcon: 'e-' + 'columnchooser-btn',\n            text: this.l10n.getConstant('Columnchooser'), tooltipText: this.l10n.getConstant('Columnchooser'), align: 'Right',\n        };\n        this.createToolbar();\n    };\n    /**\n     * Gets the toolbar of the Grid.\n     * @return {Element}\n     * @hidden\n     */\n    Toolbar.prototype.getToolbar = function () {\n        return this.toolbar.element;\n    };\n    /**\n     * Destroys the ToolBar.\n     * @method destroy\n     * @return {void}\n     */\n    Toolbar.prototype.destroy = function () {\n        if (this.toolbar && !this.toolbar.isDestroyed) {\n            if (!this.toolbar.element) {\n                this.parent.destroyTemplate(['toolbarTemplate']);\n            }\n            else {\n                this.toolbar.destroy();\n            }\n            this.unWireEvent();\n            this.removeEventListener();\n            remove(this.element);\n        }\n    };\n    Toolbar.prototype.createToolbar = function () {\n        var items = this.getItems();\n        this.toolbar = new tool({\n            items: items,\n            clicked: this.toolbarClickHandler.bind(this),\n            enablePersistence: this.parent.enablePersistence,\n            enableRtl: this.parent.enableRtl\n        });\n        var viewStr = 'viewContainerRef';\n        var registerTemp = 'registeredTemplate';\n        if (this.parent[viewStr]) {\n            this.toolbar[registerTemp] = {};\n            this.toolbar[viewStr] = this.parent[viewStr];\n        }\n        this.element = this.parent.createElement('div', { id: this.gridID + '_toolbarItems' });\n        if (this.parent.toolbarTemplate) {\n            if (typeof (this.parent.toolbarTemplate) === 'string') {\n                this.toolbar.appendTo(this.parent.toolbarTemplate);\n                this.element = this.toolbar.element;\n            }\n            else {\n                appendChildren(this.element, templateCompiler(this.parent.toolbarTemplate)({}, this.parent, 'toolbarTemplate'));\n            }\n        }\n        else {\n            this.toolbar.appendTo(this.element);\n        }\n        this.parent.element.insertBefore(this.element, this.parent.getHeaderContent());\n        this.searchElement = this.element.querySelector('#' + this.gridID + '_searchbar');\n        this.wireEvent();\n        this.refreshToolbarItems();\n        if (this.parent.searchSettings) {\n            this.updateSearchBox();\n        }\n    };\n    Toolbar.prototype.refreshToolbarItems = function (args) {\n        var gObj = this.parent;\n        var enableItems = [];\n        var disableItems = [];\n        var edit = gObj.editSettings;\n        var hasData = gObj.currentViewData && gObj.currentViewData.length;\n        edit.allowAdding ? enableItems.push(this.gridID + '_add') : disableItems.push(this.gridID + '_add');\n        edit.allowEditing && hasData ? enableItems.push(this.gridID + '_edit') : disableItems.push(this.gridID + '_edit');\n        edit.allowDeleting && hasData ? enableItems.push(this.gridID + '_delete') : disableItems.push(this.gridID + '_delete');\n        if (gObj.editSettings.mode === 'Batch') {\n            if (gObj.element.querySelectorAll('.e-updatedtd').length && (edit.allowAdding || edit.allowEditing)) {\n                enableItems.push(this.gridID + '_update');\n                enableItems.push(this.gridID + '_cancel');\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        else {\n            if (gObj.isEdit && (edit.allowAdding || edit.allowEditing)) {\n                enableItems = [this.gridID + '_update', this.gridID + '_cancel'];\n                disableItems = [this.gridID + '_add', this.gridID + '_edit', this.gridID + '_delete'];\n            }\n            else {\n                disableItems.push(this.gridID + '_update');\n                disableItems.push(this.gridID + '_cancel');\n            }\n        }\n        this.enableItems(enableItems, true);\n        this.enableItems(disableItems, false);\n    };\n    Toolbar.prototype.getItems = function () {\n        var items = [];\n        var toolbarItems = this.parent.toolbar || [];\n        if (typeof (this.parent.toolbar) === 'string') {\n            return [];\n        }\n        for (var _i = 0, toolbarItems_1 = toolbarItems; _i < toolbarItems_1.length; _i++) {\n            var item = toolbarItems_1[_i];\n            switch (typeof item) {\n                case 'number':\n                    items.push(this.getItemObject(this.items[item]));\n                    break;\n                case 'string':\n                    items.push(this.getItemObject(item));\n                    break;\n                default:\n                    items.push(this.getItem(item));\n            }\n        }\n        return items;\n    };\n    Toolbar.prototype.getItem = function (itemObject) {\n        var item = this.predefinedItems[itemObject.text];\n        return item ? extend(item, item, itemObject) : itemObject;\n    };\n    Toolbar.prototype.getItemObject = function (itemName) {\n        return this.predefinedItems[itemName] || { text: itemName, id: this.gridID + '_' + itemName };\n    };\n    /**\n     * Enables or disables ToolBar items.\n     * @param {string[]} items - Defines the collection of itemID of ToolBar items.\n     * @param {boolean} isEnable - Defines the items to be enabled or disabled.\n     * @return {void}\n     * @hidden\n     */\n    Toolbar.prototype.enableItems = function (items, isEnable) {\n        for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n            var item = items_1[_i];\n            var element = this.element.querySelector('#' + item);\n            if (element) {\n                this.toolbar.enableItems(element.parentElement, isEnable);\n            }\n        }\n    };\n    Toolbar.prototype.toolbarClickHandler = function (args) {\n        var gObj = this.parent;\n        var gID = this.gridID;\n        extend(args, { cancel: false });\n        gObj.trigger(events.toolbarClick, args);\n        if (args.cancel) {\n            return;\n        }\n        switch (!isNullOrUndefined(args.item) && args.item.id) {\n            case gID + '_print':\n                gObj.print();\n                break;\n            case gID + '_edit':\n                gObj.startEdit();\n                break;\n            case gID + '_update':\n                gObj.endEdit();\n                break;\n            case gID + '_cancel':\n                gObj.closeEdit();\n                break;\n            case gID + '_add':\n                gObj.addRecord();\n                break;\n            case gID + '_delete':\n                gObj.deleteRecord();\n                break;\n            case gID + '_search':\n                if (args.originalEvent.target.id === gID + '_searchbutton') {\n                    this.search();\n                }\n                break;\n            case gID + '_columnchooser':\n                var tarElement = this.parent.element.querySelector('.e-ccdiv');\n                var y = tarElement.getBoundingClientRect().top;\n                var x = tarElement.getBoundingClientRect().left;\n                var targetEle = args.originalEvent.target;\n                y = tarElement.getBoundingClientRect().top + tarElement.offsetTop;\n                gObj.createColumnchooser(x, y, targetEle);\n                break;\n        }\n    };\n    Toolbar.prototype.modelChanged = function (e) {\n        if (e.module === 'edit') {\n            this.refreshToolbarItems();\n        }\n    };\n    Toolbar.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName() || !this.parent.toolbar) {\n            return;\n        }\n        if (this.element) {\n            remove(this.element);\n        }\n        this.render();\n    };\n    Toolbar.prototype.keyUpHandler = function (e) {\n        if (e.keyCode === 13) {\n            this.search();\n        }\n    };\n    Toolbar.prototype.search = function () {\n        this.parent.search(this.searchElement.value);\n    };\n    Toolbar.prototype.updateSearchBox = function () {\n        if (this.searchElement) {\n            this.searchElement.value = this.parent.searchSettings.key;\n        }\n    };\n    Toolbar.prototype.wireEvent = function () {\n        if (this.searchElement) {\n            this.searchBoxObj = new SearchBox(this.searchElement);\n            EventHandler.add(this.searchElement, 'keyup', this.keyUpHandler, this);\n            this.searchBoxObj.wireEvent();\n        }\n    };\n    Toolbar.prototype.unWireEvent = function () {\n        if (this.searchElement) {\n            EventHandler.remove(this.searchElement, 'keyup', this.keyUpHandler);\n            this.searchBoxObj.unWireEvent();\n        }\n    };\n    Toolbar.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.on(events.uiUpdate, this.onPropertyChanged, this);\n        this.parent.on(events.inBoundModelChanged, this.updateSearchBox.bind(this));\n        this.parent.on(events.modelChanged, this.refreshToolbarItems, this);\n        this.parent.on(events.toolbarRefresh, this.refreshToolbarItems, this);\n        this.parent.on(events.inBoundModelChanged, this.modelChanged, this);\n        this.parent.on(events.dataBound, this.refreshToolbarItems, this);\n    };\n    Toolbar.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.uiUpdate, this.onPropertyChanged);\n        this.parent.off(events.inBoundModelChanged, this.updateSearchBox);\n        this.parent.off(events.modelChanged, this.refreshToolbarItems);\n        this.parent.off(events.toolbarRefresh, this.refreshToolbarItems);\n        this.parent.off(events.inBoundModelChanged, this.modelChanged);\n        this.parent.off(events.dataBound, this.refreshToolbarItems);\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    Toolbar.prototype.getModuleName = function () {\n        return 'toolbar';\n    };\n    return Toolbar;\n}());\nexport { Toolbar };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, remove } from '@syncfusion/ej2-base';\nimport { formatUnit } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { colGroupRefresh, columnWidthChanged, scroll, columnVisibilityChanged } from '../base/constant';\nimport { ContentRender } from './content-renderer';\nimport { RowRenderer } from './row-renderer';\nimport { SummaryModelGenerator } from '../services/summary-model-generator';\nimport { renderMovable } from '../base/util';\n/**\n * Footer module is used to render grid content\n * @hidden\n */\nvar FooterRenderer = /** @class */ (function (_super) {\n    __extends(FooterRenderer, _super);\n    function FooterRenderer(gridModule, serviceLocator) {\n        var _this = _super.call(this, gridModule, serviceLocator) || this;\n        _this.aggregates = {};\n        _this.parent = gridModule;\n        _this.locator = serviceLocator;\n        _this.modelGenerator = new SummaryModelGenerator(_this.parent);\n        _this.addEventListener();\n        return _this;\n    }\n    /**\n     * The function is used to render grid footer div\n     */\n    FooterRenderer.prototype.renderPanel = function () {\n        var div = this.parent.createElement('div', { className: 'e-gridfooter' });\n        var innerDiv = this.parent.createElement('div', { className: 'e-summarycontent' });\n        var movableContent = innerDiv;\n        if (this.parent.getFrozenColumns()) {\n            var fDiv = this.parent.createElement('div', { className: 'e-frozenfootercontent' });\n            var mDiv = this.parent.createElement('div', { className: 'e-movablefootercontent' });\n            innerDiv.appendChild(fDiv);\n            innerDiv.appendChild(mDiv);\n            this.frozenContent = fDiv;\n            this.movableContent = mDiv;\n            movableContent = mDiv;\n        }\n        if (Browser.isDevice) {\n            movableContent.style.overflowX = 'scroll';\n        }\n        div.appendChild(innerDiv);\n        this.setPanel(div);\n        if (this.parent.getPager() != null) {\n            this.parent.element.insertBefore(div, this.parent.getPager());\n        }\n        else {\n            this.parent.element.appendChild(div);\n        }\n    };\n    /**\n     * The function is used to render grid footer table\n     */\n    FooterRenderer.prototype.renderTable = function () {\n        var contentDiv = this.getPanel();\n        var innerDiv = this.createContentTable('_footer_table');\n        var table = innerDiv.querySelector('.e-table');\n        var tFoot = this.parent.createElement('tfoot');\n        table.appendChild(tFoot);\n        if (this.parent.getFrozenColumns()) {\n            var freezeTable = table.cloneNode(true);\n            this.frozenContent.appendChild(freezeTable);\n            this.freezeTable = freezeTable;\n            this.movableContent.appendChild(table);\n            remove(table.querySelector('colgroup'));\n            var colGroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n            table.insertBefore(colGroup, table.querySelector('tbody'));\n            this.setColGroup(colGroup);\n        }\n        this.setTable(table);\n    };\n    FooterRenderer.prototype.renderSummaryContent = function (e, table, cStart, cEnd) {\n        var input = this.parent.dataSource instanceof Array ? this.parent.dataSource : this.parent.currentViewData;\n        var summaries = this.modelGenerator.getData();\n        var dummies = isNullOrUndefined(cStart) ? this.modelGenerator.getColumns() :\n            this.modelGenerator.getColumns(cStart, cEnd);\n        var rows = isNullOrUndefined(cStart) ? this.modelGenerator.generateRows(input, e || this.aggregates) :\n            this.modelGenerator.generateRows(input, e || this.aggregates, cStart, cEnd);\n        var fragment = document.createDocumentFragment();\n        var rowrenderer = new RowRenderer(this.locator, null, this.parent);\n        rowrenderer.element = this.parent.createElement('TR', { className: 'e-summaryrow' });\n        for (var srow = 0, len = summaries.length; srow < len; srow++) {\n            var row = rows[srow];\n            if (!row) {\n                continue;\n            }\n            var tr = rowrenderer.render(row, dummies);\n            fragment.appendChild(tr);\n        }\n        table.tFoot.appendChild(fragment);\n        this.aggregates = e;\n    };\n    FooterRenderer.prototype.refresh = function (e) {\n        if (this.parent.getFrozenColumns()) {\n            remove(this.getPanel());\n            this.renderPanel();\n            this.renderTable();\n            this.freezeTable.tFoot.innerHTML = '';\n            this.renderSummaryContent(e, this.freezeTable, 0, this.parent.getFrozenColumns());\n        }\n        this.getTable().tFoot.innerHTML = '';\n        this.renderSummaryContent(e, this.getTable(), this.parent.getFrozenColumns());\n        // check freeze content have no row case\n        if (this.parent.getFrozenColumns()) {\n            var frozenDiv = this.frozenContent;\n            if (!frozenDiv.offsetHeight) {\n                frozenDiv.style.height = this.getTable().offsetHeight + 'px';\n            }\n        }\n        this.onScroll();\n    };\n    FooterRenderer.prototype.refreshCol = function () {\n        // frozen table \n        var mheaderCol;\n        var fheaderCol = mheaderCol = this.parent.element.querySelector('.e-gridheader').querySelector('colgroup').cloneNode(true);\n        if (this.parent.getFrozenColumns()) {\n            mheaderCol = renderMovable(fheaderCol, this.parent.getFrozenColumns());\n            this.freezeTable.replaceChild(fheaderCol, this.freezeTable.querySelector('colGroup'));\n        }\n        this.getTable().replaceChild(mheaderCol, this.getColGroup());\n        this.setColGroup(mheaderCol);\n    };\n    FooterRenderer.prototype.onWidthChange = function (args) {\n        this.getColFromIndex(args.index).style.width = formatUnit(args.width);\n        if (this.parent.allowResizing && args.module === 'resize') {\n            this.updateFooterTableWidth(this.getTable());\n        }\n    };\n    FooterRenderer.prototype.onScroll = function (e) {\n        if (e === void 0) { e = { left: this.parent.getContent().firstChild.scrollLeft }; }\n        this.getTable().parentElement.scrollLeft = e.left;\n    };\n    FooterRenderer.prototype.getColFromIndex = function (index) {\n        var fCol = this.parent.getFrozenColumns();\n        if (fCol && fCol > index) {\n            return this.freezeTable.querySelector('colGroup').children[index];\n        }\n        return this.getColGroup().children[index - fCol];\n    };\n    FooterRenderer.prototype.columnVisibilityChanged = function () {\n        this.refresh();\n    };\n    FooterRenderer.prototype.addEventListener = function () {\n        this.parent.on(colGroupRefresh, this.refreshCol, this);\n        this.parent.on(columnWidthChanged, this.onWidthChange, this);\n        this.parent.on(scroll, this.onScroll, this);\n        this.parent.on(columnVisibilityChanged, this.columnVisibilityChanged, this);\n    };\n    FooterRenderer.prototype.removeEventListener = function () {\n        this.parent.off(colGroupRefresh, this.refreshCol);\n        this.parent.off(columnWidthChanged, this.onWidthChange);\n        this.parent.off(scroll, this.onScroll);\n        this.parent.off(columnVisibilityChanged, this.columnVisibilityChanged);\n    };\n    FooterRenderer.prototype.updateFooterTableWidth = function (tFoot) {\n        var tHead = this.parent.getHeaderTable();\n        if (tHead && tFoot) {\n            tFoot.style.width = tHead.style.width;\n        }\n    };\n    return FooterRenderer;\n}(ContentRender));\nexport { FooterRenderer };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { appendChildren } from '../base/util';\nimport { CellRenderer } from './cell-renderer';\n/**\n * SummaryCellRenderer class which responsible for building summary cell content.\n * @hidden\n */\nvar SummaryCellRenderer = /** @class */ (function (_super) {\n    __extends(SummaryCellRenderer, _super);\n    function SummaryCellRenderer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.element = _this.parent\n            .createElement('TD', { className: 'e-summarycell', attrs: { role: 'gridcell', tabindex: '-1' } });\n        return _this;\n    }\n    SummaryCellRenderer.prototype.getValue = function (field, data, column) {\n        var key;\n        key = !isNullOrUndefined(column.type) ?\n            column.field + ' - ' + (typeof column.type === 'string' ? column.type.toLowerCase() : '') : column.columnName;\n        return data[column.columnName] ? data[column.columnName][key] : '';\n    };\n    SummaryCellRenderer.prototype.evaluate = function (node, cell, data, attributes) {\n        var column = cell.column;\n        if (!(column.footerTemplate || column.groupFooterTemplate || column.groupCaptionTemplate)) {\n            return true;\n        }\n        var tempObj = column.getTemplate(cell.cellType);\n        appendChildren(node, tempObj.fn(data[column.columnName], this.parent, tempObj.property));\n        return false;\n    };\n    return SummaryCellRenderer;\n}(CellRenderer));\nexport { SummaryCellRenderer };\n","import { EventHandler } from '@syncfusion/ej2-base';\nimport { debounce } from '@syncfusion/ej2-base';\n/**\n * InterSectionObserver - class watch whether it enters the viewport.\n * @hidden\n */\nvar InterSectionObserver = /** @class */ (function () {\n    function InterSectionObserver(element, options) {\n        var _this = this;\n        this.fromWheel = false;\n        this.touchMove = false;\n        this.options = {};\n        this.sentinelInfo = {\n            'up': {\n                check: function (rect, info) {\n                    var top = rect.top - _this.containerRect.top;\n                    info.entered = top >= 0;\n                    return top + (_this.options.pageHeight / 2) >= 0;\n                },\n                axis: 'Y'\n            },\n            'down': {\n                check: function (rect, info) {\n                    var cHeight = _this.options.container.clientHeight;\n                    var top = rect.bottom;\n                    info.entered = rect.bottom <= _this.containerRect.bottom;\n                    return top - (_this.options.pageHeight / 2) <= _this.options.pageHeight / 2;\n                }, axis: 'Y'\n            },\n            'right': {\n                check: function (rect, info) {\n                    var right = rect.right;\n                    info.entered = right < _this.containerRect.right;\n                    return right - _this.containerRect.width <= _this.containerRect.right;\n                }, axis: 'X'\n            },\n            'left': {\n                check: function (rect, info) {\n                    var left = rect.left;\n                    info.entered = left > 0;\n                    return left + _this.containerRect.width >= _this.containerRect.left;\n                }, axis: 'X'\n            }\n        };\n        this.element = element;\n        this.options = options;\n    }\n    InterSectionObserver.prototype.observe = function (callback, onEnterCallback) {\n        var _this = this;\n        this.containerRect = this.options.container.getBoundingClientRect();\n        EventHandler.add(this.options.container, 'wheel', function () { return _this.fromWheel = true; }, this);\n        EventHandler.add(this.options.container, 'scroll', this.virtualScrollHandler(callback, onEnterCallback), this);\n    };\n    InterSectionObserver.prototype.check = function (direction) {\n        var info = this.sentinelInfo[direction];\n        return info.check(this.element.getBoundingClientRect(), info);\n    };\n    InterSectionObserver.prototype.virtualScrollHandler = function (callback, onEnterCallback) {\n        var _this = this;\n        var prevTop = 0;\n        var prevLeft = 0;\n        var debounced100 = debounce(callback, 100);\n        var debounced50 = debounce(callback, 50);\n        return function (e) {\n            var top = e.target.scrollTop;\n            var left = e.target.scrollLeft;\n            var direction = prevTop < top ? 'down' : 'up';\n            direction = prevLeft === left ? direction : prevLeft < left ? 'right' : 'left';\n            prevTop = top;\n            prevLeft = left;\n            var current = _this.sentinelInfo[direction];\n            if (_this.options.axes.indexOf(current.axis) === -1) {\n                return;\n            }\n            var check = _this.check(direction);\n            if (current.entered) {\n                onEnterCallback(_this.element, current, direction, { top: top, left: left });\n            }\n            if (check) {\n                var fn = debounced100; //this.fromWheel ? this.options.debounceEvent ? debounced100 : callback : debounced100;\n                if (current.axis === 'X') {\n                    fn = debounced50;\n                }\n                fn({ direction: direction, sentinel: current, offset: { top: top, left: left } });\n            }\n            _this.fromWheel = false;\n        };\n    };\n    InterSectionObserver.prototype.setPageHeight = function (value) {\n        this.options.pageHeight = value;\n    };\n    return InterSectionObserver;\n}());\nexport { InterSectionObserver };\n","import { Browser } from '@syncfusion/ej2-base';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { GroupModelGenerator } from '../services/group-model-generator';\n/**\n * Content module is used to render grid content\n */\nvar VirtualRowModelGenerator = /** @class */ (function () {\n    function VirtualRowModelGenerator(parent) {\n        this.cOffsets = {};\n        this.cache = {};\n        this.data = {};\n        this.groups = {};\n        this.parent = parent;\n        this.model = this.parent.pageSettings;\n        this.rowModelGenerator = this.parent.allowGrouping ? new GroupModelGenerator(this.parent) : new RowModelGenerator(this.parent);\n    }\n    VirtualRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n        var _this = this;\n        var info = notifyArgs.virtualInfo = notifyArgs.virtualInfo || this.getData();\n        var xAxis = info.sentinelInfo && info.sentinelInfo.axis === 'X';\n        var page = !xAxis && info.loadNext && !info.loadSelf ? info.nextInfo.page : info.page;\n        var result = [];\n        var center = ~~(this.model.pageSize / 2);\n        var indexes = this.getBlockIndexes(page);\n        var loadedBlocks = [];\n        this.checkAndResetCache(notifyArgs.requestType);\n        if (this.parent.enableColumnVirtualization) {\n            info.blockIndexes.forEach(function (value) {\n                if (_this.isBlockAvailable(value)) {\n                    _this.cache[value] = _this.rowModelGenerator.refreshRows(_this.cache[value]);\n                }\n            });\n        }\n        info.blockIndexes.forEach(function (value) {\n            if (!_this.isBlockAvailable(value)) {\n                var rows = _this.rowModelGenerator.generateRows(data, {\n                    virtualInfo: info, startIndex: _this.getStartIndex(value, data)\n                });\n                var median = ~~Math.max(rows.length, _this.model.pageSize) / 2;\n                if (!_this.isBlockAvailable(indexes[0])) {\n                    _this.cache[indexes[0]] = rows.slice(0, median);\n                }\n                if (!_this.isBlockAvailable(indexes[1])) {\n                    _this.cache[indexes[1]] = rows.slice(median);\n                }\n            }\n            if (_this.parent.groupSettings.columns.length && !xAxis && _this.cache[value]) {\n                _this.cache[value] = _this.updateGroupRow(_this.cache[value], value);\n            }\n            result.push.apply(result, _this.cache[value]);\n            if (_this.isBlockAvailable(value)) {\n                loadedBlocks.push(value);\n            }\n        });\n        info.blockIndexes = loadedBlocks;\n        var grouping = 'records';\n        if (this.parent.allowGrouping) {\n            this.parent.currentViewData[grouping] = result.map(function (m) { return m.data; });\n        }\n        else {\n            this.parent.currentViewData = result.map(function (m) { return m.data; });\n        }\n        return result;\n    };\n    VirtualRowModelGenerator.prototype.getBlockIndexes = function (page) {\n        return [page + (page - 1), page * 2];\n    };\n    VirtualRowModelGenerator.prototype.getPage = function (block) {\n        return block % 2 === 0 ? block / 2 : (block + 1) / 2;\n    };\n    VirtualRowModelGenerator.prototype.isBlockAvailable = function (value) {\n        return value in this.cache;\n    };\n    VirtualRowModelGenerator.prototype.getData = function () {\n        return {\n            page: this.model.currentPage,\n            blockIndexes: this.getBlockIndexes(this.model.currentPage),\n            direction: 'down',\n            columnIndexes: this.parent.getColumnIndexesInView()\n        };\n    };\n    VirtualRowModelGenerator.prototype.getStartIndex = function (blk, data, full) {\n        if (full === void 0) { full = true; }\n        var page = this.getPage(blk);\n        var even = blk % 2 === 0;\n        var index = (page - 1) * this.model.pageSize;\n        return full || !even ? index : index + ~~(this.model.pageSize / 2);\n    };\n    VirtualRowModelGenerator.prototype.getColumnIndexes = function (content) {\n        var _this = this;\n        if (content === void 0) { content = this.parent.getHeaderContent().firstChild; }\n        var indexes = [];\n        var sLeft = content.scrollLeft | 0;\n        var keys = Object.keys(this.cOffsets);\n        var cWidth = content.getBoundingClientRect().width;\n        sLeft = Math.min(this.cOffsets[keys.length - 1] - cWidth, sLeft);\n        var calWidth = Browser.isDevice ? 2 * cWidth : cWidth / 2;\n        var left = sLeft + cWidth + (sLeft === 0 ? calWidth : 0);\n        keys.some(function (offset, indx, input) {\n            var iOffset = Number(offset);\n            var offsetVal = _this.cOffsets[offset];\n            var border = sLeft - calWidth <= offsetVal && left + calWidth >= offsetVal;\n            if (border) {\n                indexes.push(iOffset);\n            }\n            return left + calWidth < offsetVal;\n        });\n        return indexes;\n    };\n    VirtualRowModelGenerator.prototype.checkAndResetCache = function (action) {\n        var clear = ['paging', 'refresh', 'sorting', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder']\n            .some(function (value) { return action === value; });\n        if (clear) {\n            this.cache = {};\n            this.data = {};\n            this.groups = {};\n        }\n        return clear;\n    };\n    VirtualRowModelGenerator.prototype.refreshColOffsets = function () {\n        var _this = this;\n        var col = 0;\n        this.cOffsets = {};\n        var gLen = this.parent.groupSettings.columns.length;\n        var cols = this.parent.columns;\n        var cLen = cols.length;\n        var isVisible = function (column) { return column.visible &&\n            (!_this.parent.groupSettings.showGroupedColumn ? _this.parent.groupSettings.columns.indexOf(column.field) < 0 : column.visible); };\n        this.parent.groupSettings.columns.forEach(function (c, n) { return _this.cOffsets[n] = (_this.cOffsets[n - 1] | 0) + 30; });\n        Array.apply(null, Array(cLen)).map(function () { return col++; }).forEach(function (block, i) {\n            block = block + gLen;\n            _this.cOffsets[block] = (_this.cOffsets[block - 1] | 0) + (isVisible(cols[i]) ? parseInt(cols[i].width, 10) : 0);\n        });\n    };\n    VirtualRowModelGenerator.prototype.updateGroupRow = function (current, block) {\n        var _this = this;\n        var currentFirst = current[0];\n        var rows = [];\n        Object.keys(this.cache).forEach(function (key) {\n            if (Number(key) < block) {\n                rows = rows.concat(_this.cache[key]);\n            }\n        });\n        if ((currentFirst && currentFirst.isDataRow) || block % 2 === 0) {\n            return current;\n        }\n        return this.iterateGroup(current, rows);\n    };\n    VirtualRowModelGenerator.prototype.iterateGroup = function (current, rows) {\n        var currentFirst = current[0];\n        var offset = 0;\n        if (currentFirst && currentFirst.isDataRow) {\n            return current;\n        }\n        var isPresent = current.some(function (row) {\n            return rows.some(function (oRow, index) {\n                var res = oRow && oRow.data.field !== undefined && oRow.data.field === row.data.field &&\n                    oRow.data.key === row.data.key;\n                if (res) {\n                    offset = index;\n                }\n                return res;\n            });\n        });\n        if (isPresent) {\n            current.shift();\n            current = this.iterateGroup(current, rows.slice(offset));\n        }\n        return current;\n    };\n    VirtualRowModelGenerator.prototype.getRows = function () {\n        var _this = this;\n        var rows = [];\n        Object.keys(this.cache).forEach(function (key) { return rows = rows.concat(_this.cache[key]); });\n        return rows;\n    };\n    return VirtualRowModelGenerator;\n}());\nexport { VirtualRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, remove, closest, formatUnit } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DataManager } from '@syncfusion/ej2-data';\nimport { dataReady, modelChanged, refreshVirtualBlock, contentReady } from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { ContentRender } from './content-renderer';\nimport { HeaderRender } from './header-renderer';\nimport { InterSectionObserver } from '../services/intersection-observer';\nimport { VirtualRowModelGenerator } from '../services/virtual-row-model-generator';\n/**\n * VirtualContentRenderer\n * @hidden\n */\nvar VirtualContentRenderer = /** @class */ (function (_super) {\n    __extends(VirtualContentRenderer, _super);\n    function VirtualContentRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.prevHeight = 0;\n        _this.currentInfo = {};\n        _this.preventEvent = false;\n        _this.actions = ['filtering', 'searching', 'grouping', 'ungrouping'];\n        _this.offsets = {};\n        _this.tmpOffsets = {};\n        _this.virtualEle = new VirtualElementHandler();\n        _this.offsetKeys = [];\n        _this.isFocused = false;\n        _this.locator = locator;\n        _this.eventListener('on');\n        _this.vgenerator = _this.generator;\n        return _this;\n    }\n    VirtualContentRenderer.prototype.renderTable = function () {\n        this.header = this.locator.getService('rendererFactory').getRenderer(RenderType.Header);\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.content = this.getPanel().firstChild;\n        this.virtualEle.renderWrapper(this.parent.height);\n        this.virtualEle.renderPlaceHolder();\n        this.virtualEle.wrapper.style.position = 'absolute';\n        var debounceEvent = (this.parent.dataSource instanceof DataManager && !this.parent.dataSource.dataSource.offline);\n        var opt = {\n            container: this.content, pageHeight: this.getBlockHeight() * 2, debounceEvent: debounceEvent,\n            axes: this.parent.enableColumnVirtualization ? ['X', 'Y'] : ['Y']\n        };\n        this.observer = new InterSectionObserver(this.virtualEle.wrapper, opt);\n    };\n    VirtualContentRenderer.prototype.renderEmpty = function (tbody) {\n        this.getTable().appendChild(tbody);\n        this.virtualEle.adjustTable(0, 0);\n    };\n    VirtualContentRenderer.prototype.scrollListener = function (scrollArgs) {\n        if (this.preventEvent || this.parent.isDestroyed) {\n            this.preventEvent = false;\n            return;\n        }\n        this.isFocused = this.content === closest(document.activeElement, '.e-content') || this.content === document.activeElement;\n        var info = scrollArgs.sentinel;\n        var viewInfo = this.currentInfo = this.getInfoFromView(scrollArgs.direction, info, scrollArgs.offset);\n        if (this.prevInfo && ((info.axis === 'Y' && this.prevInfo.blockIndexes.toString() === viewInfo.blockIndexes.toString())\n            || (info.axis === 'X' && this.prevInfo.columnIndexes.toString() === viewInfo.columnIndexes.toString()))) {\n            return;\n        }\n        this.parent.setColumnIndexesInView(this.parent.enableColumnVirtualization ? viewInfo.columnIndexes : []);\n        this.parent.pageSettings.currentPage = viewInfo.loadNext && !viewInfo.loadSelf ? viewInfo.nextInfo.page : viewInfo.page;\n        this.parent.notify(viewInfo.event, { requestType: 'virtualscroll', virtualInfo: viewInfo });\n    };\n    VirtualContentRenderer.prototype.block = function (blk) {\n        return this.vgenerator.isBlockAvailable(blk);\n    };\n    VirtualContentRenderer.prototype.getInfoFromView = function (direction, info, e) {\n        var tempBlocks = [];\n        var infoType = { direction: direction, sentinelInfo: info, offsets: e };\n        infoType.page = this.getPageFromTop(e.top, infoType);\n        infoType.blockIndexes = tempBlocks = this.vgenerator.getBlockIndexes(infoType.page);\n        infoType.loadSelf = !this.vgenerator.isBlockAvailable(tempBlocks[infoType.block]);\n        var blocks = this.ensureBlocks(infoType);\n        infoType.blockIndexes = blocks;\n        infoType.loadNext = !blocks.filter(function (val) { return tempBlocks.indexOf(val) === -1; })\n            .every(this.block.bind(this));\n        infoType.event = (infoType.loadNext || infoType.loadSelf) ? modelChanged : refreshVirtualBlock;\n        infoType.nextInfo = infoType.loadNext ? { page: Math.max(1, infoType.page + (direction === 'down' ? 1 : -1)) } : {};\n        infoType.columnIndexes = info.axis === 'X' ? this.vgenerator.getColumnIndexes() : this.parent.getColumnIndexesInView();\n        if (this.parent.enableColumnVirtualization && info.axis === 'X') {\n            infoType.event = refreshVirtualBlock;\n        }\n        return infoType;\n    };\n    VirtualContentRenderer.prototype.ensureBlocks = function (info) {\n        var _this = this;\n        var index = info.blockIndexes[info.block];\n        var mIdx;\n        var old = index;\n        var max = Math.max;\n        var indexes = info.direction === 'down' ? [max(index, 1), ++index, ++index] : [max(index - 1, 1), index, index + 1];\n        indexes = indexes.filter(function (val, ind) { return indexes.indexOf(val) === ind; });\n        if (this.prevInfo.blockIndexes.toString() === indexes.toString()) {\n            return indexes;\n        }\n        if (info.loadSelf || (info.direction === 'down' && this.isEndBlock(old))) {\n            indexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        indexes.some(function (val, ind) {\n            var result = val === _this.getTotalBlocks();\n            if (result) {\n                mIdx = ind;\n            }\n            return result;\n        });\n        if (mIdx !== undefined) {\n            indexes = indexes.slice(0, mIdx + 1);\n            if (info.block === 0 && indexes.length === 1 && this.vgenerator.isBlockAvailable(indexes[0] - 1)) {\n                indexes = [indexes[0] - 1, indexes[0]];\n            }\n        }\n        return indexes;\n    };\n    VirtualContentRenderer.prototype.appendContent = function (target, newChild, e) {\n        // currentInfo value will be used if there are multiple dom updates happened due to mousewheel\n        var info = e.virtualInfo.sentinelInfo && e.virtualInfo.sentinelInfo.axis === 'Y' && this.currentInfo.page &&\n            this.currentInfo.page !== e.virtualInfo.page ? this.currentInfo : e.virtualInfo;\n        this.prevInfo = this.prevInfo || e.virtualInfo;\n        var cBlock = (info.columnIndexes[0]) - 1;\n        var cOffset = this.getColumnOffset(cBlock);\n        var width;\n        var blocks = info.blockIndexes;\n        if (this.parent.groupSettings.columns.length) {\n            this.refreshOffsets();\n        }\n        var translate = this.getTranslateY(this.content.scrollTop, this.content.getBoundingClientRect().height, info);\n        this.virtualEle.adjustTable(cOffset, translate);\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.adjustTable(cOffset, 0);\n        }\n        if (this.parent.enableColumnVirtualization) {\n            var cIndex = info.columnIndexes;\n            width = this.getColumnOffset(cIndex[cIndex.length - 1]) - this.getColumnOffset(cIndex[0] - 1) + '';\n            this.header.virtualEle.setWrapperWidth(width);\n        }\n        this.virtualEle.setWrapperWidth(width, this.parent.enableColumnVirtualization);\n        remove(target);\n        target = this.parent.createElement('tbody');\n        target.appendChild(newChild);\n        this.getTable().appendChild(target);\n        if (this.parent.groupSettings.columns.length) {\n            if (info.direction === 'up') {\n                var blk = this.offsets[this.getTotalBlocks()] - this.prevHeight;\n                this.preventEvent = true;\n                var sTop = this.content.scrollTop;\n                this.content.scrollTop = sTop + blk;\n            }\n            this.setVirtualHeight();\n            this.observer.setPageHeight(this.getOffset(blocks[blocks.length - 1]) - this.getOffset(blocks[0] - 1));\n        }\n        this.prevInfo = info;\n        if (this.isFocused) {\n            this.content.focus();\n        }\n    };\n    VirtualContentRenderer.prototype.onDataReady = function (e) {\n        if (!isNullOrUndefined(e.count)) {\n            this.count = e.count;\n            this.maxPage = Math.ceil(e.count / this.parent.pageSettings.pageSize);\n        }\n        this.vgenerator.checkAndResetCache(e.requestType);\n        if (['refresh', 'filtering', 'searching', 'grouping', 'ungrouping', 'reorder', undefined]\n            .some(function (value) { return e.requestType === value; })) {\n            this.refreshOffsets();\n        }\n        this.setVirtualHeight();\n        this.resetScrollPosition(e.requestType);\n    };\n    VirtualContentRenderer.prototype.setVirtualHeight = function () {\n        var width = this.parent.enableColumnVirtualization ?\n            this.getColumnOffset(this.parent.columns.length + this.parent.groupSettings.columns.length - 1) + 'px' : '100%';\n        this.virtualEle.setVirtualHeight(this.offsets[this.getTotalBlocks()], width);\n        if (this.parent.enableColumnVirtualization) {\n            this.header.virtualEle.setVirtualHeight(1, width);\n        }\n    };\n    VirtualContentRenderer.prototype.getPageFromTop = function (sTop, info) {\n        var _this = this;\n        var total = this.getTotalBlocks();\n        var page = 0;\n        var extra = this.offsets[total] - this.prevHeight;\n        this.offsetKeys.some(function (offset) {\n            var iOffset = Number(offset);\n            var border = sTop < _this.offsets[offset] || (iOffset === total && sTop > _this.offsets[offset]);\n            if (border) {\n                info.block = iOffset % 2 === 0 ? 1 : 0;\n                page = Math.max(1, Math.min(_this.vgenerator.getPage(iOffset), _this.maxPage));\n            }\n            return border;\n        });\n        return page;\n    };\n    VirtualContentRenderer.prototype.getTranslateY = function (sTop, cHeight, info, isOnenter) {\n        if (info === undefined) {\n            info = { page: this.getPageFromTop(sTop, {}) };\n            info.blockIndexes = this.vgenerator.getBlockIndexes(info.page);\n        }\n        var block = (info.blockIndexes[0] || 1) - 1;\n        var translate = this.getOffset(block);\n        var endTranslate = this.getOffset(info.blockIndexes[info.blockIndexes.length - 1]);\n        if (isOnenter) {\n            info = this.prevInfo;\n        }\n        var result = translate > sTop ?\n            this.getOffset(block - 1) : endTranslate < (sTop + cHeight) ? this.getOffset(block + 1) : translate;\n        var blockHeight = this.offsets[info.blockIndexes[info.blockIndexes.length - 1]] -\n            this.tmpOffsets[info.blockIndexes[0]];\n        if (result + blockHeight > this.offsets[this.getTotalBlocks()]) {\n            result -= (result + blockHeight) - this.offsets[this.getTotalBlocks()];\n        }\n        return result;\n    };\n    VirtualContentRenderer.prototype.getOffset = function (block) {\n        return Math.min(this.offsets[block] | 0, this.offsets[this.maxBlock] | 0);\n    };\n    VirtualContentRenderer.prototype.onEntered = function () {\n        var _this = this;\n        return function (element, current, direction, e) {\n            var xAxis = current.axis === 'X';\n            var top = _this.prevInfo.offsets ? _this.prevInfo.offsets.top : null;\n            var height = _this.content.getBoundingClientRect().height;\n            var x = _this.getColumnOffset(xAxis ? _this.vgenerator.getColumnIndexes()[0] - 1 : _this.prevInfo.columnIndexes[0] - 1);\n            var y = _this.getTranslateY(e.top, height, xAxis && top === e.top ? _this.prevInfo : undefined, true);\n            _this.virtualEle.adjustTable(x, Math.min(y, _this.offsets[_this.maxBlock]));\n            if (_this.parent.enableColumnVirtualization) {\n                _this.header.virtualEle.adjustTable(x, 0);\n            }\n        };\n    };\n    VirtualContentRenderer.prototype.eventListener = function (action) {\n        var _this = this;\n        this.parent[action](dataReady, this.onDataReady, this);\n        this.parent[action](refreshVirtualBlock, this.refreshContentRows, this);\n        this.actions.forEach(function (event) { return _this.parent[action](event + \"-begin\", _this.onActionBegin, _this); });\n        var fn = function () {\n            _this.observer.observe(function (scrollArgs) { return _this.scrollListener(scrollArgs); }, _this.onEntered());\n            _this.parent.off(contentReady, fn);\n        };\n        this.parent.on(contentReady, fn, this);\n    };\n    VirtualContentRenderer.prototype.getBlockSize = function () {\n        return this.parent.pageSettings.pageSize >> 1;\n    };\n    VirtualContentRenderer.prototype.getBlockHeight = function () {\n        return this.getBlockSize() * this.parent.getRowHeight();\n    };\n    VirtualContentRenderer.prototype.isEndBlock = function (index) {\n        var totalBlocks = this.getTotalBlocks();\n        return index >= totalBlocks || index === totalBlocks - 1;\n    };\n    VirtualContentRenderer.prototype.getTotalBlocks = function () {\n        return Math.ceil(this.count / this.getBlockSize());\n    };\n    VirtualContentRenderer.prototype.getColumnOffset = function (block) {\n        return this.vgenerator.cOffsets[block] | 0;\n    };\n    VirtualContentRenderer.prototype.getModelGenerator = function () {\n        return new VirtualRowModelGenerator(this.parent);\n    };\n    VirtualContentRenderer.prototype.resetScrollPosition = function (action) {\n        if (this.actions.some(function (value) { return value === action; })) {\n            this.preventEvent = this.content.scrollTop !== 0;\n            this.content.scrollTop = 0;\n        }\n    };\n    VirtualContentRenderer.prototype.onActionBegin = function (e) {\n        //Update property silently..\n        this.parent.setProperties({ pageSettings: { currentPage: 1 } }, true);\n    };\n    VirtualContentRenderer.prototype.getRows = function () {\n        return this.vgenerator.getRows();\n    };\n    VirtualContentRenderer.prototype.getRowByIndex = function (index) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        return this.parent.getDataRows()[index - startIdx];\n    };\n    VirtualContentRenderer.prototype.getVirtualRowIndex = function (index) {\n        var prev = this.prevInfo.blockIndexes;\n        var startIdx = (prev[0] - 1) * this.getBlockSize();\n        return startIdx + index;\n    };\n    VirtualContentRenderer.prototype.refreshOffsets = function () {\n        var _this = this;\n        var row = 0;\n        var bSize = this.getBlockSize();\n        var total = this.getTotalBlocks();\n        this.prevHeight = this.offsets[total];\n        this.maxBlock = total % 2 === 0 ? total - 2 : total - 1;\n        this.offsets = {};\n        //Row offset update\n        Array.apply(null, Array(total)).map(function () { return ++row; })\n            .forEach(function (block) {\n            var tmp = (_this.vgenerator.cache[block] || []).length;\n            var rem = _this.count % bSize;\n            var size = block in _this.vgenerator.cache ?\n                tmp * _this.parent.getRowHeight() : rem && block === total ? rem * _this.parent.getRowHeight() : _this.getBlockHeight();\n            // let size: number = this.parent.groupSettings.columns.length && block in this.vgenerator.cache ?\n            // tmp * getRowHeight() : this.getBlockHeight();\n            _this.offsets[block] = (_this.offsets[block - 1] | 0) + size;\n            _this.tmpOffsets[block] = _this.offsets[block - 1] | 0;\n        });\n        this.offsetKeys = Object.keys(this.offsets);\n        //Column offset update\n        if (this.parent.enableColumnVirtualization) {\n            this.vgenerator.refreshColOffsets();\n        }\n    };\n    VirtualContentRenderer.prototype.refreshVirtualElement = function () {\n        this.vgenerator.refreshColOffsets();\n        this.setVirtualHeight();\n    };\n    return VirtualContentRenderer;\n}(ContentRender));\nexport { VirtualContentRenderer };\n/**\n * @hidden\n */\nvar VirtualHeaderRenderer = /** @class */ (function (_super) {\n    __extends(VirtualHeaderRenderer, _super);\n    function VirtualHeaderRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.virtualEle = new VirtualElementHandler();\n        _this.gen = new VirtualRowModelGenerator(_this.parent);\n        _this.parent.on(refreshVirtualBlock, function (e) { return e.virtualInfo.sentinelInfo.axis === 'X' ? _this.refreshUI() : null; }, _this);\n        return _this;\n    }\n    VirtualHeaderRenderer.prototype.renderTable = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n        _super.prototype.renderTable.call(this);\n        this.virtualEle.table = this.getTable();\n        this.virtualEle.content = this.getPanel().firstChild;\n        this.virtualEle.content.style.position = 'relative';\n        this.virtualEle.renderWrapper();\n        this.virtualEle.renderPlaceHolder('absolute');\n    };\n    VirtualHeaderRenderer.prototype.appendContent = function (table) {\n        this.virtualEle.wrapper.appendChild(table);\n    };\n    VirtualHeaderRenderer.prototype.refreshUI = function () {\n        this.gen.refreshColOffsets();\n        this.parent.setColumnIndexesInView(this.gen.getColumnIndexes(this.getPanel().firstChild));\n        _super.prototype.refreshUI.call(this);\n    };\n    return VirtualHeaderRenderer;\n}(HeaderRender));\nexport { VirtualHeaderRenderer };\n/**\n * @hidden\n */\nvar VirtualElementHandler = /** @class */ (function () {\n    function VirtualElementHandler() {\n    }\n    VirtualElementHandler.prototype.renderWrapper = function (height) {\n        this.wrapper = createElement('div', { className: 'e-virtualtable', styles: \"min-height:\" + formatUnit(height) });\n        this.wrapper.appendChild(this.table);\n        this.content.appendChild(this.wrapper);\n    };\n    VirtualElementHandler.prototype.renderPlaceHolder = function (position) {\n        if (position === void 0) { position = 'relative'; }\n        this.placeholder = createElement('div', { className: 'e-virtualtrack', styles: \"position:\" + position });\n        this.content.appendChild(this.placeholder);\n    };\n    VirtualElementHandler.prototype.adjustTable = function (xValue, yValue) {\n        this.wrapper.style.transform = \"translate(\" + xValue + \"px, \" + yValue + \"px)\";\n    };\n    VirtualElementHandler.prototype.setWrapperWidth = function (width, full) {\n        this.wrapper.style.width = width ? width + \"px\" : full ? '100%' : '';\n    };\n    VirtualElementHandler.prototype.setVirtualHeight = function (height, width) {\n        this.placeholder.style.height = height + \"px\";\n        this.placeholder.style.width = width;\n    };\n    return VirtualElementHandler;\n}());\nexport { VirtualElementHandler };\n","import { initialLoad } from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { VirtualContentRenderer, VirtualHeaderRenderer } from '../renderer/virtual-content-renderer';\nimport * as events from '../base/constant';\n/**\n * Virtual Scrolling class\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.getModuleName = function () {\n        return 'virtualscroll';\n    };\n    VirtualScroll.prototype.instantiateRenderer = function () {\n        var renderer = this.locator.getService('rendererFactory');\n        if (this.parent.enableColumnVirtualization) {\n            renderer.addRenderer(RenderType.Header, new VirtualHeaderRenderer(this.parent, this.locator));\n        }\n        renderer.addRenderer(RenderType.Content, new VirtualContentRenderer(this.parent, this.locator));\n        this.ensurePageSize();\n    };\n    VirtualScroll.prototype.ensurePageSize = function () {\n        var rowHeight = this.parent.getRowHeight();\n        this.blockSize = ~~(this.parent.height / rowHeight);\n        var height = this.blockSize * 2;\n        var size = this.parent.pageSettings.pageSize;\n        this.parent.setProperties({ pageSettings: { pageSize: size < height ? height : size } }, true);\n    };\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.columnWidthChanged, this.refreshVirtualElement, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initialLoad, this.instantiateRenderer);\n        this.parent.off(events.columnWidthChanged, this.refreshVirtualElement);\n    };\n    VirtualScroll.prototype.refreshVirtualElement = function (args) {\n        if (this.parent.enableColumnVirtualization && args.module === 'resize') {\n            var renderer = this.locator.getService('rendererFactory');\n            renderer.getRenderer(RenderType.Content).refreshVirtualElement();\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n","import { isNullOrUndefined, addClass } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar InlineEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function InlineEditRender(parent) {\n        this.parent = parent;\n    }\n    InlineEditRender.prototype.addNew = function (elements, args) {\n        var mTbody;\n        var tbody;\n        if (this.parent.frozenRows) {\n            tbody = this.parent.getHeaderContent().querySelector('tbody');\n        }\n        else {\n            tbody = this.parent.getContentTable().querySelector('tbody');\n        }\n        args.row = this.parent.createElement('tr', { className: 'e-row e-addedrow' });\n        if (tbody.querySelector('.e-emptyrow')) {\n            tbody.querySelector('.e-emptyrow').classList.add('e-hide');\n        }\n        tbody.insertBefore(args.row, tbody.firstChild);\n        args.row.appendChild(this.getEditElement(elements, false));\n        if (this.parent.getFrozenColumns()) {\n            var mEle = this.renderMovableform(args.row);\n            if (this.parent.frozenRows) {\n                mTbody = this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            }\n            else {\n                mTbody = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            }\n            mTbody.insertBefore(mEle, mTbody.firstChild);\n            args.row.querySelector('.e-normaledit').setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n            mEle.setAttribute('colspan', '' + (this.parent.getVisibleColumns().length - this.parent.getVisibleFrozenColumns()));\n            if (this.parent.height === 'auto') {\n                this.parent.notify(events.frozenHeight, {});\n            }\n        }\n    };\n    InlineEditRender.prototype.renderMovableform = function (ele) {\n        var mEle = ele.cloneNode(true);\n        this.renderMovable(ele, mEle);\n        mEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n        return mEle;\n    };\n    InlineEditRender.prototype.updateFreezeEdit = function (row, td) {\n        if (this.parent.getFrozenColumns()) {\n            var idx = parseInt(row.getAttribute('aria-rowindex'), 10);\n            var fCont = this.parent.getContent().querySelector('.e-frozencontent').querySelector('tbody');\n            var mCont = this.parent.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            var fHdr = this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody');\n            var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            if (this.parent.frozenRows && idx >= this.parent.frozenRows) {\n                idx -= this.parent.frozenRows;\n            }\n            if (fCont.contains(row)) {\n                td = td.concat([].slice.call(mCont.children[idx].querySelectorAll('td.e-rowcell')));\n            }\n            else if (mCont.contains(row)) {\n                td = td.concat([].slice.call(fCont.children[idx].querySelectorAll('td.e-rowcell')));\n            }\n            else if (fHdr.contains(row)) {\n                td = td.concat([].slice.call(mHdr.children[idx].querySelectorAll('td.e-rowcell')));\n            }\n            else if (mHdr.contains(row)) {\n                td = td.concat([].slice.call(fHdr.children[idx].querySelectorAll('td.e-rowcell')));\n            }\n        }\n        return td;\n    };\n    InlineEditRender.prototype.update = function (elements, args) {\n        var tdElement = [].slice.call(args.row.querySelectorAll('td.e-rowcell'));\n        args.row.innerHTML = '';\n        tdElement = this.updateFreezeEdit(args.row, tdElement);\n        args.row.appendChild(this.getEditElement(elements, true, tdElement));\n        args.row.classList.add('e-editedrow');\n        this.refreshFreezeEdit(args.row);\n    };\n    InlineEditRender.prototype.refreshFreezeEdit = function (row) {\n        var td = row.firstChild;\n        var fCls;\n        var cont;\n        var idx = parseInt(row.getAttribute('aria-rowindex'), 10);\n        if (this.parent.getFrozenColumns()) {\n            if (idx < this.parent.frozenRows) {\n                cont = this.parent.getHeaderContent();\n                fCls = '.e-frozenheader';\n            }\n            else {\n                cont = this.parent.getContent();\n                fCls = '.e-frozencontent';\n            }\n            var mTd = td.cloneNode(true);\n            var fRows = void 0;\n            if (cont.querySelector(fCls).contains(row)) {\n                fRows = this.parent.getMovableRowByIndex(idx);\n                this.updateFrozenCont(fRows, td, mTd);\n            }\n            else {\n                fRows = this.parent.getRowByIndex(idx);\n                this.updateFrozenCont(fRows, mTd, td);\n            }\n            fRows.appendChild(mTd);\n            fRows.classList.add('e-editedrow');\n        }\n    };\n    InlineEditRender.prototype.updateFrozenCont = function (row, ele, mEle) {\n        row.innerHTML = '';\n        this.renderMovable(ele, mEle);\n        mEle.querySelector('colgroup').innerHTML = this.parent.getHeaderContent()\n            .querySelector('.e-movableheader').querySelector('colgroup').innerHTML;\n        ele.setAttribute('colspan', this.parent.getVisibleFrozenColumns() + '');\n        mEle.setAttribute('colspan', this.parent.getColumns().length - this.parent.getFrozenColumns() + '');\n    };\n    InlineEditRender.prototype.renderMovable = function (ele, mEle) {\n        var frzCols = this.parent.getFrozenColumns();\n        for (var i = 0; i < frzCols; i++) {\n            mEle.querySelector('tr').removeChild(mEle.querySelector('tr').children[0]);\n        }\n        for (var i = frzCols, len = ele.querySelector('tr').childElementCount; i < len; i++) {\n            ele.querySelector('tr').removeChild(ele.querySelector('tr').children[ele.querySelector('tr').childElementCount - 1]);\n        }\n    };\n    InlineEditRender.prototype.getEditElement = function (elements, isEdit, tdElement) {\n        var gObj = this.parent;\n        var gLen = 0;\n        var isDetail = !isNullOrUndefined(gObj.detailTemplate) || !isNullOrUndefined(gObj.childGrid) ? 1 : 0;\n        if (gObj.allowGrouping) {\n            gLen = gObj.groupSettings.columns.length;\n        }\n        var td = this.parent.createElement('td', {\n            className: 'e-editcell e-normaledit',\n            attrs: { colspan: (gObj.getVisibleColumns().length - gObj.getVisibleFrozenColumns() + gLen + isDetail).toString() }\n        });\n        var form = this.parent\n            .createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        var table = this.parent.createElement('table', { className: 'e-table e-inline-edit', attrs: { cellspacing: '0.25' } });\n        table.appendChild(gObj.getContentTable().querySelector('colgroup').cloneNode(true));\n        var tbody = this.parent.createElement('tbody');\n        var tr = this.parent.createElement('tr');\n        var i = 0;\n        if (isDetail) {\n            tr.insertBefore(this.parent.createElement('td', { className: 'e-detailrowcollapse' }), tr.firstChild);\n        }\n        while (i < gLen) {\n            tr.appendChild(this.parent.createElement('td', { className: 'e-indentcell' }));\n            i++;\n        }\n        var m = 0;\n        i = 0;\n        while ((isEdit && m < tdElement.length && i < gObj.getColumns().length) || i < gObj.getColumns().length) {\n            var span = isEdit ? tdElement[m].getAttribute('colspan') : null;\n            var col = gObj.getColumns()[i];\n            var td_1 = this.parent.createElement('td', {\n                className: 'e-rowcell', attrs: { style: 'text-align:' + (col.textAlign ? col.textAlign : ''), 'colspan': span ? span : '' }\n            });\n            if (col.visible) {\n                td_1.appendChild(elements[col.uid]);\n                if (col.editType === 'booleanedit') {\n                    td_1.classList.add('e-boolcell');\n                }\n                else if (col.commands || col.commandsTemplate) {\n                    addClass([td_1], 'e-unboundcell');\n                }\n            }\n            else {\n                td_1.classList.add('e-hide');\n            }\n            tr.appendChild(td_1);\n            i = span ? i + parseInt(span, 10) : i + 1;\n            m++;\n        }\n        tbody.appendChild(tr);\n        table.appendChild(tbody);\n        form.appendChild(table);\n        td.appendChild(form);\n        return td;\n    };\n    InlineEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    return InlineEditRender;\n}());\nexport { InlineEditRender };\n","import { classList } from '@syncfusion/ej2-base';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar BatchEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function BatchEditRender(parent) {\n        this.parent = parent;\n    }\n    BatchEditRender.prototype.update = function (elements, args) {\n        args.cell.innerHTML = '';\n        args.cell.appendChild(this.getEditElement(elements, args));\n        args.cell.classList.add('e-editedbatchcell');\n        classList(args.row, ['e-editedrow', 'e-batchrow'], []);\n    };\n    BatchEditRender.prototype.getEditElement = function (elements, args) {\n        var gObj = this.parent;\n        var form = this.parent\n            .createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        form.appendChild(elements[args.columnObject.uid]);\n        if (args.columnObject.editType === 'booleanedit') {\n            args.cell.classList.add('e-boolcell');\n        }\n        if (!args.columnObject.editType) {\n            args.cell.classList.add('e-inputbox');\n        }\n        return form;\n    };\n    BatchEditRender.prototype.removeEventListener = function () {\n        //To destroy the renderer\n    };\n    return BatchEditRender;\n}());\nexport { BatchEditRender };\n","import { Dialog } from '@syncfusion/ej2-popups';\nimport { remove } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { changeButtonType } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar DialogEditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function DialogEditRender(parent, serviceLocator) {\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.dialogDestroy, this.destroy, this);\n        this.parent.on(events.destroy, this.destroy, this);\n    }\n    DialogEditRender.prototype.setLocaleObj = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n    };\n    DialogEditRender.prototype.addNew = function (elements, args) {\n        this.isEdit = false;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.update = function (elements, args) {\n        this.isEdit = true;\n        this.createDialog(elements, args);\n    };\n    DialogEditRender.prototype.createDialog = function (elements, args) {\n        var gObj = this.parent;\n        this.dialog = this.parent.createElement('div', { id: gObj.element.id + '_dialogEdit_wrapper' });\n        gObj.element.appendChild(this.dialog);\n        this.setLocaleObj();\n        var position = this.parent.element.getBoundingClientRect().height < 400 ?\n            { X: 'center', Y: 'top' } : { X: 'center', Y: 'center' };\n        this.dialogObj = new Dialog({\n            header: this.isEdit ? this.l10n.getConstant('EditFormTitle') + args.primaryKeyValue[0] :\n                this.l10n.getConstant('AddFormTitle'), isModal: true, visible: true, cssClass: 'e-edit-dialog',\n            content: this.getEditElement(elements),\n            showCloseIcon: true,\n            allowDragging: true,\n            position: position,\n            close: this.dialogClose.bind(this),\n            closeOnEscape: true, width: '330px', target: gObj.element, animationSettings: { effect: 'None' },\n            buttons: [{\n                    click: this.btnClick.bind(this),\n                    buttonModel: { content: this.l10n.getConstant('SaveButton'), cssClass: 'e-primary', isPrimary: true }\n                },\n                { click: this.btnClick.bind(this), buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') } }]\n        });\n        this.dialogObj.appendTo(this.dialog);\n        changeButtonType(this.dialogObj.element);\n    };\n    DialogEditRender.prototype.btnClick = function (e) {\n        if (this.l10n.getConstant('CancelButton').toLowerCase() === e.target.innerText.trim().toLowerCase()) {\n            this.dialogClose();\n        }\n        else {\n            this.parent.endEdit();\n        }\n    };\n    DialogEditRender.prototype.dialogClose = function () {\n        this.parent.closeEdit();\n        this.destroy();\n    };\n    DialogEditRender.prototype.destroy = function (args) {\n        this.parent.notify(events.destroyForm, {});\n        this.parent.isEdit = false;\n        this.parent.notify(events.toolbarRefresh, {});\n        if (this.dialog && !this.dialogObj.isDestroyed) {\n            this.dialogObj.destroy();\n            remove(this.dialog);\n        }\n    };\n    DialogEditRender.prototype.getEditElement = function (elements) {\n        var gObj = this.parent;\n        var div = this.parent.createElement('div', { className: this.isEdit ? 'e-editedrow' : 'e-insertedrow' });\n        var form = this.parent\n            .createElement('form', { id: gObj.element.id + 'EditForm', className: 'e-gridform' });\n        var table = this.parent.createElement('table', { className: 'e-table', attrs: { cellspacing: '6px' } });\n        var tbody = this.parent.createElement('tbody');\n        var cols = gObj.getColumns();\n        for (var i = 0; i < cols.length; i++) {\n            if (!cols[i].visible || cols[i].commands || cols[i].commandsTemplate) {\n                continue;\n            }\n            var tr = this.parent.createElement('tr');\n            var dataCell = this.parent.createElement('td', {\n                className: 'e-rowcell', attrs: {\n                    style: 'text-align:' + (this.parent.enableRtl ? 'right' : 'left') + ';width:190px'\n                }\n            });\n            var label = this.parent.createElement('label', { innerHTML: cols[i].field });\n            elements[cols[i].uid].classList.remove('e-input');\n            dataCell.appendChild(elements[cols[i].uid]);\n            tr.appendChild(dataCell);\n            tbody.appendChild(tr);\n        }\n        table.appendChild(tbody);\n        form.appendChild(table);\n        div.appendChild(form);\n        return div;\n    };\n    DialogEditRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.dialogDestroy, this.destroy);\n        this.parent.off(events.destroy, this.destroy);\n    };\n    return DialogEditRender;\n}());\nexport { DialogEditRender };\n","import { isNullOrUndefined, closest, getValue } from '@syncfusion/ej2-base';\nimport { InlineEditRender } from './inline-edit-renderer';\nimport { BatchEditRender } from './batch-edit-renderer';\nimport { DialogEditRender } from './dialog-edit-renderer';\nimport { attributes, classList } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { RowModelGenerator } from '../services/row-model-generator';\nimport { isComplexField, getComplexFieldID } from '../base/util';\n/**\n * Edit render module is used to render grid edit row.\n * @hidden\n */\nvar EditRender = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function EditRender(parent, serviceLocator) {\n        //Internal variables               \n        this.editType = {\n            'Inline': InlineEditRender,\n            'Normal': InlineEditRender, 'Batch': BatchEditRender, 'Dialog': DialogEditRender\n        };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = new this.editType[this.parent.editSettings.mode](parent, serviceLocator);\n        this.focus = serviceLocator.getService('focus');\n    }\n    EditRender.prototype.addNew = function (args) {\n        this.renderer.addNew(this.getEditElements(args), args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.update = function (args) {\n        this.renderer.update(this.getEditElements(args), args);\n        this.convertWidget(args);\n    };\n    EditRender.prototype.convertWidget = function (args) {\n        var gObj = this.parent;\n        var isFocused;\n        var cell;\n        var value;\n        var fForm;\n        var frzCols = gObj.getFrozenColumns();\n        var form = gObj.element.querySelector('.e-gridform');\n        if (frzCols && gObj.editSettings.mode === 'Normal') {\n            var rowIndex = parseInt(args.row.getAttribute('aria-rowindex'), 10);\n            if (gObj.frozenRows && (args.requestType === 'add' || rowIndex < gObj.frozenRows)) {\n                fForm = gObj.element.querySelector('.e-movableheader').querySelector('.e-gridform');\n            }\n            else {\n                fForm = gObj.element.querySelector('.e-movablecontent').querySelector('.e-gridform');\n            }\n        }\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            if (!col.visible || col.commands) {\n                continue;\n            }\n            value = (col.valueAccessor(col.field, args.rowData, col));\n            if (frzCols && cols.indexOf(col) >= frzCols && gObj.editSettings.mode === 'Normal') {\n                cell = fForm.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            else {\n                cell = form.querySelector('[e-mappinguid=' + col.uid + ']');\n            }\n            var temp = col.edit.write;\n            if (!isNullOrUndefined(cell)) {\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                    temp({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getValue(col.field, args.foreignKeyData)\n                    });\n                }\n                else {\n                    col.edit.write({\n                        rowData: args.rowData, element: cell, column: col, requestType: args.requestType, row: args.row,\n                        foreignKeyData: col.isForeignColumn() && getValue(col.field, args.foreignKeyData)\n                    });\n                }\n                if (!isFocused && !cell.getAttribute('disabled')) {\n                    this.focusElement(cell, args.type);\n                    isFocused = true;\n                }\n            }\n        }\n    };\n    EditRender.prototype.focusElement = function (elem, type) {\n        var chkBox = this.parent.element.querySelector('.e-edit-checkselect');\n        if (!isNullOrUndefined(chkBox)) {\n            chkBox.nextElementSibling.classList.add('e-focus');\n        }\n        if (this.parent.editSettings.mode === 'Batch') {\n            this.focus.onClick({ target: closest(elem, 'td') }, true);\n        }\n        else {\n            elem.focus();\n        }\n        if (elem.classList.contains('e-defaultcell')) {\n            elem.setSelectionRange(elem.value.length, elem.value.length);\n        }\n    };\n    EditRender.prototype.getEditElements = function (args) {\n        var gObj = this.parent;\n        var elements = {};\n        var cols = gObj.editSettings.mode !== 'Batch' ? gObj.getColumns() : [gObj.getColumnByField(args.columnName)];\n        for (var i = 0, len = cols.length; i < len; i++) {\n            var col = cols[i];\n            if (!col.visible) {\n                continue;\n            }\n            if (col.commands || col.commandsTemplate) {\n                var cellRendererFact = this.serviceLocator.getService('cellRendererFactory');\n                var model = new RowModelGenerator(this.parent);\n                var cellRenderer = cellRendererFact.getCellRenderer(CellType.CommandColumn);\n                var cells = model.generateRows(args.rowData)[0].cells;\n                var td = cellRenderer.render(cells[i], args.rowData, { 'index': args.row ? args.row.getAttribute('aria-rowindex') : 0 });\n                var div = td.firstElementChild;\n                div.setAttribute('textAlign', td.getAttribute('textAlign'));\n                elements[col.uid] = div;\n                continue;\n            }\n            var value = (col.valueAccessor(col.field, args.rowData, col));\n            var tArgs = { column: col, value: value, type: args.requestType, data: args.rowData };\n            var temp = col.edit.create;\n            var input = void 0;\n            if (typeof temp === 'string') {\n                temp = getValue(temp, window);\n                input = temp(tArgs);\n            }\n            else {\n                input = col.edit.create(tArgs);\n            }\n            if (typeof input === 'string') {\n                var div = this.parent.createElement('div');\n                div.innerHTML = input;\n                input = div.firstChild;\n            }\n            var isInput = input.tagName !== 'input' && input.querySelectorAll('input').length;\n            var isComplex = !isNullOrUndefined(col.field) && isComplexField(col.field);\n            var complexFieldName = !isNullOrUndefined(col.field) && getComplexFieldID(col.field);\n            attributes(isInput ? input.querySelector('input') : input, {\n                name: isComplex ? complexFieldName : col.field, 'e-mappinguid': col.uid,\n                id: isComplex ? gObj.element.id + complexFieldName : gObj.element.id + col.field\n            });\n            classList(input, ['e-input', 'e-field'], []);\n            if (col.textAlign === 'Right') {\n                input.classList.add('e-ralign');\n            }\n            if ((col.isPrimaryKey || col.isIdentity) && args.requestType === 'beginEdit' ||\n                (col.isIdentity && args.requestType === 'add')) {\n                input.setAttribute('disabled', 'true');\n            }\n            elements[col.uid] = input;\n        }\n        return elements;\n    };\n    EditRender.prototype.destroy = function () {\n        this.renderer.removeEventListener();\n    };\n    return EditRender;\n}());\nexport { EditRender };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CheckBox } from '@syncfusion/ej2-buttons';\nimport { extend } from '@syncfusion/ej2-base';\nimport { isEditable, getComplexValue, addRemoveActiveClasses, isComplexField, getComplexFieldID } from '../base/util';\n/**\n * `BooleanEditCell` is used to handle boolean cell type editing.\n * @hidden\n */\nvar BooleanEditCell = /** @class */ (function () {\n    function BooleanEditCell(parent) {\n        this.activeClasses = ['e-selectionbackground', 'e-active'];\n        this.parent = parent;\n    }\n    BooleanEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var classNames = 'e-field e-boolcell';\n        if (col.type === 'checkbox') {\n            classNames = 'e-field e-boolcell e-edit-checkselect';\n        }\n        var isComplex = !isNullOrUndefined(args.column.field) && isComplexField(args.column.field);\n        var complexFieldName = !isNullOrUndefined(args.column.field) && getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: classNames, attrs: {\n                type: 'checkbox', value: args.value, 'e-mappinguid': col.uid,\n                id: isComplex ? this.parent.element.id + complexFieldName : this.parent.element.id + col.field,\n                name: isComplex ? complexFieldName : col.field\n            }\n        });\n    };\n    BooleanEditCell.prototype.read = function (element) {\n        return element.checked;\n    };\n    BooleanEditCell.prototype.write = function (args) {\n        var selectChkBox;\n        var chkState;\n        var isComplex = !isNullOrUndefined(args.column.field) && isComplexField(args.column.field);\n        var isAddRow = args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        if (!isNullOrUndefined(args.row)) {\n            selectChkBox = args.row.querySelector('.e-edit-checkselect');\n        }\n        if (!isComplex && args.rowData[args.column.field]) {\n            chkState = JSON.parse(args.rowData[args.column.field].toString().toLowerCase());\n        }\n        if (isComplex && !isAddRow && getComplexValue(args.rowData, args.column.field)) {\n            chkState = JSON.parse(getComplexValue(args.rowData, args.column.field).toString().toLowerCase());\n        }\n        if (!isNullOrUndefined(selectChkBox)) {\n            this.editType = this.parent.editSettings.mode;\n            this.editRow = args.row;\n            if (args.requestType !== 'add') {\n                var row = this.parent.getRowObjectFromUID(args.row.getAttribute('data-uid'));\n                chkState = row ? row.isSelected : false;\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(args.row.querySelectorAll('.e-rowcell')), chkState].concat(this.activeClasses));\n        }\n        this.obj = new CheckBox(extend({\n            label: this.parent.editSettings.mode !== 'Dialog' ? '' : args.column.headerText,\n            checked: chkState,\n            disabled: !isEditable(args.column, args.requestType, args.element), enableRtl: this.parent.enableRtl,\n            change: this.checkBoxChange.bind(this)\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    BooleanEditCell.prototype.checkBoxChange = function (args) {\n        if (this.editRow && this.editType !== 'Dialog') {\n            var add = false;\n            if (!args.checked) {\n                this.editRow.removeAttribute('aria-selected');\n            }\n            else {\n                add = true;\n                this.editRow.setAttribute('aria-selected', add.toString());\n            }\n            addRemoveActiveClasses.apply(void 0, [[].slice.call(this.editRow.querySelectorAll('.e-rowcell')), add].concat(this.activeClasses));\n        }\n    };\n    BooleanEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return BooleanEditCell;\n}());\nexport { BooleanEditCell };\n","import { extend, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DropDownList } from '@syncfusion/ej2-dropdowns';\nimport { Query, DataManager, DataUtil } from '@syncfusion/ej2-data';\nimport { isEditable, getComplexFieldID, getComplexValue, isComplexField } from '../base/util';\nimport { parentsUntil } from '../base/util';\n/**\n * `DropDownEditCell` is used to handle dropdown cell type editing.\n * @hidden\n */\nvar DropDownEditCell = /** @class */ (function () {\n    function DropDownEditCell(parent) {\n        //constructor\n        this.parent = parent;\n    }\n    DropDownEditCell.prototype.create = function (args) {\n        //create\n        /* tslint:disable-next-line:no-any */\n        var complexFieldName = getComplexFieldID(args.column.field);\n        /* tslint:disable-next-line:no-any */\n        var isComplex = isComplexField(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                /* tslint:disable-next-line:no-any */\n                id: isComplex ? this.parent.element.id + complexFieldName : this.parent.element.id + args.column.field,\n                /* tslint:disable-next-line:no-any */\n                name: isComplex ? complexFieldName : args.column.field, type: 'text', 'e-mappinguid': args.column.uid,\n            }\n        });\n    };\n    DropDownEditCell.prototype.write = function (args) {\n        this.column = args.column;\n        /* tslint:disable-next-line:no-any */\n        var complexFieldName = getComplexFieldID(args.column.field);\n        var isComplex = isComplexField(args.column.field);\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var isAddRow = args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        this.obj = new DropDownList(extend({\n            dataSource: this.parent.dataSource instanceof DataManager ?\n                this.parent.dataSource : new DataManager(this.parent.dataSource),\n            query: new Query().select(args.column.field), enabled: isEditable(args.column, args.requestType, args.element),\n            fields: { value: args.column.field },\n            value: isComplex && !isAddRow ?\n                getComplexValue(args.rowData, args.column.field) : args.rowData[args.column.field],\n            enableRtl: this.parent.enableRtl, actionComplete: this.ddActionComplete.bind(this),\n            placeholder: isInline ? '' : args.column.headerText, popupHeight: '200px',\n            floatLabelType: isInline ? 'Never' : 'Always', open: this.dropDownOpen.bind(this),\n            sortOrder: 'Ascending'\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n        /* tslint:disable-next-line:no-any */\n        args.element.setAttribute('name', isComplex ? complexFieldName : args.column.field);\n    };\n    DropDownEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DropDownEditCell.prototype.ddActionComplete = function (e) {\n        e.result = DataUtil.distinct(e.result, this.column.isForeignColumn() ? this.column.foreignKeyField : this.column.field, true);\n        if (this.column.dataSource) {\n            this.column.dataSource.dataSource.json = e.result;\n        }\n    };\n    DropDownEditCell.prototype.dropDownOpen = function (args) {\n        var dlgElement = parentsUntil(this.obj.element, 'e-dialog');\n        var targetElement = !isNullOrUndefined(dlgElement) && dlgElement.id !== '' ?\n            this.parent.element.querySelector('#' + dlgElement.id) : null;\n        if (!isNullOrUndefined(targetElement)) {\n            var dlgObj = this.parent.element.querySelector('#' + dlgElement.id).ej2_instances[0];\n            args.popup.element.style.zIndex = (dlgObj.zIndex + 1).toString();\n        }\n    };\n    DropDownEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DropDownEditCell;\n}());\nexport { DropDownEditCell };\n","import { extend } from '@syncfusion/ej2-base';\nimport { NumericTextBox } from '@syncfusion/ej2-inputs';\nimport { isEditable, isComplexField, getComplexFieldID, getComplexValue } from '../base/util';\n/**\n * `NumericEditCell` is used to handle numeric cell type editing.\n * @hidden\n */\nvar NumericEditCell = /** @class */ (function () {\n    function NumericEditCell(parent) {\n        this.parent = parent;\n    }\n    NumericEditCell.prototype.create = function (args) {\n        /* tslint:disable-next-line:no-any */\n        var isComplex = isComplexField(args.column.field);\n        var complexFieldName = getComplexFieldID(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                /* tslint:disable-next-line:no-any */\n                id: isComplex ? this.parent.element.id + complexFieldName : this.parent.element.id + args.column.field,\n                name: isComplex ? complexFieldName : args.column.field, 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    NumericEditCell.prototype.read = function (element) {\n        element.blur();\n        return element.ej2_instances[0].value;\n    };\n    NumericEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var isComplex = isComplexField(args.column.field);\n        var complexFieldName = getComplexFieldID(args.column.field);\n        var isAddRow = args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        this.obj = new NumericTextBox(extend({\n            value: isComplex && !isAddRow ?\n                parseFloat(getComplexValue(args.rowData, args.column.field)) : parseFloat(args.rowData[col.field]),\n            enableRtl: this.parent.enableRtl,\n            placeholder: isInline ? '' : args.column.headerText,\n            enabled: isEditable(args.column, args.requestType, args.element),\n            floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n        }, col.edit.params));\n        this.obj.appendTo(args.element);\n        args.element.setAttribute('name', isComplex ? complexFieldName : args.column.field);\n    };\n    NumericEditCell.prototype.destroy = function () {\n        if (this.obj && !this.obj.isDestroyed) {\n            this.obj.destroy();\n        }\n    };\n    return NumericEditCell;\n}());\nexport { NumericEditCell };\n","import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { isEditable } from '../base/util';\n/**\n * `DefaultEditCell` is used to handle default cell type editing.\n * @hidden\n */\nvar DefaultEditCell = /** @class */ (function () {\n    function DefaultEditCell(parent) {\n        this.parent = parent;\n    }\n    DefaultEditCell.prototype.create = function (args) {\n        var col = args.column;\n        var input = this.parent.createElement('input', {\n            className: 'e-field e-input e-defaultcell', attrs: {\n                type: 'text', value: !isNullOrUndefined(args.value) ? args.value : '', 'e-mappinguid': col.uid,\n                id: this.parent.element.id + col.field, name: col.field, style: 'text-align:' + col.textAlign,\n            }\n        });\n        return input;\n    };\n    DefaultEditCell.prototype.read = function (element) {\n        return element.value;\n    };\n    DefaultEditCell.prototype.write = function (args) {\n        var col = args.column;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var inputargs = {\n            element: args.element, floatLabelType: this.parent.editSettings.mode !== 'Dialog' ? 'Never' : 'Always',\n            properties: {\n                enableRtl: this.parent.enableRtl, enabled: isEditable(args.column, args.requestType, args.element),\n                placeholder: isInline ? '' : args.column.headerText\n            }\n        };\n        Input.createInput(inputargs, this.parent.createElement);\n    };\n    return DefaultEditCell;\n}());\nexport { DefaultEditCell };\n","import { extend, getValue } from '@syncfusion/ej2-base';\nimport { remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { parentsUntil, refreshForeignData } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\n/**\n * `NormalEdit` module is used to handle normal('inline, dialog, external') editing actions.\n * @hidden\n */\nvar NormalEdit = /** @class */ (function () {\n    function NormalEdit(parent, serviceLocator, renderer) {\n        this.parent = parent;\n        this.renderer = renderer;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    NormalEdit.prototype.clickHandler = function (e) {\n        var target = e.target;\n        var gObj = this.parent;\n        if ((((parentsUntil(target, 'e-gridcontent') &&\n            parentsUntil(parentsUntil(target, 'e-gridcontent'), 'e-grid').id === gObj.element.id)) || (gObj.frozenRows\n            && parentsUntil(target, 'e-headercontent'))) && !parentsUntil(target, 'e-unboundcelldiv')) {\n            this.rowIndex = parentsUntil(target, 'e-rowcell') ? parseInt(target.parentElement.getAttribute('aria-rowindex'), 10) : -1;\n            if (gObj.isEdit) {\n                gObj.editModule.endEdit();\n            }\n        }\n    };\n    NormalEdit.prototype.dblClickHandler = function (e) {\n        if (parentsUntil(e.target, 'e-rowcell') && this.parent.editSettings.allowEditOnDblClick) {\n            this.parent.editModule.startEdit(parentsUntil(e.target, 'e-row'));\n        }\n    };\n    /**\n     * The function used to trigger editComplete\n     * @return {void}\n     * @hidden\n     */\n    NormalEdit.prototype.editComplete = function (e) {\n        this.parent.isEdit = false;\n        switch (e.requestType) {\n            case 'save':\n                if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n                    || (!this.parent.isPersistSelection)) {\n                    this.parent.selectRow(0);\n                }\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'save',\n                    type: events.actionComplete\n                }));\n                break;\n            case 'delete':\n                this.parent.trigger(events.actionComplete, extend(e, {\n                    requestType: 'delete',\n                    type: events.actionComplete\n                }));\n                this.parent.selectRow(this.editRowIndex);\n                break;\n        }\n    };\n    NormalEdit.prototype.startEdit = function (tr) {\n        var gObj = this.parent;\n        var primaryKeys = gObj.getPrimaryKeyFieldNames();\n        var primaryKeyValues = [];\n        this.rowIndex = this.editRowIndex = parseInt(tr.getAttribute('aria-rowindex'), 10);\n        this.previousData = gObj.getCurrentViewRecords()[this.rowIndex];\n        for (var i = 0; i < primaryKeys.length; i++) {\n            primaryKeyValues.push(this.previousData[primaryKeys[i]]);\n        }\n        this.uid = tr.getAttribute('data-uid');\n        var rowObj = gObj.getRowObjectFromUID(this.uid);\n        var args = {\n            row: tr, primaryKey: primaryKeys, primaryKeyValue: primaryKeyValues, requestType: 'beginEdit',\n            rowData: this.previousData, rowIndex: this.rowIndex, type: 'edit', cancel: false,\n            foreignKeyData: rowObj && rowObj.foreignKeyData\n        };\n        gObj.trigger(events.beginEdit, args);\n        args.type = 'actionBegin';\n        gObj.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.isEdit = true;\n        gObj.clearSelection();\n        if (gObj.editSettings.mode === 'Dialog') {\n            args.row.classList.add('e-dlgeditrow');\n        }\n        this.renderer.update(args);\n        this.uid = tr.getAttribute('data-uid');\n        gObj.editModule.applyFormValidation();\n        args.type = 'actionComplete';\n        gObj.trigger(events.actionComplete, args);\n        if (this.parent.allowTextWrap) {\n            this.parent.notify(events.freezeRender, { case: 'textwrap' });\n        }\n    };\n    NormalEdit.prototype.updateRow = function (index, data) {\n        var gObj = this.parent;\n        var args = {\n            requestType: 'save', type: events.actionBegin, data: data, cancel: false,\n            previousData: gObj.getCurrentViewRecords()[index]\n        };\n        gObj.showSpinner();\n        gObj.notify(events.updateData, args);\n        gObj.refresh();\n    };\n    NormalEdit.prototype.endEdit = function () {\n        var gObj = this.parent;\n        if (!this.parent.isEdit || !gObj.editModule.formObj.validate() ||\n            (gObj.editModule.mFormObj && !gObj.editModule.mFormObj.validate())) {\n            return;\n        }\n        var editedData = extend({}, this.previousData);\n        var args = {\n            requestType: 'save', type: events.actionBegin, data: editedData, cancel: false,\n            previousData: this.previousData, selectedRow: gObj.selectedRowIndex, foreignKeyData: {}\n        };\n        editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-gridform'), editedData);\n        if (gObj.getFrozenColumns() && gObj.editSettings.mode === 'Normal') {\n            var mForm = gObj.element.querySelector('.e-movableheader').querySelector('.e-gridform');\n            if (gObj.frozenRows && mForm) {\n                editedData = gObj.editModule.getCurrentEditedData(mForm, editedData);\n            }\n            else {\n                editedData = gObj.editModule.getCurrentEditedData(gObj.element.querySelector('.e-movablecontent').querySelector('.e-gridform'), editedData);\n            }\n        }\n        if (gObj.element.querySelectorAll('.e-editedrow').length) {\n            args.action = 'edit';\n            gObj.trigger(events.actionBegin, args);\n            if (args.cancel) {\n                return;\n            }\n            gObj.showSpinner();\n            gObj.notify(events.updateData, args);\n        }\n        else {\n            args.action = 'add';\n            args.selectedRow = 0;\n            args.index = this.addedRowIndex;\n            gObj.notify(events.modelChanged, args);\n            this.addedRowIndex = null;\n            if (args.cancel) {\n                return;\n            }\n        }\n    };\n    NormalEdit.prototype.destroyElements = function () {\n        var gObj = this.parent;\n        gObj.editModule.destroyWidgets();\n        gObj.editModule.destroyForm();\n        gObj.notify(events.dialogDestroy, {});\n    };\n    NormalEdit.prototype.editHandler = function (args) {\n        var _this = this;\n        if (args.promise) {\n            args.promise.then(function (e) { return _this.edSucc(e, args); }).catch(function (e) { return _this.edFail(e); });\n        }\n        else {\n            this.editSuccess(args.data, args);\n        }\n    };\n    NormalEdit.prototype.edSucc = function (e, args) {\n        this.editSuccess(e, args);\n    };\n    NormalEdit.prototype.edFail = function (e) {\n        this.editFailure(e);\n    };\n    NormalEdit.prototype.updateCurrentViewData = function (data) {\n        this.parent.getCurrentViewRecords()[this.editRowIndex] = data;\n    };\n    NormalEdit.prototype.requestSuccess = function (args) {\n        if (this.parent.editModule.formObj && !this.parent.editModule.formObj.isDestroyed) {\n            this.destroyElements();\n            this.stopEditStatus();\n            if (this.parent.editSettings.mode === 'Dialog' && args.action !== 'add') {\n                this.parent.element.querySelector('.e-dlgeditrow').classList.remove('e-dlgeditrow');\n            }\n        }\n    };\n    NormalEdit.prototype.editSuccess = function (e, args) {\n        if (!isNullOrUndefined(e)) {\n            args.data = e;\n        }\n        this.requestSuccess(args);\n        this.parent.trigger(events.beforeDataBound, args);\n        args.type = events.actionComplete;\n        this.parent.isEdit = false;\n        this.refreshRow(args.data);\n        this.updateCurrentViewData(args.data);\n        this.parent.trigger(events.actionComplete, args);\n        if (!(this.parent.isCheckBoxSelection || this.parent.selectionSettings.type === 'Multiple')\n            || (!this.parent.isPersistSelection)) {\n            this.parent.selectRow(this.rowIndex > -1 ? this.rowIndex : this.editRowIndex);\n        }\n        this.parent.hideSpinner();\n    };\n    NormalEdit.prototype.editFailure = function (e) {\n        this.parent.trigger(events.actionFailure, e);\n        this.parent.hideSpinner();\n    };\n    NormalEdit.prototype.refreshRow = function (data) {\n        var frzCols = this.parent.getFrozenColumns();\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var rowObj = this.parent.getRowObjectFromUID(this.uid);\n        if (rowObj) {\n            rowObj.changes = data;\n            refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n            row.refresh(rowObj, this.parent.getColumns(), true);\n            if (frzCols) {\n                var uid = void 0;\n                var tr = this.parent.element.querySelector('[data-uid=' + rowObj.uid + ']');\n                if ((parentsUntil(tr, 'e-frozencontent')) || (parentsUntil(tr, 'e-frozenheader'))) {\n                    uid = this.parent.getMovableRows()[rowObj.index].getAttribute('data-uid');\n                }\n                else {\n                    uid = this.parent.getRows()[rowObj.index].getAttribute('data-uid');\n                }\n                rowObj = this.parent.getRowObjectFromUID(uid);\n                rowObj.changes = data;\n                row.refresh(rowObj, this.parent.columns, true);\n            }\n        }\n    };\n    NormalEdit.prototype.closeEdit = function () {\n        if (!this.parent.isEdit) {\n            return;\n        }\n        var gObj = this.parent;\n        var args = {\n            requestType: 'cancel', type: events.actionBegin, data: this.previousData, selectedRow: gObj.selectedRowIndex\n        };\n        gObj.trigger(events.actionBegin, args);\n        if (this.parent.editSettings.mode === 'Dialog') {\n            this.parent.notify(events.dialogDestroy, {});\n        }\n        gObj.isEdit = false;\n        this.stopEditStatus();\n        args.type = events.actionComplete;\n        if (gObj.editSettings.mode !== 'Dialog') {\n            this.refreshRow(args.data);\n        }\n        if (gObj.getContentTable().querySelector('tr.e-emptyrow') &&\n            !gObj.getContentTable().querySelector('tr.e-row')) {\n            gObj.getContentTable().querySelector('tr.e-emptyrow').classList.remove('e-hide');\n        }\n        gObj.selectRow(this.rowIndex);\n        gObj.trigger(events.actionComplete, args);\n    };\n    NormalEdit.prototype.addRecord = function (data, index) {\n        var gObj = this.parent;\n        this.addedRowIndex = !isNullOrUndefined(index) ? index : 0;\n        if (data) {\n            gObj.notify(events.modelChanged, {\n                requestType: 'save', type: events.actionBegin, data: data, selectedRow: 0, action: 'add', index: index\n            });\n            return;\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        this.previousData = {};\n        this.uid = '';\n        for (var _i = 0, _a = gObj.getColumns(); _i < _a.length; _i++) {\n            var col = _a[_i];\n            this.previousData[col.field] = data && data[col.field] ? data[col.field] : col.defaultValue;\n        }\n        var args = {\n            cancel: false, foreignKeyData: {},\n            requestType: 'add', data: this.previousData, type: events.actionBegin, index: index\n        };\n        gObj.trigger(events.actionBegin, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.isEdit = true;\n        gObj.clearSelection();\n        this.renderer.addNew({ rowData: args.data, requestType: 'add' });\n        gObj.editModule.applyFormValidation();\n        args.type = events.actionComplete;\n        args.row = gObj.element.querySelector('.e-addedrow');\n        gObj.trigger(events.actionComplete, args);\n    };\n    NormalEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.editRowIndex = this.parent.selectedRowIndex;\n        if (data) {\n            data = (data instanceof Array) ? data : [data];\n            var gObj = this.parent;\n            var index = 0;\n            var dataLen = Object.keys(data).length;\n            fieldname = fieldname || this.parent.getPrimaryKeyFieldNames()[0];\n            var _loop_1 = function (i) {\n                var tmpRecord;\n                var contained = gObj.currentViewData.some(function (record) {\n                    tmpRecord = record;\n                    return data[i] === getValue(fieldname, record) || data[i] === record;\n                });\n                data[i] = contained ? tmpRecord : (_a = {}, _a[fieldname] = data[i], _a);\n                var _a;\n            };\n            for (var i = 0; i < dataLen; i++) {\n                _loop_1(i);\n            }\n        }\n        this.parent.notify(events.modelChanged, {\n            requestType: 'delete', type: events.actionBegin, foreignKeyData: {},\n            data: data ? data : this.parent.getSelectedRecords(), tr: this.parent.getSelectedRows(), cancel: false\n        });\n    };\n    NormalEdit.prototype.stopEditStatus = function () {\n        var gObj = this.parent;\n        var elem = gObj.element.querySelector('.e-addedrow');\n        var mElem;\n        var editMElem;\n        if (gObj.getFrozenColumns()) {\n            mElem = gObj.element.querySelectorAll('.e-addedrow')[1];\n            editMElem = gObj.element.querySelectorAll('.e-editedrow')[1];\n            if (mElem) {\n                remove(mElem);\n            }\n            if (editMElem) {\n                editMElem.classList.remove('e-editedrow');\n            }\n        }\n        if (elem) {\n            remove(elem);\n        }\n        elem = gObj.element.querySelector('.e-editedrow');\n        if (elem) {\n            elem.classList.remove('e-editedrow');\n        }\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.recordAdded, this.requestSuccess, this);\n        this.parent.on(events.crudAction, this.editHandler, this);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.deleteComplete, this.editComplete, this);\n        this.parent.on(events.saveComplete, this.editComplete, this);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.recordAdded, this.requestSuccess);\n        this.parent.off(events.crudAction, this.editHandler);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.deleteComplete, this.editComplete);\n        this.parent.off(events.saveComplete, this.editComplete);\n    };\n    /**\n     * @hidden\n     */\n    NormalEdit.prototype.destroy = function () {\n        this.removeEventListener();\n        this.renderer.destroy();\n    };\n    return NormalEdit;\n}());\nexport { NormalEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `InlineEdit` module is used to handle inline editing actions.\n * @hidden\n */\nvar InlineEdit = /** @class */ (function (_super) {\n    __extends(InlineEdit, _super);\n    function InlineEdit(parent, serviceLocator, renderer) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    InlineEdit.prototype.closeEdit = function () {\n        _super.prototype.closeEdit.call(this);\n    };\n    InlineEdit.prototype.addRecord = function (data, index) {\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    InlineEdit.prototype.endEdit = function () {\n        _super.prototype.endEdit.call(this);\n    };\n    InlineEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    InlineEdit.prototype.deleteRecord = function (fieldname, data) {\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    InlineEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return InlineEdit;\n}(NormalEdit));\nexport { InlineEdit };\n","import { extend, addClass, removeClass } from '@syncfusion/ej2-base';\nimport { remove, classList } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { parentsUntil, inArray, refreshForeignData, getComplexValue, isComplexField } from '../base/util';\nimport * as events from '../base/constant';\nimport { RowRenderer } from '../renderer/row-renderer';\nimport { CellRenderer } from '../renderer/cell-renderer';\nimport { Row } from '../models/row';\nimport { Cell } from '../models/cell';\nimport { RowModelGenerator } from '../services/row-model-generator';\n/**\n * `BatchEdit` module is used to handle batch editing actions.\n * @hidden\n */\nvar BatchEdit = /** @class */ (function () {\n    function BatchEdit(parent, serviceLocator, renderer) {\n        this.cellDetails = {};\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.renderer = renderer;\n        this.focus = serviceLocator.getService('focus');\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.dblclick, this.dblClickHandler, this);\n        this.parent.on(events.beforeCellFocused, this.onBeforeCellFocused, this);\n        this.parent.on(events.cellFocused, this.onCellFocused, this);\n        this.dataBoundFunction = this.dataBound.bind(this);\n        this.parent.addEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.on(events.doubleTap, this.dblClickHandler, this);\n        this.parent.on(events.keyPressed, this.keyDownHandler, this);\n        this.parent.on(events.editNextValCell, this.editNextValCell, this);\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.dblclick, this.dblClickHandler);\n        this.parent.off(events.beforeCellFocused, this.onBeforeCellFocused);\n        this.parent.off(events.cellFocused, this.onCellFocused);\n        this.parent.removeEventListener(events.dataBound, this.dataBoundFunction);\n        this.parent.off(events.doubleTap, this.dblClickHandler);\n        this.parent.off(events.keyPressed, this.keyDownHandler);\n        this.parent.off(events.editNextValCell, this.editNextValCell);\n    };\n    BatchEdit.prototype.dataBound = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    BatchEdit.prototype.clickHandler = function (e) {\n        if (!parentsUntil(e.target, this.parent.element.id + '_add', true)) {\n            this.saveCell();\n            this.editNextValCell();\n            if (parentsUntil(e.target, 'e-rowcell') && !this.parent.isEdit) {\n                this.setCellIdx(e.target);\n            }\n        }\n    };\n    BatchEdit.prototype.dblClickHandler = function (e) {\n        var target = parentsUntil(e.target, 'e-rowcell');\n        var tr = parentsUntil(e.target, 'e-row');\n        if (target && tr && !isNaN(parseInt(target.getAttribute('aria-colindex'), 10))\n            && !target.parentElement.classList.contains('e-editedrow')) {\n            this.editCell(parseInt(tr.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(target.getAttribute('aria-colindex'), 10)].field, this.isAddRow(parseInt(tr.getAttribute('aria-rowindex'), 10)));\n        }\n    };\n    BatchEdit.prototype.onBeforeCellFocused = function (e) {\n        if (this.parent.isEdit && this.validateFormObj() &&\n            (e.byClick || (['tab', 'shiftTab', 'enter', 'shiftEnter'].indexOf(e.keyArgs.action) > -1))) {\n            e.cancel = true;\n            if (e.byClick) {\n                e.clickArgs.preventDefault();\n            }\n            else {\n                e.keyArgs.preventDefault();\n            }\n        }\n    };\n    BatchEdit.prototype.onCellFocused = function (e) {\n        var frzCols = this.parent.getFrozenColumns();\n        var mCont = this.parent.getContent().querySelector('.e-movablecontent');\n        var mHdr = this.parent.getHeaderContent().querySelector('.e-movableheader');\n        var clear = (!e.container.isContent || !e.container.isDataCell) && !(this.parent.frozenRows && e.container.isHeader);\n        if (!e.byKey || clear) {\n            return;\n        }\n        var _a = e.container.indexes, rowIndex = _a[0], cellIndex = _a[1];\n        if (frzCols && (mCont.contains(e.element) || (this.parent.frozenRows && mHdr.contains(e.element)))) {\n            cellIndex += frzCols;\n        }\n        if (this.parent.frozenRows && e.container.isContent) {\n            rowIndex += this.parent.frozenRows;\n        }\n        var isEdit = this.parent.isEdit;\n        if (!this.parent.element.querySelectorAll('.e-popup-open').length) {\n            isEdit = isEdit && !this.validateFormObj();\n            switch (e.keyArgs.action) {\n                case 'tab':\n                case 'shiftTab':\n                    if (isEdit) {\n                        this.editCellFromIndex(rowIndex, cellIndex);\n                    }\n                    break;\n                case 'enter':\n                case 'shiftEnter':\n                    e.keyArgs.preventDefault();\n                    if (isEdit) {\n                        this.editCell(rowIndex, this.cellDetails.column.field);\n                    }\n                    break;\n                case 'f2':\n                    this.editCellFromIndex(rowIndex, cellIndex);\n                    this.focus.focus();\n                    break;\n            }\n        }\n    };\n    BatchEdit.prototype.isAddRow = function (index) {\n        return this.parent.getDataRows()[index].classList.contains('e-insertedrow');\n    };\n    BatchEdit.prototype.editCellFromIndex = function (rowIdx, cellIdx) {\n        this.cellDetails.rowIndex = rowIdx;\n        this.cellDetails.cellIndex = cellIdx;\n        this.editCell(rowIdx, this.parent.getColumns()[cellIdx].field, this.isAddRow(rowIdx));\n    };\n    BatchEdit.prototype.closeEdit = function () {\n        var gObj = this.parent;\n        var rows = this.parent.getRowsObject();\n        if (gObj.frozenColumns && rows.length < this.parent.currentViewData.length * 2) {\n            rows.push.apply(rows, this.parent.getMovableRowsObject());\n        }\n        var rowRenderer = new RowRenderer(this.serviceLocator, null, this.parent);\n        var tr;\n        var mTr;\n        var movObj;\n        if (gObj.isEdit) {\n            this.saveCell(true);\n        }\n        this.isAdded = false;\n        gObj.clearSelection();\n        for (var i = 0; i < rows.length; i++) {\n            if (rows[i].isDirty) {\n                if (gObj.frozenColumns) {\n                    movObj = gObj.getMovableRowsObject()[rows[i].index];\n                    movObj.isDirty = true;\n                }\n                tr = gObj.getContentTable().querySelector('[data-uid=' + rows[i].uid + ']');\n                if (gObj.frozenRows) {\n                    tr = gObj.getHeaderContent().querySelector('[data-uid=' + rows[i].uid + ']');\n                }\n                if (gObj.frozenColumns) {\n                    if (gObj.frozenRows) {\n                        mTr = gObj.getHeaderContent().querySelector('.e-movableheader')\n                            .querySelector('[data-uid=' + rows[i].uid + ']');\n                    }\n                    else {\n                        mTr = gObj.getContent().querySelector('.e-movablecontent')\n                            .querySelector('[data-uid=' + rows[i].uid + ']');\n                    }\n                }\n                if (tr || mTr) {\n                    if (tr && tr.classList.contains('e-insertedrow') || mTr && mTr.classList.contains('e-insertedrow')) {\n                        if (tr) {\n                            remove(tr);\n                        }\n                        if (mTr && (gObj.frozenColumns || gObj.frozenRows)) {\n                            remove(mTr);\n                        }\n                        this.removeRowObjectFromUID(rows[i].uid);\n                        i--;\n                    }\n                    else {\n                        refreshForeignData(rows[i], this.parent.getForeignKeyColumns(), rows[i].data);\n                        delete rows[i].changes;\n                        rows[i].isDirty = false;\n                        var ftr = mTr ? mTr : tr;\n                        classList(ftr, [], ['e-hiddenrow', 'e-updatedtd']);\n                        rowRenderer.refresh(rows[i], gObj.getColumns(), false);\n                    }\n                }\n            }\n        }\n        if (gObj.getContentTable().querySelector('tr.e-emptyrow') &&\n            !gObj.getContentTable().querySelector('tr.e-row')) {\n            gObj.getContentTable().querySelector('tr.e-emptyrow').classList.remove('e-hide');\n        }\n        var args = {\n            requestType: 'batchCancel', rows: this.parent.getRowsObject()\n        };\n        gObj.notify(events.batchCancel, {\n            rows: this.parent.getRowsObject().length ? this.parent.getRowsObject() :\n                [new Row({ isDataRow: true, cells: [new Cell({ isDataCell: true, visible: true })] })]\n        });\n        gObj.selectRow(this.cellDetails.rowIndex);\n        this.refreshRowIdx();\n        gObj.notify(events.toolbarRefresh, {});\n        this.parent.notify(events.tooltipDestroy, {});\n        args = { requestType: 'batchCancel', rows: this.parent.getRowsObject() };\n        gObj.trigger(events.batchCancel, args);\n        if (gObj.frozenColumns) {\n            rows.splice(this.parent.getMovableRowsObject().length, rows.length);\n        }\n    };\n    BatchEdit.prototype.deleteRecord = function (fieldname, data) {\n        this.saveCell();\n        if (this.validateFormObj()) {\n            this.saveCell(true);\n        }\n        this.isAdded = false;\n        this.bulkDelete(fieldname, data);\n    };\n    BatchEdit.prototype.addRecord = function (data) {\n        this.bulkAddRow(data);\n    };\n    BatchEdit.prototype.endEdit = function (data) {\n        if (this.parent.isEdit && this.validateFormObj()) {\n            return;\n        }\n        this.batchSave();\n    };\n    BatchEdit.prototype.validateFormObj = function () {\n        return this.parent.editModule.formObj && !this.parent.editModule.formObj.validate();\n    };\n    BatchEdit.prototype.batchSave = function () {\n        var gObj = this.parent;\n        this.saveCell();\n        if (gObj.isEdit || this.editNextValCell() || gObj.isEdit) {\n            return;\n        }\n        var changes = this.getBatchChanges();\n        var original = {\n            changedRecords: this.parent.getRowsObject()\n                .filter(function (row) { return row.isDirty && ['add', 'delete'].indexOf(row.edit) === -1; })\n                .map(function (row) { return row.data; })\n        };\n        var args = { batchChanges: changes, cancel: false };\n        gObj.trigger(events.beforeBatchSave, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.showSpinner();\n        gObj.notify(events.bulkSave, { changes: changes, original: original });\n    };\n    BatchEdit.prototype.getBatchChanges = function () {\n        var changes = {\n            addedRecords: [],\n            deletedRecords: [],\n            changedRecords: []\n        };\n        var rows = this.parent.getRowsObject();\n        var mRows = this.parent.getMovableRowsObject();\n        var frzCols = this.parent.getFrozenColumns();\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            if (frzCols) {\n                this.mergeBatchChanges(row, mRows[row.index], frzCols);\n            }\n            if (row.isDirty) {\n                switch (row.edit) {\n                    case 'add':\n                        changes.addedRecords.push(row.changes);\n                        break;\n                    case 'delete':\n                        changes.deletedRecords.push(row.data);\n                        break;\n                    default:\n                        changes.changedRecords.push(row.changes);\n                }\n            }\n        }\n        return changes;\n    };\n    BatchEdit.prototype.mergeBatchChanges = function (row, mRow, frzCols) {\n        if (row.isDirty) {\n            if (mRow.isDirty) {\n                var i_1 = 0;\n                Object.keys(row.changes).forEach(function (key) {\n                    if (i_1 >= frzCols) {\n                        row.changes[key] = mRow.changes[key];\n                    }\n                    i_1++;\n                });\n            }\n        }\n        else if (mRow.isDirty) {\n            row.changes = mRow.changes;\n            row.isDirty = mRow.isDirty;\n        }\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.removeRowObjectFromUID = function (uid) {\n        var rows = this.parent.getRowsObject();\n        var i = 0;\n        for (var len = rows.length; i < len; i++) {\n            if (rows[i].uid === uid) {\n                break;\n            }\n        }\n        rows.splice(i, 1);\n    };\n    /**\n     * @hidden\n     */\n    BatchEdit.prototype.addRowObject = function (row) {\n        this.parent.getRowsObject().unshift(row);\n    };\n    BatchEdit.prototype.bulkDelete = function (fieldname, data) {\n        var gObj = this.parent;\n        var index = data ? this.getIndexFromData(data) : gObj.selectedRowIndex;\n        var selectedRows = gObj.getSelectedRows();\n        var args = {\n            primaryKey: this.parent.getPrimaryKeyFieldNames(),\n            rowIndex: index,\n            rowData: data ? data : gObj.getSelectedRecords()[0],\n            row: data ? gObj.getRows()[index] : selectedRows[0], cancel: false\n        };\n        if (!args.row) {\n            return;\n        }\n        gObj.trigger(events.beforeBatchDelete, args);\n        if (args.cancel) {\n            return;\n        }\n        gObj.clearSelection();\n        var uid = args.row.getAttribute('data-uid');\n        if (args.row.classList.contains('e-insertedrow')) {\n            this.removeRowObjectFromUID(uid);\n            remove(args.row);\n        }\n        else {\n            var rowObj = gObj.getRowObjectFromUID(uid);\n            rowObj.isDirty = true;\n            rowObj.edit = 'delete';\n            classList(args.row, ['e-hiddenrow', 'e-updatedtd'], []);\n            if (gObj.getFrozenColumns()) {\n                classList(data ? gObj.getMovableRows()[index] : selectedRows[1], ['e-hiddenrow', 'e-updatedtd'], []);\n                if (gObj.frozenRows && index < gObj.frozenRows) {\n                    gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody')\n                        .appendChild(gObj.getMovableRowByIndex(gObj.frozenRows - 1));\n                    gObj.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody')\n                        .appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n                }\n            }\n            else if (gObj.frozenRows && index < gObj.frozenRows) {\n                gObj.getHeaderContent().querySelector('tbody').appendChild(gObj.getRowByIndex(gObj.frozenRows - 1));\n            }\n        }\n        this.refreshRowIdx();\n        gObj.selectRow(index);\n        delete args.row;\n        gObj.trigger(events.batchDelete, args);\n        gObj.notify(events.batchDelete, { rows: this.parent.getRowsObject() });\n        gObj.notify(events.toolbarRefresh, {});\n    };\n    BatchEdit.prototype.refreshRowIdx = function () {\n        var rows = [];\n        var mRows = [];\n        var nonMovableRows = [];\n        var frzCols = this.parent.getFrozenColumns();\n        if (this.parent.frozenRows) {\n            rows = [].slice.call(this.parent.getHeaderTable().querySelector('tbody').children);\n            if (frzCols) {\n                mRows = [].slice.call(this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').children);\n                for (var i = 0; i < mRows.length; i++) {\n                    nonMovableRows[i] = this.parent.createElement('tr', { className: 'emptynonmv' });\n                }\n            }\n        }\n        if (frzCols) {\n            mRows = mRows.concat([].slice.call(this.parent.getContentTable().querySelector('tbody').children));\n            nonMovableRows = nonMovableRows.concat([].slice.call(this.parent.element.querySelector('.e-movablecontent').querySelector('tbody').children));\n        }\n        rows = rows.concat([].slice.call(this.parent.getContentTable().querySelector('tbody').children));\n        for (var i = 0, j = 0, len = rows.length; i < len; i++) {\n            if (rows[i].classList.contains('e-row') && !rows[i].classList.contains('e-hiddenrow')) {\n                rows[i].setAttribute('aria-rowindex', j.toString());\n                if (frzCols) {\n                    mRows[i].setAttribute('aria-rowindex', j.toString());\n                    if (nonMovableRows[i].classList.contains('e-row')) {\n                        nonMovableRows[i].setAttribute('aria-rowindex', j.toString());\n                    }\n                }\n                j++;\n            }\n            else {\n                rows[i].removeAttribute('aria-rowindex');\n                if (frzCols) {\n                    mRows[i].removeAttribute('aria-rowindex');\n                }\n            }\n        }\n    };\n    BatchEdit.prototype.getIndexFromData = function (data) {\n        return inArray(data, this.parent.getCurrentViewRecords());\n    };\n    BatchEdit.prototype.bulkAddRow = function (data) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowAdding) {\n            return;\n        }\n        if (gObj.isEdit) {\n            this.saveCell();\n            this.parent.notify(events.editNextValCell, {});\n        }\n        if (gObj.isEdit) {\n            return;\n        }\n        var defaultData = data ? data : this.getDefaultData();\n        var args = {\n            defaultData: defaultData,\n            primaryKey: gObj.getPrimaryKeyFieldNames(),\n            cancel: false\n        };\n        gObj.trigger(events.beforeBatchAdd, args);\n        if (args.cancel) {\n            return;\n        }\n        this.isAdded = true;\n        gObj.clearSelection();\n        var mTr;\n        var mTbody;\n        var row = new RowRenderer(this.serviceLocator, null, this.parent);\n        var model = new RowModelGenerator(this.parent);\n        var modelData = model.generateRows([args.defaultData]);\n        var tr = row.render(modelData[0], gObj.getColumns());\n        var col;\n        var index;\n        for (var i = 0; i < this.parent.groupSettings.columns.length; i++) {\n            tr.insertBefore(this.parent.createElement('td', { className: 'e-indentcell' }), tr.firstChild);\n            modelData[0].cells.unshift(new Cell({ cellType: CellType.Indent }));\n        }\n        var tbody = gObj.getContentTable().querySelector('tbody');\n        tr.classList.add('e-insertedrow');\n        if (tbody.querySelector('.e-emptyrow')) {\n            tbody.querySelector('.e-emptyrow').classList.add('e-hide');\n        }\n        if (gObj.getFrozenColumns()) {\n            mTr = this.renderMovable(tr);\n            if (gObj.frozenRows) {\n                mTbody = gObj.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody');\n            }\n            else {\n                mTbody = gObj.getContent().querySelector('.e-movablecontent').querySelector('tbody');\n            }\n            mTbody.insertBefore(mTr, mTbody.firstChild);\n            addClass(mTr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n            if (this.parent.height === 'auto') {\n                this.parent.notify(events.frozenHeight, {});\n            }\n        }\n        if (gObj.frozenRows) {\n            tbody = gObj.getHeaderContent().querySelector('tbody');\n        }\n        tbody.insertBefore(tr, tbody.firstChild);\n        addClass(tr.querySelectorAll('.e-rowcell'), ['e-updatedtd']);\n        modelData[0].isDirty = true;\n        modelData[0].changes = extend({}, modelData[0].data);\n        modelData[0].edit = 'add';\n        this.addRowObject(modelData[0]);\n        this.refreshRowIdx();\n        this.focus.forgetPrevious();\n        gObj.notify(events.batchAdd, { rows: this.parent.getRowsObject() });\n        gObj.selectRow(0);\n        if (!data) {\n            index = this.findNextEditableCell(0, true);\n            col = gObj.getColumns()[index];\n            this.editCell(0, col.field, true);\n        }\n        var args1 = {\n            defaultData: args.defaultData, row: tr,\n            columnObject: col, columnIndex: index, primaryKey: args.primaryKey, cell: tr.cells[index]\n        };\n        gObj.trigger(events.batchAdd, args1);\n    };\n    BatchEdit.prototype.renderMovable = function (ele) {\n        var mEle = ele.cloneNode(true);\n        for (var i = 0; i < this.parent.frozenColumns; i++) {\n            mEle.removeChild(mEle.children[0]);\n        }\n        for (var i = this.parent.frozenColumns, len = ele.childElementCount; i < len; i++) {\n            ele.removeChild(ele.children[ele.childElementCount - 1]);\n        }\n        return mEle;\n    };\n    BatchEdit.prototype.findNextEditableCell = function (columnIndex, isAdd, isValOnly) {\n        var cols = this.parent.getColumns();\n        var endIndex = cols.length;\n        var validation;\n        for (var i = columnIndex; i < endIndex; i++) {\n            validation = isValOnly ? isNullOrUndefined(cols[i].validationRules) : false;\n            if (!isAdd && this.checkNPCell(cols[i])) {\n                return i;\n            }\n            else if (isAdd && !cols[i].template && cols[i].visible && cols[i].allowEditing &&\n                !(cols[i].isIdentity && cols[i].isPrimaryKey) && !validation) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.checkNPCell = function (col) {\n        return !col.template && col.visible && !col.isPrimaryKey && !col.isIdentity && col.allowEditing;\n    };\n    BatchEdit.prototype.getDefaultData = function () {\n        var gObj = this.parent;\n        var data = {};\n        var dValues = { 'number': 0, 'string': null, 'boolean': false, 'date': null, 'datetime': null };\n        for (var _i = 0, _a = gObj.getColumns(); _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (!isNullOrUndefined(col.field) && !isComplexField(col.field)) {\n                data[col.field] = col.defaultValue ? col.defaultValue : dValues[col.type];\n            }\n            if (!isNullOrUndefined(col.field) && isComplexField(col.field)) {\n                var splits = col.field.split('.');\n                data[splits[0]] = !isNullOrUndefined(data[splits[0]]) ? data[splits[0]] : {};\n                col.defaultValue ? data[splits[0]][splits[1]] = col.defaultValue : data[splits[0]][splits[1]] = dValues[col.type];\n            }\n        }\n        return data;\n    };\n    BatchEdit.prototype.setCellIdx = function (target) {\n        var gLen = 0;\n        if (this.parent.allowGrouping) {\n            gLen = this.parent.groupSettings.columns.length;\n        }\n        this.cellDetails.cellIndex = target.cellIndex - gLen;\n        this.cellDetails.rowIndex = parseInt(target.parentElement.getAttribute('aria-rowindex'), 10);\n    };\n    BatchEdit.prototype.editCell = function (index, field, isAdd) {\n        var gObj = this.parent;\n        var col = gObj.getColumnByField(field);\n        var keys = gObj.getPrimaryKeyFieldNames();\n        if (gObj.editSettings.allowEditing && col.allowEditing) {\n            if (gObj.isEdit && !(this.cellDetails.column.field === field\n                && (this.cellDetails.rowIndex === index && this.parent.getDataRows().length - 1 !== index))) {\n                this.saveCell();\n                if (this.cellDetails.rowIndex === index && this.cellDetails.column.field === field) {\n                    return;\n                }\n            }\n            if (gObj.isEdit) {\n                return;\n            }\n            var row = void 0;\n            var rowData = void 0;\n            var mRowData = void 0;\n            var colIdx = gObj.getColumnIndexByField(field);\n            var frzCols = gObj.getFrozenColumns();\n            if (frzCols && colIdx >= frzCols) {\n                row = gObj.getMovableDataRows()[index];\n                mRowData = this.parent.getRowObjectFromUID(this.parent.getMovableDataRows()[index].getAttribute('data-uid'));\n                rowData = mRowData.changes ? extend({}, mRowData.changes) : extend({}, this.getDataByIndex(index));\n            }\n            else {\n                row = gObj.getDataRows()[index];\n                rowData = extend({}, this.getDataByIndex(index));\n            }\n            if ((keys[0] === col.field && !row.classList.contains('e-insertedrow')) || col.columns ||\n                (col.isPrimaryKey && col.isIdentity)) {\n                return;\n            }\n            var rowObj = gObj.getRowObjectFromUID(row.getAttribute('data-uid'));\n            var cells = [].slice.apply(row.cells);\n            var isComplex = !isNullOrUndefined(col.field) && isComplexField(col.field);\n            var args = {\n                cell: cells[this.getColIndex(cells, this.getCellIdx(col.uid))], row: row,\n                columnName: col.field, columnObject: col, isForeignKey: !isNullOrUndefined(col.foreignKeyValue),\n                primaryKey: keys, rowData: rowData,\n                validationRules: extend({}, col.validationRules ? col.validationRules : {}),\n                value: isComplex && !isAdd ? getComplexValue(rowData, col.field) : rowData[col.field],\n                type: !isAdd ? 'edit' : 'add', cancel: false,\n                foreignKeyData: rowObj && rowObj.foreignKeyData\n            };\n            if (!args.cell) {\n                return;\n            }\n            gObj.trigger(events.cellEdit, args);\n            if (args.cancel) {\n                return;\n            }\n            this.cellDetails = {\n                rowData: rowData, column: col, value: args.value, isForeignKey: args.isForeignKey, rowIndex: index,\n                cellIndex: parseInt(args.cell.getAttribute('aria-colindex'), 10),\n                foreignKeyData: args.foreignKeyData\n            };\n            if (args.cell.classList.contains('e-updatedtd')) {\n                this.isColored = true;\n                args.cell.classList.remove('e-updatedtd');\n            }\n            gObj.isEdit = true;\n            gObj.clearSelection();\n            if (!gObj.isCheckBoxSelection || !gObj.isPersistSelection) {\n                gObj.selectRow(this.cellDetails.rowIndex, true);\n            }\n            this.renderer.update(args);\n            this.form = gObj.element.querySelector('#' + gObj.element.id + 'EditForm');\n            gObj.editModule.applyFormValidation([col]);\n            this.parent.element.querySelector('.e-gridpopup').style.display = 'none';\n        }\n    };\n    BatchEdit.prototype.updateCell = function (rowIndex, field, value) {\n        var col = this.parent.getColumnByField(field);\n        if (col && !col.isPrimaryKey) {\n            var td = this.parent.getDataRows()[rowIndex].cells[this.parent.getColumnIndexByField(field)];\n            var rowObj = this.parent.getRowObjectFromUID(td.parentElement.getAttribute('data-uid'));\n            this.refreshTD(td, col, rowObj, value);\n            this.parent.trigger(events.queryCellInfo, {\n                cell: td, column: col, data: rowObj.changes\n            });\n        }\n    };\n    BatchEdit.prototype.setChanges = function (rowObj, field, value) {\n        var isComplex = !isNullOrUndefined(field) && isComplexField(field);\n        if (!rowObj.changes) {\n            rowObj.changes = extend({}, rowObj.data);\n        }\n        if (isComplex) {\n            rowObj.changes[field.split('.')[0]] = extend({}, rowObj.data[field.split('.')[0]]);\n            rowObj.changes[field.split('.')[0]][field.split('.')[1]] = value;\n        }\n        else {\n            rowObj.changes[field] = value;\n        }\n        if (rowObj.data[field] !== value) {\n            rowObj.isDirty = true;\n        }\n    };\n    BatchEdit.prototype.updateRow = function (index, data) {\n        var keys = Object.keys(data);\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n            var col = keys_1[_i];\n            this.updateCell(index, col, data[col]);\n        }\n    };\n    BatchEdit.prototype.getCellIdx = function (uid) {\n        var cIdx = this.parent.getColumnIndexByUid(uid) + this.parent.groupSettings.columns.length;\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        return cIdx;\n    };\n    BatchEdit.prototype.refreshTD = function (td, column, rowObj, value) {\n        var cell = new CellRenderer(this.parent, this.serviceLocator);\n        var rowcell;\n        this.setChanges(rowObj, column.field, value);\n        var frzCols = this.parent.getFrozenColumns();\n        refreshForeignData(rowObj, this.parent.getForeignKeyColumns(), rowObj.changes);\n        if (frzCols && this.getCellIdx(column.uid) >= frzCols && this.parent.getColumns().length === rowObj.cells.length) {\n            rowcell = rowObj.cells.slice(frzCols, rowObj.cells.length);\n        }\n        else {\n            rowcell = rowObj.cells;\n        }\n        cell.refreshTD(td, rowcell[this.getCellIdx(column.uid) - (this.getCellIdx(column.uid) >= frzCols ? frzCols : 0)], rowObj.changes, { 'index': this.getCellIdx(column.uid) });\n        td.classList.add('e-updatedtd');\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    BatchEdit.prototype.getColIndex = function (cells, index) {\n        var cIdx = 0;\n        if (this.parent.allowGrouping && this.parent.groupSettings.columns) {\n            cIdx = this.parent.groupSettings.columns.length;\n        }\n        if (!isNullOrUndefined(this.parent.detailTemplate) || !isNullOrUndefined(this.parent.childGrid)) {\n            cIdx++;\n        }\n        for (var m = 0; m < cells.length; m++) {\n            var colIndex = parseInt(cells[m].getAttribute('aria-colindex'), 10);\n            if (colIndex === index - cIdx) {\n                return m;\n            }\n        }\n        return -1;\n    };\n    BatchEdit.prototype.editNextValCell = function () {\n        var gObj = this.parent;\n        if (this.isAdded && !gObj.isEdit) {\n            for (var i = this.cellDetails.cellIndex; i < gObj.getColumns().length; i++) {\n                if (gObj.isEdit) {\n                    return;\n                }\n                var index = this.findNextEditableCell(this.cellDetails.cellIndex + 1, true, true);\n                var col = gObj.getColumns()[index];\n                if (col) {\n                    this.editCell(0, col.field, true);\n                    this.saveCell();\n                }\n            }\n            if (!gObj.isEdit) {\n                this.isAdded = false;\n            }\n        }\n    };\n    BatchEdit.prototype.saveCell = function (isForceSave) {\n        var gObj = this.parent;\n        if (!isForceSave && (!gObj.isEdit || this.validateFormObj())) {\n            return;\n        }\n        var tr = parentsUntil(this.form, 'e-row');\n        var column = this.cellDetails.column;\n        var editedData = gObj.editModule.getCurrentEditedData(this.form, {});\n        var isComplex = !isNullOrUndefined(column.field) && isComplexField(column.field);\n        var cloneEditedData = extend({}, editedData);\n        editedData = extend({}, editedData, this.cellDetails.rowData);\n        if (isComplex) {\n            var splits = column.field.split('.');\n            var cloneComplexData = extend({}, this.cellDetails.rowData[splits[0]]);\n            editedData[splits[0]] = extend({}, editedData[splits[0]], this.cellDetails.rowData[splits[0]]);\n            this.cellDetails.rowData[splits[0]][splits[1]] = cloneComplexData[splits[1]];\n            editedData[splits[0]][splits[1]] = cloneEditedData[splits[0]][splits[1]];\n        }\n        else {\n            editedData[column.field] = cloneEditedData[column.field];\n        }\n        var args = {\n            columnName: column.field,\n            value: isComplex ? getComplexValue(editedData, column.field) : editedData[column.field],\n            rowData: this.cellDetails.rowData,\n            previousValue: this.cellDetails.value,\n            columnObject: column,\n            cell: this.form.parentElement,\n            isForeignKey: this.cellDetails.isForeignKey, cancel: false\n        };\n        if (!isForceSave) {\n            gObj.trigger(events.cellSave, args);\n        }\n        if (args.cancel) {\n            return;\n        }\n        gObj.editModule.destroyForm();\n        gObj.isEdit = false;\n        gObj.editModule.destroyWidgets([column]);\n        this.parent.notify(events.tooltipDestroy, {});\n        this.refreshTD(args.cell, column, gObj.getRowObjectFromUID(tr.getAttribute('data-uid')), args.value);\n        removeClass([tr], ['e-editedrow', 'e-batchrow']);\n        removeClass([args.cell], ['e-editedbatchcell', 'e-boolcell']);\n        if (!isNullOrUndefined(args.value) && args.value.toString() ===\n            (!isNullOrUndefined(this.cellDetails.value) ? this.cellDetails.value : '').toString() && !this.isColored\n            || (isNullOrUndefined(args.value) && isNullOrUndefined(this.cellDetails.value) &&\n                !args.cell.parentElement.classList.contains('e-insertedrow'))) {\n            args.cell.classList.remove('e-updatedtd');\n        }\n        gObj.trigger(events.cellSaved, args);\n        gObj.notify(events.toolbarRefresh, {});\n        this.isColored = false;\n    };\n    BatchEdit.prototype.getDataByIndex = function (index) {\n        var row = this.parent.getRowObjectFromUID(this.parent.getDataRows()[index].getAttribute('data-uid'));\n        return row.changes ? row.changes : row.data;\n    };\n    BatchEdit.prototype.keyDownHandler = function (e) {\n        if (e.action === 'tab' && this.parent.isEdit) {\n            var rowcell = parentsUntil(e.target, 'e-rowcell');\n            if (rowcell) {\n                var cell = rowcell.querySelector('.e-field');\n                if (cell) {\n                    var visibleColumns = this.parent.getVisibleColumns();\n                    if (visibleColumns[visibleColumns.length - 1].field === cell.getAttribute('name')) {\n                        this.saveCell();\n                    }\n                }\n            }\n        }\n    };\n    return BatchEdit;\n}());\nexport { BatchEdit };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { NormalEdit } from './normal-edit';\n/**\n * `DialogEdit` module is used to handle dialog editing actions.\n * @hidden\n */\nvar DialogEdit = /** @class */ (function (_super) {\n    __extends(DialogEdit, _super);\n    function DialogEdit(parent, serviceLocator, renderer) {\n        var _this = \n        //constructor\n        _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.renderer = renderer;\n        return _this;\n    }\n    DialogEdit.prototype.closeEdit = function () {\n        //closeEdit\n        _super.prototype.closeEdit.call(this);\n    };\n    DialogEdit.prototype.addRecord = function (data, index) {\n        //addRecord\n        _super.prototype.addRecord.call(this, data, index);\n    };\n    DialogEdit.prototype.endEdit = function () {\n        //endEdit\n        _super.prototype.endEdit.call(this);\n    };\n    DialogEdit.prototype.updateRow = function (index, data) {\n        _super.prototype.updateRow.call(this, index, data);\n    };\n    DialogEdit.prototype.deleteRecord = function (fieldname, data) {\n        //deleteRecord\n        _super.prototype.deleteRecord.call(this, fieldname, data);\n    };\n    DialogEdit.prototype.startEdit = function (tr) {\n        _super.prototype.startEdit.call(this, tr);\n    };\n    return DialogEdit;\n}(NormalEdit));\nexport { DialogEdit };\n","import { extend } from '@syncfusion/ej2-base';\nimport { DatePicker } from '@syncfusion/ej2-calendars';\nimport { isEditable, isComplexField, getComplexFieldID, getComplexValue } from '../base/util';\n/**\n * `DatePickerEditCell` is used to handle datepicker cell type editing.\n * @hidden\n */\nvar DatePickerEditCell = /** @class */ (function () {\n    function DatePickerEditCell(parent) {\n        this.parent = parent;\n    }\n    DatePickerEditCell.prototype.create = function (args) {\n        /* tslint:disable-next-line:no-any */\n        var complexFieldName = getComplexFieldID(args.column.field);\n        var isComplex = isComplexField(args.column.field);\n        return this.parent.createElement('input', {\n            className: 'e-field', attrs: {\n                id: isComplex ? this.parent.element.id + complexFieldName : this.parent.element.id + args.column.field,\n                name: isComplex ? complexFieldName : args.column.field, type: 'text', 'e-mappinguid': args.column.uid\n            }\n        });\n    };\n    DatePickerEditCell.prototype.read = function (element) {\n        return element.ej2_instances[0].value;\n    };\n    DatePickerEditCell.prototype.write = function (args) {\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        /* tslint:disable-next-line:no-any */\n        var isComplex = isComplexField(args.column.field);\n        var isAddRow = args.requestType === 'add' || args.row.classList.contains('e-addedrow');\n        var value = isComplex && !isAddRow ?\n            getComplexValue(args.rowData, args.column.field) : args.rowData[args.column.field];\n        value = value ? new Date(value) : null;\n        this.obj = new DatePicker(extend({\n            floatLabelType: isInline ? 'Never' : 'Always',\n            value: value,\n            placeholder: isInline ?\n                '' : args.column.headerText, enableRtl: this.parent.enableRtl,\n            enabled: isEditable(args.column, args.type, args.element),\n        }, args.column.edit.params));\n        this.obj.appendTo(args.element);\n    };\n    DatePickerEditCell.prototype.destroy = function () {\n        if (this.obj) {\n            this.obj.destroy();\n        }\n    };\n    return DatePickerEditCell;\n}());\nexport { DatePickerEditCell };\n","import { EventHandler, closest } from '@syncfusion/ej2-base';\nimport { extend, getValue } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, setValue } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { EditRender } from '../renderer/edit-renderer';\nimport { BooleanEditCell } from '../renderer/boolean-edit-cell';\nimport { DropDownEditCell } from '../renderer/dropdown-edit-cell';\nimport { NumericEditCell } from '../renderer/numeric-edit-cell';\nimport { DefaultEditCell } from '../renderer/default-edit-cell';\nimport { InlineEdit } from './inline-edit';\nimport { BatchEdit } from './batch-edit';\nimport { DialogEdit } from './dialog-edit';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { parentsUntil, changeButtonType } from '../base/util';\nimport { FormValidator } from '@syncfusion/ej2-inputs';\nimport { DatePickerEditCell } from '../renderer/datepicker-edit-cell';\nimport { calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\n/**\n * The `Edit` module is used to handle editing actions.\n */\nvar Edit = /** @class */ (function () {\n    /**\n     * Constructor for the Grid editing module\n     * @hidden\n     */\n    function Edit(parent, serviceLocator) {\n        this.editCellType = {\n            'dropdownedit': DropDownEditCell, 'numericedit': NumericEditCell,\n            'datepickeredit': DatePickerEditCell, 'booleanedit': BooleanEditCell, 'defaultedit': DefaultEditCell\n        };\n        this.editType = { 'Inline': InlineEdit, 'Normal': InlineEdit, 'Batch': BatchEdit, 'Dialog': DialogEdit };\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.l10n = this.serviceLocator.getService('localization');\n        this.addEventListener();\n        this.updateEditObj();\n        this.createAlertDlg();\n        this.createConfirmDlg();\n    }\n    Edit.prototype.updateColTypeObj = function () {\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var col = _a[_i];\n            col.edit = extend(new this.editCellType[col.editType && this.editCellType[col.editType] ?\n                col.editType : 'defaultedit'](this.parent, this.serviceLocator), col.edit || {});\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     * @private\n     */\n    Edit.prototype.getModuleName = function () {\n        return 'edit';\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onPropertyChanged = function (e) {\n        if (e.module !== this.getModuleName()) {\n            return;\n        }\n        var gObj = this.parent;\n        var newProp = e.properties;\n        for (var _i = 0, _a = Object.keys(e.properties); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'allowAdding':\n                case 'allowDeleting':\n                case 'allowEditing':\n                    if (gObj.editSettings.allowAdding || gObj.editSettings.allowEditing || gObj.editSettings.allowDeleting) {\n                        this.initialEnd();\n                    }\n                    break;\n                case 'mode':\n                    this.updateEditObj();\n                    gObj.isEdit = false;\n                    gObj.refresh();\n                    break;\n            }\n        }\n    };\n    Edit.prototype.updateEditObj = function () {\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n        this.renderer = new EditRender(this.parent, this.serviceLocator);\n        this.editModule = new this.editType[this.parent.editSettings.mode](this.parent, this.serviceLocator, this.renderer);\n    };\n    Edit.prototype.initialEnd = function () {\n        this.updateColTypeObj();\n    };\n    Edit.prototype.wireEvents = function () {\n        EventHandler.add(this.parent.getContent(), 'touchstart', this.tapEvent, this);\n    };\n    Edit.prototype.unwireEvents = function () {\n        EventHandler.remove(this.parent.getContent(), 'touchstart', this.tapEvent);\n    };\n    Edit.prototype.tapEvent = function (e) {\n        if (this.getUserAgent()) {\n            if (!Global.timer) {\n                Global.timer = setTimeout(function () {\n                    Global.timer = null;\n                }, 300);\n            }\n            else {\n                clearTimeout(Global.timer);\n                Global.timer = null;\n                this.parent.notify(events.doubleTap, e);\n            }\n        }\n    };\n    Edit.prototype.getUserAgent = function () {\n        var userAgent = window.navigator.userAgent.toLowerCase();\n        return /iphone|ipod|ipad/.test(userAgent);\n    };\n    /**\n     * Edits any bound record in the Grid by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row to be edited.\n     */\n    Edit.prototype.startEdit = function (tr) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowEditing || gObj.isEdit || gObj.editSettings.mode === 'Batch') {\n            return;\n        }\n        if (!gObj.getSelectedRows().length) {\n            if (!tr) {\n                this.showDialog('EditOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        else if (!tr) {\n            tr = gObj.getSelectedRows()[0];\n        }\n        if (tr.style.display === 'none') {\n            return;\n        }\n        this.editModule.startEdit(tr);\n        this.refreshToolbar();\n        gObj.element.querySelector('.e-gridpopup').style.display = 'none';\n        this.parent.notify('start-edit', {});\n    };\n    /**\n     * Cancels edited state.\n     */\n    Edit.prototype.closeEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog\n            && this.parent.element.querySelectorAll('.e-updatedtd').length) {\n            this.showDialog('CancelEdit', this.dialogObj);\n            return;\n        }\n        this.editModule.closeEdit();\n        this.refreshToolbar();\n        this.parent.notify('close-edit', {});\n    };\n    Edit.prototype.refreshToolbar = function () {\n        this.parent.notify(events.toolbarRefresh, {});\n    };\n    /**\n     * To adds a new row at the top with the given data. When data is not passed, it will add empty rows.\n     * > `editSettings.allowEditing` should be true.\n     * @param {Object} data - Defines the new add record data.\n     * @param {number} index - Defines the row index to be added\n     */\n    Edit.prototype.addRecord = function (data, index) {\n        if (!this.parent.editSettings.allowAdding) {\n            return;\n        }\n        this.editModule.addRecord(data, index);\n        this.refreshToolbar();\n        this.parent.notify('start-add', {});\n    };\n    /**\n     * Deletes a record with the given options. If fieldname and data are not given, the Grid will delete the selected record.\n     * > `editSettings.allowDeleting` should be true.\n     * @param {string} fieldname - Defines the primary key field name of the column.\n     * @param {Object} data - Defines the JSON data record to be deleted.\n     */\n    Edit.prototype.deleteRecord = function (fieldname, data) {\n        var gObj = this.parent;\n        if (!gObj.editSettings.allowDeleting) {\n            return;\n        }\n        if (!data) {\n            if (!gObj.getSelectedRecords().length) {\n                this.showDialog('DeleteOperationAlert', this.alertDObj);\n                return;\n            }\n        }\n        if (gObj.editSettings.showDeleteConfirmDialog) {\n            this.showDialog('ConfirmDelete', this.dialogObj);\n            return;\n        }\n        this.editModule.deleteRecord(fieldname, data);\n    };\n    /**\n     * Deletes a visible row by TR element.\n     * @param {HTMLTableRowElement} tr - Defines the table row element.\n     */\n    Edit.prototype.deleteRow = function (tr) {\n        this.deleteRecord(null, this.parent.getCurrentViewRecords()[parseInt(tr.getAttribute('aria-rowindex'), 10)]);\n    };\n    /**\n     * If Grid is in editable state, you can save a record by invoking endEdit.\n     */\n    Edit.prototype.endEdit = function () {\n        if (this.parent.editSettings.mode === 'Batch' && this.parent.editSettings.showConfirmDialog &&\n            (isNullOrUndefined(this.formObj) || this.formObj.validate())) {\n            this.parent.editModule.saveCell();\n            this.parent.notify(events.editNextValCell, {});\n            if (isNullOrUndefined(this.formObj) || this.formObj.validate()) {\n                this.showDialog('BatchSaveConfirm', this.dialogObj);\n                return;\n            }\n        }\n        this.endEditing();\n    };\n    /**\n     * To update the specified cell by given value without changing into edited state.\n     * @param {number} rowIndex Defines the row index.\n     * @param {string} field Defines the column field.\n     * @param {string | number | boolean | Date} value - Defines the value to be changed.\n     */\n    Edit.prototype.updateCell = function (rowIndex, field, value) {\n        this.editModule.updateCell(rowIndex, field, value);\n    };\n    /**\n     * To update the specified row by given values without changing into edited state.\n     * @param {number} index Defines the row index.\n     * @param {Object} data Defines the data object to be updated.\n     */\n    Edit.prototype.updateRow = function (index, data) {\n        this.editModule.updateRow(index, data);\n    };\n    /**\n     * Resets added, edited, and deleted records in the batch mode.\n     */\n    Edit.prototype.batchCancel = function () {\n        this.closeEdit();\n    };\n    /**\n     * Bulk saves added, edited, and deleted records in the batch mode.\n     */\n    Edit.prototype.batchSave = function () {\n        this.endEdit();\n    };\n    /**\n     * Changes a particular cell into edited state based on the row index and field name provided in the `batch` mode.\n     * @param {number} index - Defines row index to edit a particular cell.\n     * @param {string} field - Defines the field name of the column to perform batch edit.\n     */\n    Edit.prototype.editCell = function (index, field) {\n        this.editModule.editCell(index, field);\n    };\n    /**\n     * Checks the status of validation at the time of editing. If validation is passed, it returns true.\n     * @return {boolean}\n     */\n    Edit.prototype.editFormValidate = function () {\n        if (this.formObj) {\n            return this.formObj.validate();\n        }\n        return false;\n    };\n    /**\n     * Gets the added, edited,and deleted data before bulk save to the DataSource in batch mode.\n     * @return {Object}\n     */\n    Edit.prototype.getBatchChanges = function () {\n        return this.editModule.getBatchChanges ? this.editModule.getBatchChanges() : {};\n    };\n    /**\n     * Gets the current value of the edited component.\n     */\n    Edit.prototype.getCurrentEditCellData = function () {\n        var obj = this.getCurrentEditedData(this.formObj.element, {});\n        return obj[Object.keys(obj)[0]];\n    };\n    /**\n     * Saves the cell that is currently edited. It does not save the value to the DataSource.\n     */\n    Edit.prototype.saveCell = function () {\n        this.editModule.saveCell();\n    };\n    Edit.prototype.endEditing = function () {\n        this.editModule.endEdit();\n        this.refreshToolbar();\n    };\n    Edit.prototype.showDialog = function (content, obj) {\n        obj.content = '<div>' + this.l10n.getConstant(content) + '</div>';\n        obj.dataBind();\n        obj.show();\n    };\n    Edit.prototype.getValueFromType = function (col, value) {\n        var val = value;\n        switch (col.type) {\n            case 'number':\n                val = !isNaN(parseFloat(value)) ? parseFloat(value) : null;\n                break;\n            case 'boolean':\n                if (col.editType !== 'booleanedit') {\n                    val = value === this.l10n.getConstant('True') ? true : false;\n                }\n                break;\n            case 'date':\n            case 'datetime':\n                if (col.editType !== 'datepicker' && value && value.length) {\n                    val = new Date(value);\n                }\n                break;\n        }\n        return val;\n    };\n    Edit.prototype.destroyToolTip = function () {\n        var elements = [].slice.call(this.parent.element.querySelectorAll('.e-griderror'));\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var elem = elements_1[_i];\n            remove(elem);\n        }\n        this.parent.getContent().firstElementChild.style.position = 'relative';\n    };\n    Edit.prototype.createConfirmDlg = function () {\n        this.dialogObj = this.dlgWidget([\n            {\n                click: this.dlgOk.bind(this),\n                buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-primary', isPrimary: true }\n            },\n            {\n                click: this.dlgCancel.bind(this),\n                buttonModel: { cssClass: 'e-flat', content: this.l10n.getConstant('CancelButton') }\n            }\n        ], 'EditConfirm');\n    };\n    Edit.prototype.createAlertDlg = function () {\n        this.alertDObj = this.dlgWidget([\n            {\n                click: this.alertClick.bind(this), buttonModel: { content: this.l10n.getConstant('OKButton'), cssClass: 'e-flat', isPrimary: true }\n            }\n        ], 'EditAlert');\n    };\n    Edit.prototype.alertClick = function () {\n        this.alertDObj.hide();\n    };\n    Edit.prototype.dlgWidget = function (btnOptions, name) {\n        var div = this.parent.createElement('div', { id: this.parent.element.id + name });\n        this.parent.element.appendChild(div);\n        var options = {\n            showCloseIcon: false,\n            isModal: true,\n            visible: false,\n            closeOnEscape: true,\n            target: this.parent.element,\n            width: '320px',\n            animationSettings: { effect: 'None' }\n        };\n        options.buttons = btnOptions;\n        var obj = new Dialog(options);\n        obj.appendTo(div);\n        changeButtonType(obj.element);\n        return obj;\n    };\n    Edit.prototype.dlgCancel = function () {\n        this.dialogObj.hide();\n    };\n    Edit.prototype.dlgOk = function (e) {\n        switch (this.dialogObj.element.querySelector('.e-dlg-content').firstElementChild.innerText) {\n            case this.l10n.getConstant('ConfirmDelete'):\n                this.editModule.deleteRecord();\n                break;\n            case this.l10n.getConstant('CancelEdit'):\n                this.editModule.closeEdit();\n                break;\n            case this.l10n.getConstant('BatchSaveConfirm'):\n                this.endEditing();\n                break;\n            case this.l10n.getConstant('BatchSaveLostChanges'):\n                this.executeAction();\n                break;\n        }\n        this.dlgCancel();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.inBoundModelChanged, this.onPropertyChanged, this);\n        this.parent.on(events.initialEnd, this.initialEnd, this);\n        this.parent.on(events.keyPressed, this.keyPressHandler, this);\n        this.parent.on(events.autoCol, this.updateColTypeObj, this);\n        this.parent.on(events.tooltipDestroy, this.destroyToolTip, this);\n        this.parent.on(events.preventBatch, this.preventBatch, this);\n        this.parent.on(events.destroyForm, this.destroyForm, this);\n        this.actionBeginFunction = this.onActionBegin.bind(this);\n        this.actionCompleteFunction = this.actionComplete.bind(this);\n        this.parent.addEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.addEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.inBoundModelChanged, this.onPropertyChanged);\n        this.parent.off(events.initialEnd, this.initialEnd);\n        this.parent.off(events.keyPressed, this.keyPressHandler);\n        this.parent.off(events.autoCol, this.updateColTypeObj);\n        this.parent.off(events.tooltipDestroy, this.destroyToolTip);\n        this.parent.off(events.preventBatch, this.preventBatch);\n        this.parent.off(events.destroyForm, this.destroyForm);\n        this.parent.removeEventListener(events.actionComplete, this.actionCompleteFunction);\n        this.parent.removeEventListener(events.actionBegin, this.actionBeginFunction);\n        this.parent.off(events.initialEnd, this.unwireEvents);\n    };\n    Edit.prototype.actionComplete = function (e) {\n        var actions = ['add', 'beginEdit', 'save', 'delete', 'cancel'];\n        if (actions.indexOf(e.requestType) < 0) {\n            this.parent.isEdit = false;\n        }\n        this.refreshToolbar();\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.getCurrentEditedData = function (form, editedData) {\n        var gObj = this.parent;\n        var inputs = [].slice.call(form.querySelectorAll('.e-field'));\n        for (var i = 0, len = inputs.length; i < len; i++) {\n            var col = gObj.getColumnByUid(inputs[i].getAttribute('e-mappinguid'));\n            var value = void 0;\n            if (col && col.field) {\n                var temp = col.edit.read;\n                if (col.type !== 'checkbox') {\n                    if (typeof temp === 'string') {\n                        temp = getValue(temp, window);\n                        value = gObj.editModule.getValueFromType(col, (temp)(inputs[i]));\n                    }\n                    else {\n                        value = gObj.editModule.getValueFromType(col, col.edit.read(inputs[i]));\n                    }\n                }\n                else {\n                    value = inputs[i].checked;\n                }\n                setValue(col.field, value, editedData);\n            }\n        }\n        return editedData;\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.onActionBegin = function (e) {\n        var restrictedRequestTypes = ['filterafteropen', 'filterbeforeopen', 'filterchoicerequest', 'save'];\n        if (this.parent.editSettings.mode !== 'Batch' && this.formObj && !this.formObj.isDestroyed\n            && restrictedRequestTypes.indexOf(e.requestType) === -1) {\n            this.destroyForm();\n            this.destroyWidgets();\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyWidgets = function (cols) {\n        cols = cols ? cols : this.parent.getColumns();\n        for (var _i = 0, cols_1 = cols; _i < cols_1.length; _i++) {\n            var col = cols_1[_i];\n            var temp = col.edit.destroy;\n            if (col.edit.destroy) {\n                if (typeof temp === 'string') {\n                    temp = getValue(temp, window);\n                    temp();\n                }\n                else {\n                    col.edit.destroy();\n                }\n            }\n        }\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.destroyForm = function () {\n        this.destroyToolTip();\n        if (this.formObj && !this.formObj.isDestroyed) {\n            this.formObj.destroy();\n        }\n        this.destroyToolTip();\n    };\n    /**\n     * To destroy the editing.\n     * @return {void}\n     * @hidden\n     */\n    Edit.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement) {\n            return;\n        }\n        var hasGridChild = gridElement.querySelector('.e-gridheader') &&\n            gridElement.querySelector('.e-gridcontent') ? true : false;\n        if (hasGridChild) {\n            this.destroyForm();\n        }\n        this.removeEventListener();\n        var elem = this.dialogObj.element;\n        if (elem.childElementCount > 0) {\n            this.dialogObj.destroy();\n            remove(elem);\n        }\n        elem = this.alertDObj.element;\n        if (elem.childElementCount > 0) {\n            this.alertDObj.destroy();\n            remove(elem);\n        }\n        if (!hasGridChild) {\n            return;\n        }\n        this.unwireEvents();\n        if (this.editModule) {\n            this.editModule.destroy();\n        }\n    };\n    Edit.prototype.keyPressHandler = function (e) {\n        switch (e.action) {\n            case 'insert':\n                this.addRecord();\n                break;\n            case 'delete':\n                if ((e.target.tagName !== 'INPUT' || e.target.classList.contains('e-checkselect'))\n                    && !document.querySelector('.e-popup-open')) {\n                    this.deleteRecord();\n                }\n                break;\n            case 'f2':\n                this.startEdit();\n                break;\n            case 'enter':\n                if (!parentsUntil(e.target, '.e-unboundcelldiv') && this.parent.editSettings.mode !== 'Batch' &&\n                    (parentsUntil(e.target, 'e-gridcontent') || (this.parent.frozenRows\n                        && parentsUntil(e.target, 'e-headercontent')))\n                    && !document.querySelectorAll('.e-popup-open').length) {\n                    e.preventDefault();\n                    this.endEdit();\n                }\n                break;\n            case 'escape':\n                this.closeEdit();\n                break;\n        }\n    };\n    Edit.prototype.preventBatch = function (args) {\n        this.preventObj = args;\n        this.showDialog('BatchSaveLostChanges', this.dialogObj);\n    };\n    Edit.prototype.executeAction = function () {\n        this.preventObj.handler.call(this.preventObj.instance, this.preventObj.arg1, this.preventObj.arg2, this.preventObj.arg3, this.preventObj.arg4, this.preventObj.arg5, this.preventObj.arg6, this.preventObj.arg7, this.preventObj.arg8);\n    };\n    /**\n     * @hidden\n     */\n    Edit.prototype.applyFormValidation = function (cols) {\n        var gObj = this.parent;\n        var frzCols = gObj.getFrozenColumns();\n        var form = gObj.element.querySelector('.e-gridform');\n        var mForm = gObj.element.querySelectorAll('.e-gridform')[1];\n        var rules = {};\n        var mRules = {};\n        cols = cols ? cols : gObj.columns;\n        for (var _i = 0, cols_2 = cols; _i < cols_2.length; _i++) {\n            var col = cols_2[_i];\n            if (col.validationRules && form.querySelectorAll('#' + gObj.element.id + col.field).length) {\n                rules[col.field] = col.validationRules;\n            }\n            else if (frzCols && col.validationRules\n                && mForm.querySelectorAll('#' + gObj.element.id + col.field).length) {\n                mRules[col.field] = col.validationRules;\n            }\n        }\n        this.parent.editModule.formObj = this.createFormObj(form, rules);\n        if (frzCols && this.parent.editSettings.mode !== 'Dialog') {\n            this.parent.editModule.mFormObj = this.createFormObj(mForm, mRules);\n        }\n    };\n    Edit.prototype.createFormObj = function (form, rules) {\n        var _this = this;\n        return new FormValidator(form, {\n            rules: rules,\n            validationComplete: function (args) {\n                _this.validationComplete(args);\n            },\n            customPlacement: function (inputElement, error) {\n                _this.valErrorPlacement(inputElement, error);\n            }\n        });\n    };\n    Edit.prototype.valErrorPlacement = function (inputElement, error) {\n        if (this.parent.isEdit) {\n            var id = error.getAttribute('for');\n            var elem = this.getElemTable(inputElement).querySelector('#' + id + '_Error');\n            if (!elem) {\n                this.createTooltip(inputElement, error, id, '');\n            }\n            else {\n                elem.querySelector('.e-tip-content').innerHTML = error.innerHTML;\n            }\n        }\n    };\n    Edit.prototype.getElemTable = function (inputElement) {\n        var isFHdr;\n        if (this.parent.editSettings.mode !== 'Dialog') {\n            isFHdr = (this.parent.frozenRows && this.parent.frozenRows\n                > (parseInt(closest(inputElement, '.e-row').getAttribute('aria-rowindex'), 10) || 0));\n        }\n        return this.parent.editSettings.mode !== 'Dialog' ? isFHdr ? this.parent.getHeaderTable() : this.parent.getContentTable() :\n            this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper');\n    };\n    Edit.prototype.validationComplete = function (args) {\n        if (this.parent.isEdit) {\n            var elem = this.getElemTable(args.element).querySelector('#' + args.inputName + '_Error');\n            if (elem) {\n                if (args.status === 'failure') {\n                    elem.style.display = '';\n                }\n                else {\n                    elem.style.display = 'none';\n                }\n            }\n        }\n    };\n    Edit.prototype.createTooltip = function (element, error, name, display) {\n        var gcontent = this.parent.getContent().firstElementChild;\n        var isScroll = gcontent.scrollHeight > gcontent.clientHeight || gcontent.scrollWidth > gcontent.clientWidth;\n        var isInline = this.parent.editSettings.mode !== 'Dialog';\n        var isFHdr;\n        if (isInline) {\n            isFHdr = (this.parent.frozenRows && this.parent.frozenRows\n                > (parseInt(closest(element, '.e-row').getAttribute('aria-rowindex'), 10) || 0));\n        }\n        var fCont = this.parent.getContent().querySelector('.e-frozencontent');\n        var table = isInline ?\n            (isFHdr ? this.parent.getHeaderTable() : this.parent.getContentTable()) :\n            this.parent.element.querySelector('#' + this.parent.element.id + '_dialogEdit_wrapper').querySelector('.e-dlg-content');\n        var client = table.getBoundingClientRect();\n        var left = isInline ?\n            this.parent.element.getBoundingClientRect().left : client.left;\n        var input = parentsUntil(element, 'e-rowcell');\n        var inputClient = input.getBoundingClientRect();\n        var td = closest(element, 'td').getBoundingClientRect();\n        var div = this.parent.createElement('div', {\n            className: 'e-tooltip-wrap e-control e-popup e-griderror',\n            id: name + '_Error',\n            styles: 'display:' + display + ';top:' +\n                ((isFHdr ? inputClient.top + inputClient.height : inputClient.bottom - client.top\n                    - (this.parent.getFrozenColumns() ? fCont.scrollTop : 0)) + table.scrollTop + 9) + 'px;left:' +\n                (inputClient.left - left + table.scrollLeft + inputClient.width / 2) + 'px;' +\n                'max-width:' + td.width + 'px;text-align:center;'\n        });\n        var content = this.parent.createElement('div', { className: 'e-tip-content' });\n        content.appendChild(error);\n        var arrow = this.parent.createElement('div', { className: 'e-arrow-tip e-tip-top' });\n        arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-outer e-tip-top' }));\n        arrow.appendChild(this.parent.createElement('div', { className: 'e-arrow-tip-inner e-tip-top' }));\n        div.appendChild(content);\n        div.appendChild(arrow);\n        table.appendChild(div);\n        var lineHeight = parseInt(document.defaultView.getComputedStyle(div, null).getPropertyValue('font-size'), 10);\n        if (div.getBoundingClientRect().width < td.width &&\n            div.querySelector('label').getBoundingClientRect().height / (lineHeight * 1.2) >= 2) {\n            div.style.width = div.style.maxWidth;\n        }\n        div.style.left = (parseInt(div.style.left, 10) - div.offsetWidth / 2) + 'px';\n        if (!isScroll && isInline && !this.parent.allowPaging) {\n            gcontent.style.position = 'static';\n            var pos = calculateRelativeBasedPosition(input, div);\n            div.style.top = pos.top + inputClient.height + 9 + 'px';\n        }\n    };\n    return Edit;\n}());\nexport { Edit };\n/** @hidden */\nexport var Global;\n(function (Global) {\n    Global.timer = null;\n})(Global || (Global = {}));\n","import { classList, addClass, removeClass, isNullOrUndefined, Browser } from '@syncfusion/ej2-base';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\nimport { EventHandler, closest } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport { Dialog, calculateRelativeBasedPosition } from '@syncfusion/ej2-popups';\nimport { changeButtonType, createCboxWithWrap, toogleCheckbox, parentsUntil } from '../base/util';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { SearchBox } from '../services/focus-strategy';\n/**\n * The `ColumnChooser` module is used to show or hide columns dynamically.\n */\nvar ColumnChooser = /** @class */ (function () {\n    /**\n     * Constructor for the Grid ColumnChooser module\n     * @hidden\n     */\n    function ColumnChooser(parent, serviceLocator) {\n        this.showColumn = [];\n        this.hideColumn = [];\n        this.isDlgOpen = false;\n        this.dlghide = false;\n        this.initialOpenDlg = true;\n        this.stateChangeColumns = [];\n        this.isInitialOpen = false;\n        this.isCustomizeOpenCC = false;\n        this.parent = parent;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n        this.cBoxTrue = createCheckBox(this.parent.createElement, true, { checked: true, label: ' ' });\n        this.cBoxFalse = createCheckBox(this.parent.createElement, true, { checked: false, label: ' ' });\n        this.cBoxTrue.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { type: 'checkbox' }\n        }), this.cBoxTrue.firstChild);\n        this.cBoxFalse.insertBefore(this.parent.createElement('input', {\n            className: 'e-chk-hidden e-cc e-cc-chbox', attrs: { 'type': 'checkbox' }\n        }), this.cBoxFalse.firstChild);\n        this.cBoxFalse.querySelector('.e-frame').classList.add('e-uncheck');\n        if (this.parent.enableRtl) {\n            addClass([this.cBoxTrue, this.cBoxFalse], ['e-rtl']);\n        }\n    }\n    ColumnChooser.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.removeEventListener();\n        this.unWireEvents();\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.element && !this.dlgObj.isDestroyed) {\n            this.dlgObj.destroy();\n        }\n    };\n    ColumnChooser.prototype.rtlUpdate = function () {\n        if (this.parent.enableRtl) {\n            addClass(this.innerDiv.querySelectorAll('.e-checkbox-wrapper'), ['e-rtl']);\n        }\n        else {\n            removeClass(this.innerDiv.querySelectorAll('.e-checkbox-wrapper'), ['e-rtl']);\n        }\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.click, this.clickHandler, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderEle, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        this.parent.addEventListener(events.dataBound, this.hideDialog.bind(this));\n        this.parent.on(events.destroy, this.destroy, this);\n        this.parent.on(events.rtlUpdated, this.rtlUpdate, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnChooser.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.click, this.clickHandler);\n        this.parent.off(events.initialEnd, this.render);\n        this.parent.off(events.destroy, this.destroy);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderEle);\n        this.parent.off(events.rtlUpdated, this.rtlUpdate);\n    };\n    ColumnChooser.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.renderDlgContent();\n        this.getShowHideService = this.serviceLocator.getService('showHideService');\n    };\n    ColumnChooser.prototype.clickHandler = function (e) {\n        var targetElement = e.target;\n        if (!this.isCustomizeOpenCC) {\n            if (!isNullOrUndefined(closest(targetElement, '.e-cc')) || !isNullOrUndefined(closest(targetElement, '.e-cc-toolbar'))) {\n                if (targetElement.classList.contains('e-columnchooser-btn') || targetElement.classList.contains('e-cc-toolbar')) {\n                    if ((this.initialOpenDlg && this.dlgObj.visible) || !this.isDlgOpen) {\n                        this.isDlgOpen = true;\n                        return;\n                    }\n                }\n                else if (targetElement.classList.contains('e-cc-cancel')) {\n                    targetElement.parentElement.querySelector('.e-ccsearch').value = '';\n                    this.columnChooserSearch('');\n                    this.removeCancelIcon();\n                }\n            }\n            else {\n                if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible && !targetElement.classList.contains('e-toolbar-items')) {\n                    this.dlgObj.hide();\n                    this.clearActions();\n                    this.refreshCheckboxState();\n                    // this.unWireEvents();\n                    this.isDlgOpen = false;\n                }\n            }\n        }\n        this.rtlUpdate();\n    };\n    ColumnChooser.prototype.hideDialog = function () {\n        if (!isNullOrUndefined(this.dlgObj) && this.dlgObj.visible) {\n            this.dlgObj.hide();\n            // this.unWireEvents();\n            this.isDlgOpen = false;\n        }\n    };\n    /**\n     * To render columnChooser when showColumnChooser enabled.\n     * @return {void}\n     * @hidden\n     */\n    ColumnChooser.prototype.renderColumnChooser = function (x, y, target) {\n        if (!this.dlgObj.visible) {\n            var pos = { X: null, Y: null };\n            var args1 = {\n                requestType: 'beforeOpenColumnChooser', element: this.parent.element,\n                columns: this.getColumns(), cancel: false\n            };\n            this.parent.trigger(events.beforeOpenColumnChooser, args1);\n            if (args1.cancel) {\n                return;\n            }\n            this.refreshCheckboxState();\n            this.dlgObj.dataBind();\n            this.dlgObj.element.style.maxHeight = '430px';\n            var elementVisible = this.dlgObj.element.style.display;\n            this.dlgObj.element.style.display = 'block';\n            var newpos = calculateRelativeBasedPosition(closest(target, '.e-toolbar-item'), this.dlgObj.element);\n            this.dlgObj.element.style.display = elementVisible;\n            this.dlgObj.element.style.top = newpos.top + closest(target, '.e-cc-toolbar').getBoundingClientRect().height + 'px';\n            var dlgWidth = 250;\n            if (!isNullOrUndefined(closest(target, '.e-bigger'))) {\n                this.dlgObj.width = 258;\n            }\n            if (Browser.isDevice) {\n                this.dlgObj.target = document.body;\n                this.dlgObj.position = { X: 'center', Y: 'center' };\n                this.dlgObj.refreshPosition();\n                this.dlgObj.open = this.mOpenDlg.bind(this);\n            }\n            else {\n                if (this.parent.enableRtl) {\n                    this.dlgObj.element.style.left = target.offsetLeft + 'px';\n                }\n                else {\n                    this.dlgObj.element.style.left = ((newpos.left - dlgWidth) + closest(target, '.e-cc-toolbar').clientWidth) + 2 + 'px';\n                }\n            }\n            this.removeCancelIcon();\n            this.dlgObj.show();\n        }\n        else {\n            // this.unWireEvents();\n            this.hideDialog();\n            this.addcancelIcon();\n        }\n        this.rtlUpdate();\n    };\n    /**\n     * Column chooser can be displayed on screen by given position(X and Y axis).\n     * @param  {number} X - Defines the X axis.\n     * @param  {number} Y - Defines the Y axis.\n     * @return {void}\n     */\n    ColumnChooser.prototype.openColumnChooser = function (X, Y) {\n        this.isCustomizeOpenCC = true;\n        if (this.dlgObj.visible) {\n            this.hideDialog();\n            return;\n        }\n        if (!this.isInitialOpen) {\n            this.dlgObj.content = this.renderChooserList();\n        }\n        else {\n            this.refreshCheckboxState();\n        }\n        this.dlgObj.dataBind();\n        this.dlgObj.position = { X: 'center', Y: 'center' };\n        if (isNullOrUndefined(X)) {\n            this.dlgObj.position = { X: 'center', Y: 'center' };\n            this.dlgObj.refreshPosition();\n        }\n        else {\n            this.dlgObj.element.style.top = '';\n            this.dlgObj.element.style.left = '';\n            this.dlgObj.element.style.top = Y + 'px';\n            this.dlgObj.element.style.left = X + 'px';\n        }\n        this.dlgObj.beforeOpen = this.customDialogOpen.bind(this);\n        this.dlgObj.show();\n        this.isInitialOpen = true;\n        this.dlgObj.beforeClose = this.customDialogClose.bind(this);\n    };\n    ColumnChooser.prototype.enableAfterRenderEle = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            this.render();\n        }\n    };\n    ColumnChooser.prototype.customDialogOpen = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.add(searchElement, 'keyup', this.columnChooserManualSearch, this);\n    };\n    ColumnChooser.prototype.customDialogClose = function () {\n        var searchElement = this.dlgObj.content.querySelector('input.e-ccsearch');\n        EventHandler.remove(searchElement, 'keyup', this.columnChooserManualSearch);\n    };\n    ColumnChooser.prototype.getColumns = function () {\n        var columns = this.parent.getColumns().filter(function (column) { return (column.type !== 'checkbox'\n            && column.showInColumnChooser === true) || (column.type === 'checkbox' && column.field !== undefined); });\n        return columns;\n    };\n    ColumnChooser.prototype.renderDlgContent = function () {\n        var y;\n        this.dlgDiv = this.parent.createElement('div', { className: 'e-ccdlg e-cc', id: this.parent.element.id + '_ccdlg' });\n        this.parent.element.appendChild(this.dlgDiv);\n        var xpos = this.parent.element.getBoundingClientRect().width - 250;\n        var dialoPos = this.parent.enableRtl ? 'left' : 'right';\n        var tarElement = this.parent.element.querySelector('.e-ccdiv');\n        if (!isNullOrUndefined(tarElement)) {\n            y = tarElement.getBoundingClientRect().top;\n        }\n        var pos = { X: null, Y: null };\n        this.dlgObj = new Dialog({\n            header: this.l10n.getConstant('ChooseColumns'),\n            showCloseIcon: false,\n            closeOnEscape: false,\n            locale: this.parent.locale,\n            visible: false,\n            enableRtl: this.parent.enableRtl,\n            target: document.getElementById(this.parent.element.id),\n            buttons: [{\n                    click: this.confirmDlgBtnClick.bind(this),\n                    buttonModel: {\n                        content: this.l10n.getConstant('OKButton'), isPrimary: true,\n                        cssClass: 'e-cc e-cc_okbtn',\n                    }\n                },\n                {\n                    click: this.clearActions.bind(this),\n                    buttonModel: { cssClass: 'e-flat e-cc e-cc-cnbtn', content: this.l10n.getConstant('CancelButton') }\n                }],\n            content: this.renderChooserList(),\n            width: 250,\n            cssClass: 'e-cc',\n            animationSettings: { effect: 'None' },\n        });\n        this.dlgObj.appendTo(this.dlgDiv);\n        changeButtonType(this.dlgObj.element);\n        this.wireEvents();\n    };\n    ColumnChooser.prototype.renderChooserList = function () {\n        this.mainDiv = this.parent.createElement('div', { className: 'e-main-div e-cc' });\n        var searchDiv = this.parent.createElement('div', { className: 'e-cc-searchdiv e-cc e-input-group' });\n        var ccsearchele = this.parent.createElement('input', {\n            className: 'e-ccsearch e-cc e-input',\n            attrs: { placeholder: this.l10n.getConstant('Search') }\n        });\n        var ccsearchicon = this.parent.createElement('span', { className: 'e-ccsearch-icon e-icons e-cc e-input-group-icon',\n            attrs: { title: this.l10n.getConstant('Search') } });\n        var conDiv = this.parent.createElement('div', { className: 'e-cc-contentdiv' });\n        this.innerDiv = this.parent.createElement('div', { className: 'e-innerdiv e-cc' });\n        searchDiv.appendChild(ccsearchele);\n        searchDiv.appendChild(ccsearchicon);\n        this.searchBoxObj = new SearchBox(ccsearchele);\n        var innerDivContent = this.refreshCheckboxList(this.parent.getColumns());\n        this.innerDiv.appendChild(innerDivContent);\n        conDiv.appendChild(this.innerDiv);\n        this.mainDiv.appendChild(searchDiv);\n        this.mainDiv.appendChild(conDiv);\n        return this.mainDiv;\n    };\n    ColumnChooser.prototype.confirmDlgBtnClick = function (args) {\n        this.stateChangeColumns = [];\n        if (!isNullOrUndefined(args)) {\n            if (this.hideColumn.length) {\n                this.columnStateChange(this.hideColumn, false);\n            }\n            if (this.showColumn.length) {\n                this.columnStateChange(this.showColumn, true);\n            }\n            var params = {\n                requestType: 'columnstate', element: this.parent.element,\n                columns: this.stateChangeColumns, dialogInstance: this.dlgObj\n            };\n            this.parent.trigger(events.actionComplete, params);\n            this.getShowHideService.setVisible(this.stateChangeColumns);\n            this.clearActions();\n            this.parent.notify(events.tooltipDestroy, { module: 'edit' });\n        }\n    };\n    ColumnChooser.prototype.columnStateChange = function (stateColumns, state) {\n        for (var index = 0; index < stateColumns.length; index++) {\n            var colUid = stateColumns[index];\n            var currentCol = this.parent.getColumnByUid(colUid);\n            currentCol.visible = state;\n            this.stateChangeColumns.push(currentCol);\n        }\n    };\n    ColumnChooser.prototype.clearActions = function () {\n        this.hideColumn = [];\n        this.showColumn = [];\n        // this.unWireEvents();\n        this.hideDialog();\n        this.addcancelIcon();\n    };\n    ColumnChooser.prototype.checkstatecolumn = function (isChecked, coluid) {\n        if (isChecked) {\n            if (this.hideColumn.indexOf(coluid) !== -1) {\n                this.hideColumn.splice(this.hideColumn.indexOf(coluid), 1);\n            }\n            if (this.showColumn.indexOf(coluid) === -1) {\n                this.showColumn.push(coluid);\n            }\n        }\n        else {\n            if (this.showColumn.indexOf(coluid) !== -1) {\n                this.showColumn.splice(this.showColumn.indexOf(coluid), 1);\n            }\n            if (this.hideColumn.indexOf(coluid) === -1) {\n                this.hideColumn.push(coluid);\n            }\n        }\n    };\n    ColumnChooser.prototype.columnChooserSearch = function (searchVal) {\n        var clearSearch = false;\n        var fltrCol;\n        if (searchVal === '') {\n            this.removeCancelIcon();\n            fltrCol = this.getColumns();\n            clearSearch = true;\n        }\n        else {\n            fltrCol = new DataManager(this.getColumns()).executeLocal(new Query()\n                .where('headerText', 'startswith', searchVal, true));\n        }\n        if (fltrCol.length) {\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.classList.remove('e-ccnmdiv');\n            this.innerDiv.appendChild(this.refreshCheckboxList(fltrCol, searchVal));\n            if (!clearSearch) {\n                this.addcancelIcon();\n            }\n        }\n        else {\n            var nMatchele = this.parent.createElement('span', { className: 'e-cc e-nmatch' });\n            nMatchele.innerHTML = this.l10n.getConstant('Matchs');\n            this.innerDiv.innerHTML = ' ';\n            this.innerDiv.appendChild(nMatchele);\n            this.innerDiv.classList.add('e-ccnmdiv');\n        }\n        this.flag = true;\n        this.stopTimer();\n    };\n    ColumnChooser.prototype.wireEvents = function () {\n        EventHandler.add(this.dlgObj.element, 'click', this.checkBoxClickHandler, this);\n        EventHandler.add(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch, this);\n        this.searchBoxObj.wireEvent();\n    };\n    ColumnChooser.prototype.unWireEvents = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        if (this.dlgObj.element) {\n            EventHandler.remove(this.dlgObj.element, 'click', this.checkBoxClickHandler);\n        }\n        EventHandler.remove(this.searchBoxObj.searchBox, 'keyup', this.columnChooserManualSearch);\n        this.searchBoxObj.unWireEvent();\n    };\n    ColumnChooser.prototype.checkBoxClickHandler = function (e) {\n        var checkstate;\n        var elem = parentsUntil(e.target, 'e-checkbox-wrapper');\n        if (elem) {\n            toogleCheckbox(elem.parentElement);\n            elem.querySelector('.e-chk-hidden').focus();\n            if (elem.querySelector('.e-check')) {\n                checkstate = true;\n            }\n            else if (elem.querySelector('.e-uncheck')) {\n                checkstate = false;\n            }\n            else {\n                return;\n            }\n            var columnUid = parentsUntil(elem, 'e-ccheck').getAttribute('uid');\n            this.checkstatecolumn(checkstate, columnUid);\n            this.refreshCheckboxButton();\n        }\n    };\n    ColumnChooser.prototype.refreshCheckboxButton = function () {\n        var searchValue = this.dlgObj.element.querySelector('.e-cc.e-input').value;\n        var selected = this.innerDiv.querySelectorAll('.e-check').length;\n        var btn = this.dlgDiv.querySelector('.e-footer-content').querySelector('.e-btn').ej2_instances[0];\n        btn.disabled = false;\n        if (selected === 0 && searchValue === '') {\n            btn.disabled = true;\n        }\n        btn.dataBind();\n    };\n    ColumnChooser.prototype.refreshCheckboxList = function (gdCol, searchVal) {\n        this.ulElement = this.parent.createElement('ul', { className: 'e-ccul-ele e-cc' });\n        for (var i = 0; i < gdCol.length; i++) {\n            var columns = gdCol[i];\n            this.renderCheckbox(columns);\n        }\n        return this.ulElement;\n    };\n    ColumnChooser.prototype.refreshCheckboxState = function () {\n        this.dlgObj.element.querySelector('.e-cc.e-input').value = '';\n        this.columnChooserSearch('');\n        for (var i = 0; i < this.parent.element.querySelectorAll('.e-cc-chbox').length; i++) {\n            var element = this.parent.element.querySelectorAll('.e-cc-chbox')[i];\n            var columnUID = parentsUntil(element, 'e-ccheck').getAttribute('uid');\n            var column = this.parent.getColumnByUid(columnUID);\n            if (column.visible) {\n                element.checked = true;\n                this.checkState(element.parentElement.querySelector('.e-icons'), true);\n            }\n            else {\n                element.checked = false;\n                this.checkState(element.parentElement.querySelector('.e-icons'), false);\n            }\n        }\n    };\n    ColumnChooser.prototype.checkState = function (element, state) {\n        state ? classList(element, ['e-check'], ['e-uncheck']) : classList(element, ['e-uncheck'], ['e-check']);\n    };\n    ColumnChooser.prototype.createCheckBox = function (label, checked, uid) {\n        var cbox = checked ? this.cBoxTrue.cloneNode(true) : this.cBoxFalse.cloneNode(true);\n        cbox.querySelector('.e-label').innerHTML = label;\n        return createCboxWithWrap(uid, cbox, 'e-ccheck');\n    };\n    ColumnChooser.prototype.renderCheckbox = function (column) {\n        var cclist;\n        var hideColState;\n        var showColState;\n        var checkBoxObj;\n        if (column.showInColumnChooser) {\n            cclist = this.parent.createElement('li', { className: 'e-cclist e-cc', styles: 'list-style:None', id: 'e-ccli_' + column.uid });\n            hideColState = this.hideColumn.indexOf(column.uid) === -1 ? false : true;\n            showColState = this.showColumn.indexOf(column.uid) === -1 ? false : true;\n            var cccheckboxlist = this.createCheckBox(column.headerText, (column.visible && !hideColState) || showColState, column.uid);\n            cclist.appendChild(cccheckboxlist);\n            this.ulElement.appendChild(cclist);\n        }\n    };\n    ColumnChooser.prototype.columnChooserManualSearch = function (e) {\n        this.addcancelIcon();\n        this.searchValue = e.target.value;\n        var proxy = this;\n        this.stopTimer();\n        this.startTimer(e);\n    };\n    ColumnChooser.prototype.startTimer = function (e) {\n        var proxy = this;\n        var interval = !proxy.flag && e.keyCode !== 13 ? 500 : 0;\n        this.timer = window.setInterval(function () { proxy.columnChooserSearch(proxy.searchValue); }, interval);\n    };\n    ColumnChooser.prototype.stopTimer = function () {\n        window.clearInterval(this.timer);\n    };\n    ColumnChooser.prototype.addcancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.add('e-cc-cancel');\n    };\n    ColumnChooser.prototype.removeCancelIcon = function () {\n        this.dlgDiv.querySelector('.e-cc.e-ccsearch-icon').classList.remove('e-cc-cancel');\n    };\n    ColumnChooser.prototype.mOpenDlg = function () {\n        if (Browser.isDevice) {\n            this.dlgObj.element.querySelector('.e-cc-searchdiv').classList.remove('e-input-focus');\n            this.dlgObj.element.querySelectorAll('.e-cc-chbox')[0].focus();\n        }\n    };\n    // internally use\n    ColumnChooser.prototype.getModuleName = function () {\n        return 'columnChooser';\n    };\n    return ColumnChooser;\n}());\nexport { ColumnChooser };\n","import { Row } from './../models/row';\nimport { CellType } from '../base/enum';\nimport { isNullOrUndefined, Internationalization, getValue } from '@syncfusion/ej2-base';\nimport { Cell } from '../models/cell';\nimport { ValueFormatter } from './../services/value-formatter';\nimport { Query } from '@syncfusion/ej2-data';\nimport { getForeignData } from '../base/util';\n/**\n * @hidden\n * `ExportHelper` for `PdfExport` & `ExcelExport`\n */\nvar ExportHelper = /** @class */ (function () {\n    function ExportHelper(parent) {\n        this.hideColumnInclude = false;\n        this.foreignKeyData = {};\n        this.parent = parent;\n    }\n    ExportHelper.getQuery = function (parent, data) {\n        return data.isRemote() ?\n            data.generateQuery(true).requiresCount().take(parent.pageSettings.totalRecordsCount) :\n            data.generateQuery(true).requiresCount();\n    };\n    ExportHelper.prototype.getFData = function (value, column) {\n        var foreignKeyData = getForeignData(column, {}, value, this.foreignKeyData[column.field])[0];\n        return foreignKeyData;\n    };\n    ExportHelper.prototype.getColumnData = function (gridObj) {\n        var _this = this;\n        var columnPromise = [];\n        var promise;\n        var fColumns = gridObj.getForeignKeyColumns();\n        if (fColumns.length) {\n            fColumns.forEach(function (col) {\n                columnPromise.push(col.dataSource.executeQuery(new Query()));\n            });\n            promise = Promise.all(columnPromise).then(function (e) {\n                fColumns.forEach(function (col, index) {\n                    _this.foreignKeyData[col.field] = e[index].result;\n                });\n                // tslint:disable-next-line:no-any\n            });\n        }\n        return promise;\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.getHeaders = function (column, isHideColumnInclude) {\n        if (isHideColumnInclude) {\n            this.hideColumnInclude = true;\n        }\n        else {\n            this.hideColumnInclude = false;\n        }\n        var cols = column;\n        this.colDepth = this.measureColumnDepth(cols);\n        var rows = [];\n        var actualColumns = [];\n        for (var i = 0; i < this.colDepth; i++) {\n            rows[i] = new Row({});\n            rows[i].cells = [];\n        }\n        rows = this.processColumns(rows);\n        rows = this.processHeaderCells(rows);\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            for (var i = 0; i < row.cells.length; i++) {\n                var cell = row.cells[i];\n                if (cell.visible === undefined && cell.cellType !== CellType.StackedHeader) {\n                    row.cells = this.removeCellFromRow(row.cells, i);\n                    i = i - 1;\n                }\n                if ((!isHideColumnInclude) && cell.visible !== undefined && (!cell.visible)) {\n                    row.cells = this.removeCellFromRow(row.cells, i);\n                    i = i - 1;\n                }\n            }\n        }\n        for (var i = 0; i < cols.length; i++) {\n            this.generateActualColumns(cols[i], actualColumns);\n        }\n        return { rows: rows, columns: actualColumns };\n    };\n    ExportHelper.prototype.getConvertedWidth = function (input) {\n        var value = parseFloat(input);\n        /* tslint:disable-next-line:max-line-length */\n        return (input.indexOf('%') !== -1) ? (this.parent.element.getBoundingClientRect().width * value / 100) : value;\n    };\n    ExportHelper.prototype.generateActualColumns = function (column, actualColumns) {\n        if (column.commands) {\n            return;\n        }\n        if (!column.columns) {\n            if (column.visible || this.hideColumnInclude) {\n                actualColumns.push(column);\n            }\n        }\n        else {\n            if (column.visible || this.hideColumnInclude) {\n                var colSpan = this.getCellCount(column, 0);\n                if (colSpan !== 0) {\n                    for (var i = 0; i < column.columns.length; i++) {\n                        /* tslint:disable-next-line:max-line-length */\n                        this.generateActualColumns(column.columns[i], actualColumns);\n                    }\n                }\n            }\n        }\n    };\n    ExportHelper.prototype.removeCellFromRow = function (cells, cellIndex) {\n        var resultCells = [];\n        for (var i = 0; i < cellIndex; i++) {\n            resultCells.push(cells[i]);\n        }\n        for (var i = (cellIndex + 1); i < cells.length; i++) {\n            resultCells.push(cells[i]);\n        }\n        return resultCells;\n    };\n    ExportHelper.prototype.processHeaderCells = function (rows) {\n        var columns = this.parent.enableColumnVirtualization ? this.parent.getColumns() : this.parent.columns;\n        for (var i = 0; i < columns.length; i++) {\n            if (!columns[i].commands) {\n                rows = this.appendGridCells(columns[i], rows, 0, i === 0, false, i === (columns.length - 1));\n            }\n        }\n        return rows;\n    };\n    /* tslint:disable */\n    ExportHelper.prototype.appendGridCells = function (cols, gridRows, index, isFirstObj, isFirstColumn, isLastColumn) {\n        /* tslint:enable */\n        var lastCol = isLastColumn ? 'e-lastcell' : '';\n        if (!cols.columns) {\n            gridRows[index].cells.push(this.generateCell(cols, CellType.Header, this.colDepth - index, (isFirstObj ? '' : (isFirstColumn ? 'e-firstcell' : '')) + lastCol, index, this.parent.getColumnIndexByUid(cols.uid)));\n        }\n        else {\n            var colSpan = this.getCellCount(cols, 0);\n            if (colSpan) {\n                gridRows[index].cells.push(new Cell({\n                    cellType: CellType.StackedHeader, column: cols, colSpan: colSpan\n                }));\n            }\n            var isFirstCell = void 0;\n            var isIgnoreFirstCell = void 0;\n            for (var i = 0, len = cols.columns.length; i < len; i++) {\n                isFirstCell = false;\n                if (cols.columns[i].visible && !isIgnoreFirstCell) {\n                    isFirstCell = true;\n                    isIgnoreFirstCell = true;\n                }\n                /* tslint:disable-next-line:max-line-length */\n                gridRows = this.appendGridCells(cols.columns[i], gridRows, index + 1, isFirstObj, i === 0, i === (len - 1) && isLastColumn);\n            }\n        }\n        return gridRows;\n    };\n    ExportHelper.prototype.generateCell = function (gridColumn, cellType, rowSpan, className, rowIndex, columnIndex) {\n        var option = {\n            'visible': gridColumn.visible,\n            'isDataCell': false,\n            'isTemplate': !isNullOrUndefined(gridColumn.headerTemplate),\n            'rowID': '',\n            'column': gridColumn,\n            'cellType': cellType,\n            'rowSpan': rowSpan,\n            'className': className,\n            'index': rowIndex,\n            'colIndex': columnIndex\n        };\n        if (!option.rowSpan || option.rowSpan < 2) {\n            delete option.rowSpan;\n        }\n        return new Cell(option);\n    };\n    ExportHelper.prototype.processColumns = function (rows) {\n        //TODO: generate dummy column for group, detail, stacked row here; ensureColumns here\n        var gridObj = this.parent;\n        var columnIndexes = this.parent.getColumnIndexesInView();\n        for (var i = 0, len = rows.length; i < len; i++) {\n            if (gridObj.allowGrouping) {\n                for (var j = 0, len_1 = gridObj.groupSettings.columns.length; j < len_1; j++) {\n                    if (this.parent.enableColumnVirtualization && columnIndexes.indexOf(j) === -1) {\n                        continue;\n                    }\n                    rows[i].cells.push(this.generateCell({}, CellType.HeaderIndent));\n                }\n            }\n            if (gridObj.detailTemplate || gridObj.childGrid) {\n                rows[i].cells.push(this.generateCell({}, CellType.DetailHeader));\n            }\n        }\n        return rows;\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.getCellCount = function (column, count) {\n        if (column.columns) {\n            for (var i = 0; i < column.columns.length; i++) {\n                count = this.getCellCount(column.columns[i], count);\n            }\n        }\n        else {\n            if (column.visible || this.hideColumnInclude) {\n                count++;\n            }\n        }\n        return count;\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.measureColumnDepth = function (column) {\n        var max = 0;\n        for (var i = 0; i < column.length; i++) {\n            var depth = this.checkDepth(column[i], 0);\n            if (max < depth) {\n                max = depth;\n            }\n        }\n        return max + 1;\n    };\n    /* tslint:disable:no-any */\n    ExportHelper.prototype.checkDepth = function (col, index) {\n        var max = index;\n        var indices = [];\n        if (col.columns) {\n            index++;\n            for (var i = 0; i < col.columns.length; i++) {\n                indices[i] = this.checkDepth(col.columns[i], index);\n            }\n            for (var j = 0; j < indices.length; j++) {\n                if (max < indices[j]) {\n                    max = indices[j];\n                }\n            }\n            index = max;\n        }\n        return index;\n    };\n    ;\n    return ExportHelper;\n}());\nexport { ExportHelper };\n/**\n * @hidden\n * `ExportValueFormatter` for `PdfExport` & `ExcelExport`\n */\nvar ExportValueFormatter = /** @class */ (function () {\n    function ExportValueFormatter(culture) {\n        this.valueFormatter = new ValueFormatter(culture);\n        this.internationalization = new Internationalization(culture);\n    }\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.returnFormattedValue = function (args, customFormat) {\n        if (!isNullOrUndefined(args.value) && args.value) {\n            return this.valueFormatter.getFormatFunction(customFormat)(args.value);\n        }\n        else {\n            return '';\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExportValueFormatter.prototype.formatCellValue = function (args) {\n        if (args.isForeignKey) {\n            args.value = getValue(args.column.foreignKeyValue, getForeignData(args.column, {}, args.value)[0]);\n        }\n        if (args.column.type === 'number' && args.column.format !== undefined && args.column.format !== '') {\n            return args.value ? this.internationalization.getNumberFormat({ format: args.column.format })(args.value) : '';\n        }\n        else if (args.column.type === 'boolean') {\n            return args.value ? 'true' : 'false';\n            /* tslint:disable-next-line:max-line-length */\n        }\n        else if ((args.column.type === 'date' || args.column.type === 'datetime' || args.column.type === 'time') && args.column.format !== undefined) {\n            if (typeof args.column.format === 'string') {\n                var format = void 0;\n                if (args.column.type === 'date') {\n                    format = { type: 'date', skeleton: args.column.format };\n                }\n                else if (args.column.type === 'time') {\n                    format = { type: 'time', skeleton: args.column.format };\n                }\n                else {\n                    format = { type: 'dateTime', skeleton: args.column.format };\n                }\n                return this.returnFormattedValue(args, format);\n            }\n            else {\n                if (args.column.format instanceof Object && args.column.format.type === undefined) {\n                    return (args.value.toString());\n                }\n                else {\n                    /* tslint:disable-next-line:max-line-length */\n                    var customFormat = void 0;\n                    if (args.column.type === 'date') {\n                        /* tslint:disable-next-line:max-line-length */\n                        customFormat = { type: args.column.format.type, format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else if (args.column.type === 'time') {\n                        customFormat = { type: 'time', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    else {\n                        customFormat = { type: 'dateTime', format: args.column.format.format, skeleton: args.column.format.skeleton };\n                    }\n                    return this.returnFormattedValue(args, customFormat);\n                }\n            }\n        }\n        else {\n            if ((!isNullOrUndefined(args.column.type) && !isNullOrUndefined(args.value)) || !isNullOrUndefined(args.value)) {\n                return (args.value).toString();\n            }\n            else {\n                return '';\n            }\n        }\n    };\n    return ExportValueFormatter;\n}());\nexport { ExportValueFormatter };\n","import * as events from '../base/constant';\nimport { Workbook } from '@syncfusion/ej2-excel-export';\nimport { isNullOrUndefined, getEnumValue, compile, extend, getValue } from '@syncfusion/ej2-base';\nimport { Data } from '../actions/data';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { CellType } from '../base/enum';\nimport { Query, DataManager } from '@syncfusion/ej2-data';\n/**\n * @hidden\n * `ExcelExport` module is used to handle the Excel export action.\n */\nvar ExcelExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid Excel Export module.\n     * @hidden\n     */\n    function ExcelExport(parent) {\n        /* tslint:disable-next-line:no-any */\n        this.book = {};\n        /* tslint:disable-next-line:no-any */\n        this.workSheet = [];\n        /* tslint:disable-next-line:no-any */\n        this.rows = [];\n        /* tslint:disable-next-line:no-any */\n        this.columns = [];\n        /* tslint:disable-next-line:no-any */\n        this.styles = [];\n        this.rowLength = 1;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.isCsvExport = false;\n        this.isElementIdChanged = false;\n        this.foreignKeyData = {};\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    ExcelExport.prototype.getModuleName = function () {\n        return 'ExcelExport';\n    };\n    ExcelExport.prototype.init = function (gObj) {\n        if (gObj.element !== null && gObj.element.id === '') {\n            gObj.element.id = new Date().toISOString();\n            this.isElementIdChanged = true;\n        }\n        this.parent = gObj;\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.isExporting = undefined;\n        this.book = {};\n        /* tslint:disable-next-line:no-any */\n        this.workSheet = [];\n        /* tslint:disable-next-line:no-any */\n        this.rows = [];\n        /* tslint:disable-next-line:no-any */\n        this.columns = [];\n        /* tslint:disable-next-line:no-any */\n        this.styles = [];\n        this.rowLength = 1;\n        /* tslint:disable-next-line:no-any */\n        this.footer = undefined;\n        this.expType = 'AppendToSheet';\n        this.includeHiddenColumn = false;\n        this.exportValueFormatter = new ExportValueFormatter(gObj.locale);\n    };\n    /**\n     * Export Grid to Excel file.\n     * @param  {exportProperties} exportProperties - Defines the export properties of the Grid.\n     * @param  {isMultipleExport} isMultipleExport - Defines is multiple Grid's are exported.\n     * @param  {workbook} workbook - Defined the Workbook if multiple Grid is exported.\n     * @param  {isCsv} isCsv - true if export to CSV.\n     * @return {Promise<any>}\n     */\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.Map = function (grid, exportProperties, isMultipleExport, workbook, isCsv, isBlob) {\n        var gObj = grid;\n        var cancel = 'cancel';\n        var isBlb = 'isBlob';\n        var csv = 'isCsv';\n        var workbk = 'workbook';\n        var isMultiEx = 'isMultipleExport';\n        var args = {\n            requestType: 'beforeExcelExport', gridObject: gObj, cancel: false,\n            isMultipleExport: isMultipleExport, workbook: workbook, isCsv: isCsv, isBlob: isBlob\n        };\n        gObj.trigger(events.beforeExcelExport, args);\n        if (args[cancel] === true) {\n            return null;\n        }\n        else {\n            this.data = new Data(gObj);\n            this.isExporting = true;\n            this.isBlob = args[isBlb];\n            if (args[csv]) {\n                this.isCsvExport = args[csv];\n            }\n            else {\n                this.isCsvExport = false;\n            }\n            return this.processRecords(gObj, exportProperties, args[isMultiEx], args[workbk]);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecords = function (gObj, exportProperties, isMultipleExport, workbook) {\n        var _this = this;\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource) &&\n            exportProperties.dataSource instanceof DataManager) {\n            /* tslint:disable-next-line:no-any */\n            return new Promise(function (resolve, reject) {\n                /* tslint:disable-next-line:max-line-length */\n                /* tslint:disable-next-line:no-any */\n                var dataManager = exportProperties.dataSource.executeQuery(new Query());\n                dataManager.then(function (r) {\n                    _this.init(gObj);\n                    _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, r);\n                    resolve(_this.book);\n                });\n            });\n        }\n        else {\n            /* tslint:disable-next-line:no-any */\n            var allPromise = [];\n            allPromise.push(this.data.getData({}, ExportHelper.getQuery(gObj, this.data)));\n            allPromise.push(this.helper.getColumnData(gObj));\n            return Promise.all(allPromise).then(function (e) {\n                _this.init(gObj);\n                _this.processInnerRecords(gObj, exportProperties, isMultipleExport, workbook, e[0]);\n                return _this.book;\n            }).catch(function (e) {\n                _this.parent.trigger(events.actionFailure, e);\n            });\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processInnerRecords = function (gObj, exportProperties, isMultipleExport, workbook, r) {\n        var blankRows = 5;\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.multipleExport)) {\n            /* tslint:disable-next-line:max-line-length */\n            this.expType = (!isNullOrUndefined(exportProperties.multipleExport.type) ? exportProperties.multipleExport.type : 'AppendToSheet');\n            if (!isNullOrUndefined(exportProperties.multipleExport.blankRows)) {\n                blankRows = exportProperties.multipleExport.blankRows;\n            }\n        }\n        if (isNullOrUndefined(workbook)) {\n            this.workSheet = [];\n            this.rows = [];\n            this.columns = [];\n            this.styles = [];\n        }\n        else if (this.expType === 'NewSheet') {\n            this.workSheet = workbook.worksheets;\n            this.rows = [];\n            this.columns = [];\n            this.styles = workbook.styles;\n        }\n        else {\n            this.workSheet = [];\n            this.rows = workbook.worksheets[0].rows;\n            this.columns = workbook.worksheets[0].columns;\n            this.styles = workbook.styles;\n            this.rowLength = (this.rows[this.rows.length - 1].index + blankRows);\n            this.rowLength++;\n        }\n        if (!isNullOrUndefined(exportProperties)) {\n            if (!isNullOrUndefined(isMultipleExport)) {\n                if (!isNullOrUndefined(exportProperties.header) && (isMultipleExport || this.expType === 'NewSheet')) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    if (this.expType === 'AppendToSheet') {\n                        if (!isMultipleExport) {\n                            this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                        }\n                    }\n                    else {\n                        this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                    }\n                }\n            }\n            else {\n                if (!isNullOrUndefined(exportProperties.header)) {\n                    this.processExcelHeader(JSON.parse(JSON.stringify(exportProperties.header)));\n                }\n                if (!isNullOrUndefined(exportProperties.footer)) {\n                    this.footer = JSON.parse(JSON.stringify(exportProperties.footer));\n                }\n            }\n        }\n        this.includeHiddenColumn = (!isNullOrUndefined(exportProperties) ? exportProperties.includeHiddenColumn : false);\n        /* tslint:disable-next-line:max-line-length */\n        /* tslint:disable-next-line:no-any */\n        var headerRow = this.helper.getHeaders(gObj.columns, this.includeHiddenColumn);\n        var groupIndent = 0;\n        /* tslint:disable:no-any */\n        if (!isNullOrUndefined((r.result).level)) {\n            groupIndent += (r.result).level;\n            groupIndent += (r.result).childLevels;\n        }\n        /* tslint:enable:no-any */\n        this.processHeaderContent(gObj, headerRow, exportProperties, groupIndent);\n        /* tslint:disable-next-line:max-line-length */\n        if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.dataSource) && !(exportProperties.dataSource instanceof DataManager)) {\n            this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties, exportProperties.dataSource);\n        }\n        else if (!isNullOrUndefined(exportProperties) && exportProperties.exportType === 'CurrentPage') {\n            this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties, gObj.getCurrentViewRecords());\n        }\n        else {\n            this.processRecordContent(gObj, r, headerRow, isMultipleExport, exportProperties);\n        }\n        this.isExporting = false;\n        gObj.trigger(events.excelExportComplete, this.isBlob ? { promise: this.blobPromise } : {});\n    };\n    /* tslint:disable-next-line:max-line-length */\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecordContent = function (gObj, returnType, headerRow, isMultipleExport, exportProperties, currentViewRecords) {\n        /* tslint:disable-next-line:no-any */\n        var column = gObj.columns;\n        /* tslint:disable-next-line:no-any */\n        var record = undefined;\n        if (!isNullOrUndefined(currentViewRecords)) {\n            record = currentViewRecords;\n        }\n        else {\n            record = returnType.result;\n        }\n        if (!isNullOrUndefined(record.level)) {\n            this.processGroupedRows(gObj, record, headerRow, record.level);\n        }\n        else {\n            this.processRecordRows(gObj, record, headerRow, 0);\n        }\n        if (!isNullOrUndefined(returnType.aggregates)) {\n            if (!isNullOrUndefined(currentViewRecords)) {\n                this.processAggregates(gObj, returnType.result, currentViewRecords);\n            }\n            else {\n                this.processAggregates(gObj, returnType.result);\n            }\n        }\n        //footer template add\n        if (!isNullOrUndefined(this.footer)) {\n            if ((this.expType === 'AppendToSheet' && !isMultipleExport) || (this.expType === 'NewSheet')) {\n                this.processExcelFooter(this.footer);\n            }\n        }\n        /* tslint:disable-next-line:no-any */\n        var sheet = {};\n        if (this.columns.length > 0) {\n            sheet.columns = this.columns;\n        }\n        sheet.rows = this.rows;\n        this.workSheet.push(sheet);\n        this.book.worksheets = this.workSheet;\n        this.book.styles = this.styles;\n        if (!isMultipleExport) {\n            if (this.isCsvExport) {\n                var book = new Workbook(this.book, 'csv', gObj.locale);\n                if (!this.isBlob) {\n                    if (!isNullOrUndefined(exportProperties) && exportProperties.fileName) {\n                        book.save(exportProperties.fileName);\n                    }\n                    else {\n                        book.save('Export.csv');\n                    }\n                }\n                else {\n                    this.blobPromise = book.saveAsBlob('text/csv');\n                }\n            }\n            else {\n                var book = new Workbook(this.book, 'xlsx', gObj.locale);\n                if (!this.isBlob) {\n                    if (!isNullOrUndefined(exportProperties) && exportProperties.fileName) {\n                        book.save(exportProperties.fileName);\n                    }\n                    else {\n                        book.save('Export.xlsx');\n                    }\n                }\n                else {\n                    this.blobPromise = book.saveAsBlob('application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');\n                }\n            }\n            if (this.isElementIdChanged) {\n                gObj.element.id = '';\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processGroupedRows = function (gObj, dataSource, headerRow, level) {\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var item = dataSource_1[_i];\n            /* tslint:disable-next-line:no-any */\n            var cells = [];\n            var index = 1;\n            /* tslint:disable-next-line:no-any */\n            var cell = {};\n            cell.index = index + level;\n            var col = gObj.getColumnByField(item.field);\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: item.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn(),\n            };\n            cell.value = this.parent.getColumnByField(item.field).headerText +\n                ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ';\n            if (item.count > 1) {\n                cell.value += item.count + ' items';\n            }\n            else {\n                cell.value += item.count + ' item';\n            }\n            cell.style = this.getCaptionThemeStyle(this.theme);\n            var captionModelGen = new CaptionSummaryModelGenerator(gObj);\n            var groupCaptionSummaryRows = captionModelGen.generateRows(item);\n            this.fillAggregates(gObj, groupCaptionSummaryRows, dataSource.level + dataSource.childLevels, this.rowLength);\n            cells.push(cell);\n            if (this.rows[this.rows.length - 1].cells.length > 0) {\n                var lIndex = dataSource.level + dataSource.childLevels + groupCaptionSummaryRows[0].cells.length;\n                var hIndex = 0;\n                for (var _a = 0, _b = this.rows[this.rows.length - 1].cells; _a < _b.length; _a++) {\n                    var tCell = _b[_a];\n                    if (tCell.index < lIndex) {\n                        lIndex = tCell.index;\n                    }\n                    if (tCell.index > hIndex) {\n                        hIndex = tCell.index;\n                    }\n                    tCell.style = this.getCaptionThemeStyle(this.theme);\n                    if (cells[cells.length - 1].index !== tCell.index) {\n                        cells.push(tCell);\n                    }\n                }\n                if ((lIndex - cell.index) > 1) {\n                    cell.colSpan = lIndex - cell.index;\n                }\n                while (hIndex < (headerRow.columns.length + level)) {\n                    /* tslint:disable-next-line:no-any */\n                    var sCell = {};\n                    if (dataSource.childLevels === 0) {\n                        sCell.index = (hIndex);\n                    }\n                    else {\n                        sCell.index = (hIndex + 1);\n                    }\n                    sCell.style = this.getCaptionThemeStyle(this.theme);\n                    cells.push(sCell);\n                    hIndex++;\n                }\n            }\n            else {\n                var span = 0;\n                //Calculation for column span when group caption dont have aggregates\n                for (var _c = 0, _d = headerRow.columns; _c < _d.length; _c++) {\n                    var col_1 = _d[_c];\n                    if (col_1.visible) {\n                        span++;\n                    }\n                }\n                cell.colSpan = (dataSource.childLevels + span);\n            }\n            this.rows[this.rows.length - 1].cells = cells;\n            this.rowLength++;\n            if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                this.processGroupedRows(gObj, item.items, headerRow, item.items.level);\n            }\n            else {\n                this.processRecordRows(gObj, item.items, headerRow, (level));\n                this.processAggregates(gObj, item, undefined, (level), true);\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processRecordRows = function (gObj, record, headerRow, level) {\n        var rLen = Object.keys(record).length;\n        var index = 1;\n        /* tslint:disable-next-line:no-any */\n        var cells = [];\n        for (var r = 0; r < rLen; r++) {\n            cells = [];\n            index = 1;\n            for (var c = 0, len = headerRow.columns.length; c < len; c++) {\n                /* tslint:disable-next-line:no-any */\n                var value = !isNullOrUndefined(headerRow.columns[c].field) ? getValue(headerRow.columns[c].field, record[r]) : '';\n                var column = headerRow.columns[c];\n                var foreignKeyData = void 0;\n                // tslint:disable-next-line:max-line-length\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    foreignKeyData = this.helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, foreignKeyData);\n                }\n                if (!isNullOrUndefined(value)) {\n                    /* tslint:disable-next-line:no-any */\n                    var excelCellArgs = { data: record[r], column: headerRow.columns[c], foreignKeyData: foreignKeyData };\n                    var cell = {};\n                    gObj.trigger(events.excelQueryCellInfo, extend(excelCellArgs, {\n                        column: headerRow.columns[c], data: record[r],\n                        value: value, style: undefined, colSpan: 1, cell: cell\n                    }));\n                    cell = excelCellArgs.cell;\n                    cell.index = index + level;\n                    cell.value = excelCellArgs.value;\n                    if (excelCellArgs.colSpan > 1) {\n                        cell.colSpan = excelCellArgs.colSpan;\n                    }\n                    if (!isNullOrUndefined(excelCellArgs.style)) {\n                        var styleIndex = this.getColumnStyle(gObj, index + level);\n                        cell.style = this.mergeOptions(this.styles[styleIndex], excelCellArgs.style);\n                    }\n                    else {\n                        cell.style = { name: gObj.element.id + 'column' + (index + level) };\n                    }\n                    cells.push(cell);\n                }\n                index++;\n            }\n            this.rows.push({ index: this.rowLength++, cells: cells });\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processAggregates = function (gObj, rec, currentViewRecords, indent, byGroup) {\n        var summaryModel = new SummaryModelGenerator(gObj);\n        /* tslint:disable-next-line:no-any */\n        var data = undefined;\n        if (!isNullOrUndefined(currentViewRecords)) {\n            data = currentViewRecords;\n        }\n        else {\n            data = rec;\n        }\n        if (indent === undefined) {\n            indent = 0;\n        }\n        if (gObj.groupSettings.columns.length > 0 && byGroup) {\n            var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n            var groupSummaryRows = groupSummaryModel.generateRows(data, { level: data.level });\n            if (groupSummaryRows.length > 0) {\n                this.fillAggregates(gObj, groupSummaryRows, indent);\n            }\n        }\n        else {\n            indent = gObj.groupSettings.columns.length > 0 && !byGroup ? gObj.groupSettings.columns.length : indent;\n            var sRows = summaryModel.generateRows(data, rec.aggregates);\n            if (sRows.length > 0 && !byGroup) {\n                this.fillAggregates(gObj, sRows, indent);\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.fillAggregates = function (gObj, cells, indent, customIndex) {\n        for (var _i = 0, cells_1 = cells; _i < cells_1.length; _i++) {\n            var row = cells_1[_i];\n            /* tslint:disable-next-line:no-any */\n            var cells_2 = [];\n            var index = 0;\n            for (var _a = 0, _b = row.cells; _a < _b.length; _a++) {\n                var cell = _b[_a];\n                /* tslint:disable-next-line:no-any */\n                var eCell = {};\n                if ((cell.visible || this.includeHiddenColumn)) {\n                    index++;\n                    if (cell.isDataCell) {\n                        eCell.index = index + indent;\n                        if (!isNullOrUndefined(cell.column.footerTemplate)) {\n                            eCell.value = this.getAggreateValue(CellType.Summary, cell.column.footerTemplate, cell, row);\n                        }\n                        else if (!isNullOrUndefined(cell.column.groupFooterTemplate)) {\n                            eCell.value = this.getAggreateValue(CellType.GroupSummary, cell.column.groupFooterTemplate, cell, row);\n                        }\n                        else if (!isNullOrUndefined(cell.column.groupCaptionTemplate)) {\n                            eCell.value = this.getAggreateValue(CellType.CaptionSummary, cell.column.groupCaptionTemplate, cell, row);\n                        }\n                        else {\n                            for (var _c = 0, _d = Object.keys(row.data[cell.column.field]); _c < _d.length; _c++) {\n                                var key = _d[_c];\n                                if (key === cell.column.type) {\n                                    if (!isNullOrUndefined(row.data[cell.column.field].Sum)) {\n                                        eCell.value = row.data[cell.column.field].Sum;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Average)) {\n                                        eCell.value = row.data[cell.column.field].Average;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Max)) {\n                                        eCell.value = row.data[cell.column.field].Max;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Min)) {\n                                        eCell.value = row.data[cell.column.field].Min;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Count)) {\n                                        eCell.value = row.data[cell.column.field].Count;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].TrueCount)) {\n                                        eCell.value = row.data[cell.column.field].TrueCount;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].FalseCount)) {\n                                        eCell.value = row.data[cell.column.field].FalseCount;\n                                    }\n                                    else if (!isNullOrUndefined(row.data[cell.column.field].Custom)) {\n                                        eCell.value = row.data[cell.column.field].Custom;\n                                    }\n                                }\n                            }\n                        }\n                        eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                        if (cell.attributes.style.textAlign) {\n                            eCell.style.hAlign = cell.attributes.style.textAlign;\n                        }\n                        cells_2.push(eCell);\n                    }\n                    else {\n                        if (customIndex === undefined) {\n                            eCell.index = index + indent;\n                            eCell.style = this.getCaptionThemeStyle(this.theme); //{ name: gObj.element.id + 'column' + index };\n                            cells_2.push(eCell);\n                        }\n                    }\n                }\n            }\n            if (!isNullOrUndefined(customIndex)) {\n                this.rows.push({ index: customIndex, cells: cells_2 });\n            }\n            else {\n                this.rows.push({ index: this.rowLength++, cells: cells_2 });\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getAggreateValue = function (cellType, template, cell, row) {\n        var templateFn = {};\n        templateFn[getEnumValue(CellType, cell.cellType)] = compile(template);\n        /* tslint:disable-next-line:max-line-length */\n        var txt = (templateFn[getEnumValue(CellType, cell.cellType)](row.data[cell.column.field ? cell.column.field : cell.column.columnName]));\n        return txt[0].wholeText;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.mergeOptions = function (JSON1, JSON2) {\n        /* tslint:disable-next-line:no-any */\n        var result = {};\n        /* tslint:disable-next-line:no-any */\n        var attrname = Object.keys(JSON1);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON1[attrname[index]];\n            }\n        }\n        attrname = Object.keys(JSON2);\n        for (var index = 0; index < attrname.length; index++) {\n            if (attrname[index] !== 'name') {\n                result[attrname[index]] = JSON2[attrname[index]];\n            }\n        }\n        return result;\n    };\n    ExcelExport.prototype.getColumnStyle = function (gObj, columnIndex) {\n        var index = 0;\n        for (var _i = 0, _a = this.styles; _i < _a.length; _i++) {\n            var style = _a[_i];\n            if (style.name === gObj.element.id + 'column' + columnIndex) {\n                return index;\n            }\n            index++;\n        }\n        return undefined;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processHeaderContent = function (gObj, headerRow, exportProperties, indent) {\n        /* tslint:disable-next-line:no-any */\n        var column = gObj.columns;\n        var rowIndex = 1;\n        /* tslint:disable-next-line:no-any */\n        var returnValue = headerRow;\n        /* tslint:enable:no-any */\n        var gridRows = returnValue.rows;\n        // Column collection with respect to the records in the grid\n        var gridColumns = returnValue.columns;\n        /* tslint:disable-next-line:no-any */\n        var spannedCells = [];\n        if (indent > 0) {\n            var index = 0;\n            while (index !== indent) {\n                this.columns.push({ index: index + 1, width: 30 });\n                index++;\n            }\n        }\n        for (var row = 0; row < gridRows.length; row++) {\n            var currentCellIndex = 1 + indent;\n            /* tslint:disable-next-line:no-any */\n            var cells = [];\n            for (var column_1 = 0; column_1 < gridRows[row].cells.length; column_1++) {\n                /* tslint:disable-next-line:no-any */\n                var style = {};\n                /* tslint:disable-next-line:no-any */\n                var cell = {};\n                /* tslint:disable-next-line:no-any */\n                var gridCell = gridRows[row].cells[column_1];\n                /* tslint:disable-next-line:no-any */\n                var result = { contains: true, index: 1 };\n                while (result.contains) {\n                    result = this.getIndex(spannedCells, rowIndex, currentCellIndex);\n                    currentCellIndex = result.index;\n                    if (!result.contains) {\n                        cell.index = result.index;\n                        break;\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.rowSpan) && gridCell.rowSpan !== 1) {\n                    cell.rowSpan = gridCell.rowSpan;\n                    for (var i = rowIndex; i < gridCell.rowSpan + rowIndex; i++) {\n                        /* tslint:disable-next-line:no-any */\n                        var spannedCell = { rowIndex: 0, columnIndex: 0 };\n                        spannedCell.rowIndex = i;\n                        spannedCell.columnIndex = currentCellIndex;\n                        spannedCells.push(spannedCell);\n                    }\n                }\n                if (!isNullOrUndefined(gridCell.colSpan) && gridCell.colSpan !== 1) {\n                    cell.colSpan = gridCell.colSpan;\n                    currentCellIndex = currentCellIndex + cell.colSpan - 1;\n                }\n                cell.value = gridCell.column.headerText;\n                if (!isNullOrUndefined(exportProperties) && !isNullOrUndefined(exportProperties.theme)) {\n                    this.theme = exportProperties.theme;\n                }\n                style = this.getHeaderThemeStyle(this.theme);\n                if (!isNullOrUndefined(gridCell.column.textAlign)) {\n                    style.hAlign = gridCell.column.textAlign;\n                }\n                if (!isNullOrUndefined(gridCell.column.headerTextAlign)) {\n                    style.hAlign = gridCell.column.headerTextAlign;\n                }\n                /* tslint:disable-next-line:no-any */\n                var excelHeaderCellArgs = { cell: cell, gridCell: gridCell, setStyle: style };\n                gObj.trigger(events.excelHeaderQueryCellInfo, extend(excelHeaderCellArgs, {\n                    cell: cell, setStyle: style\n                }));\n                cell.style = style;\n                cells.push(cell);\n                currentCellIndex++;\n            }\n            this.rows.push({ index: this.rowLength++, cells: cells });\n        }\n        for (var col = 0; col < gridColumns.length; col++) {\n            this.parseStyles(gObj, gridColumns[col], this.getRecordThemeStyle(this.theme), indent + col + 1);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getHeaderThemeStyle = function (theme) {\n        /* tslint:disable-next-line:no-any */\n        var style = {};\n        style.fontSize = 12;\n        style.borders = { color: '#E0E0E0' };\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.header)) {\n            style = this.updateThemeStyle(theme.header, style);\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.updateThemeStyle = function (themestyle, style) {\n        if (!isNullOrUndefined(themestyle.fontColor)) {\n            style.fontColor = themestyle.fontColor;\n        }\n        if (!isNullOrUndefined(themestyle.fontName)) {\n            style.fontName = themestyle.fontName;\n        }\n        if (!isNullOrUndefined(themestyle.fontSize)) {\n            style.fontSize = themestyle.fontSize;\n        }\n        if (!isNullOrUndefined(themestyle.borders)) {\n            if (!isNullOrUndefined(themestyle.borders.color)) {\n                style.borders.color = themestyle.borders.color;\n            }\n            if (!isNullOrUndefined(themestyle.borders.lineStyle)) {\n                style.borders.lineStyle = themestyle.borders.lineStyle;\n            }\n        }\n        if (themestyle.bold !== false) {\n            style.bold = themestyle.bold;\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getCaptionThemeStyle = function (theme) {\n        /* tslint:disable-next-line:no-any */\n        var style = {};\n        style.fontSize = 13;\n        style.backColor = '#F6F6F6';\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.caption)) {\n            style = this.updateThemeStyle(theme.caption, style);\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getRecordThemeStyle = function (theme) {\n        /* tslint:disable-next-line:no-any */\n        var style = {};\n        style.fontSize = 13;\n        style.borders = { color: '#E0E0E0' };\n        if (!isNullOrUndefined(theme) && !isNullOrUndefined(theme.record)) {\n            style = this.updateThemeStyle(theme.record, style);\n        }\n        return style;\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processExcelHeader = function (header) {\n        if (!isNullOrUndefined(header.rows) && (this.expType === 'NewSheet' || this.rowLength === 1)) {\n            var noRows = void 0;\n            if (header.headerRows === undefined) {\n                this.rowLength = header.rows.length;\n            }\n            else {\n                this.rowLength = header.headerRows;\n            }\n            if (this.rowLength < header.rows.length) {\n                noRows = this.rowLength;\n            }\n            else {\n                noRows = header.rows.length;\n            }\n            this.rowLength++;\n            for (var row = 0; row < noRows; row++) {\n                /* tslint:disable-next-line:no-any */\n                var json = header.rows[row];\n                //Row index\n                if (!(json.index !== null && !isNullOrUndefined(json.index))) {\n                    json.index = (row + 1);\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.updatedCellIndex = function (json) {\n        var cellsLength = json.cells.length;\n        for (var cellId = 0; cellId < cellsLength; cellId++) {\n            /* tslint:disable-next-line:no-any */\n            var jsonCell = json.cells[cellId];\n            //cell index\n            if (!(jsonCell.index !== null && !isNullOrUndefined(jsonCell.index))) {\n                jsonCell.index = (cellId + 1);\n            }\n        }\n        this.rows.push(json);\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.processExcelFooter = function (footer) {\n        if (!isNullOrUndefined(footer.rows)) {\n            var noRows = void 0;\n            if (footer.footerRows === undefined) {\n                this.rowLength += footer.rows.length;\n            }\n            else {\n                if (footer.footerRows > footer.rows.length) {\n                    this.rowLength += (footer.footerRows - footer.rows.length);\n                    noRows = footer.rows.length;\n                }\n                else {\n                    noRows = footer.footerRows;\n                }\n            }\n            for (var row = 0; row < noRows; row++) {\n                /* tslint:disable-next-line:no-any */\n                var json = footer.rows[row];\n                //Row index\n                if (json.index === null || json.index === undefined) {\n                    json.index = this.rowLength++;\n                }\n                else {\n                    json.index += this.rowLength;\n                }\n                this.updatedCellIndex(json);\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.getIndex = function (spannedCells, rowIndex, columnIndex) {\n        for (var _i = 0, spannedCells_1 = spannedCells; _i < spannedCells_1.length; _i++) {\n            var spannedCell = spannedCells_1[_i];\n            if ((spannedCell.rowIndex === rowIndex) && (spannedCell.columnIndex === columnIndex)) {\n                columnIndex = columnIndex + 1;\n                return { contains: true, index: columnIndex };\n            }\n        }\n        return { contains: false, index: columnIndex };\n    };\n    /* tslint:disable-next-line:no-any */\n    ExcelExport.prototype.parseStyles = function (gObj, col, style, index) {\n        if (!isNullOrUndefined(col.format)) {\n            if (!isNullOrUndefined(col.format.skeleton)) {\n                style.numberFormat = col.format.skeleton;\n                if (!isNullOrUndefined(col.format.type)) {\n                    style.type = col.format.type;\n                }\n            }\n            else {\n                style.numberFormat = col.format;\n                style.type = col.type;\n            }\n        }\n        if (!isNullOrUndefined(col.textAlign)) {\n            style.hAlign = col.textAlign;\n        }\n        if (Object.keys(style).length > 0) {\n            style.name = gObj.element.id + 'column' + index;\n            this.styles.push(style);\n        }\n        if (!isNullOrUndefined(col.width)) {\n            /* tslint:disable-next-line:max-line-length */\n            this.columns.push({ index: index, width: typeof col.width === 'number' ? col.width : this.helper.getConvertedWidth(col.width) });\n        }\n    };\n    /**\n     * To destroy the excel export\n     * @returnÂ {void}\n     * @hidden\n     */\n    ExcelExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return ExcelExport;\n}());\nexport { ExcelExport };\n","import * as events from '../base/constant';\nimport { PdfDocument, PdfGrid, PdfBorders, PdfPen } from '@syncfusion/ej2-pdf-export';\nimport { PdfStandardFont, PdfFontFamily, PdfFontStyle, PdfBitmap } from '@syncfusion/ej2-pdf-export';\nimport { PdfStringFormat, PdfTextAlignment, PdfColor, PdfSolidBrush } from '@syncfusion/ej2-pdf-export';\nimport { PdfVerticalAlignment, RectangleF, PdfPageTemplateElement } from '@syncfusion/ej2-pdf-export';\nimport { PointF, PdfPageNumberField, PdfCompositeField } from '@syncfusion/ej2-pdf-export';\nimport { PdfPageCountField, SizeF, PdfPageSettings, PdfPageOrientation } from '@syncfusion/ej2-pdf-export';\nimport { ExportHelper, ExportValueFormatter } from './export-helper';\nimport { Data } from '../actions/data';\nimport { SummaryModelGenerator, GroupSummaryModelGenerator, CaptionSummaryModelGenerator } from '../services/summary-model-generator';\nimport { compile, getEnumValue, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { CellType } from '../base/enum';\nimport { DataManager, Query } from '@syncfusion/ej2-data';\nimport { getValue } from '@syncfusion/ej2-base';\n/**\n * `PDF Export` module is used to handle the exportToPDF action.\n * @hidden\n */\nvar PdfExport = /** @class */ (function () {\n    /**\n     * Constructor for the Grid PDF Export module\n     * @hidden\n     */\n    function PdfExport(parent) {\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.customDataSource = false;\n        this.isGrouping = false;\n        this.parent = parent;\n        this.helper = new ExportHelper(parent);\n    }\n    /**\n     * For internal use only - Get the module name.\n     */\n    PdfExport.prototype.getModuleName = function () {\n        return 'PdfExport';\n    };\n    PdfExport.prototype.init = function (parent) {\n        this.exportValueFormatter = new ExportValueFormatter(parent.locale);\n        this.pdfDocument = undefined;\n        this.hideColumnInclude = false;\n        this.currentViewData = false;\n        this.parent = parent;\n        var gObj = parent;\n        this.isGrouping = false;\n        this.isExporting = true;\n        var can = 'cancel';\n        var args = {\n            requestType: 'beforePdfExport', gridObject: gObj, cancel: false\n        };\n        gObj.trigger(events.beforePdfExport, args);\n        if (args[can] === true) {\n            return;\n        }\n    };\n    /**\n     * Used to map the input data\n     * @return {void}\n     */\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.Map = function (parent, pdfExportProperties, isMultipleExport, pdfDoc, isBlob) {\n        var _this = this;\n        this.data = new Data(this.parent);\n        this.isBlob = isBlob;\n        /* tslint:disable-next-line:max-line-length */\n        if (!isNullOrUndefined(pdfExportProperties) && !isNullOrUndefined(pdfExportProperties.dataSource) && pdfExportProperties.dataSource instanceof DataManager) {\n            return new Promise(function (resolve, reject) {\n                /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */\n                new DataManager({ url: pdfExportProperties.dataSource.dataSource.url, adaptor: pdfExportProperties.dataSource.adaptor }).executeQuery(new Query()).then(function (returnType) {\n                    _this.init(parent);\n                    if (!isNullOrUndefined(pdfDoc)) {\n                        _this.pdfDocument = pdfDoc;\n                    }\n                    else {\n                        _this.pdfDocument = new PdfDocument();\n                    }\n                    _this.processExport(parent, returnType, pdfExportProperties, isMultipleExport);\n                    _this.isExporting = false;\n                    parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n                    resolve(_this.pdfDocument);\n                });\n            });\n        }\n        else {\n            var allPromise = [];\n            allPromise.push(this.data.getData({}, ExportHelper.getQuery(parent, this.data)));\n            allPromise.push(this.helper.getColumnData(parent));\n            return Promise.all(allPromise).then(function (e) {\n                _this.init(parent);\n                if (!isNullOrUndefined(pdfDoc)) {\n                    _this.pdfDocument = pdfDoc;\n                }\n                else {\n                    _this.pdfDocument = new PdfDocument();\n                }\n                _this.processExport(parent, e[0], pdfExportProperties, isMultipleExport);\n                _this.isExporting = false;\n                parent.trigger(events.pdfExportComplete, _this.isBlob ? { promise: _this.blobPromise } : {});\n                return _this.pdfDocument;\n                // tslint:disable-next-line:no-any\n            });\n        }\n    };\n    /* tslint:disable:no-any */\n    PdfExport.prototype.processExport = function (gObj, returnType, pdfExportProperties, isMultipleExport) {\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            this.gridTheme = pdfExportProperties.theme;\n        }\n        var columns = gObj.columns;\n        var dataSource = returnType.result;\n        /* tslint:enable:no-any */\n        var section = this.pdfDocument.sections.add();\n        /* tslint:disable-next-line:no-any */\n        var result = this.processExportProperties(pdfExportProperties, dataSource, section);\n        dataSource = result.dataSource;\n        /* tslint:disable-next-line:no-any */\n        if (!isNullOrUndefined(dataSource.GroupGuid)) {\n            this.isGrouping = true;\n        }\n        section = result.section;\n        var pdfPage = section.pages.add();\n        // create a grid\n        var pdfGrid = new PdfGrid();\n        // get header theme style\n        /* tslint:disable-next-line:no-any */\n        var headerThemeStyle = this.getHeaderThemeStyle();\n        var border = headerThemeStyle.border;\n        var headerFont = headerThemeStyle.font;\n        var headerBrush = headerThemeStyle.brush;\n        /* tslint:disable-next-line:no-any */\n        var returnValue = this.helper.getHeaders(columns, this.hideColumnInclude);\n        var rows = returnValue.rows;\n        // Column collection with respect to the records in the grid\n        var gridColumns = returnValue.columns;\n        // process grid header content\n        pdfGrid = this.processGridHeaders(dataSource.childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush);\n        // set alignment, width and type of the values of the column\n        this.setColumnProperties(gridColumns, pdfGrid);\n        /* tslint:disable-next-line:no-any */\n        var captionThemeStyle = this.getSummaryCaptionThemeStyle();\n        if (!isNullOrUndefined(dataSource) && dataSource.length > 0) {\n            if (this.isGrouping) {\n                /* tslint:disable-next-line:max-line-length */\n                this.processGroupedRecords(pdfGrid, dataSource, gridColumns, gObj, border, 0, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, returnType);\n            }\n            else {\n                this.processRecord(border, gridColumns, gObj, dataSource, pdfGrid);\n            }\n            if (!isNullOrUndefined(returnType.aggregates)) {\n                var summaryModel = new SummaryModelGenerator(gObj);\n                var sRows = void 0;\n                if (this.customDataSource) {\n                    sRows = summaryModel.generateRows(dataSource, returnType.aggregates);\n                }\n                else if (this.currentViewData) {\n                    sRows = summaryModel.generateRows(this.parent.getCurrentViewRecords(), returnType.aggregates);\n                }\n                else if (this.isGrouping) {\n                    sRows = summaryModel.generateRows(dataSource.records, returnType.aggregates);\n                }\n                else {\n                    sRows = summaryModel.generateRows(returnType.result, returnType.aggregates);\n                }\n                /* tslint:disable-next-line:max-line-length */\n                this.processAggregates(sRows, pdfGrid, border, captionThemeStyle.font, captionThemeStyle.brush, captionThemeStyle.backgroundBrush, false);\n            }\n        }\n        else {\n            var row = pdfGrid.rows.addRow();\n            row.style.setBorder(border);\n        }\n        // draw the grid\n        pdfGrid.draw(pdfPage, 20, 20);\n        if (!isMultipleExport) {\n            // save the PDF\n            if (!this.isBlob) {\n                if (!isNullOrUndefined(pdfExportProperties) && pdfExportProperties.fileName) {\n                    this.pdfDocument.save(pdfExportProperties.fileName);\n                }\n                else {\n                    this.pdfDocument.save('Export.pdf');\n                }\n            }\n            else {\n                this.blobPromise = this.pdfDocument.save();\n            }\n            this.pdfDocument.destroy();\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getSummaryCaptionThemeStyle = function () {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.caption) && this.gridTheme.caption !== null) {\n            var fontSize = !isNullOrUndefined(this.gridTheme.caption.fontSize) ? this.gridTheme.caption.fontSize : 9.75;\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.caption.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.caption.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            /* tslint:disable-next-line:max-line-length */\n            return { font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5), brush: new PdfSolidBrush(new PdfColor(pdfColor)), backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)) };\n        }\n        else {\n            //Material theme\n            /* tslint:disable-next-line:max-line-length */\n            return { font: new PdfStandardFont(PdfFontFamily.Helvetica, 9.75), brush: new PdfSolidBrush(new PdfColor(0, 0, 0)), backgroundBrush: new PdfSolidBrush(new PdfColor(246, 246, 246)) };\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getHeaderThemeStyle = function () {\n        var border = new PdfBorders();\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.header)) {\n            if (!isNullOrUndefined(this.gridTheme.header.borders) && !isNullOrUndefined(this.gridTheme.header.borders.color)) {\n                var borderColor = this.hexToRgb(this.gridTheme.header.borders.color);\n                border.all = new PdfPen(new PdfColor(borderColor.r, borderColor.g, borderColor.b));\n            }\n            var fontSize = !isNullOrUndefined(this.gridTheme.header.fontSize) ? this.gridTheme.header.fontSize : 10.5;\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.header.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.header.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            /* tslint:disable-next-line:max-line-length */\n            return { border: border, font: new PdfStandardFont(PdfFontFamily.Helvetica, fontSize), brush: new PdfSolidBrush(pdfColor) };\n        }\n        else {\n            //Material theme\n            border.all = new PdfPen(new PdfColor(234, 234, 234));\n            /* tslint:disable-next-line:max-line-length */\n            return { border: border, font: new PdfStandardFont(PdfFontFamily.Helvetica, 10.5), brush: new PdfSolidBrush(new PdfColor(102, 102, 102)) };\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */ /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processGroupedRecords = function (pdfGrid, dataSource, gridColumns, gObj, border, level, font, brush, backgroundBrush, returnType) {\n        var groupIndex = level;\n        for (var _i = 0, dataSource_1 = dataSource; _i < dataSource_1.length; _i++) {\n            var dataSourceItems = dataSource_1[_i];\n            var row = pdfGrid.rows.addRow();\n            var col = gObj.getColumnByField(dataSourceItems.field);\n            /* tslint:disable-next-line:no-any */\n            var args = {\n                value: dataSourceItems.key,\n                column: col,\n                style: undefined,\n                isForeignKey: col.isForeignColumn(),\n            };\n            /* tslint:disable-next-line:max-line-length */\n            var value = dataSourceItems.field + ': ' + this.exportValueFormatter.formatCellValue(args) + ' - ' + dataSourceItems.count + (dataSource.count > 1 ? ' items' : ' item');\n            row.cells.getCell(groupIndex).value = value;\n            row.cells.getCell(groupIndex + 1).style.stringFormat = new PdfStringFormat(PdfTextAlignment.Left);\n            row.style.setBorder(border);\n            row.style.setFont(font);\n            row.style.setTextBrush(brush);\n            row.style.setBackgroundBrush(backgroundBrush);\n            var sRows = void 0;\n            var captionSummaryModel = new CaptionSummaryModelGenerator(gObj);\n            if (!isNullOrUndefined(dataSourceItems.items.records)) {\n                sRows = captionSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n            }\n            else {\n                sRows = captionSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n            }\n            if (!isNullOrUndefined(sRows) && sRows.length === 0) {\n                row.cells.getCell(groupIndex + 1).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n            }\n            if (!isNullOrUndefined(dataSource.childLevels) && dataSource.childLevels > 0) {\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                /* tslint:disable-next-line:max-line-length */\n                this.processGroupedRecords(pdfGrid, dataSourceItems.items, gridColumns, gObj, border, (groupIndex + 1), font, brush, backgroundBrush, returnType);\n                var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                sRows = groupSummaryModel.generateRows(dataSourceItems.items.records, dataSourceItems);\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n            }\n            else {\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, true, row, groupIndex);\n                this.processRecord(border, gridColumns, gObj, dataSourceItems.items, pdfGrid, (groupIndex + 1));\n                var groupSummaryModel = new GroupSummaryModelGenerator(gObj);\n                sRows = groupSummaryModel.generateRows(dataSourceItems.items, dataSourceItems);\n                this.processAggregates(sRows, pdfGrid, border, font, brush, backgroundBrush, false);\n            }\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.processGridHeaders = function (childLevels, pdfGrid, rows, gridColumns, border, headerFont, headerBrush) {\n        var columnCount = gridColumns.length;\n        var gObj = this.parent;\n        if (this.isGrouping) {\n            columnCount += (childLevels + 1);\n        }\n        // add columns\n        pdfGrid.columns.add(columnCount);\n        if (this.isGrouping) {\n            for (var i = 0; i < (childLevels + 1); i++) {\n                pdfGrid.columns.getColumn(i).width = 20;\n            }\n        }\n        // add header\n        pdfGrid.headers.add(rows.length);\n        // set cell values of each rows in the header\n        for (var i = 0; i < rows.length; i++) {\n            var gridHeader = pdfGrid.headers.getHeader(i);\n            gridHeader.style.setBorder(border);\n            gridHeader.style.setFont(headerFont);\n            gridHeader.style.setTextBrush(headerBrush);\n            var cellIndex = this.isGrouping ? (childLevels + 1) : 0;\n            if (rows[i].cells.length === 0) {\n                for (var j = 0; j < gridHeader.cells.count; j++) {\n                    var cell = gridHeader.cells.getCell(j);\n                    cell.value = '';\n                }\n            }\n            else {\n                for (var j = 0; j < cellIndex; j++) {\n                    var cell = gridHeader.cells.getCell(j);\n                    cell.value = '';\n                }\n                for (var j = 0; j < rows[i].cells.length; j++) {\n                    var cell = gridHeader.cells.getCell(cellIndex);\n                    /* tslint:disable-next-line:no-any */\n                    var args = {\n                        cell: cell,\n                        gridCell: rows[i].cells[j],\n                        style: cell.style\n                    };\n                    /* tslint:enable:no-any */\n                    gObj.trigger(events.pdfHeaderQueryCellInfo, args);\n                    if (cell.value !== null) {\n                        cell.value = rows[i].cells[j].column.headerText;\n                        if (!isNullOrUndefined(rows[i].cells[j].column.headerTextAlign)) {\n                            cell.style.stringFormat = this.getHorizontalAlignment(rows[i].cells[j].column.headerTextAlign);\n                        }\n                        if (!isNullOrUndefined(rows[i].cells[j].rowSpan)) {\n                            cell.rowSpan = rows[i].cells[j].rowSpan;\n                            /* tslint:disable-next-line:max-line-length */\n                            cell.style.stringFormat = this.getVerticalAlignment('Bottom', cell.style.stringFormat, rows[i].cells[j].column.textAlign);\n                            for (var k = 1; k < rows[i].cells[j].rowSpan; k++) {\n                                pdfGrid.headers.getHeader(i + k).cells.getCell(cellIndex).value = null;\n                            }\n                        }\n                        if (!isNullOrUndefined(rows[i].cells[j].colSpan)) {\n                            cell.columnSpan = rows[i].cells[j].colSpan;\n                        }\n                        cellIndex += cell.columnSpan;\n                    }\n                    else {\n                        cell.value = '';\n                        cellIndex += cell.columnSpan;\n                        j = j - 1;\n                    }\n                }\n            }\n        }\n        if (pdfGrid.columns.count >= 6) {\n            pdfGrid.style.allowHorizontalOverflow = true;\n        }\n        return pdfGrid;\n    };\n    /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.processExportProperties = function (pdfExportProperties, dataSource, section) {\n        if (!isNullOrUndefined(pdfExportProperties)) {\n            if (!isNullOrUndefined(pdfExportProperties.theme)) {\n                this.gridTheme = pdfExportProperties.theme;\n            }\n            if (!isNullOrUndefined(pdfExportProperties.pageOrientation) || !isNullOrUndefined(pdfExportProperties.pageSize)) {\n                var pdfPageSettings = new PdfPageSettings();\n                /* tslint:disable-next-line:max-line-length */\n                pdfPageSettings.orientation = (pdfExportProperties.pageOrientation === 'Landscape') ? PdfPageOrientation.Landscape : PdfPageOrientation.Portrait;\n                pdfPageSettings.size = this.getPageSize(pdfExportProperties.pageSize);\n                section.setPageSettings(pdfPageSettings);\n            }\n            var clientSize = this.pdfDocument.pageSettings.size;\n            if (!isNullOrUndefined(pdfExportProperties.header)) {\n                /* tslint:disable-next-line:no-any */\n                var header = pdfExportProperties.header;\n                var position = new PointF(0, header.fromTop);\n                var size = new SizeF((clientSize.width - 80), (header.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.top = this.drawPageTemplate(new PdfPageTemplateElement(bounds), header);\n            }\n            if (!isNullOrUndefined(pdfExportProperties.footer)) {\n                /* tslint:disable-next-line:no-any */\n                var footer = pdfExportProperties.footer;\n                var position = new PointF(0, ((clientSize.width - 80) - (footer.fromBottom * 0.75)));\n                var size = new SizeF((clientSize.width - 80), (footer.height * 0.75));\n                var bounds = new RectangleF(position, size);\n                this.pdfDocument.template.bottom = this.drawPageTemplate(new PdfPageTemplateElement(bounds), footer);\n            }\n            if (!isNullOrUndefined(pdfExportProperties.includeHiddenColumn) && !this.isGrouping) {\n                this.hideColumnInclude = pdfExportProperties.includeHiddenColumn;\n            }\n            if (!isNullOrUndefined(pdfExportProperties.dataSource)) {\n                if (!(pdfExportProperties.dataSource instanceof DataManager)) {\n                    dataSource = pdfExportProperties.dataSource;\n                }\n                this.customDataSource = true;\n                this.currentViewData = false;\n            }\n            else if (!isNullOrUndefined(pdfExportProperties.exportType)) {\n                if (pdfExportProperties.exportType === 'CurrentPage') {\n                    dataSource = this.parent.getCurrentViewRecords();\n                    this.currentViewData = true;\n                    this.customDataSource = false;\n                }\n                else {\n                    this.currentViewData = false;\n                    this.customDataSource = false;\n                }\n            }\n            else {\n                this.currentViewData = false;\n                this.customDataSource = false;\n            }\n        }\n        else {\n            this.currentViewData = false;\n            this.customDataSource = false;\n        }\n        return { dataSource: dataSource, section: section };\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawPageTemplate = function (template, element) {\n        for (var _i = 0, _a = element.contents; _i < _a.length; _i++) {\n            var content = _a[_i];\n            this.processContentValidation(content);\n            switch (content.type) {\n                case 'Text':\n                    /* tslint:disable-next-line:max-line-length */\n                    if (content.value === '' || content.value === undefined || content.value === null || typeof content.value !== 'string') {\n                        throw new Error('please enter the valid input value in text content...');\n                    }\n                    this.drawText(template, content);\n                    break;\n                case 'PageNumber':\n                    this.drawPageNumber(template, content);\n                    break;\n                case 'Image':\n                    if (content.src === undefined || content.src === null || content.src === '') {\n                        throw new Error('please enter the valid base64 string in image content...');\n                    }\n                    this.drawImage(template, content);\n                    break;\n                case 'Line':\n                    this.drawLine(template, content);\n                    break;\n                default:\n                    throw new Error('Please set valid content type...');\n            }\n        }\n        return template;\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processContentValidation = function (content) {\n        if (content.type === undefined || content.type === null) {\n            throw new Error('please set valid content type...');\n        }\n        else {\n            if (content.type === 'Line') {\n                if (content.points === undefined || content.points === null) {\n                    throw new Error('please enter valid points in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.points.x1 === undefined || content.points.x1 === null || typeof content.points.x1 !== 'number') {\n                        throw new Error('please enter valid x1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y1 === undefined || content.points.y1 === null || typeof content.points.y1 !== 'number') {\n                        throw new Error('please enter valid y1 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.x2 === undefined || content.points.x2 === null || typeof content.points.x2 !== 'number') {\n                        throw new Error('please enter valid x2 co-ordinate in ' + content.type + ' points...');\n                    }\n                    if (content.points.y2 === undefined || content.points.y2 === null || typeof content.points.y2 !== 'number') {\n                        throw new Error('please enter valid y2 co-ordinate in ' + content.type + ' points...');\n                    }\n                }\n            }\n            else {\n                if (content.position === undefined || content.position === null) {\n                    throw new Error('please enter valid position in ' + content.type + ' content...');\n                }\n                else {\n                    if (content.position.x === undefined || content.position.x === null || typeof content.position.x !== 'number') {\n                        throw new Error('please enter valid x co-ordinate in ' + content.type + ' position...');\n                    }\n                    if (content.position.y === undefined || content.position.y === null || typeof content.position.y !== 'number') {\n                        throw new Error('please enter valid y co-ordinate in ' + content.type + ' position...');\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawText = function (pageTemplate, content) {\n        var font = this.getFont(content);\n        var brush = this.getBrushFromContent(content);\n        var pen = null;\n        if (!isNullOrUndefined(content.style.textPenColor)) {\n            var penColor = this.hexToRgb(content.style.textPenColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        if (brush == null && pen == null) {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var value = content.value.toString();\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var format;\n        var result = this.setContentFormat(content, format);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, result.size.width, result.size.height, result.format);\n        }\n        else {\n            pageTemplate.graphics.drawString(value, font, pen, brush, x, y, format);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawPageNumber = function (documentHeader, content) {\n        var font = this.getFont(content);\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        else {\n            brush = new PdfSolidBrush(new PdfColor(0, 0, 0));\n        }\n        var pageNumber = new PdfPageNumberField(font, brush);\n        pageNumber.numberStyle = this.getPageNumberStyle(content.pageNumberType);\n        var compositeField;\n        var format;\n        if (!isNullOrUndefined(content.format)) {\n            if (content.format.indexOf('$total') !== -1 && content.format.indexOf('$current') !== -1) {\n                var pageCount = new PdfPageCountField(font);\n                if (content.format.indexOf('$total') > content.format.indexOf('$current')) {\n                    format = content.format.replace('$current', '0');\n                    format = format.replace('$total', '1');\n                }\n                else {\n                    format = content.format.replace('$current', '1');\n                    format = format.replace('$total', '0');\n                }\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber, pageCount);\n            }\n            else if (content.format.indexOf('$current') !== -1 && content.format.indexOf('$total') === -1) {\n                format = content.format.replace('$current', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n            }\n            else {\n                var pageCount = new PdfPageCountField(font);\n                format = content.format.replace('$total', '0');\n                compositeField = new PdfCompositeField(font, brush, format, pageCount);\n            }\n        }\n        else {\n            format = '{0}';\n            compositeField = new PdfCompositeField(font, brush, format, pageNumber);\n        }\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var result = this.setContentFormat(content, compositeField.stringFormat);\n        if (result !== null && !isNullOrUndefined(result.format) && !isNullOrUndefined(result.size)) {\n            compositeField.stringFormat = result.format;\n            compositeField.bounds = new RectangleF(x, y, result.size.width, result.size.height);\n        }\n        compositeField.draw(documentHeader.graphics, x, y);\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawImage = function (documentHeader, content) {\n        var x = content.position.x * 0.75;\n        var y = content.position.y * 0.75;\n        var width = (!isNullOrUndefined(content.size)) ? (content.size.width * 0.75) : undefined;\n        var height = (!isNullOrUndefined(content.size)) ? (content.size.height * 0.75) : undefined;\n        var image = new PdfBitmap(content.src);\n        if (!isNullOrUndefined(width)) {\n            documentHeader.graphics.drawImage(image, x, y, width, height);\n        }\n        else {\n            documentHeader.graphics.drawImage(image, x, y);\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.drawLine = function (documentHeader, content) {\n        var x1 = content.points.x1 * 0.75;\n        var y1 = content.points.y1 * 0.75;\n        var x2 = content.points.x2 * 0.75;\n        var y2 = content.points.y2 * 0.75;\n        var pen = this.getPenFromContent(content);\n        if (!isNullOrUndefined(content.style) && content.style !== null) {\n            if (!isNullOrUndefined(content.style.penSize) && content.style.penSize !== null && typeof content.style.penSize === 'number') {\n                pen.width = content.style.penSize * 0.75;\n            }\n            pen.dashStyle = this.getDashStyle(content.style.dashStyle);\n        }\n        documentHeader.graphics.drawLine(pen, x1, y1, x2, y2);\n    };\n    /* tslint:disable-next-line:no-any */ /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.processAggregates = function (sRows, pdfGrid, border, font, brush, backgroundBrush, isCaption, captionRow, groupIndex) {\n        for (var _i = 0, sRows_1 = sRows; _i < sRows_1.length; _i++) {\n            var row = sRows_1[_i];\n            var startIndex = 0;\n            var leastCaptionSummaryIndex = -1;\n            var index = 0;\n            var isEmpty = true;\n            /* tslint:disable-next-line:no-any */\n            var value = [];\n            for (var i = 0; i < pdfGrid.columns.count; i++) {\n                /* tslint:disable-next-line:no-any */\n                var cell = row.cells[index];\n                if (!this.hideColumnInclude) {\n                    while (cell.visible === undefined) {\n                        if (!isNullOrUndefined(captionRow)) {\n                            if (!isNullOrUndefined(captionRow.cells.getCell(i).value)) {\n                                value.push('');\n                                value.push(captionRow.cells.getCell(i).value);\n                                isEmpty = false;\n                                i += 1;\n                            }\n                            else {\n                                value.push('');\n                            }\n                        }\n                        else {\n                            value.push('');\n                        }\n                        i += 1;\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                    while (!isNullOrUndefined(cell.visible) && !cell.visible) {\n                        index = index + 1;\n                        cell = row.cells[index];\n                    }\n                }\n                if (cell.isDataCell) {\n                    var templateFn = {};\n                    /* tslint:disable-next-line:max-line-length */\n                    if (!isNullOrUndefined(cell.column.footerTemplate) || !isNullOrUndefined(cell.column.groupCaptionTemplate) || !isNullOrUndefined(cell.column.groupFooterTemplate)) {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getTemplateFunction(templateFn, i, leastCaptionSummaryIndex, cell.column);\n                        templateFn = result.templateFunction;\n                        leastCaptionSummaryIndex = result.leastCaptionSummaryIndex;\n                        /* tslint:disable-next-line:max-line-length */\n                        var txt = (templateFn[getEnumValue(CellType, cell.cellType)](row.data[cell.column.field ? cell.column.field : cell.column.columnName]));\n                        value.push(txt[0].wholeText);\n                        isEmpty = false;\n                    }\n                    else {\n                        /* tslint:disable-next-line:no-any */\n                        var result = this.getSummaryWithoutTemplate(row.data[cell.column.field]);\n                        if (!isNullOrUndefined(result)) {\n                            value.push(result);\n                        }\n                    }\n                }\n                else {\n                    value.push('');\n                }\n                if (isEmpty && value[i] !== '' && !isNullOrUndefined(value[i]) && value[i] !== null) {\n                    isEmpty = false;\n                }\n                index += 1;\n            }\n            if (!isEmpty) {\n                if (!isCaption) {\n                    var gridRow = pdfGrid.rows.addRow();\n                    gridRow.style.setBorder(border);\n                    gridRow.style.setFont(font);\n                    gridRow.style.setTextBrush(brush);\n                    gridRow.style.setBackgroundBrush(backgroundBrush);\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        gridRow.cells.getCell(i).value = value[i].toString();\n                    }\n                }\n                else {\n                    for (var i = 0; i < pdfGrid.columns.count; i++) {\n                        captionRow.cells.getCell(i).value = value[i].toString();\n                        if (i === (groupIndex + 1) && leastCaptionSummaryIndex !== -1) {\n                            captionRow.cells.getCell(i).columnSpan = leastCaptionSummaryIndex - (groupIndex + 1);\n                        }\n                        else if (i === (groupIndex + 1) && leastCaptionSummaryIndex === -1) {\n                            captionRow.cells.getCell(i).columnSpan = pdfGrid.columns.count - (groupIndex + 1);\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getTemplateFunction = function (templateFn, index, leastCaptionSummaryIndex, column) {\n        if (!isNullOrUndefined(column.footerTemplate)) {\n            templateFn[getEnumValue(CellType, CellType.Summary)] = compile(column.footerTemplate);\n        }\n        else if (!isNullOrUndefined(column.groupCaptionTemplate)) {\n            if (leastCaptionSummaryIndex === -1) {\n                leastCaptionSummaryIndex = index;\n            }\n            templateFn[getEnumValue(CellType, CellType.CaptionSummary)] = compile(column.groupCaptionTemplate);\n        }\n        else {\n            templateFn[getEnumValue(CellType, CellType.GroupSummary)] = compile(column.groupFooterTemplate);\n        }\n        return { templateFunction: templateFn, leastCaptionSummaryIndex: leastCaptionSummaryIndex };\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getSummaryWithoutTemplate = function (data) {\n        if (!isNullOrUndefined(data.Sum)) {\n            return data.Sum;\n        }\n        else if (!isNullOrUndefined(data.Average)) {\n            return data.Average;\n        }\n        else if (!isNullOrUndefined(data.Max)) {\n            return data.Max;\n        }\n        else if (!isNullOrUndefined(data.Min)) {\n            return data.Min;\n        }\n        else if (!isNullOrUndefined(data.Count)) {\n            return data.Count;\n        }\n        else if (!isNullOrUndefined(data.TrueCount)) {\n            return data.TrueCount;\n        }\n        else if (!isNullOrUndefined(data.FalseCount)) {\n            return data.FalseCount;\n        }\n        else if (!isNullOrUndefined(data.Custom)) {\n            return data.Custom;\n        }\n    };\n    // Set alignment, width and type of the values of the column\n    /* tslint:disable:no-any */\n    /* tslint:disable-next-line:max-line-length */\n    PdfExport.prototype.setColumnProperties = function (gridColumns, pdfGrid) {\n        var startIndex = this.isGrouping ? (pdfGrid.columns.count - gridColumns.length) : 0;\n        for (var i = 0; i < gridColumns.length; i++) {\n            if (!isNullOrUndefined(gridColumns[i].textAlign)) {\n                pdfGrid.columns.getColumn(i + startIndex).format = this.getHorizontalAlignment(gridColumns[i].textAlign);\n            }\n            // Need to add width consideration with % value\n            if (pdfGrid.style.allowHorizontalOverflow && !isNullOrUndefined(gridColumns[i].width)) {\n                /* tslint:disable-next-line:max-line-length */\n                pdfGrid.columns.getColumn(i + startIndex).width = typeof gridColumns[i].width === 'number' ? gridColumns[i].width * 0.75 : this.helper.getConvertedWidth(gridColumns[i].width) * 0.75;\n            }\n        }\n    };\n    /**\n     * set default style properties of each rows in exporting grid\n     * @private\n     */\n    PdfExport.prototype.setRecordThemeStyle = function (row, border) {\n        if (!isNullOrUndefined(this.gridTheme) && !isNullOrUndefined(this.gridTheme.record) && this.gridTheme.record !== null) {\n            var pdfColor = new PdfColor();\n            if (!isNullOrUndefined(this.gridTheme.record.fontColor)) {\n                var penBrushColor = this.hexToRgb(this.gridTheme.record.fontColor);\n                pdfColor = new PdfColor(penBrushColor.r, penBrushColor.g, penBrushColor.b);\n            }\n            row.style.setTextBrush(new PdfSolidBrush(pdfColor));\n        }\n        else {\n            row.style.setTextBrush(new PdfSolidBrush(new PdfColor(0, 0, 0)));\n        }\n        row.style.setBorder(border);\n        return row;\n    };\n    /**\n     * generate the formatted cell values\n     * @private\n     */\n    /* tslint:disable-next-line:max-line-length */ /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processRecord = function (border, columns, gObj, dataSource, pdfGrid, groupIndex) {\n        var startIndex = this.isGrouping ? groupIndex : 0;\n        for (var _i = 0, _a = dataSource; _i < _a.length; _i++) {\n            var items = _a[_i];\n            // create a new row and set default style properties\n            var gridRow = this.setRecordThemeStyle(pdfGrid.rows.addRow(), border);\n            for (var j = 0; j < columns.length; j++) {\n                /* tslint:disable:no-any */\n                var value = (!isNullOrUndefined(columns[j].field) && getValue(columns[j].field, items)) || '';\n                var column = columns[j];\n                var foreignKeyData = void 0;\n                if (column.isForeignColumn && column.isForeignColumn()) {\n                    foreignKeyData = this.helper.getFData(value, column);\n                    value = getValue(column.foreignKeyValue, foreignKeyData);\n                }\n                var data = items;\n                var args = {\n                    data: data,\n                    value: value,\n                    column: column,\n                    style: undefined,\n                    colSpan: 1\n                };\n                args.value = this.exportValueFormatter.formatCellValue(args);\n                /* tslint:enable:no-any */\n                gObj.trigger(events.pdfQueryCellInfo, args);\n                var cell = gridRow.cells.getCell(j + startIndex);\n                cell.value = args.value;\n                if (!isNullOrUndefined(args.style)) {\n                    this.processCellStyle(cell, args);\n                }\n                if (args.colSpan > 1) {\n                    if ((j + startIndex + 1 + args.colSpan) > gridRow.cells.count) {\n                        args.colSpan = gridRow.cells.count - (j + startIndex + 1);\n                    }\n                    cell.columnSpan = args.colSpan;\n                    for (var i = 1; i < cell.columnSpan; i++) {\n                        var spanCell = gridRow.cells.getCell(j + startIndex + i);\n                        spanCell.value = '';\n                    }\n                    j += (args.colSpan - 1);\n                }\n            }\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.processCellStyle = function (cell, args) {\n        if (!isNullOrUndefined(args.style.backgroundColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var backColor = this.hexToRgb(args.style.backgroundColor);\n            cell.style.backgroundBrush = new PdfSolidBrush(new PdfColor(backColor.r, backColor.g, backColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textAlignment)) {\n            cell.style.stringFormat = this.getHorizontalAlignment(args.style.textAlignment);\n        }\n        if (!isNullOrUndefined(args.style.verticalAlignment)) {\n            cell.style.stringFormat = this.getVerticalAlignment(args.style.verticalAlignment, cell.style.stringFormat);\n        }\n        if (!isNullOrUndefined(args.style.textBrushColor)) {\n            var textBrushColor = this.hexToRgb(args.style.textBrushColor);\n            cell.style.textBrush = new PdfSolidBrush(new PdfColor(textBrushColor.r, textBrushColor.g, textBrushColor.b));\n        }\n        if (!isNullOrUndefined(args.style.textPenColor)) {\n            var textPenColor = this.hexToRgb(args.style.textPenColor);\n            cell.style.textPen = new PdfPen(new PdfColor(textPenColor.r, textPenColor.g, textPenColor.b));\n        }\n        /* tslint:disable-next-line:max-line-length */\n        if (!isNullOrUndefined(args.style.fontFamily) || !isNullOrUndefined(args.style.fontSize) || !isNullOrUndefined(args.style.bold) || !isNullOrUndefined(args.style.italic) || !isNullOrUndefined(args.style.underline) || !isNullOrUndefined(args.style.strikeout)) {\n            cell.style.font = this.getFont(args);\n        }\n        if (!isNullOrUndefined(args.style.border)) {\n            var border = new PdfBorders();\n            var borderWidth = args.style.border.width;\n            // set border width\n            var width = (!isNullOrUndefined(borderWidth) && typeof borderWidth === 'number') ? (borderWidth * 0.75) : (undefined);\n            // set border color\n            var color = new PdfColor(196, 196, 196);\n            if (!isNullOrUndefined(args.style.border.color)) {\n                var borderColor = this.hexToRgb(args.style.border.color);\n                color = new PdfColor(borderColor.r, borderColor.g, borderColor.b);\n            }\n            var pen = new PdfPen(color, width);\n            // set border dashStyle 'Solid <default>, Dash, Dot, DashDot, DashDotDot'\n            if (!isNullOrUndefined(args.style.border.dashStyle)) {\n                pen.dashStyle = this.getDashStyle(args.style.border.dashStyle);\n            }\n            border.all = pen;\n            cell.style.borders = border;\n        }\n        if (!isNullOrUndefined(args.style.paragraphIndent)) {\n            cell.style.stringFormat = new PdfStringFormat();\n            cell.style.stringFormat.paragraphIndent = args.style.paragraphIndent;\n        }\n    };\n    /**\n     * set text alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getHorizontalAlignment = function (textAlign, format) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n        }\n        switch (textAlign) {\n            case 'Right':\n                format.alignment = PdfTextAlignment.Right;\n                break;\n            case 'Center':\n                format.alignment = PdfTextAlignment.Center;\n                break;\n            case 'Justify':\n                format.alignment = PdfTextAlignment.Justify;\n                break;\n            case 'Left':\n                format.alignment = PdfTextAlignment.Left;\n                break;\n        }\n        return format;\n    };\n    /**\n     * set vertical alignment of each columns in exporting grid\n     * @private\n     */\n    PdfExport.prototype.getVerticalAlignment = function (verticalAlign, format, textAlign) {\n        if (format === undefined) {\n            format = new PdfStringFormat();\n            format = this.getHorizontalAlignment(textAlign, format);\n        }\n        switch (verticalAlign) {\n            case 'Bottom':\n                format.lineAlignment = PdfVerticalAlignment.Bottom;\n                break;\n            case 'Middle':\n                format.lineAlignment = PdfVerticalAlignment.Middle;\n                break;\n            case 'Top':\n                format.lineAlignment = PdfVerticalAlignment.Top;\n                break;\n        }\n        return format;\n    };\n    PdfExport.prototype.getFontFamily = function (fontFamily) {\n        switch (fontFamily) {\n            case 'TimesRoman':\n                return 2;\n            case 'Courier':\n                return 1;\n            case 'Symbol':\n                return 3;\n            case 'ZapfDingbats':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getFont = function (content) {\n        var fontSize = (!isNullOrUndefined(content.style.fontSize)) ? (content.style.fontSize * 0.75) : 9.75;\n        /* tslint:disable-next-line:max-line-length */\n        var fontFamily = (!isNullOrUndefined(content.style.fontFamily)) ? (this.getFontFamily(content.style.fontFamily)) : PdfFontFamily.Helvetica;\n        var fontStyle = PdfFontStyle.Regular;\n        if (!isNullOrUndefined(content.style.bold) && content.style.bold) {\n            fontStyle |= PdfFontStyle.Bold;\n        }\n        if (!isNullOrUndefined(content.style.italic) && content.style.italic) {\n            fontStyle |= PdfFontStyle.Italic;\n        }\n        if (!isNullOrUndefined(content.style.underline) && content.style.underline) {\n            fontStyle |= PdfFontStyle.Underline;\n        }\n        if (!isNullOrUndefined(content.style.strikeout) && content.style.strikeout) {\n            fontStyle |= PdfFontStyle.Strikeout;\n        }\n        return new PdfStandardFont(fontFamily, fontSize, fontStyle);\n    };\n    PdfExport.prototype.getPageNumberStyle = function (pageNumberType) {\n        switch (pageNumberType) {\n            case 'LowerLatin':\n                return 2;\n            case 'LowerRoman':\n                return 3;\n            case 'UpperLatin':\n                return 4;\n            case 'UpperRoman':\n                return 5;\n            default:\n                return 1;\n        }\n    };\n    /* tslint:disable-next-line:max-line-length */ /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.setContentFormat = function (content, format) {\n        if (!isNullOrUndefined(content.size)) {\n            var width = content.size.width * 0.75;\n            var height = content.size.height * 0.75;\n            format = new PdfStringFormat(PdfTextAlignment.Left, PdfVerticalAlignment.Middle);\n            if (!isNullOrUndefined(content.style.hAlign)) {\n                switch (content.style.hAlign) {\n                    case 'Right':\n                        format.alignment = PdfTextAlignment.Right;\n                        break;\n                    case 'Center':\n                        format.alignment = PdfTextAlignment.Center;\n                        break;\n                    case 'Justify':\n                        format.alignment = PdfTextAlignment.Justify;\n                        break;\n                    default:\n                        format.alignment = PdfTextAlignment.Left;\n                }\n            }\n            if (!isNullOrUndefined(content.style.vAlign)) {\n                format = this.getVerticalAlignment(content.style.vAlign, format);\n            }\n            return { format: format, size: new SizeF(width, height) };\n        }\n        return null;\n    };\n    PdfExport.prototype.getPageSize = function (pageSize) {\n        switch (pageSize) {\n            case 'Letter':\n                return new SizeF(612, 792);\n            case 'Note':\n                return new SizeF(540, 720);\n            case 'Legal':\n                return new SizeF(612, 1008);\n            case 'A0':\n                return new SizeF(2380, 3368);\n            case 'A1':\n                return new SizeF(1684, 2380);\n            case 'A2':\n                return new SizeF(1190, 1684);\n            case 'A3':\n                return new SizeF(842, 1190);\n            case 'A5':\n                return new SizeF(421, 595);\n            case 'A6':\n                return new SizeF(297, 421);\n            case 'A7':\n                return new SizeF(210, 297);\n            case 'A8':\n                return new SizeF(148, 210);\n            case 'A9':\n                return new SizeF(105, 148);\n            // case 'A10':\n            //     return new SizeF(74, 105);\n            case 'B0':\n                return new SizeF(2836, 4008);\n            case 'B1':\n                return new SizeF(2004, 2836);\n            case 'B2':\n                return new SizeF(1418, 2004);\n            case 'B3':\n                return new SizeF(1002, 1418);\n            case 'B4':\n                return new SizeF(709, 1002);\n            case 'B5':\n                return new SizeF(501, 709);\n            case 'Archa':\n                return new SizeF(648, 864);\n            case 'Archb':\n                return new SizeF(864, 1296);\n            case 'Archc':\n                return new SizeF(1296, 1728);\n            case 'Archd':\n                return new SizeF(1728, 2592);\n            case 'Arche':\n                return new SizeF(2592, 3456);\n            case 'Flsa':\n                return new SizeF(612, 936);\n            case 'HalfLetter':\n                return new SizeF(396, 612);\n            case 'Letter11x17':\n                return new SizeF(792, 1224);\n            case 'Ledger':\n                return new SizeF(1224, 792);\n            default:\n                return new SizeF(595, 842);\n        }\n    };\n    PdfExport.prototype.getDashStyle = function (dashStyle) {\n        switch (dashStyle) {\n            case 'Dash':\n                return 1;\n            case 'Dot':\n                return 2;\n            case 'DashDot':\n                return 3;\n            case 'DashDotDot':\n                return 4;\n            default:\n                return 0;\n        }\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getPenFromContent = function (content) {\n        var pen = new PdfPen(new PdfColor(0, 0, 0));\n        if (!isNullOrUndefined(content.style) && content.style !== null && !isNullOrUndefined(content.style.penColor)) {\n            var penColor = this.hexToRgb(content.style.penColor);\n            pen = new PdfPen(new PdfColor(penColor.r, penColor.g, penColor.b));\n        }\n        return pen;\n    };\n    /* tslint:disable-next-line:no-any */\n    PdfExport.prototype.getBrushFromContent = function (content) {\n        var brush = null;\n        if (!isNullOrUndefined(content.style.textBrushColor)) {\n            /* tslint:disable-next-line:max-line-length */\n            var brushColor = this.hexToRgb(content.style.textBrushColor);\n            brush = new PdfSolidBrush(new PdfColor(brushColor.r, brushColor.g, brushColor.b));\n        }\n        return brush;\n    };\n    PdfExport.prototype.hexToRgb = function (hex) {\n        if (hex === null || hex === '' || hex.length !== 7) {\n            throw new Error('please set valid hex value for color...');\n        }\n        hex = hex.substring(1);\n        var bigint = parseInt(hex, 16);\n        var r = (bigint >> 16) & 255;\n        var g = (bigint >> 8) & 255;\n        var b = bigint & 255;\n        return { r: r, g: g, b: b };\n    };\n    /**\n     * To destroy the pdf export\n     * @returnÂ {void}\n     * @hidden\n     */\n    PdfExport.prototype.destroy = function () {\n        //destroy for exporting\n    };\n    return PdfExport;\n}());\nexport { PdfExport };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { addClass, removeClass, attributes } from '@syncfusion/ej2-base';\nimport { Button } from '@syncfusion/ej2-buttons';\nimport { CellRenderer } from './cell-renderer';\nimport { appendChildren } from '../base/util';\n/**\n * `CommandColumn` used to render command column in grid\n * @hidden\n */\nvar CommandColumnRenderer = /** @class */ (function (_super) {\n    __extends(CommandColumnRenderer, _super);\n    function CommandColumnRenderer(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.buttonElement = _this.parent.createElement('button', {});\n        _this.unbounDiv = _this.parent.createElement('div', { className: 'e-unboundcelldiv', styles: 'display: inline-block' });\n        _this.element = _this.parent.createElement('TD', {\n            className: 'e-rowcell e-unboundcell', attrs: {\n                role: 'gridcell', tabindex: '-1'\n            }\n        });\n        return _this;\n    }\n    /**\n     * Function to render the cell content based on Column object.\n     * @param  {Column} column\n     * @param  {Object} data\n     * @param  {{[x:string]:Object}} attributes?\n     * @param  {Element}\n     */\n    CommandColumnRenderer.prototype.render = function (cell, data, attributes) {\n        var node = this.element.cloneNode();\n        node.appendChild(this.unbounDiv.cloneNode());\n        node.setAttribute('aria-label', 'is Command column column header ' + cell.column.headerText);\n        if (cell.column.commandsTemplate) {\n            appendChildren(node.firstElementChild, cell.column.getColumnTemplate()(data));\n        }\n        else {\n            for (var _i = 0, _a = cell.commands; _i < _a.length; _i++) {\n                var command = _a[_i];\n                node = this.renderButton(node, command, attributes.index);\n            }\n        }\n        this.setAttributes(node, cell, attributes);\n        if (this.parent.isEdit) {\n            addClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n        }\n        else {\n            addClass(node.querySelectorAll('.e-save-cancel'), 'e-hide');\n            removeClass(node.querySelectorAll('.e-edit-delete'), 'e-hide');\n        }\n        return node;\n    };\n    CommandColumnRenderer.prototype.renderButton = function (node, buttonOption, index) {\n        var button = this.buttonElement.cloneNode();\n        attributes(button, {\n            'id': this.parent.element.id + (buttonOption.type || '') + '_' + index, 'type': 'button',\n            title: buttonOption.buttonOption.content || this.localizer.getConstant(buttonOption.type) || buttonOption.type\n        });\n        button.onclick = buttonOption.buttonOption.click;\n        var buttonObj = new Button(buttonOption.buttonOption, button);\n        buttonObj.commandType = buttonOption.type;\n        node.firstElementChild.appendChild(buttonObj.element);\n        switch (buttonOption.type) {\n            case 'Edit':\n            case 'Delete':\n                addClass([button], ['e-edit-delete', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n            case 'Cancel':\n            case 'Save':\n                addClass([button], ['e-save-cancel', 'e-' + buttonOption.type.toLowerCase() + 'button']);\n                break;\n        }\n        return node;\n    };\n    return CommandColumnRenderer;\n}(CellRenderer));\nexport { CommandColumnRenderer };\n","import { closest } from '@syncfusion/ej2-base';\nimport { initialEnd, click, keyPressed } from '../base/constant';\nimport { CellType } from '../base/enum';\nimport { CommandColumnRenderer } from '../renderer/command-column-renderer';\n/**\n * `CommandColumn` used to handle the command column actions.\n * @hidden\n */\nvar CommandColumn = /** @class */ (function () {\n    function CommandColumn(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    CommandColumn.prototype.initiateRender = function () {\n        var cellFac = this.locator.getService('cellRendererFactory');\n        cellFac.addCellRenderer(CellType.CommandColumn, new CommandColumnRenderer(this.parent, this.locator));\n    };\n    CommandColumn.prototype.commandClickHandler = function (e) {\n        var gObj = this.parent;\n        var gID = gObj.element.id;\n        var target = closest(e.target, 'button');\n        if (!target || !gObj.editModule || !closest(e.target, '.e-unboundcell')) {\n            return;\n        }\n        var buttonObj = target.ej2_instances[0];\n        var type = buttonObj.commandType;\n        if (buttonObj.disabled) {\n            return;\n        }\n        switch (type) {\n            case 'Edit':\n                gObj.editModule.endEdit();\n                gObj.editModule.startEdit(closest(target, 'tr'));\n                break;\n            case 'Cancel':\n                gObj.editModule.closeEdit();\n                break;\n            case 'Save':\n                gObj.editModule.endEdit();\n                break;\n            case 'Delete':\n                gObj.editModule.endEdit();\n                gObj.clearSelection();\n                //for toogle issue when dbl click\n                gObj.selectRow(parseInt(closest(target, 'tr').getAttribute('aria-rowindex'), 10), false);\n                gObj.editModule.deleteRecord();\n                break;\n        }\n    };\n    /**\n     * For internal use only - Get the module name.\n     */\n    CommandColumn.prototype.getModuleName = function () {\n        return 'commandColumn';\n    };\n    /**\n     * To destroy CommandColumn.\n     * @method destroy\n     * @return {void}\n     */\n    CommandColumn.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeEventListener();\n    };\n    CommandColumn.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(click, this.commandClickHandler);\n        this.parent.off(initialEnd, this.initiateRender);\n        this.parent.off(keyPressed, this.keyPressHandler);\n    };\n    CommandColumn.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(click, this.commandClickHandler, this);\n        this.parent.on(initialEnd, this.initiateRender, this);\n        this.parent.on(keyPressed, this.keyPressHandler, this);\n    };\n    CommandColumn.prototype.keyPressHandler = function (e) {\n        if (e.action === 'enter' && closest(e.target, '.e-unboundcelldiv')) {\n            this.commandClickHandler(e);\n            e.preventDefault();\n        }\n    };\n    return CommandColumn;\n}());\nexport { CommandColumn };\n","import { closest, isNullOrUndefined, EventHandler } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport * as events from '../base/constant';\nimport { Resize } from '../actions/resize';\nimport { Page } from '../actions/page';\nimport { parentsUntil } from '../base/util';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { PdfExport } from '../actions/pdf-export';\nimport { ExcelExport } from '../actions/excel-export';\nexport var menuClass = {\n    header: '.e-gridheader',\n    content: '.e-gridcontent',\n    edit: '.e-inline-edit',\n    batchEdit: '.e-editedbatchcell',\n    editIcon: 'e-edit',\n    pager: '.e-gridpager',\n    delete: 'e-delete',\n    save: 'e-save',\n    cancel: 'e-cancel',\n    copy: 'e-copy',\n    pdf: 'e-pdfexport',\n    group: 'e-icon-group',\n    ungroup: 'e-icon-ungroup',\n    csv: 'e-csvexport',\n    excel: 'e-excelexport',\n    fPage: 'e-icon-first',\n    nPage: 'e-icon-next',\n    lPage: 'e-icon-last',\n    pPage: 'e-icon-prev',\n    ascending: 'e-icon-ascending',\n    descending: 'e-icon-descending',\n    groupHeader: 'e-groupdroparea',\n    touchPop: 'e-gridpopup'\n};\n/**\n * The `ContextMenu` module is used to handle context menu actions.\n */\nvar ContextMenu = /** @class */ (function () {\n    function ContextMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.localeText = this.setLocaleKey();\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialLoad, this.render, this);\n    };\n    /**\n     * @hidden\n     */\n    ContextMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.render);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        EventHandler.remove(this.element, 'keydown', this.keyDownHandler.bind(this));\n    };\n    ContextMenu.prototype.keyDownHandler = function (e) {\n        if (e.code === 'Tab' || e.which === 9) {\n            this.contextMenu.close();\n        }\n    };\n    ContextMenu.prototype.render = function () {\n        this.parent.element.classList.add('e-noselect');\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_cmenu' });\n        EventHandler.add(this.element, 'keydown', this.keyDownHandler.bind(this));\n        this.parent.element.appendChild(this.element);\n        var target = '#' + this.gridID;\n        this.contextMenu = new Menu({\n            items: this.getMenuItems(),\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            target: target,\n            select: this.contextMenuItemClick.bind(this),\n            beforeOpen: this.contextMenuBeforeOpen.bind(this),\n            onOpen: this.contextMenuOpen.bind(this),\n            onClose: this.contextMenuOnClose.bind(this),\n            cssClass: 'e-grid-menu'\n        });\n        this.contextMenu.appendTo(this.element);\n    };\n    ContextMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.contextMenu) {\n                this.contextMenu.destroy();\n                remove(this.element);\n                this.parent.element.classList.remove('e-noselect');\n            }\n            this.render();\n        }\n    };\n    ContextMenu.prototype.getMenuItems = function () {\n        var menuItems = [];\n        var exportItems = [];\n        for (var _i = 0, _a = this.parent.contextMenuItems; _i < _a.length; _i++) {\n            var item = _a[_i];\n            if (typeof item === 'string' && this.getDefaultItems().indexOf(item) !== -1) {\n                if (item.toLocaleLowerCase().indexOf('export') !== -1) {\n                    exportItems.push(this.buildDefaultItems(item));\n                }\n                else {\n                    menuItems.push(this.buildDefaultItems(item));\n                }\n            }\n            else if (typeof item !== 'string') {\n                menuItems.push(item);\n            }\n        }\n        if (exportItems.length > 0) {\n            var exportGroup = this.buildDefaultItems('export');\n            exportGroup.items = exportItems;\n            menuItems.push(exportGroup);\n        }\n        return menuItems;\n    };\n    ContextMenu.prototype.getLastPage = function () {\n        var totalpage = Math.floor(this.parent.pageSettings.totalRecordsCount / this.parent.pageSettings.pageSize);\n        if (this.parent.pageSettings.totalRecordsCount % this.parent.pageSettings.pageSize) {\n            totalpage += 1;\n        }\n        return totalpage;\n    };\n    ContextMenu.prototype.contextMenuOpen = function () {\n        this.isOpen = true;\n    };\n    ContextMenu.prototype.contextMenuItemClick = function (args) {\n        var item = this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Edit':\n                if (this.parent.editSettings.mode === 'Batch') {\n                    if (this.row && this.cell && !isNaN(parseInt(this.cell.getAttribute('aria-colindex'), 10))) {\n                        this.parent.editModule.editCell(parseInt(this.row.getAttribute('aria-rowindex'), 10), this.parent.getColumns()[parseInt(this.cell.getAttribute('aria-colindex'), 10)].field);\n                    }\n                }\n                else {\n                    this.parent.editModule.endEdit();\n                    this.parent.editModule.startEdit(this.row);\n                }\n                break;\n            case 'Delete':\n                if (this.parent.editSettings.mode !== 'Batch') {\n                    this.parent.editModule.endEdit();\n                }\n                if (this.parent.getSelectedRecords().length === 1) {\n                    this.parent.editModule.deleteRow(this.row);\n                }\n                else {\n                    this.parent.deleteRecord();\n                }\n                break;\n            case 'Save':\n                this.parent.editModule.endEdit();\n                break;\n            case 'Cancel':\n                this.parent.editModule.closeEdit();\n                break;\n            case 'Copy':\n                this.parent.copy();\n                break;\n            case 'PdfExport':\n                this.parent.pdfExport();\n                break;\n            case 'ExcelExport':\n                this.parent.excelExport();\n                break;\n            case 'CsvExport':\n                this.parent.csvExport();\n                break;\n            case 'SortAscending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.isOpen = false;\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'FirstPage':\n                this.parent.goToPage(1);\n                break;\n            case 'PrevPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage - 1);\n                break;\n            case 'LastPage':\n                this.parent.goToPage(this.getLastPage());\n                break;\n            case 'NextPage':\n                this.parent.goToPage(this.parent.pageSettings.currentPage + 1);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.contextMenuClick, args);\n    };\n    ContextMenu.prototype.contextMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.updateItemStatus();\n        }\n    };\n    ContextMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ContextMenu.prototype.updateItemStatus = function () {\n        this.contextMenu.showItems(this.hiddenItems);\n        this.contextMenu.enableItems(this.disableItems);\n        this.hiddenItems = [];\n        this.disableItems = [];\n        this.isOpen = false;\n    };\n    ContextMenu.prototype.contextMenuBeforeOpen = function (args) {\n        var changedRecords = 'changedRecords';\n        var addedRecords = 'addedRecords';\n        var deletedRecords = 'deletedRecords';\n        var closestGrid = closest(args.event.target, '.e-grid');\n        if (args.event && closestGrid && closestGrid !== this.parent.element) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + menuClass.groupHeader)\n            || closest(args.event.target, '.' + menuClass.touchPop) ||\n            closest(args.event.target, '.e-summarycell') ||\n            closest(args.event.target, '.e-groupcaption') ||\n            closest(args.event.target, '.e-filterbarcell'))) {\n            args.cancel = true;\n        }\n        else {\n            this.targetColumn = this.getColumn(args.event);\n            this.selectRow(args.event, this.parent.selectionSettings.type !== 'Multiple');\n            for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n                var item = _a[_i];\n                var key = this.getKeyFromId(item.id);\n                var dItem = this.defaultItems[key];\n                if (this.getDefaultItems().indexOf(key) !== -1) {\n                    if (this.ensureDisabledStatus(key)) {\n                        this.disableItems.push(item.text);\n                    }\n                    if (args.event && (this.ensureTarget(args.event.target, menuClass.edit) ||\n                        this.ensureTarget(args.event.target, menuClass.batchEdit))) {\n                        if (key !== 'Save' && key !== 'Cancel') {\n                            this.hiddenItems.push(item.text);\n                        }\n                    }\n                    else if (this.parent.editSettings.mode === 'Batch' && ((closest(args.event.target, '.e-gridform')) ||\n                        this.parent.editModule.getBatchChanges()[changedRecords].length ||\n                        this.parent.editModule.getBatchChanges()[addedRecords].length ||\n                        this.parent.editModule.getBatchChanges()[deletedRecords].length) && (key === 'Save' || key === 'Cancel')) {\n                        continue;\n                    }\n                    else if (isNullOrUndefined(args.parentItem) && args.event\n                        && !this.ensureTarget(args.event.target, dItem.target)) {\n                        this.hiddenItems.push(item.text);\n                    }\n                }\n                else if (item.target && args.event &&\n                    !this.ensureTarget(args.event.target, item.target)) {\n                    this.hiddenItems.push(item.text);\n                }\n            }\n            this.contextMenu.enableItems(this.disableItems, false);\n            this.contextMenu.hideItems(this.hiddenItems);\n            this.eventArgs = args.event;\n            args.column = this.targetColumn;\n            this.parent.trigger(events.contextMenuOpen, args);\n            if (this.hiddenItems.length === args.items.length) {\n                this.updateItemStatus();\n                args.cancel = true;\n            }\n        }\n    };\n    ContextMenu.prototype.ensureTarget = function (targetElement, selector) {\n        var target = targetElement;\n        if (this.ensureFrozenHeader(targetElement) && (selector === menuClass.header || selector === menuClass.content)) {\n            target = closest(targetElement, selector === menuClass.header ? 'thead' : 'tbody');\n        }\n        else if (selector === menuClass.content || selector === menuClass.header) {\n            target = parentsUntil(closest(targetElement, '.e-table'), selector.substr(1, selector.length));\n        }\n        else {\n            target = closest(targetElement, selector);\n        }\n        return target && parentsUntil(target, 'e-grid') === this.parent.element;\n    };\n    ContextMenu.prototype.ensureFrozenHeader = function (targetElement) {\n        return (this.parent.getFrozenColumns() || this.parent.frozenRows)\n            && closest(targetElement, menuClass.header) ? true : false;\n    };\n    ContextMenu.prototype.ensureDisabledStatus = function (item) {\n        var _this = this;\n        var status = false;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !(this.parent.ensureModuleInjected(Resize) && !this.parent.isEdit);\n                break;\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0)) {\n                    status = true;\n                }\n                break;\n            case 'Ungroup':\n                if (!this.parent.allowGrouping || !this.parent.ensureModuleInjected(Group)\n                    || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                        && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'Edit':\n            case 'Delete':\n            case 'Save':\n            case 'Cancel':\n                if (!this.parent.editModule || (this.parent.getDataRows().length === 0)) {\n                    status = true;\n                }\n                break;\n            case 'Copy':\n                if (this.parent.getSelectedRowIndexes().length === 0 ||\n                    this.parent.getCurrentViewRecords().length === 0) {\n                    status = true;\n                }\n                break;\n            case 'export':\n                if ((!this.parent.allowExcelExport || !this.parent.excelExport) ||\n                    !this.parent.ensureModuleInjected(PdfExport) && !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'PdfExport':\n                if (!(this.parent.allowPdfExport) || !this.parent.ensureModuleInjected(PdfExport)) {\n                    status = true;\n                }\n                break;\n            case 'ExcelExport':\n            case 'CsvExport':\n                if (!(this.parent.allowExcelExport) || !this.parent.ensureModuleInjected(ExcelExport)) {\n                    status = true;\n                }\n                break;\n            case 'SortAscending':\n            case 'SortDescending':\n                if ((!this.parent.allowSorting) || !this.parent.ensureModuleInjected(Sort)) {\n                    status = true;\n                }\n                else if (this.parent.ensureModuleInjected(Sort) && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n                    this.parent.sortSettings.columns.forEach(function (element) {\n                        if (element.field === _this.targetColumn.field\n                            && element.direction.toLowerCase() === item.toLowerCase().replace('sort', '').toLocaleLowerCase()) {\n                            status = true;\n                        }\n                    });\n                }\n                break;\n            case 'FirstPage':\n            case 'PrevPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === 1)) {\n                    status = true;\n                }\n                break;\n            case 'LastPage':\n            case 'NextPage':\n                if (!this.parent.allowPaging || !this.parent.ensureModuleInjected(Page) ||\n                    this.parent.getCurrentViewRecords().length === 0 ||\n                    (this.parent.ensureModuleInjected(Page) && this.parent.pageSettings.currentPage === this.getLastPage())) {\n                    status = true;\n                }\n                break;\n        }\n        return status;\n    };\n    /**\n     * Gets the context menu element from the Grid.\n     * @return {Element}\n     */\n    ContextMenu.prototype.getContextMenu = function () {\n        return this.element;\n    };\n    /**\n     * Destroys the context menu component in the Grid.\n     * @method destroy\n     * @return {void}\n     * @hidden\n     */\n    ContextMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.contextMenu.destroy();\n        remove(this.element);\n        this.removeEventListener();\n        this.parent.element.classList.remove('e-noselect');\n    };\n    ContextMenu.prototype.getModuleName = function () {\n        return 'contextMenu';\n    };\n    ContextMenu.prototype.generateID = function (item) {\n        return this.gridID + '_cmenu_' + item;\n    };\n    ContextMenu.prototype.getKeyFromId = function (id) {\n        return id.replace(this.gridID + '_cmenu_', '');\n    };\n    ContextMenu.prototype.buildDefaultItems = function (item) {\n        var menuItem;\n        switch (item) {\n            case 'AutoFitAll':\n            case 'AutoFit':\n                menuItem = { target: menuClass.header };\n                break;\n            case 'Group':\n                menuItem = { target: menuClass.header, iconCss: menuClass.group };\n                break;\n            case 'Ungroup':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ungroup };\n                break;\n            case 'Edit':\n                menuItem = { target: menuClass.content, iconCss: menuClass.editIcon };\n                break;\n            case 'Delete':\n                menuItem = { target: menuClass.content, iconCss: menuClass.delete };\n                break;\n            case 'Save':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.save };\n                break;\n            case 'Cancel':\n                menuItem = { target: menuClass.edit, iconCss: menuClass.cancel };\n                break;\n            case 'Copy':\n                menuItem = { target: menuClass.content, iconCss: menuClass.copy };\n                break;\n            case 'export':\n                menuItem = { target: menuClass.content };\n                break;\n            case 'PdfExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.pdf };\n                break;\n            case 'ExcelExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.excel };\n                break;\n            case 'CsvExport':\n                menuItem = { target: menuClass.content, iconCss: menuClass.csv };\n                break;\n            case 'SortAscending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.ascending };\n                break;\n            case 'SortDescending':\n                menuItem = { target: menuClass.header, iconCss: menuClass.descending };\n                break;\n            case 'FirstPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.fPage };\n                break;\n            case 'PrevPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.pPage };\n                break;\n            case 'LastPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.lPage };\n                break;\n            case 'NextPage':\n                menuItem = { target: menuClass.pager, iconCss: menuClass.nPage };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            target: menuItem.target, iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : ''\n        };\n        return this.defaultItems[item];\n    };\n    ContextMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit',\n            'Group', 'Ungroup', 'Edit', 'Delete', 'Save', 'Cancel', 'Copy', 'export',\n            'PdfExport', 'ExcelExport', 'CsvExport', 'SortAscending', 'SortDescending',\n            'FirstPage', 'PrevPage', 'LastPage', 'NextPage'];\n    };\n    ContextMenu.prototype.setLocaleKey = function () {\n        return {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Copy': 'Copy',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'Edit': 'EditRecord',\n            'Delete': 'DeleteRecord',\n            'Save': 'Save',\n            'Cancel': 'CancelButton',\n            'PdfExport': 'Pdfexport',\n            'ExcelExport': 'Excelexport',\n            'CsvExport': 'Csvexport',\n            'export': 'Export',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'FirstPage': 'FirstPage',\n            'LastPage': 'LastPage',\n            'PrevPage': 'PreviousPage',\n            'NextPage': 'NextPage'\n        };\n    };\n    ContextMenu.prototype.getColumn = function (e) {\n        var cell = closest(e.target, 'th.e-headercell');\n        if (cell) {\n            cell.classList.add('e-resized');\n            var uid = cell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ContextMenu.prototype.selectRow = function (e, isSelectable) {\n        this.cell = e.target;\n        this.row = closest(e.target, 'tr.e-row') || this.row;\n        if (this.row && isSelectable && !parentsUntil(e.target, 'e-gridpager')) {\n            this.parent.selectRow(parseInt(this.row.getAttribute('aria-rowindex'), 10));\n        }\n    };\n    return ContextMenu;\n}());\nexport { ContextMenu };\n","import { RowModelGenerator } from '../services/row-model-generator';\n/**\n * FreezeRowModelGenerator is used to generate grid data rows with freeze row and column.\n * @hidden\n */\nvar FreezeRowModelGenerator = /** @class */ (function () {\n    function FreezeRowModelGenerator(parent) {\n        this.isFrzLoad = 1;\n        this.parent = parent;\n        this.rowModelGenerator = new RowModelGenerator(this.parent);\n    }\n    FreezeRowModelGenerator.prototype.generateRows = function (data, notifyArgs) {\n        var frzCols = this.parent.getFrozenColumns();\n        var row = this.rowModelGenerator.generateRows(data, notifyArgs);\n        for (var i = 0, len = row.length; i < len; i++) {\n            if (this.isFrzLoad % 2 === 0) {\n                row[i].cells = row[i].cells.slice(frzCols, row[i].cells.length);\n            }\n            else {\n                row[i].cells = row[i].cells.slice(0, frzCols);\n            }\n        }\n        this.isFrzLoad++;\n        return row;\n    };\n    return FreezeRowModelGenerator;\n}());\nexport { FreezeRowModelGenerator };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { remove, addClass } from '@syncfusion/ej2-base';\nimport { HeaderRender } from './header-renderer';\nimport { ContentRender } from './content-renderer';\nimport { FreezeRowModelGenerator } from '../services/freeze-row-model-generator';\nimport * as events from '../base/constant';\nimport { renderMovable, getScrollBarWidth } from '../base/util';\n/**\n * Freeze module is used to render grid content with frozen rows and columns\n * @hidden\n */\nvar FreezeContentRender = /** @class */ (function (_super) {\n    __extends(FreezeContentRender, _super);\n    function FreezeContentRender(parent, locator) {\n        return _super.call(this, parent, locator) || this;\n    }\n    FreezeContentRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        var fDiv = this.parent.createElement('div', { className: 'e-frozencontent' });\n        var mDiv = this.parent.createElement('div', { className: 'e-movablecontent' });\n        this.getPanel().firstChild.appendChild(fDiv);\n        this.getPanel().firstChild.appendChild(mDiv);\n        this.setFrozenContent(fDiv);\n        this.setMovableContent(mDiv);\n    };\n    FreezeContentRender.prototype.renderEmpty = function (tbody) {\n        _super.prototype.renderEmpty.call(this, tbody);\n        this.getMovableContent().querySelector('tbody').innerHTML = '<tr><td></td></tr>';\n        this.getFrozenContent().querySelector('.e-emptyrow').querySelector('td').colSpan = this.parent.getFrozenColumns();\n        this.getFrozenContent().style.borderRightWidth = '0px';\n        if (this.parent.frozenRows) {\n            this.parent.getHeaderContent().querySelector('.e-frozenheader').querySelector('tbody').innerHTML = '';\n            this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('tbody').innerHTML = '';\n        }\n    };\n    FreezeContentRender.prototype.setFrozenContent = function (ele) {\n        this.frozenContent = ele;\n    };\n    FreezeContentRender.prototype.setMovableContent = function (ele) {\n        this.movableContent = ele;\n    };\n    FreezeContentRender.prototype.getFrozenContent = function () {\n        return this.frozenContent;\n    };\n    FreezeContentRender.prototype.getMovableContent = function () {\n        return this.movableContent;\n    };\n    FreezeContentRender.prototype.getModelGenerator = function () {\n        return new FreezeRowModelGenerator(this.parent);\n    };\n    FreezeContentRender.prototype.renderTable = function () {\n        _super.prototype.renderTable.call(this);\n        this.getFrozenContent().appendChild(this.getTable());\n        var mTbl = this.getTable().cloneNode(true);\n        this.getMovableContent().appendChild(mTbl);\n        remove(this.getMovableContent().querySelector('colgroup'));\n        var colGroup = ((this.parent.getHeaderContent().querySelector('.e-movableheader').querySelector('colgroup')).cloneNode(true));\n        mTbl.insertBefore(colGroup, mTbl.querySelector('tbody'));\n    };\n    return FreezeContentRender;\n}(ContentRender));\nexport { FreezeContentRender };\nvar FreezeRender = /** @class */ (function (_super) {\n    __extends(FreezeRender, _super);\n    function FreezeRender(parent, locator) {\n        var _this = _super.call(this, parent, locator) || this;\n        _this.addEventListener();\n        return _this;\n    }\n    FreezeRender.prototype.addEventListener = function () {\n        this.parent.on(events.freezeRender, this.refreshFreeze, this);\n        this.parent.on(events.frozenHeight, this.setFrozenHeight, this);\n    };\n    FreezeRender.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.frozenHeight, this.setFrozenHeight);\n    };\n    FreezeRender.prototype.renderTable = function () {\n        _super.prototype.renderTable.call(this);\n        this.rfshMovable();\n        this.updateColgroup();\n        this.initializeHeaderDrag();\n        this.initializeHeaderDrop();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.renderPanel = function () {\n        _super.prototype.renderPanel.call(this);\n        var fDiv = this.parent.createElement('div', { className: 'e-frozenheader' });\n        var mDiv = this.parent.createElement('div', { className: 'e-movableheader' });\n        this.getPanel().firstChild.appendChild(fDiv);\n        this.getPanel().firstChild.appendChild(mDiv);\n        this.setFrozenHeader(fDiv);\n        this.setMovableHeader(mDiv);\n    };\n    FreezeRender.prototype.refreshUI = function () {\n        var tbody = this.getMovableHeader().querySelector('tbody');\n        remove(this.getMovableHeader().querySelector('table'));\n        _super.prototype.refreshUI.call(this);\n        this.rfshMovable();\n        this.getMovableHeader().querySelector('tbody').innerHTML = tbody.innerHTML;\n        this.updateColgroup();\n        renderMovable(this.parent.getContentTable().querySelector('colgroup'), this.parent.getFrozenColumns());\n        this.initializeHeaderDrag();\n        this.parent.notify(events.headerRefreshed, { rows: this.rows, args: { isFrozen: false } });\n    };\n    FreezeRender.prototype.rfshMovable = function () {\n        this.getFrozenHeader().appendChild(this.getTable());\n        this.getMovableHeader().appendChild(this.createTable());\n        this.refreshStackedHdrHgt();\n        this.addMovableFirstCls();\n    };\n    FreezeRender.prototype.addMovableFirstCls = function () {\n        if (this.parent.getVisibleFrozenColumns()) {\n            var movablefirstcell = this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('.e-columnheader');\n            var len = this.parent.element.querySelector('.e-movableheader').querySelector('thead').querySelectorAll('.e-columnheader').length;\n            for (var i = 0; i < len; i++) {\n                var cells = 'cells';\n                var element = movablefirstcell[i][cells][0];\n                if (element) {\n                    addClass([element], ['e-movablefirst']);\n                    if (movablefirstcell[i][cells][0].rowSpan > 1) {\n                        i = i + (movablefirstcell[i][cells][0].rowSpan - 1);\n                    }\n                }\n            }\n        }\n    };\n    FreezeRender.prototype.refreshFreeze = function (obj) {\n        if (obj.case === 'filter') {\n            var filterRow = this.getTable().querySelector('.e-filterbar');\n            if (this.parent.allowFiltering && filterRow && this.getMovableHeader().querySelector('thead')) {\n                this.getMovableHeader().querySelector('thead')\n                    .appendChild(renderMovable(filterRow, this.parent.getFrozenColumns()));\n            }\n        }\n        else if (obj.case === 'textwrap') {\n            var fRows = void 0;\n            var mRows = void 0;\n            var fHdr = this.getFrozenHeader();\n            var mHdr = this.getMovableHeader();\n            var cont = this.parent.getContent();\n            var wrapMode = this.parent.textWrapSettings.wrapMode;\n            var hdrClassList = this.parent.getHeaderContent().firstChild.classList;\n            if (wrapMode !== 'Header' || obj.isModeChg) {\n                fRows = cont.querySelector('.e-frozencontent').querySelectorAll('tr');\n                mRows = cont.querySelector('.e-movablecontent').querySelectorAll('tr');\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, true);\n            }\n            if (wrapMode === 'Content' && this.parent.allowTextWrap) {\n                hdrClassList.add('e-wrap');\n            }\n            else {\n                hdrClassList.remove('e-wrap');\n            }\n            if (wrapMode === 'Both' || obj.isModeChg) {\n                fRows = fHdr.querySelectorAll('tr');\n                mRows = mHdr.querySelectorAll('tr');\n            }\n            else {\n                fRows = fHdr.querySelector(wrapMode === 'Content' ? 'tbody' : 'thead').querySelectorAll('tr');\n                mRows = mHdr.querySelector(wrapMode === 'Content' ? 'tbody' : 'thead').querySelectorAll('tr');\n            }\n            if (!this.parent.getHeaderContent().querySelectorAll('.e-stackedheadercell').length) {\n                this.setWrapHeight(fRows, mRows, obj.isModeChg, false, this.colDepth > 1);\n            }\n            this.refreshStackedHdrHgt();\n        }\n    };\n    FreezeRender.prototype.updateResizeHandler = function () {\n        [].slice.call(this.parent.getHeaderContent().querySelectorAll('.e-rhandler')).forEach(function (ele) {\n            ele.style.height = ele.parentElement.offsetHeight + 'px';\n        });\n    };\n    FreezeRender.prototype.setWrapHeight = function (fRows, mRows, isModeChg, isContReset, isStackedHdr) {\n        var fRowHgt;\n        var mRowHgt;\n        var isWrap = this.parent.allowTextWrap;\n        var wrapMode = this.parent.textWrapSettings.wrapMode;\n        var tHead = this.parent.getHeaderContent().querySelector('thead');\n        var tBody = this.parent.getHeaderContent().querySelector('tbody');\n        var height = [];\n        var width = [];\n        for (var i = 0, len = fRows.length; i < len; i++) {\n            height[i] = fRows[i].offsetHeight; //https://pagebuildersandwich.com/increased-plugins-performance-200/\n            width[i] = mRows[i].offsetHeight;\n        }\n        for (var i = 0, len = fRows.length; i < len; i++) {\n            if (isModeChg && ((wrapMode === 'Header' && isContReset) || ((wrapMode === 'Content' && tHead.contains(fRows[i]))\n                || (wrapMode === 'Header' && tBody.contains(fRows[i])))) || isStackedHdr) {\n                fRows[i].style.height = null;\n                mRows[i].style.height = null;\n            }\n            fRowHgt = height[i];\n            mRowHgt = width[i];\n            if (fRows[i].childElementCount && ((isWrap && fRowHgt < mRowHgt) || (!isWrap && fRowHgt > mRowHgt) ||\n                (this.parent.allowResizing && !this.parent.resizeModule.isFrozenColResized))) {\n                if (!this.parent.allowResizing || (this.parent.allowResizing && !this.parent.resizeModule.isFrozenColResized)) {\n                    fRows[i].style.height = mRowHgt + 'px';\n                }\n            }\n            if (mRows[i].childElementCount && ((isWrap && fRowHgt > mRowHgt) || (!isWrap && fRowHgt < mRowHgt) ||\n                (this.parent.allowResizing && this.parent.resizeModule.isFrozenColResized))) {\n                if (!this.parent.allowResizing || (this.parent.allowResizing && this.parent.resizeModule.isFrozenColResized)) {\n                    mRows[i].style.height = fRowHgt + 'px';\n                }\n            }\n        }\n        if (isWrap) {\n            this.setFrozenHeight();\n        }\n    };\n    FreezeRender.prototype.setFrozenHeight = function () {\n        var movableContentHeight = this.parent.element.querySelector('.e-movablecontent').getBoundingClientRect().height;\n        var frozenContentHeight = this.parent.element.querySelector('.e-frozencontent').getBoundingClientRect().height;\n        if (movableContentHeight > frozenContentHeight) {\n            this.parent.element.querySelector('.e-frozencontent').style.height = movableContentHeight -\n                getScrollBarWidth() + 'px';\n        }\n    };\n    FreezeRender.prototype.refreshStackedHdrHgt = function () {\n        var fRowSpan;\n        var mRowSpan;\n        var fTr = this.getFrozenHeader().querySelectorAll('.e-columnheader');\n        var mTr = this.getMovableHeader().querySelectorAll('.e-columnheader');\n        for (var i = 0, len = fTr.length; i < len; i++) {\n            fRowSpan = this.getRowSpan(fTr[i]);\n            mRowSpan = this.getRowSpan(mTr[i]);\n            if (fRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, fRowSpan.max, fTr[i], mTr);\n            }\n            else if (mRowSpan.min > 1) {\n                this.updateStackedHdrRowHgt(i, mRowSpan.max, mTr[i], fTr);\n            }\n        }\n        if (this.parent.allowResizing) {\n            this.updateResizeHandler();\n        }\n    };\n    FreezeRender.prototype.getRowSpan = function (row) {\n        var rSpan;\n        var minRowSpan;\n        var maxRowSpan;\n        for (var i = 0, len = row.childElementCount; i < len; i++) {\n            if (i === 0) {\n                minRowSpan = row.children[0].rowSpan;\n            }\n            rSpan = row.children[i].rowSpan;\n            minRowSpan = Math.min(rSpan, minRowSpan);\n            maxRowSpan = Math.max(rSpan, minRowSpan);\n        }\n        return { min: minRowSpan, max: maxRowSpan };\n    };\n    FreezeRender.prototype.updateStackedHdrRowHgt = function (idx, maxRowSpan, row, rows) {\n        var height = 0;\n        for (var i = 0; i < maxRowSpan; i++) {\n            height += rows[idx + i].style.height ?\n                parseInt(rows[idx + i].style.height, 10) : rows[idx + i].offsetHeight;\n        }\n        row.style.height = height + 'px';\n    };\n    FreezeRender.prototype.setFrozenHeader = function (ele) {\n        this.frozenHeader = ele;\n    };\n    FreezeRender.prototype.setMovableHeader = function (ele) {\n        this.movableHeader = ele;\n    };\n    FreezeRender.prototype.getFrozenHeader = function () {\n        return this.frozenHeader;\n    };\n    FreezeRender.prototype.getMovableHeader = function () {\n        return this.movableHeader;\n    };\n    FreezeRender.prototype.updateColgroup = function () {\n        var mTable = this.getMovableHeader().querySelector('table');\n        remove(this.getMovableHeader().querySelector('colgroup'));\n        mTable.insertBefore(renderMovable(this.getFrozenHeader().querySelector('colgroup'), this.parent.getFrozenColumns()), mTable.querySelector('thead'));\n    };\n    return FreezeRender;\n}(HeaderRender));\nexport { FreezeRender };\n","import * as events from '../base/constant';\nimport { RenderType } from '../base/enum';\nimport { parentsUntil } from '../base/util';\nimport { EventHandler } from '@syncfusion/ej2-base';\nimport { FreezeRender, FreezeContentRender } from '../renderer/freeze-renderer';\n/**\n * `Freeze` module is used to handle Frozen rows and columns.\n * @hidden\n */\nvar Freeze = /** @class */ (function () {\n    function Freeze(parent, locator) {\n        this.parent = parent;\n        this.locator = locator;\n        this.addEventListener();\n    }\n    Freeze.prototype.getModuleName = function () {\n        return 'freeze';\n    };\n    Freeze.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.initialLoad, this.instantiateRenderer, this);\n        this.parent.on(events.initialEnd, this.wireEvents, this);\n    };\n    Freeze.prototype.wireEvents = function () {\n        if (this.parent.frozenRows) {\n            EventHandler.add(this.parent.getHeaderContent(), 'dblclick', this.dblClickHandler, this);\n        }\n    };\n    Freeze.prototype.dblClickHandler = function (e) {\n        if (parentsUntil(e.target, 'e-grid').id !== this.parent.element.id) {\n            return;\n        }\n        this.parent.notify(events.dblclick, e);\n    };\n    Freeze.prototype.instantiateRenderer = function () {\n        var renderer = this.locator.getService('rendererFactory');\n        if (this.parent.getFrozenColumns()) {\n            renderer.addRenderer(RenderType.Header, new FreezeRender(this.parent, this.locator));\n            renderer.addRenderer(RenderType.Content, new FreezeContentRender(this.parent, this.locator));\n        }\n    };\n    Freeze.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.initialLoad, this.instantiateRenderer);\n    };\n    Freeze.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return Freeze;\n}());\nexport { Freeze };\n","import { EventHandler, closest, Browser, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { remove } from '@syncfusion/ej2-base';\nimport { ContextMenu as Menu } from '@syncfusion/ej2-navigations';\nimport { parentsUntil } from '../base/util';\nimport * as events from '../base/constant';\nimport { calculatePosition } from '@syncfusion/ej2-popups';\nimport { createCheckBox } from '@syncfusion/ej2-buttons';\nimport { Group } from '../actions/group';\nimport { Sort } from '../actions/sort';\nimport { Filter } from '../actions/filter';\nimport { Resize } from '../actions/resize';\n/**\n * 'column menu module used to handle column menu actions'\n */\nvar ColumnMenu = /** @class */ (function () {\n    function ColumnMenu(parent, serviceLocator) {\n        this.defaultItems = {};\n        this.localeText = this.setLocaleKey();\n        this.disableItems = [];\n        this.hiddenItems = [];\n        this.isOpen = false;\n        // default class names\n        this.GROUP = 'e-icon-group';\n        this.UNGROUP = 'e-icon-ungroup';\n        this.ASCENDING = 'e-icon-ascending';\n        this.DESCENDING = 'e-icon-descending';\n        this.ROOT = 'e-columnmenu';\n        this.FILTER = 'e-icon-filter';\n        this.POP = 'e-filter-popup';\n        this.WRAP = 'e-col-menu';\n        this.CHOOSER = '_chooser_';\n        this.parent = parent;\n        this.gridID = parent.element.id;\n        this.serviceLocator = serviceLocator;\n        this.addEventListener();\n    }\n    ColumnMenu.prototype.wireEvents = function () {\n        var _this = this;\n        this.getColumnMenuHandlers().forEach(function (ele) {\n            EventHandler.add(ele, 'mousedown', _this.columnMenuHandlerDown, _this);\n        });\n    };\n    ColumnMenu.prototype.unwireEvents = function () {\n        var _this = this;\n        this.getColumnMenuHandlers().forEach(function (ele) {\n            EventHandler.remove(ele, 'mousedown', _this.columnMenuHandlerDown);\n        });\n    };\n    /**\n     * To destroy the resize\n     * @return {void}\n     * @hidden\n     */\n    ColumnMenu.prototype.destroy = function () {\n        var gridElement = this.parent.element;\n        if (!gridElement || (!gridElement.querySelector('.e-gridheader') && !gridElement.querySelector('.e-gridcontent'))) {\n            return;\n        }\n        this.columnMenu.destroy();\n        this.removeEventListener();\n        this.unwireFilterEvents();\n        this.unwireEvents();\n        remove(this.element);\n    };\n    ColumnMenu.prototype.columnMenuHandlerClick = function (e) {\n        if (e.target.classList.contains('e-columnmenu')) {\n            if ((this.isOpen && this.headerCell !== this.getHeaderCell(e)) || document.querySelector('.e-grid-menu .e-menu-parent.e-ul')) {\n                this.columnMenu.close();\n                this.openColumnMenu(e);\n            }\n            else if (!this.isOpen) {\n                this.openColumnMenu(e);\n            }\n            else {\n                this.columnMenu.close();\n            }\n        }\n    };\n    ColumnMenu.prototype.openColumnMenu = function (e) {\n        var pos = { top: 0, left: 0 };\n        this.element.style.cssText = 'display:block;visibility:hidden';\n        var elePos = this.element.getBoundingClientRect();\n        this.element.style.cssText = 'display:none;visibility:visible';\n        this.headerCell = this.getHeaderCell(e);\n        if (Browser.isDevice) {\n            pos.top = ((window.innerHeight / 2) - (elePos.height / 2));\n            pos.left = ((window.innerWidth / 2) - (elePos.width / 2));\n        }\n        else {\n            if (this.parent.enableRtl) {\n                pos = calculatePosition(this.headerCell, 'left', 'bottom');\n            }\n            else {\n                pos = calculatePosition(this.headerCell, 'right', 'bottom');\n                pos.left -= elePos.width;\n            }\n        }\n        this.columnMenu.open(pos.top, pos.left);\n        e.preventDefault();\n    };\n    ColumnMenu.prototype.columnMenuHandlerDown = function (e) {\n        this.isOpen = !(this.element.style.display === 'none' || this.element.style.display === '');\n    };\n    ColumnMenu.prototype.getColumnMenuHandlers = function () {\n        return [].slice.call(this.parent.getHeaderTable().querySelectorAll('.' + this.ROOT));\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.headerRefreshed, this.wireEvents, this);\n        this.parent.on(events.uiUpdate, this.enableAfterRenderMenu, this);\n        this.parent.on(events.initialEnd, this.render, this);\n        if (this.isFilterItemAdded()) {\n            this.parent.on(events.filterDialogCreated, this.filterPosition, this);\n        }\n        this.parent.on(events.click, this.columnMenuHandlerClick, this);\n    };\n    /**\n     * @hidden\n     */\n    ColumnMenu.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.headerRefreshed, this.unwireEvents);\n        this.parent.off(events.uiUpdate, this.enableAfterRenderMenu);\n        this.parent.off(events.initialEnd, this.render);\n        if (this.isFilterItemAdded()) {\n            this.parent.off(events.filterDialogCreated, this.filterPosition);\n        }\n        this.parent.off(events.click, this.columnMenuHandlerClick);\n    };\n    ColumnMenu.prototype.enableAfterRenderMenu = function (e) {\n        if (e.module === this.getModuleName() && e.enable) {\n            if (this.columnMenu) {\n                this.columnMenu.destroy();\n                remove(this.element);\n            }\n            this.render();\n        }\n    };\n    ColumnMenu.prototype.render = function () {\n        this.l10n = this.serviceLocator.getService('localization');\n        this.element = this.parent.createElement('ul', { id: this.gridID + '_columnmenu', className: 'e-colmenu' });\n        this.parent.element.appendChild(this.element);\n        this.columnMenu = new Menu({\n            cssClass: 'e-grid-menu',\n            enableRtl: this.parent.enableRtl,\n            enablePersistence: this.parent.enablePersistence,\n            locale: this.parent.locale,\n            items: this.getItems(),\n            select: this.columnMenuItemClick.bind(this),\n            beforeOpen: this.columnMenuBeforeOpen.bind(this),\n            onClose: this.columnMenuOnClose.bind(this),\n            beforeItemRender: this.beforeMenuItemRender.bind(this),\n            beforeClose: this.columnMenuBeforeClose.bind(this)\n        });\n        this.columnMenu.appendTo(this.element);\n        this.wireFilterEvents();\n    };\n    ColumnMenu.prototype.wireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.add(this.element, 'mouseover', this.appendFilter, this);\n        }\n    };\n    ColumnMenu.prototype.unwireFilterEvents = function () {\n        if (!Browser.isDevice && this.isFilterItemAdded()) {\n            EventHandler.remove(this.element, 'mouseover', this.appendFilter);\n        }\n    };\n    ColumnMenu.prototype.beforeMenuItemRender = function (args) {\n        if (this.isChooserItem(args.item)) {\n            var field = this.getKeyFromId(args.item.id, this.CHOOSER);\n            var column = this.parent.getColumnByField(field);\n            var check = createCheckBox(this.parent.createElement, false, {\n                label: args.item.text,\n                checked: column.visible\n            });\n            if (this.parent.enableRtl) {\n                check.classList.add('e-rtl');\n            }\n            args.element.innerHTML = '';\n            args.element.appendChild(check);\n        }\n        else if (args.item.id && this.getKeyFromId(args.item.id) === 'Filter') {\n            args.element.appendChild(this.parent.createElement('span', { className: 'e-icons e-caret' }));\n            args.element.className += 'e-filter-item e-menu-caret-icon';\n        }\n    };\n    ColumnMenu.prototype.columnMenuBeforeClose = function (args) {\n        var colChooser = args.event ? closest(args.event.target, '.e-menu-item') : null;\n        if (!isNullOrUndefined(args.parentItem) &&\n            this.getKeyFromId(args.parentItem.id) === 'ColumnChooser' &&\n            colChooser && this.isChooserItem(colChooser)) {\n            args.cancel = true;\n        }\n        else if (args.event && (closest(args.event.target, '.' + this.POP)\n            || (args.event.currentTarget && args.event.currentTarget.activeElement &&\n                parentsUntil(args.event.currentTarget.activeElement, 'e-filter-popup'))\n            || parentsUntil(args.event.target, 'e-popup') ||\n            (parentsUntil(args.event.target, 'e-popup-wrapper')))) {\n            args.cancel = true;\n        }\n    };\n    ColumnMenu.prototype.isChooserItem = function (item) {\n        return item.id && item.id.indexOf('_colmenu_') >= 0 &&\n            this.getKeyFromId(item.id, this.CHOOSER).indexOf('_colmenu_') === -1;\n    };\n    ColumnMenu.prototype.columnMenuBeforeOpen = function (args) {\n        args.column = this.targetColumn = this.getColumn();\n        this.parent.trigger(events.columnMenuOpen, args);\n        for (var _i = 0, _a = args.items; _i < _a.length; _i++) {\n            var item = _a[_i];\n            var key = this.getKeyFromId(item.id);\n            var dItem = this.defaultItems[key];\n            if (this.getDefaultItems().indexOf(key) !== -1) {\n                if (this.ensureDisabledStatus(key) && !dItem.hide) {\n                    this.disableItems.push(item.text);\n                }\n                else if (item.hide) {\n                    this.hiddenItems.push(item.text);\n                }\n            }\n        }\n        this.columnMenu.enableItems(this.disableItems, false);\n        this.columnMenu.hideItems(this.hiddenItems);\n    };\n    ColumnMenu.prototype.ensureDisabledStatus = function (item) {\n        var _this = this;\n        var status = false;\n        switch (item) {\n            case 'Group':\n                if (!this.parent.allowGrouping || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) >= 0)) {\n                    status = true;\n                }\n                break;\n            case 'AutoFitAll':\n            case 'AutoFit':\n                status = !this.parent.ensureModuleInjected(Resize);\n                break;\n            case 'Ungroup':\n                if (!this.parent.ensureModuleInjected(Group) || (this.parent.ensureModuleInjected(Group) && this.targetColumn\n                    && this.parent.groupSettings.columns.indexOf(this.targetColumn.field) < 0)) {\n                    status = true;\n                }\n                break;\n            case 'SortDescending':\n            case 'SortAscending':\n                if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)\n                    && this.parent.sortSettings.columns.length > 0 && this.targetColumn) {\n                    this.parent.sortSettings.columns.forEach(function (ele) {\n                        if (ele.field === _this.targetColumn.field\n                            && ele.direction.toLocaleLowerCase() === item.toLocaleLowerCase().replace('sort', '')) {\n                            status = true;\n                        }\n                    });\n                }\n                else if (!this.parent.allowSorting || !this.parent.ensureModuleInjected(Sort)) {\n                    status = true;\n                }\n                break;\n            case 'Filter':\n                status = !(this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar')\n                    && this.parent.ensureModuleInjected(Filter));\n        }\n        return status;\n    };\n    ColumnMenu.prototype.columnMenuItemClick = function (args) {\n        var item = this.isChooserItem(args.item) ? 'ColumnChooser' : this.getKeyFromId(args.item.id);\n        switch (item) {\n            case 'AutoFit':\n                this.parent.autoFitColumns(this.targetColumn.field);\n                break;\n            case 'AutoFitAll':\n                this.parent.autoFitColumns([]);\n                break;\n            case 'Ungroup':\n                this.parent.ungroupColumn(this.targetColumn.field);\n                break;\n            case 'Group':\n                this.parent.groupColumn(this.targetColumn.field);\n                break;\n            case 'SortAscending':\n                this.parent.sortColumn(this.targetColumn.field, 'Ascending');\n                break;\n            case 'SortDescending':\n                this.parent.sortColumn(this.targetColumn.field, 'Descending');\n                break;\n            case 'ColumnChooser':\n                var key = this.getKeyFromId(args.item.id, this.CHOOSER);\n                var checkbox = args.element.querySelector('.e-checkbox-wrapper .e-frame');\n                if (checkbox && checkbox.classList.contains('e-check')) {\n                    checkbox.classList.remove('e-check');\n                    this.parent.hideColumns(key, 'field');\n                }\n                else if (checkbox) {\n                    this.parent.showColumns(key, 'field');\n                    checkbox.classList.add('e-check');\n                }\n                break;\n            case 'Filter':\n                this.getFilter(args.element, args.item.id);\n                break;\n        }\n        args.column = this.targetColumn;\n        this.parent.trigger(events.columnMenuClick, args);\n    };\n    ColumnMenu.prototype.columnMenuOnClose = function (args) {\n        var parent = 'parentObj';\n        if (args.items.length > 0 && args.items[0][parent] instanceof Menu) {\n            this.columnMenu.enableItems(this.disableItems);\n            this.disableItems = [];\n            this.columnMenu.showItems(this.hiddenItems);\n            this.hiddenItems = [];\n            if (this.isFilterPopupOpen()) {\n                this.getFilter(args.element, args.element.id, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefaultItems = function () {\n        return ['AutoFitAll', 'AutoFit', 'SortAscending', 'SortDescending', 'Group', 'Ungroup', 'ColumnChooser', 'Filter'];\n    };\n    ColumnMenu.prototype.getItems = function () {\n        var items = [];\n        var defultItems = this.parent.columnMenuItems ? this.parent.columnMenuItems : this.getDefault();\n        for (var _i = 0, defultItems_1 = defultItems; _i < defultItems_1.length; _i++) {\n            var item = defultItems_1[_i];\n            if (typeof item === 'string') {\n                if (item === 'ColumnChooser') {\n                    var col = this.getDefaultItem(item);\n                    col.items = this.createChooserItems();\n                    items.push(col);\n                }\n                else {\n                    items.push(this.getDefaultItem(item));\n                }\n            }\n            else {\n                items.push(item);\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.getDefaultItem = function (item) {\n        var menuItem = {};\n        switch (item) {\n            case 'SortAscending':\n                menuItem = { iconCss: this.ASCENDING };\n                break;\n            case 'SortDescending':\n                menuItem = { iconCss: this.DESCENDING };\n                break;\n            case 'Group':\n                menuItem = { iconCss: this.GROUP };\n                break;\n            case 'Ungroup':\n                menuItem = { iconCss: this.UNGROUP };\n                break;\n            case 'Filter':\n                menuItem = { iconCss: this.FILTER };\n                break;\n        }\n        this.defaultItems[item] = {\n            text: this.getLocaleText(item), id: this.generateID(item),\n            iconCss: menuItem.iconCss ? 'e-icons ' + menuItem.iconCss : null\n        };\n        return this.defaultItems[item];\n    };\n    ColumnMenu.prototype.getLocaleText = function (item) {\n        return this.l10n.getConstant(this.localeText[item]);\n    };\n    ColumnMenu.prototype.generateID = function (item, append) {\n        return this.gridID + '_colmenu_' + (append ? append + item : item);\n    };\n    ColumnMenu.prototype.getKeyFromId = function (id, append) {\n        return id.indexOf('_colmenu_') > 0 &&\n            id.replace(this.gridID + '_colmenu_' + (append ? append : ''), '');\n    };\n    ColumnMenu.prototype.getColumnMenu = function () {\n        return this.element;\n    };\n    ColumnMenu.prototype.getModuleName = function () {\n        return 'columnMenu';\n    };\n    ColumnMenu.prototype.setLocaleKey = function () {\n        return {\n            'AutoFitAll': 'autoFitAll',\n            'AutoFit': 'autoFit',\n            'Group': 'Group',\n            'Ungroup': 'Ungroup',\n            'SortAscending': 'SortAscending',\n            'SortDescending': 'SortDescending',\n            'ColumnChooser': 'Columnchooser',\n            'Filter': 'FilterMenu'\n        };\n    };\n    ColumnMenu.prototype.getHeaderCell = function (e) {\n        return closest(e.target, 'th.e-headercell');\n    };\n    ColumnMenu.prototype.getColumn = function () {\n        if (this.headerCell) {\n            var uid = this.headerCell.querySelector('.e-headercelldiv').getAttribute('e-mappinguid');\n            return this.parent.getColumnByUid(uid);\n        }\n        return null;\n    };\n    ColumnMenu.prototype.createChooserItems = function () {\n        var items = [];\n        for (var _i = 0, _a = this.parent.getColumns(); _i < _a.length; _i++) {\n            var col = _a[_i];\n            if (col.showInColumnChooser && col.field) {\n                items.push({ id: this.generateID(col.field, this.CHOOSER), text: col.headerText ? col.headerText : col.field });\n            }\n        }\n        return items;\n    };\n    ColumnMenu.prototype.appendFilter = function (e) {\n        var filter = 'Filter';\n        if (!this.defaultItems[filter]) {\n            return;\n        }\n        else {\n            var key = this.defaultItems[filter].id;\n            if (closest(e.target, '#' + key) && !this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key);\n            }\n            else if (!closest(e.target, '#' + key) && this.isFilterPopupOpen()) {\n                this.getFilter(e.target, key, true);\n            }\n        }\n    };\n    ColumnMenu.prototype.getFilter = function (target, id, isClose) {\n        var filterPopup = this.getFilterPop();\n        if (filterPopup) {\n            filterPopup.style.display = !Browser.isDevice && isClose ? 'none' : 'block';\n        }\n        else {\n            this.parent.notify(events.filterOpen, {\n                col: this.targetColumn, target: target, isClose: isClose, id: id\n            });\n        }\n    };\n    ColumnMenu.prototype.setPosition = function (li, ul) {\n        var gridPos = this.parent.element.getBoundingClientRect();\n        var liPos = li.getBoundingClientRect();\n        var left = liPos.left - gridPos.left;\n        var top = liPos.top - gridPos.top;\n        if (gridPos.height < top) {\n            top = top - ul.offsetHeight + liPos.height;\n        }\n        else if (gridPos.height < top + ul.offsetHeight) {\n            top = gridPos.height - ul.offsetHeight;\n        }\n        if (window.innerHeight < ul.offsetHeight + top + gridPos.top) {\n            top = window.innerHeight - ul.offsetHeight - gridPos.top;\n        }\n        left += (this.parent.enableRtl ? -ul.offsetWidth : liPos.width);\n        if (gridPos.width <= left + ul.offsetWidth) {\n            left -= liPos.width + ul.offsetWidth;\n        }\n        else if (left < 0) {\n            left += ul.offsetWidth + liPos.width;\n        }\n        ul.style.top = top + 'px';\n        ul.style.left = left + 'px';\n    };\n    ColumnMenu.prototype.filterPosition = function (e) {\n        var filterPopup = this.getFilterPop();\n        filterPopup.classList.add(this.WRAP);\n        if (!Browser.isDevice) {\n            var disp = filterPopup.style.display;\n            filterPopup.style.cssText += 'display:block;visibility:hidden';\n            var li = this.element.querySelector('.' + this.FILTER);\n            if (li) {\n                this.setPosition(li.parentElement, filterPopup);\n                filterPopup.style.cssText += 'display:' + disp + ';visibility:visible';\n            }\n        }\n    };\n    ColumnMenu.prototype.getDefault = function () {\n        var items = [];\n        if (this.parent.ensureModuleInjected(Resize)) {\n            items.push('AutoFitAll');\n            items.push('AutoFit');\n        }\n        if (this.parent.allowGrouping && this.parent.ensureModuleInjected(Group)) {\n            items.push('Group');\n            items.push('Ungroup');\n        }\n        if (this.parent.allowSorting && this.parent.ensureModuleInjected(Sort)) {\n            items.push('SortAscending');\n            items.push('SortDescending');\n        }\n        items.push('ColumnChooser');\n        if (this.parent.allowFiltering && (this.parent.filterSettings.type !== 'FilterBar') &&\n            this.parent.ensureModuleInjected(Filter)) {\n            items.push('Filter');\n        }\n        return items;\n    };\n    ColumnMenu.prototype.isFilterPopupOpen = function () {\n        var filterPopup = this.getFilterPop();\n        return filterPopup && filterPopup.style.display !== 'none';\n    };\n    ColumnMenu.prototype.getFilterPop = function () {\n        return this.parent.element.querySelector('.' + this.POP);\n    };\n    ColumnMenu.prototype.isFilterItemAdded = function () {\n        return (this.parent.columnMenuItems &&\n            this.parent.columnMenuItems.indexOf('Filter') >= 0) || !this.parent.columnMenuItems;\n    };\n    return ColumnMenu;\n}());\nexport { ColumnMenu };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { DataManager, Query, Predicate, DataUtil } from '@syncfusion/ej2-data';\nimport { initForeignKeyColumn, getForeignKeyData, generateQuery } from '../base/constant';\nimport { getDatePredicate } from '../base/util';\nimport { Data } from './data';\n/**\n * `ForeignKey` module is used to handle foreign key column's actions.\n */\nvar ForeignKey = /** @class */ (function (_super) {\n    __extends(ForeignKey, _super);\n    function ForeignKey(parent, serviceLocator) {\n        var _this = _super.call(this, parent, serviceLocator) || this;\n        _this.parent = parent;\n        _this.serviceLocator = serviceLocator;\n        _this.initEvent();\n        return _this;\n    }\n    ForeignKey.prototype.initEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(initForeignKeyColumn, this.initForeignKeyColumns, this);\n        this.parent.on(getForeignKeyData, this.getForeignKeyData, this);\n        this.parent.on(generateQuery, this.generateQueryFormData, this);\n    };\n    ForeignKey.prototype.initForeignKeyColumns = function (columns) {\n        columns.forEach(function (column) {\n            column.dataSource = (column.dataSource instanceof DataManager ? column.dataSource :\n                (isNullOrUndefined(column.dataSource) ? new DataManager() : new DataManager(column.dataSource)));\n        });\n    };\n    ForeignKey.prototype.getForeignKeyData = function (args) {\n        var _this = this;\n        var foreignColumns = args.column ? [args.column] : this.parent.getForeignKeyColumns();\n        var allPromise = [];\n        foreignColumns.forEach(function (col) {\n            var promise;\n            var query = args.isComplex ? _this.genarateColumnQuery(col) :\n                _this.genarateQuery(col, args.result.result, false, true);\n            var dataSource = col.dataSource;\n            if (!dataSource.ready || dataSource.dataSource.offline) {\n                promise = dataSource.executeQuery(query);\n            }\n            else {\n                promise = dataSource.ready.then(function () {\n                    return dataSource.executeQuery(query);\n                });\n            }\n            allPromise.push(promise);\n        });\n        Promise.all(allPromise).then(function (responses) {\n            responses.forEach(function (data, index) {\n                foreignColumns[index].columnData = data.result;\n            });\n            args.promise.resolve(args.result);\n        }).catch(function (e) {\n            if (args.promise && args.promise.reject) {\n                args.promise.reject(e);\n            }\n            return e;\n        });\n    };\n    ForeignKey.prototype.generateQueryFormData = function (args) {\n        args.predicate.predicate = this.genarateQuery(args.column, args.column.columnData, true);\n    };\n    ForeignKey.prototype.genarateQuery = function (column, e, fromData, needQuery) {\n        var gObj = this.parent;\n        var predicates = [];\n        var predicate;\n        var query = new Query();\n        var field = fromData ? column.foreignKeyField : column.field;\n        if (gObj.allowPaging || gObj.enableVirtualization || fromData) {\n            e = new DataManager(((gObj.allowGrouping && gObj.groupSettings.columns.length) ?\n                e.records : e)).executeLocal(new Query().select(field));\n            var filteredValue = DataUtil.distinct(e, field, false);\n            field = fromData ? column.field : column.foreignKeyField;\n            filteredValue.forEach(function (obj) {\n                if (obj && obj.getDay) {\n                    predicates.push(getDatePredicate({ field: field, operator: 'equal', value: obj, matchCase: false }));\n                }\n                else {\n                    predicates.push(new Predicate(field, 'equal', obj, false));\n                }\n            });\n        }\n        if (needQuery) {\n            return predicates.length ? query.where(Predicate.or(predicates)) : query;\n        }\n        predicate = (predicates.length ? Predicate.or(predicates) : { predicates: [] });\n        return predicate;\n    };\n    ForeignKey.prototype.genarateColumnQuery = function (column) {\n        var gObj = this.parent;\n        var query = new Query();\n        var predicate = [];\n        var queryColumn = this.isFiltered(column);\n        if (queryColumn.isTrue) {\n            query = this.filterQuery(query, queryColumn.column, true);\n        }\n        if (gObj.searchSettings.key.length) {\n            var sSettings = gObj.searchSettings;\n            query.search(sSettings.key, column.foreignKeyValue, sSettings.operator, sSettings.ignoreCase);\n        }\n        return query;\n    };\n    ForeignKey.prototype.isFiltered = function (column) {\n        var filterColumn = this.parent.filterSettings.columns.filter(function (fColumn) {\n            return (fColumn.field === column.foreignKeyValue);\n        });\n        return {\n            column: filterColumn, isTrue: !!filterColumn.length\n        };\n    };\n    ForeignKey.prototype.getModuleName = function () {\n        return 'foreignKey';\n    };\n    ForeignKey.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.destroyEvent();\n    };\n    ForeignKey.prototype.destroyEvent = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(initForeignKeyColumn, this.initForeignKeyColumns);\n        this.parent.off(getForeignKeyData, this.getForeignKeyData);\n        this.parent.off(generateQuery, this.generateQueryFormData);\n    };\n    return ForeignKey;\n}(Data));\nexport { ForeignKey };\n"],"names":["doesImplementInterface","target","checkFor","prototype","valueAccessor","field","data","column","isNullOrUndefined","DataUtil","getObject","getUpdateUsingRaf","updateFunction","callBack","requestAnimationFrame","e","iterateArrayOrObject","collection","predicate","result","i","len","length","pred","push","iterateExtend","array","obj","baseExtend","getActualProperties","templateCompiler","template","document","querySelectorAll","baseTemplateComplier","querySelector","innerHTML","trim","setStyleAndAttributes","node","customAttributes","copyAttr","literals","setStyleAttribute","addClass","attributes","extend","copied","first","second","exclude","moved","Object","keys","forEach","value","index","indexOf","prepareColumns","columns","autoWidth","c","Column","headerText","foreignKeyValue","foreignKeyField","getValue","window","width","visible","setCssInGridPopUp","popUp","className","isBottomTail","popUpSpan","position","parentElement","getBoundingClientRect","targetPosition","style","display","clientY","changedTouches","offsetHeight","top","left","popup","offsetWidth","x","getPosition","right","getPopupLeftPosition","ChildProperty","parentsUntil","elem","selector","isID","parent","id","classList","contains","getElementIndex","element","elements","isEqualNode","inArray","getActualPropFromColl","coll","hasOwnProperty","properties","removeElement","slice","call","remove","clientX","y","getUid","prefix","uid","appendChildren","children","appendChild","parents","calculateAggregate","type","context","temp","customAggregate","Array","aggregates","toLowerCase","getScrollBarWidth","scrollWidth","divNode","createElement","cssText","body","clientWidth","removeChild","getRowHeight","undefined","rowHeight","table","styles","rect","Math","ceil","height","isComplexField","split","getComplexFieldID","splits","fieldName","getComplexValue","rowData","complexValue","isEditable","col","row","isOldRow","isIdentity","isPrimaryKey","allowEditing","isActionPrevent","inst","dlg","editSettings","mode","showConfirmDialog","wrap","action","add","changeButtonType","_i","elements_1","button","setFormatter","serviceLocator","fmtr","getService","getFormatFunction","skeleton","format","setParser","getParserFunction","addRemoveActiveClasses","cells","args","arguments","setAttribute","removeAttribute","distinctStringValues","res","toString","getFilterMenuPostion","dialogObj","grid","elementVisible","newpos","dlgWidth","enableRtl","calculatePosition","leftPos","calculateRelativeBasedPosition","getZIndexCalcualtion","zIndex","toogleCheckbox","span","createCboxWithWrap","div","removeAddCboxClasses","checked","removeClass","refreshForeignData","setValue","getForeignData","foreignKeyData","cell","isForeignKey","lValue","fField","key","query","Query","fdata","dataSource","DataManager","json","columnData","getDay","where","getDatePredicate","operator","matchCase","executeLocal","getColumnByForeignKeyValue","some","filterObject","datePredicate","prevDate","nextDate","prevObj","nextObj","Date","setSeconds","getSeconds","setHours","predicateSt","Predicate","predicateEnd","and","or","setProperties","ejpredicate","renderMovable","ele","frzCols","mEle","cloneNode","childElementCount","setStateAndProperties","attribute","summaryIterator","callback","ValueFormatter","cultureName","this","intl","Internationalization","culture","getDateFormat","getNumberFormat","getDateParser","getNumberParser","fromView","toView","setCulture","options","_this","allowSorting","allowResizing","allowFiltering","allowGrouping","allowReordering","showColumnMenu","enableGroupByFormat","filter","showInColumnChooser","edit","sortDirection","merge","valueFormatter","commands","textAlign","commandsTemplate","templateFn","headerTemplate","headerTemplateFn","itemTemplate","fltrTemplateFn","isForeignColumn","editType","params","fields","text","sortComparer","a_1","z","fnDescending","fnAscending","getSortDirection","setSortDirection","direction","getFormatter","formatFn","getParser","parserFn","getColumnTemplate","getHeaderTemplate","getFilterItemTemplate","getDomSetter","disableHtmlEncode","queryCellInfo","headerCellInfo","actionBegin","actionComplete","actionFailure","dataBound","rowSelecting","rowSelected","rowDeselecting","rowDeselected","cellSelecting","cellSelected","cellDeselecting","cellDeselected","columnDragStart","columnDrag","columnDrop","rowDragStart","rowDrag","rowDrop","beforePrint","printComplete","detailDataBound","batchAdd","batchCancel","batchDelete","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","recordDoubleClick","beforeDataBound","beforeOpenColumnChooser","checkBoxChange","filterChoiceRequest","filterAfterOpen","filterBeforeOpen","filterSearchBegin","initialLoad","initialEnd","dataReady","contentReady","uiUpdate","onEmpty","inBoundModelChanged","modelChanged","colGroupRefresh","headerRefreshed","pageComplete","sortComplete","filterComplete","searchComplete","reorderComplete","rowDragAndDropComplete","groupComplete","ungroupComplete","rowSelectionComplete","cellSelectionComplete","beforeCellFocused","cellFocused","keyPressed","click","destroy","columnVisibilityChanged","scroll","columnWidthChanged","columnPositionChanged","rowsAdded","rowsRemoved","columnDragStop","headerDrop","dataSourceModified","refreshComplete","refreshVirtualBlock","dblclick","toolbarRefresh","bulkSave","autoCol","tooltipDestroy","updateData","saveComplete","deleteComplete","preventBatch","dialogDestroy","crudAction","addDeleteAction","destroyForm","doubleTap","beforeExcelExport","excelExportComplete","excelQueryCellInfo","excelHeaderQueryCellInfo","beforePdfExport","pdfExportComplete","pdfQueryCellInfo","pdfHeaderQueryCellInfo","contextMenuClick","freezeRender","contextMenuOpen","columnMenuClick","columnMenuOpen","filterOpen","filterDialogCreated","filterMenuClose","initForeignKeyColumn","getForeignKeyData","generateQuery","showEmptyGrid","dataStateChange","dataSourceChanged","rtlUpdated","beforeFragAppend","frozenHeight","recordAdded","cancelBegin","editNextValCell","CellType","RenderType","ToolbarItem","CheckBoxFilter","filterSettings","existingPredicate","filterState","values","locale","cBoxTrue","createCheckBox","label","cBoxFalse","insertBefore","attrs","firstChild","closeDialog","wireEvents","EventHandler","clickHandler","searchHandler","debounce","searchBoxKeyUp","unWireEvents","searchBoxClick","sInput","refreshCheckboxes","updateSearchIcon","focus","sIcon","getLocalizedLabel","localeObj","getConstant","updateDataSource","updateModel","actualPredicate","filteredColumns","sortedColumns","sortSettings","allowCaseSensitive","isFiltered","getAndSetChkElem","sBox","hideSearchbox","title","searchBox","inputargs","floatLabelType","placeholder","Input","createInput","spinner","cBox","showDialog","requestType","events.filterBeforeOpen","filterModel","columnName","columnType","cancel","trigger","events.actionBegin","Dialog","content","close","bind","animationSettings","effect","buttons","btnClick","buttonModel","isExcel","cssClass","isPrimary","created","dialogCreated","open","dialogOpen","appendTo","maxHeight","show","createSpinner","showSpinner","getAllData","Browser","isDevice","X","Y","notify","events.filterDialogCreated","openDialog","isDestroyed","events.filterMenuClose","clearFilter","events.preventBatch","instance","handler","tagName","filterCollection","textContent","fltrBtnHandler","optr","caseSen","defaults","ignoreAccent","isNotEqual","itemsCnt","fObj","searchInput","getAttribute","arg1","arg2","arg3","arg4","arg5","arg6","initiateFilter","fColl","firstVal","j","val","clone","parsed","parseFloat","getDataModule","isRemote","predicte","events.filterSearchBegin","filterChoiceCount","take","filterEvent","processSearch","getPredicateFromCols","predicates","getPredicate","predicateList","fPredicate","foreignColumn","getForeignKeyColumns","_a","prop","events.generateQuery","requiresCount","events.filterChoiceRequest","processDataOperation","eventPromise","promise","then","dataSuccess","state","getStateEventArgument","def","Deferred","resolve","events.dataStateChange","adaptr","UrlAdaptor","dm","url","adaptor","processQuery","JSON","parse","allPromise","runArray","executeQuery","Promise","all","fullData","cols","getDistinct","filteredData","records","processDataSource","events.filterAfterOpen","events.actionComplete","isInitial","updateResult","createFilterItems","result_1","selectAll","updateAllCBoxes","updateIndeterminatenBtn","cBoxes_1","createCheckbox","cnt","selected","btn","btnObj","disabled","dataBind","cBoxes","selectAllValue","checkBox","isColFiltered","checkbox","getCheckedState","hideSpinner","lookup","foreignDataObj","events.foreignKeyData","group","sort","distinct","generatePredicate","updateDateFilter","getCaseValue","p","getModuleName","Data","dataState","isPending","resolver","initDataManager","on","events.rowsAdded","addRows","events.rowsRemoved","removeRows","events.dataSourceModified","events.destroy","events.updateData","crudActions","events.addDeleteAction","getData","gObj","dataManager","skipPage","columnQueryMode","select","getColumns","map","selectQueryFields","filterQuery","searchQuery","aggregateQuery","sortQuery","pageQuery","groupQuery","isForeign","aggregate","allowPaging","enableVirtualization","pageSettings","currentPage","max","pageCount","pageSize","page","groupSettings","getColumnByField","isGrpFmt","formatGroupColumn","sortGrp","fn","sortBy","sSettings","searchSettings","f","getModulename","search","ignoreCase","fGeneratePredicate","skipFoerign","actualFilter","colType","checkBoxCols","defaultFltrCols","_b","columns_1","excelPredicate","_c","_d","_e","defaultFltrCols_1","column_1","sType","events.showEmptyGrid","getKey","getPrimaryKeyFieldNames","crud","fromTable","changes","addedRecords","deletedRecords","changedRecords","saveChanges","insert","isArray","events.recordAdded","ready","deferred_1","catch","reject","date","getHours","getMinutes","getMilliseconds","update","previousData","events.crudAction","original","deff","endEdit","setState","events.dataSourceChanged","offline","splice","toIndex","off","getState","pvtData","dataArgs","isDataChanged","editArgs","Row","Cell","isSpanned","CellMergeRender","render","cellArgs","td","cellRenderer","getCellRenderer","cellType","cellSpan","colSpan","spanText","aria-colSpan","enableColumnVirtualization","containsKey","backupMergeCells","fName","setMergeCells","generteKey","fname","splitKey","getMergeCells","mergeCells","updateVirtualCells","rows","mCells","columnIndex","getIndexFromAllColumns","vColumnIndices","getColumnIndexesInView","rows_1","getVisibleColumns","item","RowRenderer","role","rowTemplate","refreshRow","refresh","isChanged","refreshMergeCells","tr","cells_1","rowArgs","attrCopy","chekBoxEnable","isDataRow","isSelected","getSelectedRowIndexes","isCheckBoxSelection","checkAllRows","buildAttributeFromRow","addAttributes","cellRendererFact","isExpand","DetailExpand","Filter","CommandColumn","scrollHeight","footerTemplate","summarycell","lastSummaryCell","attr","classes","isAltRow","rowSpan","class","RowModelGenerator","generateRows","startIndex","generateRow","ensureColumns","detailTemplate","childGrid","generateCell","indent","enableAltRow","refreshForeignKeyRow","concat","generateCells","tmp","dummy","rowId","oIndex","opt","isDataCell","isTemplate","rowID","refreshRows","input","__extends","extendStatics","setPrototypeOf","__proto__","d","b","__","constructor","create","SummaryModelGenerator","groupFooterTemplate","groupCaptionTemplate","columnSelector","start","end","apply","currentViewData","buildSummaryData","getGeneratedRow","level","summaryRow","raw","indents","getIndentByLevel","isDetailGridAlone","indentLength","getGeneratedCell","getCellType","Indent","sColumn","scolumn","single","setTemplate","types","helper","a","disp","Summary","GroupSummaryModelGenerator","_super","v","indx","GroupSummary","CaptionSummaryModelGenerator","reduce","prev","cur","isEmpty","CaptionSummary","GroupModelGenerator","summaryModelGen","captionModelGen","getGroupedRecords","items","GroupGuid","generateDataRows","generateCaptionRow","getCaptionRowCells","visibles","indexes","groupedLen","generateIndentCell","Expand","captionCells","cIndex_1","wFlag","tmpFlag","GroupCaption","GroupCaptionEmpty","unshift","cRow","ContentRender","freezeRows","movableRows","isLoaded","drop","events.columnDrop","droppedElement","rafCallback","arg","ariaService","setBusy","getPanel","getFrozenColumns","isFrozen","events.contentReady","events.dataBound","allowTextWrap","events.freezeRender","case","generator","getModelGenerator","events.columnVisibilityChanged","setVisible","events.colGroupRefresh","events.uiUpdate","enableAfterRender","renderPanel","innerDiv","setOptions","busy","setPanel","renderTable","contentDiv","createContentTable","setTable","getTable","multiselectable","selectionSettings","initializeContentDrop","frozenRows","getHeaderContent","cellspacing","setColGroup","getColGroup","splitRows","idx","freezeRowElements","rowElements","refreshContentRows","hdrTbody","frag","createDocumentFragment","hdrfrag","fCont","mCont","cont","modelData","registeredTemplate","destroyTemplate","tbody","getRowTemplate","isTR","nodeName","colcount","getHeaderTable","Number","overflowY","events.beforeFragAppend","borderRightWidth","appendContent","contentPanel","panel","contentTable","getRows","getMovableRows","getRowElements","getMovableRowElements","setRowElements","colgroup","colGroup","fRows","mRows","rowLen","cellLen","testRow","r","clen","getNormalizedColumnIndex","canSkip","displayVal","childNodes","mTable","getContent","replaceChild","Droppable","accept","renderEmpty","setSelection","set","clearAll","getRowByIndex","getDataRows","getVirtualRowIndex","getMovableRowByIndex","getMovableDataRows","module","enable","HeaderRender","frzIdx","sender","parentEle","visualElement","headercelldiv","getStackedHeaderColumnByHeaderText","innerText","getColumnByUid","firstElementChild","lineHeight","dragStart","events.columnDragStart","event","drag","closest","getClosest","cloneElement","events.columnDrag","dragStop","events.columnDragStop","events.headerDrop","widthService","events.columnPositionChanged","colPosRefresh","headerDiv","createHeaderTable","initializeHeaderDrag","initializeHeaderDrop","events.headerRefreshed","headerPanel","headerTable","tHead","createTable","findHeaderRow","createHeaderContent","thead","caption","bodyCell","rowBody","Header","len_1","updateColGroup","colHeader","rowRenderer","headerRow","colDepth","getObjDepth","getHeaderCells","len_2","HeaderIndent","DetailHeader","appendCells","isFirstObj","isFirstCol","isLastCol","isMovable","lastCol","getCellCnt","frzObj","refreshFrozenHdr","isPartial","isComp","frozenColumns","StackedHeader","getColSpan","getColumnIndexByUid","getColumnIndexByField","frozenCnt","frzCol","rowIndex","colIndex","mTblColGrp","refreshUI","setWidthToColumns","updateDefaultCursor","gCells","textWrapSettings","wrapMode","depth","checkDepth","indices","showDropArea","headerRows","Draggable","dragTarget","distance","abort","CellRenderer","locator","localizer","formatter","tabindex","rowChkBox","getGui","evaluate","fData","dummyData","invokeFormatter","refreshCell","refreshTD","innerHtml","displayAsCheckBox","localeStr","fromFormatter","appendHtml","persistSelection","checkWrap","setAttributes","isNaN","parseInt","property","buildAttributeFromCell","clipMode","isCheckBoxType","AriaService","name","config","setExpand","expand","setSort","isBusy","invalid","setGrabbed","isGrabbed","grabbed","setDropTarget","isTarget","dropeffect","haspopup","HeaderCellRenderer","hTxtEle","sortEle","gui","chkAllBox","fltrMenuEle","prepareHeader","clean","ariaAttr","innerDIV","e-mappinguid","checkAllWrap","matchFlColumns","count","extendPrepareHeader","gridObj","headerTextAlign","alignment","matchFilteredColumns","StackedHeaderCellRenderer","toolTip","IndentCellRenderer","GroupCaptionCellRenderer","fKeyValue","captionTemplate","GroupCaptionEmptyCellRenderer","ExpandCellRenderer","HeaderIndentCellRenderer","DetailHeaderIndentCellRenderer","DetailExpandCellRenderer","aria-expanded","Render","emptyGrid","l10n","renderer","addEventListener","headerRenderer","getRenderer","contentRenderer","Content","isLayoutRendered","emptyRow","refreshDataManager","events.cancelBegin","isFActon","isNeedForeignAction","deffered","getFData","deffered_1","events.getForeignKeyData","disablePageWiseAggregates","validateGroupRecords","dataManagerSuccess","dataManagerFailure","deferred","isComplex","foreignKey","sendBulkRequest","dmSuccess","dmFailure","renderEmptyRow","isTrigger","colspan","events.onEmpty","dynamicColumnChange","getCurrentViewRecords","updateColumnType","record","isColTypeDef","events.beforeDataBound","isEdit","events.tooltipDestroy","prevPageMoving","totalRecordsCount","updatesOnInitialRender","events.dataReady","alert","events.toolbarRefresh","events.actionFailure","error","buildColumns","events.autoCol","instantiateRenderer","addRenderer","cellrender","addCellRenderer","events.initialLoad","events.modelChanged","events.refreshComplete","events.bulkSave","group0","groupN","addWhere","curFilter","newQuery","rPredicate","updateGroupInfo","current","untouched","uGroup","itemGroup","uGroupItem","CellRendererFactory","cellRenderMap","getEnumValue","ServiceLocator","services","register","RendererFactory","rendererMap","rName","ColumnWidthService","setColumnWidth","cWidth","getWidth","setWidth","setWidthToTable","elementWidth","headerCol","header","getContentTable","fWidth","formatUnit","mHdr","contentCol","getSiblingsHeight","getHeightFromDirection","sibling","minWidth","maxWidth","getTableWidth","tWidth","setWidthToFrozenTable","freezeWidth","setWidthToMovableTable","movableWidth","FocusStrategy","currentInfo","oneTime","swap","forget","skipFocus","focusByClick","prevIndexes","focusCheck","onFocus","setActive","matrix","get","validator","passiveFocus","skipAction","onBlur","relatedTarget","removeFocus","getFocusInfo","elementToFocus","tabIndex","onClick","force","isContent","isHeader","clearOutline","beforeArgs","byKey","byClick","clickArgs","event.beforeCellFocused","onKeyPress","skipOn","keyArgs","bValue","outline","swapInfo","jump","toHeader","toFrozen","getNextCurrent","active","setActiveByKey","preventDefault","clearIndicator","activeElement","getFocusedElement","fContent","fHeader","setFocusedElement","setTimeout","addFocus","info","isFocused","event.cellFocused","isJump","container","getInfo","cellIndex","focusedColumnUid","getColumnByIndex","refreshMatrix","FixedContentFocus","ContentFocus","FixedHeaderFocus","HeaderFocus","cFocus","updateRow","generate","handlerInstance","index_1","passiveHandler","event.keyPressed","event.click","event.contentReady","event.headerRefreshed","restoreFocus","evt","event.batchAdd","event.batchCancel","event.batchDelete","event.detailDataBound","event.onEmpty","internalCellFocus","removeEventListener","getPrevIndexes","forgetPrevious","actions","home","ctrlHome","ctrlEnd","focusEle","getFocusable","Matrix","allow","min","navigator","inValid","vector","moveTo","rIndex","cIndex","keyActions","rightArrow","tab","leftArrow","shiftTab","upArrow","downArrow","shiftUp","shiftDown","shiftRight","shiftLeft","enter","shiftEnter","indexesByKey","getCurrentFromAction","isPresent","shouldFocusChange","rN","cN","oRowIndex","oCellIndex","child","isDirty","frozenSwap","enterFrozen","previous","optionals","defaultLen","isData","isSelectable","current1","current2","current3","SearchBox","searchFocus","searchBlur","wireEvent","unWireEvent","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","PageSettings","Property","__assign","assign","t","s","n","Selection","selectedRowIndexes","selectedRowCellIndexes","selectedRecords","preventFocus","isMultiShiftRequest","isMultiCtrlRequest","enableSelectMultiTouch","selectedRowState","chkAllCollec","isCheckedOnAdd","persistSelectedData","isCancelDeSelect","isPreventCellSelect","disableUI","factory","initializeSelection","mouseDownHandler","onActionBegin","fDataUpdate","rowObj","getRowObj","currentIndex","onActionComplete","gridElement","hidePopUp","clearSelection","isEditing","editModule","formObj","validate","isPersistSelection","getSelectedMovableRow","selectRow","isToggle","selectedRow","selectedMovableRow","selectData","getRowObjectFromUID","isRowType","hasAttribute","isCtrlPressed","isShiftPressed","previousRow","prevRowIndex","previousRowIndex","addMovableArgs","events.rowSelecting","clearRow","updateRowSelection","selectedRowIndex","events.rowSelected","updateRowProps","targetObj","mRow","mObj","previousMovRow","selectRowsByRange","endIndex","selectRows","getCollectionFromIndexes","rowIndexes","isSingleSel","selectedData","prevRow","rowIndexes_1","rowIdx","addRowsToSelection","rowIndexes_2","isUnSelected","rowDeselect","events.rowDeselecting","addRemoveClassesForRow","events.rowDeselected","reverse","clearRowSelection","isRowSelected","updatePersistCollection","chkState","pKey_1","primaryKey","updatePersistDelete","pKey","updateCheckBoxes","chkBox","nextElementSibling","checkedTarget","setCheckAllState","pop","clearCellSelection","currentRow","movableRow","rowDeselectObj","getSelectedMovableCell","getMovableCellFromIndex","getColIndex","selectCell","isCellType","selectedCell","getCellFromIndex","isCellSelected","isUndefined","prevCIdxs","currentCell","previousRowCellIndex","prevECIdxs","previousRowCell","getCellIndex","events.cellSelecting","clearCell","updateCellSelection","updateCellProps","selectedRowCellIndex","events.cellSelected","rIdx","cIdx","selectCellsByRange","cellIndexes","stIndex","edIndex","cellSelectionMode","getLastColIndex","addAttribute","selectCells","rowCellIndexes","addRowCellIndex","addCellsToSelection","getMovableRowsObject","cellIndexes_1","selectedCellIdx","cellDeselect","events.cellDeselecting","events.cellDeselected","m","rowCellIndex","isRowAvail","selectedCells","getSelectedCellsElement","rowCell","cLen","addMovableRows","mouseMoveHandler","gBRect","x1","y1","x2","y2","isDragged","isCellDrag","elementFromPoint","offsetLeft","ctrlKey","shiftKey","selectLikeExcel","startCellIndex","mouseUpHandler","isDrag","allowRowDragAndDrop","postion","clearSelAfterRefresh","events.initialEnd","events.rowSelectionComplete","events.cellSelectionComplete","events.inBoundModelChanged","onPropertyChanged","events.cellFocused","onCellFocused","actionBeginFunction","actionCompleteFunction","refreshHeader","addEventListener_checkbox","removeEventListener_checkbox","getCheckAllBox","checkBoxSelectionChanged","initPerisistSelection","gobj","checkboxColumn","chkField","ensureCheckboxFieldSelection","proxy_1","refreshPersistSelection","setRowSelection","checkState","editChkBox","onDataBound","checkSelectAllAction","cRenderer","editForm","checkSelectAll","stateStr","getCheckAllStatus","triggerChkChangeEvent","checkSelect","rowCellSelectionHandler","moveIntoUncheckCollection","events.checkBoxChange","updateSelectedRowIndex","selectedVal","isInteraction","checkedLen","spanEle","popUpClickHandler","chkSelect","checkboxOnly","showPopup","clear","headerAction","thLen","applyDownUpKey","applyRightLeftKey","shiftDownKey","applyShiftLeftRightKey","applyHomeEndKey","applyCtrlHomeEndKey","ctrlPlusA","applySpaceSelection","applyUpDown","isAdd","getSelectedRecords","getRowsObject","onDataBoundFunction","actionCompleteFunc","actionCompleteHandler","events.click","Search","searchString","refreshSearch","events.searchComplete","onSearchComplete","ShowHide","showBy","getToggleFields","hide","hideBy","getKeyBy","allowSelection","Scroll","lastScrollTop","previousValues","oneTimeReady","toolbarModule","toolbar","refreshOverflow","setHeight","mHdrHeight","ensureOverflow","setPadding","getThreshold","cssProps","getCssProperties","border","padding","removePadding","rtl","setScrollLeft","headerModule","getMovableHeader","scrollLeft","onContentScroll","scrollTarget","isPreventScrollEvent","isFooter","scrollTop","onFreezeContentScroll","onWheelScroll","deltaMode","deltaY","onTouchScroll","pointerType","pageXY","getPointXY","clientHeight","setPageXY","touches","pageX","pageY","getFooterContent","sLeft","sHeight","css","Print","scrollModule","isAsyncPrint","printing","print","renderPrintGrid","printWind","outerHeight","outerWidth","resizeTo","screen","availWidth","availHeight","isPrintGrid","printGridModel","printGridProp","printMode","printGrid","Grid","selectedRows","events.beforePrint","detach","removeColGroup","overflowX","waitingPop","printWindow","events.printComplete","groupCaption","colGroups","AggregateColumn","compile","getTemplate","setPropertiesSilent","AggregateRow","Collection","Clipboard","copyContent","isSelect","events.keyPressed","keyDownHandler","clipBoardTextArea","readonly","aria-label","copy","setCopyData","withHeader","getSelection","selectedIndexes","headerTextArray","getCopyData","checkBoxSelection","status","headers","colIndexes","getColumnHeaderByIndex","userAgent","match","setSelectionRange","isCell","isElement","queryCommandSupported","execCommand","blur","removeAllRanges","rowCellIndxes","getSelectedRowCellIndexes","str","stringify","SortDescriptor","SortSettings","FilterSettings","SelectionSettings","SearchSettings","RowDropSettings","TextWrapSettings","GroupSettings","EditSettings","inViewIndexes","freezeRefresh","Component","needsID","mergePersistGridData","getPersistData","keyEntity","ignoreOnPersist","currentObject","ignoreInArrays","addOnPersist","ignoreOnColumn","ignoreInColumn","requiredModules","modules","member","allowExcelExport","allowPdfExport","isDetail","toolbarTemplate","isCommandColumn","allowAdding","allowDeleting","extendRequiredModules","contextMenuItems","showColumnChooser","isForeignKeyEnabled","preRender","initProperties","initializeServices","mediaCol","isInitialLoad","filterOperators","endsWith","equal","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","notEqual","startsWith","defaultLocale","EmptyRecord","True","False","InvalidFilterMessage","GroupDropArea","UnGroup","GroupDisable","FilterbarTitle","EmptyDataSourceError","Add","Edit","Cancel","Update","Delete","Pdfexport","Excelexport","Wordexport","Csvexport","Columnchooser","Save","Item","Items","EditOperationAlert","DeleteOperationAlert","SaveButton","OKButton","CancelButton","EditFormTitle","AddFormTitle","BatchSaveConfirm","BatchSaveLostChanges","ConfirmDelete","CancelEdit","ChooseColumns","SearchColumns","Matchs","FilterButton","ClearButton","StartsWith","EndsWith","Contains","Equal","NotEqual","LessThan","LessThanOrEqual","GreaterThan","GreaterThanOrEqual","ChooseDate","EnterValue","Copy","Group","Ungroup","autoFitAll","autoFit","Export","FirstPage","LastPage","PreviousPage","NextPage","SortAscending","SortDescending","EditRecord","DeleteRecord","FilterMenu","SelectAll","Blanks","FilterTrue","FilterFalse","NoResult","ClearFilter","NumberFilter","TextFilter","DateFilter","MatchCase","Between","CustomFilter","CustomFilterPlaceHolder","CustomFilterDatePlaceHolder","AND","OR","ShowRowsWhere","keyConfigs","escape","pageUp","pageDown","ctrlAltPageUp","ctrlAltPageDown","altPageUp","altPageDown","altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","ctrlPlusP","delete","f2","ctrlEnter","space","ctrlPlusC","ctrlShiftPlusH","renderModule","getMediaColumns","searchModule","processModel","gridRender","addListener","updateStackedFilter","gcol","getShowHideService","hideAtMedia","media","matchMedia","mediaQueryUpdate","matches","showHider","refreshMediaCol","footerContent","eventInitializer","hasGridChild","unwireEvents","removeListener","destroyDependentModules","toolTipObj","keyboardModule","focusModule","newProp","oldProp","checkCursor","requireRefresh","requireGridRefresh","updateColumnObject","properties_1","rowTemplateFn","detailTemplateFn","oldProperties","extendedPropertyChange","updateRTL","ej2_instances","getToolbar","contextMenuModule","getContextMenu","columnMenuModule","getColumnMenu","events.rtlUpdated","updateResizeLines","updateGridLines","columnMenuItems","applyTextWrap","removeTextWrap","isModeChg","pending_1","gResult_1","enableHover","muteOnChange","filterModule","refreshFilter","headerRows_1","updateColumnModel","columnModel","updateFrozenColumns","isRefresh","inview","vLen","stackedHeader","individualColumn","stackedColumn","getLocaleConstants","setColumnIndexesInView","setGridHeaderContent","contentModule","setGridContentTable","setGridContent","setGridHeaderTable","footerElement","getElementsByClassName","getFooterContentTable","getPager","gridPager","setGridPager","getRowInfo","row_1","rowsObject","mrows","dRows","setCellValue","fieldIdx","mTr","pkName","movableSelectedRow","rowObjects","movableRowObjects","sRow","events.queryCellInfo","setRowData","rowObject","getColumnHeaderByField","getColumnHeaderByUid","getUidByColumnField","getColumnFieldNames","columnNames","getDetailTemplate","getSelectedRows","selectionModule","showColumns","hideColumns","getFrozenCount","getVisibleFrozenColumns","getVisibleFrozenColumnsCount","getVisibleFrozenCount","visibleFrozenColumns","goToPage","pageNo","pagerModule","updateExternalMessage","message","sortColumn","isMultiSort","sortModule","clearSorting","removeSortColumn","filterByColumn","filterOperator","filterValue","actualFilterValue","actualOperator","clearFiltering","removeFilteredColsByField","isClearFilterBar","printModule","deleteRecord","fieldname","startEdit","closeEdit","addRecord","deleteRow","clipboardModule","recalcIndentWidth","indentWidth","perPixel","events.columnWidthChanged","reorderColumns","fromFName","toFName","reorderModule","autoFitColumns","fieldNames","resizeModule","createColumnchooser","columnChooserModule","renderColumnChooser","L10n","valueFormatterService","flag","gCols","sCols","_loop_1","sLen","this_1","showGroupedColumn","parentDetails","parentKeyFieldValue","queryString","initForeignColumn","events.initForeignKeyColumn","rendererFactory","createGridPopUpElement","createTooltip","append","gridLines","Tooltip","opensOn","getTooltipStatus","htable","ctable","isEllipsisTooltip","scrollHandler","tag","myTableDiv","mySubDiv","myTable","myTr","mytd","mouseClickHandler","focusOutHandler","dblClickHandler","allowKeyboard","KeyboardEvents","keyAction","keyActionHandler","eventName","dataBoundFunction","isChildGrid","checkEdit","events.recordDoubleClick","events.dblclick","filterClear","keyPress","saveCell","events.editNextValCell","localStorage","getItem","dataObj","isProtectedOnChange","keys_1","mergeColumns","storedColumn","arr","ind","localCol","setInjectedModules","injectedModules","refreshColumns","excelExport","excelExportProperties","isMultipleExport","workbook","isBlob","excelExportModule","Map","csvExport","pdfExport","pdfExportProperties","pdfDoc","pdfExportModule","groupColumn","groupModule","ungroupColumn","isContextMenuOpen","isOpen","ensureModuleInjected","getInjectedModules","propertyNames","clearTemplate","Complex","Event","NotifyPropertyChanges","Inject","Sort","contentRefresh","isModelChanged","aria","sortedColumn","getSortedColsIndexByField","sortedCols","sCol","getSortColumnFromField","lastSortedCol","isRemove","allowMultiSorting","backupSettings","removeSortIcons","updateSortedCols","lastSortedCols","lastCols","restoreSettings","refreshSortSettings","addSortIcons","events.sortComplete","refreshSortIcons","cancelBeginEvent","colObj","initiateSort","showPopUp","allowUnsort","enableSortMultiTouch","filterElement","updateAriaAttr","NumericContainer","pagerElement","renderNumericContainer","refreshNumericLinks","updateTotalPages","links","updateLinksHtml","updateStyles","link","pagerObj","href","renderFirstNPrev","renderPrevPagerSet","renderNextPagerSet","renderNextNLast","pagerContainer","prevPager","PP","nextPager","NP","next","last","previousPageNo","currentPageSet","totalPages","customText","updateFirstNPrevStyles","updatePrevPagerSetStyles","updateNextPagerSetStyles","updateNextNLastStyles","firstPage","firstPageDisabled","prevPage","prevPageDisabled","replace","lastPage","lastPageDisabled","nextPage","nextPageDisabled","PagerMessage","pageNoMsgElem","pageCountMsgElem","hideMessage","showMessage","regx","RegExp","Pager","defaultConstants","currentPageInfo","totalItemsInfo","firstPageTooltip","lastPageTooltip","nextPageTooltip","previousPageTooltip","nextPagerTooltip","previousPagerTooltip","pagerDropDown","pagerAllDropDown","All","containerModule","pagerMessageModule","enableExternalMessage","checkpagesizes","pagerTemplate","initLocalization","renderFirstPrevDivForDevice","enablePagerMessage","renderNextLastDivForDevice","pagerdropdownModule","addAriaLabel","externalMessageModule","checkGoToPage","currentPageChanged","setDropDownValue","pageSizes","newPageNo","oldPageNo","enableQueryString","updateQueryString","getPagerTemplate","updatedUrl","getUpdatedURL","location","history","pushState","path","uri","hash","PagerDropDown","pagerDropDownDiv","dropDownDiv","defaultTextDiv","pagerCons","pageSizesModule","pageSizesArray","convertValue","defaultValue","dropDownListObject","DropDownList","change","onChange","beforeValueChange","pageSizeValue","ExternalMessage","externalMessage","Page","pagerDestroy","gridExtend","dropDownChanged","onSelect","addAriaAttr","numericContainerNew","numericContainer","numericContainerDiv","isForceCancel","previousPage","keyPressHandler","appendToElement","handlers","load","complete","updateLayout","inboundChange","events.pageComplete","FilterCellRenderer","filterBarTemplate","showClearButton","Element","templateWrite","write","FlMenuOptrUI","customFltrOperators","customFilterOperators","renderOperatorUI","dlgConetntEle","dlgObj","optrData","customOptr","operators","dropDatasource","selectedValue","dropSelectedVal","optrDiv","optrInput","dropOptr","dropDownOpen","selValue","selectedField","getFlOperator","StringFilterUI","serLocator","actObj","AutoComplete","getAutoCompleteOptions","sortOrder","openPopup","filterType","getOptrInstance","autofill","localizeText","mapObj","filteredValue","read","filterOptr","filterObj","actuiObj","hidePopup","focusOut","NumberFilterUI","numericTxtObj","NumericTextBox","BooleanFilterUI","dropInstance","drpuiObj","DateFilterUI","fltrSettings","colFormat","getDatePattern","inputElem","datePickerObj","DatePicker","FilterMenuRenderer","fltrObj","isDialogOpen","colTypes","string","number","boolean","datetime","flMuiObj","renderDlgContent","getElementById","mainDiv","dlgDiv","showCloseIcon","closeOnEscape","filterBtnClick","clearBtnClick","renderFilterUI","writeMethod","renderFlValueUI","valueDiv","instanceofFilterUI","ui","dlgContentEle","flValue","flOptrValue","targ","iconClass","flIcon","ExcelFilter","getCMenuDS","model","iconCss","separator","unwireExEvents","cmenu","createMenu","isCheckIcon","menu","ul","icon","createMenuElem","ensureTextFilter","iconName","isSubMenu","li","wireExEvents","hoverHandler","clickExHandler","menuItem","destroyCMenu","menuObj","focused","submenu","isCMenuOpen","selectedMenu","menuOptions","selectHandler","onClose","beforeClose","preventClose","ContextMenu","client","pos","contextRect","getContextBounds","innerHeight","innerWidth","getCMenuYPosition","MouseEvent","contextWidth","filterLength","renderDialogue","complexFieldName","isModal","overlayClick","removeDialog","createdDialog","removeObjects","datePicker","renderCustomFilter","dlgFields","fieldSet","displayName","checkBoxValue","colValue","fValue","fOperator","sValue","sOperator","andRadio","firstOperator","firstValue","secondOperator","secondValue","mPredicate","arg7","arg8","fpred","elementID","isFirst","fieldElement","xlfloptr","menuText","getSelectedValue","getSelectedText","renderRadioButton","radioDiv","frstpredicate","secndpredicate","renderMatchCase","RadioButton","orRadio","elementId","valueInput","renderAutoComplete","renderNumericTextBox","renderDate","matchCaseDiv","matchCaseInput","CheckBox","inputValue","isRtl","completeAction","columnvalue","mapObject","cellText","nextFlMenuOpen","Menu","Excel","fltrDlgDetails","getLocalizedCustomOperators","fltrElem","detail","updateFilterMsg","filterBarElement","currentFilterObject","getFilteredColsIndexByField","currentFilteringColumn","keyUpHandler","events.filterComplete","events.filterOpen","columnMenuFilter","filterIconClickHandler","filterCell","checkForSkipInput","filterStatusMsg","applyColumnFormat","addFilteredClass","checkAlreadyColFiltered","getFlvalue","setFormatForFlColumn","refreshFilterSettings","updateFilter","getFilterBarElement","fltrElement","isClose","filterDialogOpen","customOperators","filterHandler","localizedStrings","currentFilterColumn","closeHeaderEle","keyCode","processFilter","updateCrossIcon","getFormatFlValue","showFilterBarStatus","isSkip","skipInput","operatorSymbols","value_1","stopTimer","startTimer","timer","setInterval","onTimerTick","immediateModeDelay","clearInterval","templateRead","validateFilterValue","getOperator","substring","charAt","singleOp","multipleOp","=","!","numOptr","stringOperator","numberOperator","dateOperator","datetimeOperator","booleanOperator","gClient","fClient","bottom","datepickerEle","targetText","previousElementSibling","filterIconElement","refreshFilterIcon","resizeClassList","root","suppress","cursor","Resize","tapped","isDblClk","findColumn","resizeColumn","footerTable","headerTextClone","contentTextClone","indentWidthClone","contentText","wHeader","wContent","columnbyindex","calcTableWidth","tableWidth","offsetWidthValue","refreshHeight","setHandlerHeight","getResizeHandlers","touchStartEvent","resizeStart","callAutoFit","getTargetColumn","refreshColumnWidth","parentElementWidth","appendHelper","getPointX","minMove","removeHelper","cancelResizeAction","touchEndEvent","resizeEnd","touchMoveEvent","resizing","updateCursor","removeEvents","setHelperHeight","mousemove","colData","updateHelper","isFrozenColResized","doubleTapEvent","calcPos","floor","cls","fLeft","parentOffset","offset","doc","ownerDocument","offsetParent","documentElement","parentNode","nodeType","getUserAgent","clearTimeout","timeoutHandler","test","Reorder","events.reorderComplete","createReorderElement","chkDropPosition","srcElem","destElem","closestElement","targetParentContainerIndex","chkDropAllCols","isFound","findColParent","getColumnsModel","subCols","uId","destElemUid","destColumn","sourceUid_1","colMatchIndex_1","destUid_1","moveColumns","oldIdx","column_2","newIndex","destIndex","getColParent","srcIdx","fromIndex","flatColumns","fTh","mTh","fHeaders","fColumn","toColumn","isLeft","setDisplay","updateScrollPostion","updateArrowPosition","draggableType","cliRect","cliRectBaseLeft","cliRectBaseRight","scrollElem","cliRectBase","RowDD","events.rowDragStart","dropElem","rowDropSettings","targetID","isDragStop","getElementFromPosition","events.rowDrag","events.rowDrop","initializeDrag","events.rowDragAndDropComplete","getTargetIdx","targetRow","srcControl","targetIndex","skip","isAppliedGroup","isAppliedUnGroup","dropArea","events.groupComplete","events.ungroupComplete","grpRow","expandCollapseRows","expandAll","collapseAll","applySortFromTarget","unGroupFromTarget","toogleGroupFromHeader","showToggleButton","gHeader","trgt","cellIdx","rowNodes","isHide","expandElem","toExpand","expandCollapse","renderGroupDropArea","initDragAndDrop","refreshToggleBtn","groupElem","updateGroupDropArea","dragLabel","initializeGHeaderDrop","initializeGHeaderDrag","colName","addColToGroupDrop","groupAddSortingQuery","removeColFromGroupDrop","groupedColumn","childDiv","ej-mappingname","headerCell","showUngroupButton","getGHeaderCell","updateGroupedColumn","updateButtonVisibility","isVisible","clearGrouping","DetailRow","toogleExpandcollapse","uid_1","nextRow","isDetailRow","detailRow","detailCell","nextSibling","parentID","parentPrimaryKeys","parentKeyField","parentRowData","injectedModues","gridElem","idx_1","events.detailDataBound","detailElement","getTDfromIndex","collapse","Toolbar","predefinedItems","gridID","preItems_1","itemStr","localeName","toUpperCase","prefixIcon","tooltipText","align","ColumnChooser","suffixIcon","createToolbar","getItems","tool","clicked","toolbarClickHandler","enablePersistence","viewStr","searchElement","refreshToolbarItems","updateSearchBox","enableItems","disableItems","hasData","toolbarItems","toolbarItems_1","getItemObject","itemObject","itemName","isEnable","items_1","gID","originalEvent","tarElement","targetEle","offsetTop","searchBoxObj","FooterRenderer","gridModule","modelGenerator","movableContent","fDiv","mDiv","frozenContent","tFoot","freezeTable","renderSummaryContent","cStart","cEnd","summaries","dummies","fragment","rowrenderer","srow","frozenDiv","onScroll","refreshCol","mheaderCol","fheaderCol","onWidthChange","getColFromIndex","updateFooterTableWidth","fCol","SummaryCellRenderer","tempObj","Aggregate","initiateRender","cellFac","footerRenderer","prepareSummaryInfo","getFormatFromType","cModel","InterSectionObserver","fromWheel","touchMove","sentinelInfo","up","check","containerRect","entered","pageHeight","axis","down","observe","onEnterCallback","virtualScrollHandler","prevTop","prevLeft","debounced100","debounced50","axes","sentinel","setPageHeight","VirtualRowModelGenerator","cOffsets","cache","groups","rowModelGenerator","notifyArgs","virtualInfo","xAxis","loadNext","loadSelf","nextInfo","getBlockIndexes","loadedBlocks","checkAndResetCache","blockIndexes","isBlockAvailable","getStartIndex","median","updateGroupRow","getPage","block","columnIndexes","blk","full","even","getColumnIndexes","calWidth","iOffset","offsetVal","refreshColOffsets","gLen","currentFirst","iterateGroup","oRow","shift","VirtualContentRenderer","prevHeight","preventEvent","offsets","tmpOffsets","virtualEle","VirtualElementHandler","offsetKeys","eventListener","vgenerator","renderWrapper","renderPlaceHolder","wrapper","debounceEvent","getBlockHeight","observer","adjustTable","scrollListener","scrollArgs","viewInfo","getInfoFromView","prevInfo","tempBlocks","infoType","getPageFromTop","blocks","ensureBlocks","every","mIdx","old","isEndBlock","getTotalBlocks","newChild","cBlock","cOffset","getColumnOffset","refreshOffsets","translate","getTranslateY","setWrapperWidth","sTop","setVirtualHeight","getOffset","onDataReady","maxPage","resetScrollPosition","total","cHeight","isOnenter","endTranslate","blockHeight","maxBlock","onEntered","getBlockSize","totalBlocks","startIdx","bSize","rem","size","refreshVirtualElement","VirtualHeaderRenderer","gen","xValue","yValue","transform","VirtualScroll","ensurePageSize","blockSize","InlineEditRender","addNew","mTbody","getEditElement","renderMovableform","events.frozenHeight","updateFreezeEdit","fHdr","tdElement","refreshFreezeEdit","fCls","mTd","updateFrozenCont","form","td_1","BatchEditRender","columnObject","DialogEditRender","events.dialogDestroy","setLocaleObj","createDialog","dialog","primaryKeyValue","allowDragging","dialogClose","events.destroyForm","dataCell","EditRender","Inline","Normal","Batch","getEditElements","convertWidget","fForm","cols_1","focusElement","tArgs","isInput","BooleanEditCell","activeClasses","classNames","selectChkBox","isAddRow","editRow","DropDownEditCell","isInline","enabled","ddActionComplete","popupHeight","dlgElement","targetElement","NumericEditCell","DefaultEditCell","NormalEdit","allowEditOnDblClick","editComplete","editRowIndex","primaryKeys","primaryKeyValues","applyFormValidation","mFormObj","editedData","getCurrentEditedData","mForm","addedRowIndex","destroyElements","destroyWidgets","editHandler","edSucc","edFail","editSuccess","editFailure","updateCurrentViewData","requestSuccess","stopEditStatus","dataLen","tmpRecord","contained","mElem","editMElem","events.doubleTap","events.deleteComplete","events.saveComplete","InlineEdit","BatchEdit","cellDetails","events.beforeCellFocused","onBeforeCellFocused","setCellIdx","editCell","validateFormObj","editCellFromIndex","isAdded","removeRowObjectFromUID","ftr","events.batchCancel","refreshRowIdx","bulkDelete","bulkAddRow","batchSave","getBatchChanges","batchChanges","events.beforeBatchSave","mergeBatchChanges","i_1","addRowObject","getIndexFromData","events.beforeBatchDelete","events.batchDelete","nonMovableRows","defaultData","getDefaultData","events.beforeBatchAdd","events.batchAdd","findNextEditableCell","args1","isValOnly","validation","validationRules","checkNPCell","dValues","mRowData","colIdx","getDataByIndex","getCellIdx","isColored","updateCell","setChanges","rowcell","isForceSave","cloneEditedData","cloneComplexData","previousValue","visibleColumns","DialogEdit","DatePickerEditCell","editCellType","dropdownedit","numericedit","datepickeredit","booleanedit","defaultedit","updateEditObj","createAlertDlg","createConfirmDlg","updateColTypeObj","tapEvent","Global","alertDObj","refreshToolbar","showDeleteConfirmDialog","endEditing","editFormValidate","getCurrentEditCellData","getValueFromType","destroyToolTip","dlgWidget","dlgOk","dlgCancel","alertClick","btnOptions","executeAction","inputs","preventObj","rules","mRules","cols_2","createFormObj","FormValidator","validationComplete","customPlacement","inputElement","valErrorPlacement","getElemTable","isFHdr","inputName","gcontent","isScroll","inputClient","arrow","defaultView","getComputedStyle","getPropertyValue","showColumn","hideColumn","isDlgOpen","dlghide","initialOpenDlg","stateChangeColumns","isInitialOpen","isCustomizeOpenCC","rtlUpdate","enableAfterRenderEle","hideDialog","clearActions","refreshCheckboxState","columnChooserSearch","removeCancelIcon","addcancelIcon","events.beforeOpenColumnChooser","refreshPosition","mOpenDlg","openColumnChooser","renderChooserList","beforeOpen","customDialogOpen","customDialogClose","columnChooserManualSearch","confirmDlgBtnClick","searchDiv","ccsearchele","ccsearchicon","conDiv","innerDivContent","refreshCheckboxList","columnStateChange","dialogInstance","stateColumns","colUid","currentCol","checkstatecolumn","isChecked","coluid","searchVal","fltrCol","clearSearch","nMatchele","checkBoxClickHandler","checkstate","columnUid","refreshCheckboxButton","searchValue","gdCol","ulElement","renderCheckbox","columnUID","cbox","cclist","hideColState","showColState","cccheckboxlist","proxy","interval","ExportHelper","hideColumnInclude","getQuery","getColumnData","columnPromise","fColumns","getHeaders","isHideColumnInclude","measureColumnDepth","actualColumns","processColumns","processHeaderCells","removeCellFromRow","generateActualColumns","getConvertedWidth","getCellCount","resultCells","appendGridCells","gridRows","isFirstColumn","isLastColumn","isIgnoreFirstCell","gridColumn","option","ExportValueFormatter","internationalization","returnFormattedValue","customFormat","formatCellValue","ExcelExport","book","workSheet","rowLength","expType","includeHiddenColumn","isCsvExport","isElementIdChanged","init","toISOString","isExporting","footer","exportValueFormatter","exportProperties","isCsv","gridObject","events.beforeExcelExport","processRecords","processInnerRecords","blankRows","multipleExport","worksheets","processExcelHeader","groupIndent","childLevels","processHeaderContent","exportType","processRecordContent","events.excelExportComplete","blobPromise","returnType","currentViewRecords","processRecordRows","processGroupedRows","processAggregates","processExcelFooter","sheet","Workbook","saveAsBlob","fileName","save","dataSource_1","getCaptionThemeStyle","theme","groupCaptionSummaryRows","fillAggregates","lIndex","hIndex","tCell","sCell","rLen","excelCellArgs","events.excelQueryCellInfo","styleIndex","getColumnStyle","mergeOptions","rec","byGroup","summaryModel","groupSummaryRows","sRows","customIndex","cells_2","eCell","Sum","Average","Max","Min","Count","TrueCount","FalseCount","Custom","getAggreateValue","hAlign","wholeText","JSON1","JSON2","attrname","returnValue","gridColumns","spannedCells","currentCellIndex","gridCell","getIndex","spannedCell","getHeaderThemeStyle","excelHeaderCellArgs","setStyle","events.excelHeaderQueryCellInfo","parseStyles","getRecordThemeStyle","fontSize","borders","color","updateThemeStyle","themestyle","fontColor","fontName","lineStyle","bold","backColor","noRows","updatedCellIndex","cellsLength","cellId","jsonCell","footerRows","spannedCells_1","numberFormat","PdfExport","customDataSource","isGrouping","pdfDocument","events.beforePdfExport","PdfDocument","processExport","events.pdfExportComplete","gridTheme","section","sections","processExportProperties","pdfPage","pages","pdfGrid","PdfGrid","headerThemeStyle","headerFont","font","headerBrush","brush","processGridHeaders","setColumnProperties","captionThemeStyle","getSummaryCaptionThemeStyle","processGroupedRecords","backgroundBrush","processRecord","addRow","setBorder","draw","PdfStandardFont","PdfFontFamily","Helvetica","PdfSolidBrush","PdfColor","pdfColor","penBrushColor","hexToRgb","g","PdfBorders","PdfPen","borderColor","groupIndex","dataSourceItems","getCell","stringFormat","PdfStringFormat","PdfTextAlignment","Left","setFont","setTextBrush","setBackgroundBrush","captionSummaryModel","columnSpan","columnCount","getColumn","gridHeader","getHeader","events.pdfHeaderQueryCellInfo","getHorizontalAlignment","getVerticalAlignment","k","allowHorizontalOverflow","pageOrientation","pdfPageSettings","PdfPageSettings","orientation","PdfPageOrientation","Landscape","Portrait","getPageSize","setPageSettings","clientSize","PointF","fromTop","SizeF","bounds","RectangleF","drawPageTemplate","PdfPageTemplateElement","fromBottom","contents","processContentValidation","Error","drawText","drawPageNumber","src","drawImage","drawLine","points","pageTemplate","getFont","getBrushFromContent","pen","textPenColor","penColor","setContentFormat","graphics","drawString","documentHeader","textBrushColor","brushColor","pageNumber","PdfPageNumberField","numberStyle","getPageNumberStyle","pageNumberType","compositeField","PdfCompositeField","PdfPageCountField","image","PdfBitmap","getPenFromContent","penSize","dashStyle","getDashStyle","isCaption","captionRow","sRows_1","leastCaptionSummaryIndex","getSummaryWithoutTemplate","getTemplateFunction","templateFunction","txt","gridRow","setRecordThemeStyle","events.pdfQueryCellInfo","processCellStyle","backgroundColor","textAlignment","verticalAlignment","textBrush","textPen","fontFamily","italic","underline","strikeout","borderWidth","paragraphIndent","Right","Center","Justify","verticalAlign","lineAlignment","PdfVerticalAlignment","Bottom","Middle","Top","getFontFamily","fontStyle","PdfFontStyle","Regular","Bold","Italic","Underline","Strikeout","vAlign","hex","bigint","CommandColumnRenderer","buttonElement","unbounDiv","command","renderButton","buttonOption","onclick","buttonObj","Button","commandType","commandClickHandler","menuClass","batchEdit","editIcon","pager","pdf","ungroup","csv","excel","fPage","nPage","lPage","pPage","ascending","descending","groupHeader","touchPop","defaultItems","hiddenItems","localeText","setLocaleKey","enableAfterRenderMenu","code","which","contextMenu","getMenuItems","contextMenuItemClick","contextMenuBeforeOpen","onOpen","contextMenuOnClose","menuItems","exportItems","getDefaultItems","toLocaleLowerCase","buildDefaultItems","exportGroup","getLastPage","totalpage","getKeyFromId","targetColumn","events.contextMenuClick","updateItemStatus","getLocaleText","showItems","closestGrid","dItem","ensureDisabledStatus","ensureTarget","parentItem","hideItems","eventArgs","events.contextMenuOpen","ensureFrozenHeader","substr","generateID","AutoFitAll","AutoFit","CsvExport","export","PrevPage","FreezeRowModelGenerator","isFrzLoad","FreezeContentRender","setFrozenContent","setMovableContent","getMovableContent","getFrozenContent","mTbl","FreezeRender","refreshFreeze","setFrozenHeight","rfshMovable","updateColgroup","setFrozenHeader","setMovableHeader","getFrozenHeader","refreshStackedHdrHgt","addMovableFirstCls","movablefirstcell","filterRow","hdrClassList","setWrapHeight","updateResizeHandler","isContReset","isStackedHdr","fRowHgt","mRowHgt","isWrap","tBody","movableContentHeight","fRowSpan","mRowSpan","fTr","getRowSpan","updateStackedHdrRowHgt","rSpan","minRowSpan","maxRowSpan","frozenHeader","movableHeader","Freeze","ColumnMenu","GROUP","UNGROUP","ASCENDING","DESCENDING","ROOT","FILTER","POP","WRAP","CHOOSER","getColumnMenuHandlers","columnMenuHandlerDown","columnMenu","unwireFilterEvents","columnMenuHandlerClick","getHeaderCell","openColumnMenu","elePos","isFilterItemAdded","filterPosition","columnMenuItemClick","columnMenuBeforeOpen","columnMenuOnClose","beforeItemRender","beforeMenuItemRender","columnMenuBeforeClose","wireFilterEvents","appendFilter","isChooserItem","colChooser","currentTarget","events.columnMenuOpen","getFilter","events.columnMenuClick","isFilterPopupOpen","defultItems_1","getDefault","getDefaultItem","createChooserItems","filterPopup","getFilterPop","setPosition","gridPos","liPos","ForeignKey","initEvent","initForeignKeyColumns","generateQueryFormData","foreignColumns","genarateColumnQuery","genarateQuery","responses","fromData","needQuery","queryColumn","isTrue","filterColumn","destroyEvent"],"mappings":"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"}